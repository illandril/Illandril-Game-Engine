<!DOCTYPE html>
<html>
 <head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
  <title>Engine Test</title>
  <link rel="stylesheet" type="text/css" href="../bin/engine.css">
  <script type="text/javascript" src="../bin/engine.js"></script>
<!--
-->
<!--
  <script type="text/javascript" src="../closure-library/closure/goog/base.js"></script>
  <script type="text/javascript" src="../src/engine.js"></script>
-->
 </head>
 <body>
  <div id="game" style="text-align: center;"></div>
  <script type="text/javascript">
/*
illandril.game.Engine.map = [
 { x: 0, y: 0, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: -100 },
 { x: 10, y: 10, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 1 },
 { x: 20, y: 20, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 2 },
 { x: 30, y: 30, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 3 },
 { x: 40, y: 40, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 4 },
 { x: 50, y: 50, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 5 },
 { x: 60, y: 60, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 4 },
 { x: 70, y: 70, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 3 },
 { x: 80, y: 80, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 2 },
 { x: 90, y: 90, width: 150, height: 150, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zndex: 1 }
];
*/

illandril.game.Engine.map = [
 { x:   0, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  10, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  20, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  40, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  50, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  70, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  80, width: 10, height: 10, zIndex: 0 },
 { x:   0, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 100, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 110, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 130, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 140, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 160, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 170, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 180, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 190, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 200, width: 10, height: 10, zIndex: 0 },
 { x:   0, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  10, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  10, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  20, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  20, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:  40, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:  50, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  30, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 160, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 170, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 180, width: 10, height: 10, zIndex: 0 },
 { x:  30, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  40, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  40, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  40, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  40, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  40, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  40, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  50, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  50, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  50, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  50, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  50, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  50, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  60, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  60, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:  60, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  60, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  60, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  60, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  60, y: 180, width: 10, height: 10, zIndex: 0 },
 { x:  60, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  70, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  70, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:  70, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  70, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  70, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  70, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  80, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  80, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:  80, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  80, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  80, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  80, y: 210, width: 10, height: 10, zIndex: 0 },
 { x:  90, y:   0, width: 10, height: 10, zIndex: 0 },
 { x:  90, y:  30, width: 10, height: 10, zIndex: 0 },
 { x:  90, y:  60, width: 10, height: 10, zIndex: 0 },
 { x:  90, y:  90, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 100, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 110, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 120, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 150, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 160, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 170, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 180, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 190, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 200, width: 10, height: 10, zIndex: 0 },
 { x:  90, y: 210, width: 10, height: 10, zIndex: 0 },
];

illandril.game.Engine.map = [];
mox = 0;
moy = 0;
sz = 10;
for( var mx = 0; mx <= 100; mx++ ) {
 for ( var my = 0; my <= 100; my++ ) {
  if ( mx % 4 == 0 && my % 4 == 0
        || mx == 0 || my == 0
        || mx == 100 || my == 100
        || mx % 8 == 0 && (
              my % 3 == 0
           || my % 3 == 0
              )
        || mx % 8 == 4 && (
              my % 2 == 0
           || my % 2 == 0
              )
        || my % 8 == 0 && (
              mx % 3 == 0
           || mx % 4 == 0
           || mx % 5 == 0
              )
        || my % 4 == 0 && (
              mx % 7 == 0
           || mx % 8 == 0
           || mx % 9 == 0
              )
      ) {
  illandril.game.Engine.map[illandril.game.Engine.map.length] = { x: mx * sz + mox, y: my * sz + moy, width: sz, height: sz, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 0 };
  }
 }
}

for( var testx = 0; testx < 100 && false; testx++ ) {
 for( var testy = -50; testy < 50; testy++ ) {
  //illandril.game.Engine.map[illandril.game.Engine.map.length] = { x: testx * 200 + 300, y: testy * 200, width: 5, height: 5 };
  if ( Math.random() > 0.95 ) {
    illandril.game.Engine.map[illandril.game.Engine.map.length] = { x: testx * 5 + 300, y: testy * 5, width: 5, height: 5, bg: "http://farm4.static.flickr.com/3521/3770406326_3bd7b77892_z.jpg", zIndex: 50 };
  }
 }
}
illandril.game.Engine.map = [];

illandril.game.Engine.mc = 1000;
var start = new Date();
illandril.game.Engine.init("game");
for ( var x = 0; x < 100; x++ ) {
 world.update(100);
}
var end = new Date();
document.write( ( end - start ) + "ms to initialize world with " + world.objects.getAllObjects().length + " objects; " + illandril.game.Engine.mc + " of them mobile (plus one random destruction/construction, and one player)" );
</script>
<div id="debug">
FPS: <span id="fps"></span>
<br>
Objects: <span id="objcount"></span>
<br>
Solid: <span id="solidcount"></span>
<br>
Thinkers: <span id="thinkcount"></span>
</div>
<div id="collectableCount"></div>
<div id="deathCount"></div>
<input onclick="move=!move; return false;" type="submit" value="move/stop mobiles">
<input onclick="doRandom=!doRandom; return false;" type="submit" value="enable/disable random">
<input onclick="stop=!stop; return false;" type="submit" value="enable/disable everything">
 </body>
</html>
