(function(){var k=void 0,o=null;function q(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var v,x=this;function ca(a,c){var b=a.split("."),d=x;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==k?d[e]=c:d=d[e]?d[e]:d[e]={}}function da(){}
function ea(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var fa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ga=0;function z(a,c){function b(){}b.prototype=c.prototype;a.wh=c.prototype;a.prototype=new b;a.prototype.constructor=a};function ha(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),g=Math.max(d.length,e.length),f=0;b==0&&f<g;f++){var h=d[f]||"",i=e[f]||"",j=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(h)||["","",""],n=l.exec(i)||["","",""];if(m[0].length==0&&n[0].length==0)break;b=ia(m[1].length==0?0:parseInt(m[1],10),n[1].length==0?0:parseInt(n[1],10))||ia(m[2].length==0,n[2].length==0)||ia(m[2],n[2])}while(b==
0)}return b}function ia(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ja,ka,la,ma;function na(){return x.navigator?x.navigator.userAgent:o}ma=la=ka=ja=!1;var oa;if(oa=na()){var pa=x.navigator;ja=oa.indexOf("Opera")==0;ka=!ja&&oa.indexOf("MSIE")!=-1;la=!ja&&oa.indexOf("WebKit")!=-1;ma=!ja&&!la&&pa.product=="Gecko"}var qa=ka,ra=ma,sa=la,ta=x.navigator,ua=(ta&&ta.platform||"").indexOf("Mac")!=-1,va;
a:{var wa="",xa;if(ja&&x.opera)var ya=x.opera.version,wa=typeof ya=="function"?ya():ya;else if(ra?xa=/rv\:([^\);]+)(\)|;)/:qa?xa=/MSIE\s+([^\);]+)(\)|;)/:sa&&(xa=/WebKit\/(\S+)/),xa)var za=xa.exec(na()),wa=za?za[1]:"";if(qa){var Aa,Ba=x.document;Aa=Ba?Ba.documentMode:k;if(Aa>parseFloat(wa)){va=String(Aa);break a}}va=wa}var Ca={},Da={};var Ea,Fa={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var Ga=Array.prototype,Ha=Ga.indexOf?function(a,c,b){return Ga.indexOf.call(a,c,b)}:function(a,c,b){b=b==o?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Ia(a,c){var b=Ha(a,c);b>=0&&Ga.splice.call(a,b,1)};qa&&(Da[9]||(Da[9]=qa&&document.documentMode&&document.documentMode>=9));qa&&(Ca["8"]||(Ca["8"]=ha(va,"8")>=0));function Ja(){}Ja.prototype.Vg=!1;Ja.prototype.Dd=function(){if(!this.Vg)this.Vg=!0,this.Ed()};Ja.prototype.Ed=function(){this.ni&&Ka.apply(o,this.ni)};function Ka(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=ea(d);e=="array"||e=="object"&&typeof d.length=="number"?Ka.apply(o,d):d&&typeof d.Dd=="function"&&d.Dd()}};function La(a,c){this.type=a;this.currentTarget=this.target=c}z(La,Ja);La.prototype.Ed=function(){delete this.type;delete this.target;delete this.currentTarget};La.prototype.rg=!1;La.prototype.mj=!0;function Ma(a){Ma[" "](a);return a}Ma[" "]=da;function Na(a,c){a&&this.Xb(a,c)}z(Na,La);v=Na.prototype;v.target=o;v.relatedTarget=o;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=!1;v.altKey=!1;v.shiftKey=!1;v.metaKey=!1;v.ij=!1;v.Wg=o;
v.Xb=function(a,c){var b=this.type=a.type;La.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(ra){var e;a:{try{Ma(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=o)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ij=ua?a.metaKey:a.ctrlKey;this.state=a.state;this.Wg=a;delete this.mj;delete this.rg};v.Ed=function(){Na.wh.Ed.call(this);this.relatedTarget=this.currentTarget=this.target=this.Wg=o};function Oa(){}var Pa=0;v=Oa.prototype;v.key=0;v.Wd=!1;v.Og=!1;v.Xb=function(a,c,b,d,e,g){if(ea(a)=="function")this.$g=!0;else if(a&&a.handleEvent&&ea(a.handleEvent)=="function")this.$g=!1;else throw Error("Invalid listener argument");this.we=a;this.vh=c;this.src=b;this.type=d;this.capture=!!e;this.Yg=g;this.Og=!1;this.key=++Pa;this.Wd=!1};v.handleEvent=function(a){return this.$g?this.we.call(this.Yg||this.src,a):this.we.handleEvent.call(this.we,a)};var Qa,Ra=(Qa="ScriptEngine"in x&&x.ScriptEngine()=="JScript")?x.ScriptEngineMajorVersion()+"."+x.ScriptEngineMinorVersion()+"."+x.ScriptEngineBuildVersion():"0";function Sa(a,c){this.nh=c;this.jd=[];if(a>this.nh)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.jd.push(this.Ib())}z(Sa,Ja);v=Sa.prototype;v.fd=o;v.Ug=o;v.getObject=function(){return this.jd.length?this.jd.pop():this.Ib()};function Ta(a,c){a.jd.length<a.nh?a.jd.push(c):Ua(a,c)}v.Ib=function(){return this.fd?this.fd():{}};
function Ua(a,c){if(a.Ug)a.Ug(c);else{var b=ea(c);if(b=="object"||b=="array"||b=="function")if(ea(c.Dd)=="function")c.Dd();else for(var d in c)delete c[d]}}v.Ed=function(){Sa.wh.Ed.call(this);for(var a=this.jd;a.length;)Ua(this,a.pop());delete this.jd};var Va,Wa,Xa,Ya,Za,$a,ab,bb,cb,db,eb;
(function(){function a(){return{Kc:0,Vd:0}}function c(){return[]}function b(){function a(b){b=f.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Oa}function e(){return new Na}var g=Qa&&!(ha(Ra,"5.7")>=0),f;$a=function(a){f=a};if(g){Va=function(){return h.getObject()};Wa=function(a){Ta(h,a)};Xa=function(){return i.getObject()};Ya=function(a){Ta(i,a)};Za=function(){return j.getObject()};ab=function(){Ta(j,b())};bb=function(){return l.getObject()};cb=function(a){Ta(l,a)};db=function(){return m.getObject()};
eb=function(a){Ta(m,a)};var h=new Sa(0,600);h.fd=a;var i=new Sa(0,600);i.fd=c;var j=new Sa(0,600);j.fd=b;var l=new Sa(0,600);l.fd=d;var m=new Sa(0,600);m.fd=e}else Va=a,Wa=da,Xa=c,Ya=da,Za=b,ab=da,bb=d,cb=da,db=e,eb=da})();var fb={},A={},gb={},hb={};
function ib(a,c,b,d,e){if(c)if(ea(c)=="array")for(var g=0;g<c.length;g++)ib(a,c[g],b,d,e);else{var d=!!d,f=A;c in f||(f[c]=Va());f=f[c];d in f||(f[d]=Va(),f.Kc++);var f=f[d],h=a[fa]||(a[fa]=++ga),i;f.Vd++;if(f[h]){i=f[h];for(g=0;g<i.length;g++)if(f=i[g],f.we==b&&f.Yg==e){if(f.Wd)break;return}}else i=f[h]=Xa(),f.Kc++;g=Za();g.src=a;f=bb();f.Xb(b,g,a,c,d,e);b=f.key;g.key=b;i.push(f);fb[b]=f;gb[h]||(gb[h]=Xa());gb[h].push(f);a.addEventListener?(a==x||!a.mi)&&a.addEventListener(c,g,d):a.attachEvent(c in
hb?hb[c]:hb[c]="on"+c,g)}else throw Error("Invalid event type");}function jb(a,c,b,d){if(!d.bf&&d.qh){for(var e=0,g=0;e<d.length;e++)if(d[e].Wd){var f=d[e].vh;f.src=o;ab(f);cb(d[e])}else e!=g&&(d[g]=d[e]),g++;d.length=g;d.qh=!1;g==0&&(Ya(d),delete A[a][c][b],A[a][c].Kc--,A[a][c].Kc==0&&(Wa(A[a][c]),delete A[a][c],A[a].Kc--),A[a].Kc==0&&(Wa(A[a]),delete A[a]))}}
function kb(a,c,b,d,e){var g=1,c=c[fa]||(c[fa]=++ga);if(a[c]){a.Vd--;a=a[c];a.bf?a.bf++:a.bf=1;try{for(var f=a.length,h=0;h<f;h++){var i=a[h];i&&!i.Wd&&(g&=lb(i,e)!==!1)}}finally{a.bf--,jb(b,d,c,a)}}return Boolean(g)}
function lb(a,c){var b=a.handleEvent(c);if(a.Og){var d=a.key;if(fb[d]){var e=fb[d];if(!e.Wd){var g=e.src,f=e.type,h=e.vh,i=e.capture;g.removeEventListener?(g==x||!g.mi)&&g.removeEventListener(f,h,i):g.detachEvent&&g.detachEvent(f in hb?hb[f]:hb[f]="on"+f,h);g=g[fa]||(g[fa]=++ga);h=A[f][i][g];if(gb[g]){var j=gb[g];Ia(j,e);j.length==0&&delete gb[g]}e.Wd=!0;h.qh=!0;jb(f,i,g,h);delete fb[d]}}}return b}
$a(function(a,c){if(!fb[a])return!0;var b=fb[a],d=b.type,e=A;if(!(d in e))return!0;var e=e[d],g,f;Ea===k&&(Ea=qa&&!x.addEventListener);if(Ea){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=x;g=h.shift();)if(i[g]!=o)i=i[g];else{h=o;break a}h=i}g=h;h=!0 in e;i=!1 in e;if(h){if(g.keyCode<0||g.returnValue!=k)return!0;a:{var j=!1;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(l){j=!0}if(j||g.returnValue==k)g.returnValue=!0}}j=db();j.Xb(g,this);g=!0;try{if(h){for(var m=Xa(),n=j.currentTarget;n;n=
n.parentNode)m.push(n);f=e[!0];f.Vd=f.Kc;for(var p=m.length-1;!j.rg&&p>=0&&f.Vd;p--)j.currentTarget=m[p],g&=kb(f,m[p],d,!0,j);if(i){f=e[!1];f.Vd=f.Kc;for(p=0;!j.rg&&p<m.length&&f.Vd;p++)j.currentTarget=m[p],g&=kb(f,m[p],d,!1,j)}}else g=lb(b,j)}finally{if(m)m.length=0,Ya(m);j.Dd();eb(j)}return g}d=new Na(c,this);try{g=lb(b,d)}finally{d.Dd()}return g});var mb={61:187,59:186};qa||sa&&(Ca["525"]||(Ca["525"]=ha(va,"525")>=0));function nb(a){this.id=ob++;this.name=a;this.controls={};this.vg={};this.Qg=[];this.pf=this.Re=o}function pb(a,c){var b=0,d=qb==rb&&sb==tb&&ub==vb,e;for(e in wb){var g=d&&wb[e].Dh;b++;var f=xb(e,qb,sb,ub);a.Re==o&&a.controls[f]!=o&&(!g||a.controls[f].pi)&&a.controls[f].execute(c)}if(b==1&&a.Re!=o)a.pf!=o&&clearTimeout(a.pf),a.pf=setTimeout(function(){B(a,a.Re,f);a.Re=o;a.pf=o},100)}
function B(a,c,b,d,e,g){var f=b;typeof b=="number"&&(f=xb(b,d,e,g));b=[];d=a.controls[f];e=a.vg[c.name];if(d!=o)if(e!=o)a.controls[e]=d,a.vg[d.name]=e,b.push(new yb(e,d));else throw"The specified key is already in use for a different function.";else e!=o&&delete a.controls[e];a.controls[f]=c;a.vg[c.name]=f;b.push(new yb(f,c));for(c=0;c<a.Qg.length;c++)f=a.Qg[c],f.Dj.apply(f.we,b||[],zb(a))}function zb(a){var c=[],b;for(b in a.controls)c.push(new yb(b,a.controls[b]));return c}
var ob=0,wb={},qb=!1,rb={},sb=!1,tb={},ub=!1,vb={};function Ab(a){var c=a.wj,c=ra&&a.keyCode in mb?mb[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function xb(a,c,b,d){var e=Fa[a];e==o&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}ib(document,"keydown",function(a){a=Ab(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&wb[a.keyCode]==o&&(wb[a.keyCode]={Dh:!1});qb=a.ctrlKey;sb=a.altKey;ub=a.shiftKey});
ib(document,"keyup",function(a){a=Ab(a);delete wb[a.keyCode];qb=a.ctrlKey;sb=a.altKey;ub=a.shiftKey});ib(document,"blur",function(){wb={};vb=ub=tb=sb=rb=qb=!1});function yb(a,c){this.key=this.key=a;this.action=this.action=c};function D(a,c){this.x=a;this.y=c}v=D.prototype;v.K=function(){this.y=this.x=0};v.j=function(a,c){this.x=a;this.y=c};v.m=function(a){this.x=a.x;this.y=a.y};v.bd=function(){return new D(-this.x,-this.y)};v.Dg=function(){this.x=-this.x;this.y=-this.y};v.ja=function(){return new D(this.x,this.y)};v.Nb=function(a){this.x+=a.x;this.y+=a.y};v.If=function(a){this.x-=a.x;this.y-=a.y};v.Hc=function(a){this.x*=a;this.y*=a};function Bb(a){return Math.sqrt(Cb(a))}function Cb(a){return a.x*a.x+a.y*a.y}
function E(a){var c=Bb(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Db={},Eb=0;function Fb(){Eb--}function Gb(a){if(a.wg===k||a.wg===o)a.wg={};return a.wg};function Hb(){this.lf=this.ag=this.Id=this.Si=this.Ld=1;var a=this;this.Xi={ti:{clear:function(){a.qc.clearRect(0,0,a.qc.canvas.width,a.qc.canvas.height)}}};this.gh=0}var Ib,Jb,Kb,Lb,Mb,Nb;
(function(a){a.prototype.Ic=function(a,b){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+b+")"};a.prototype.Th=function(){var a=Ob;a===k&&(a=0);this.gh=a};a.prototype.Vh=function(a){this.qc=a};a.prototype.Rh=function(a){a===k&&(a=0);this.Ld=a};a.prototype.Uh=function(){var a=1;a===k&&(a=0);this.Si=a;this.qc.Mj=a};a.prototype.Sh=function(){var a=0.3;a===k&&(a=0);this.ag=a};a.prototype.Hh=function(a,b){var d=this.qc,e=this.Ld;d.beginPath();d.strokeStyle=this.Ic(Pb(b),this.Id);d.moveTo(a[0].x*
e,a[0].y*e);for(var g=1;g<4;g++)d.lineTo(a[g].x*e,a[g].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.Jh=function(a,b,d){if(b){var e=this.qc,g=this.Ld;e.beginPath();e.strokeStyle=this.Ic(Pb(d),this.Id);e.fillStyle=this.Ic(Pb(d),this.ag);e.moveTo(a[0].x*g,a[0].y*g);for(d=1;d<b;d++)e.lineTo(a[d].x*g,a[d].y*g);e.lineTo(a[0].x*g,a[0].y*g);e.closePath();e.fill();e.stroke()}};a.prototype.Ih=function(a,b,d,e){if(b){var g=this.qc,f=this.Ld,h=a.x*f,i=a.y*f;g.moveTo(0,0);g.beginPath();
g.strokeStyle=this.Ic(Pb(e),this.Id);g.fillStyle=this.Ic(Pb(e),this.ag);g.arc(h,i,b*f,0,Math.PI*2,!0);g.moveTo(h,i);g.lineTo((a.x+d.x*b)*f,(a.y+d.y*b)*f);g.closePath();g.fill();g.stroke()}};a.prototype.Gc=function(a,b,d){var e=this.qc,g=this.Ld;e.strokeStyle=this.Ic(Pb(d),this.Id);e.beginPath();e.moveTo(a.x*g,a.y*g);e.lineTo(b.x*g,b.y*g);e.closePath();e.stroke()};a.prototype.Kh=function(){var a=Qb,b=this.qc,d=this.Ld;b.beginPath();b.strokeStyle=this.Ic(16711680,this.Id);b.moveTo(a.position.x*d,a.position.y*
d);b.lineTo((a.position.x+this.lf*a.d.a.x)*d,(a.position.y+this.lf*a.d.a.y)*d);b.strokeStyle=this.Ic(65280,this.Id);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.lf*a.d.b.x)*d,(a.position.y+this.lf*a.d.b.y)*d);b.closePath();b.stroke()};Ib=1;Jb=2;Kb=4;Lb=8;Mb=16;Nb=32})(Hb);function Rb(a,c,b,d){if(Db[a]==o)Eb++,Db[a]=new Image,Db[a].onload=Fb,Db[a].src=a;this.url=a;this.rh=c||new D(0,0);this.rf=b||new D(1,1);this.zh=d||new D(1,1);this.qb=new D(1,1)};function Sb(){this.lowerBound=new D(0,0);this.upperBound=new D(0,0)}function Tb(a){return new D((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}function Ub(a,c){var b;return b=(b=(b=(b=a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}
Sb.prototype.Cd=function(a){return a.lowerBound.x-this.upperBound.x>0?!1:a.lowerBound.y-this.upperBound.y>0?!1:this.lowerBound.x-a.upperBound.x>0?!1:this.lowerBound.y-a.upperBound.y>0?!1:!0};function Vb(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function Wb(a,c,b,d,e){this.nc={};this.ua=a;this.Db=d;this.Cc=new D(d.x/b,d.y/b);this.scale=b;this.ya=new D(0,0);this.$e=new D(-1,-1);this.xf=new Sb;this.xf.upperBound=this.Cc.ja();this.xf.upperBound.Hc(1.25);Xb(this,new D(0,0));a=document.getElementById(c);this.gd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.Db.x+"px; height: "+this.Db.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.Db.x/2+"px; height: "+this.Db.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.gd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.gd.className="viewportContainer";this.gd.style.width=this.Db.x+"px";this.gd.style.height=this.Db.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.gd.appendChild(this.display);a.appendChild(this.gd);this.Xf=document.createElement("div");this.Xf=Yb(this,"Loading, please wait.");Zb(this.Xf);this.sh=Yb(this,
"Paused");e?(this.fb=document.getElementById(c+"__DEBUG"),this.fb.width=this.ua.p.ab.x*b,this.fb.height=this.ua.p.ab.y*b,this.fb.style.marginRight="-"+this.fb.width+"px",this.fb.style.marginBottom="-"+this.fb.height+"px",c=new Hb,c.Vh(this.fb.getContext("2d")),c.Rh(b),c.Sh(),c.Uh(),c.Th(),this.ua.p.pa.Oa=c):this.fb=o}
function Yb(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+$b;b.innerHTML=c;b.style.width=a.Db.x+"px";b.style.height=a.Db.y+"px";a.gd.appendChild(b);return b}function Zb(a){if(a.style.display=="none")a.style.display="table-cell"}
function ac(a){if(a.style.display!="none")a.style.display="none"}function Xb(a,c){a.ya.x=c.x;a.ya.y=c.y;if(a.ya.x<a.Cc.x/2)a.ya.x=a.Cc.x/2;else if(a.ya.x>a.ua.p.ab.x-a.Cc.x/2)a.ya.x=a.ua.p.ab.x-a.Cc.x/2;if(a.ya.y<a.Cc.y/2)a.ya.y=a.Cc.y/2;else if(a.ya.y>a.ua.p.ab.y-a.Cc.y/2)a.ya.y=a.ua.p.ab.y-a.Cc.y/2}
function bc(a,c){if(a.display==o)a.display={},a.display.L=new Sb,a.si=function(a){var c=this.body?this.body.e.position:this.position.ja();return this.display.mf==0?c:new D(c.x+(a.x-c.x)*this.display.mf,c.y+(a.y-c.y)*this.display.mf)},a.ri=function(){return this.body?this.body.Tb():this.bb},a.display.mf=0,a.display.Eh=0;a.display.size=c.ja()}function F(a,c,b){a.display.tf=new Rb(c,b)}var $b=100,Ob=0|Kb|Ib,cc=0;var dc=function(){var a=window.Lj||window.Oj||window.Gj||window.Kj||window.Hj||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function ec(){this.pe=1;this.Ge=65535;this.kd=0}ec.prototype.ja=function(){var a=new ec;a.pe=this.pe;a.Ge=this.Ge;a.kd=this.kd;return a};function fc(){this.filter=new ec;this.Ch=this.shape=o;this.ub=0.2;this.re=this.Bc=0;this.filter.pe=1;this.filter.Ge=65535;this.filter.kd=0;this.Ze=!1};function gc(){this.a=new D(0,0);this.b=new D(0,0);this.Qe()}function hc(a){var c=new gc;c.j(a);return c}v=gc.prototype;v.j=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.j(c,a);this.b.j(-a,c)};v.ja=function(){var a=new gc;a.Bd(this);return a};v.Bd=function(a){this.a.m(a.a);this.b.m(a.b)};v.zf=function(a){this.a.Nb(a.a);this.b.Nb(a.b)};v.Qe=function(){this.a.j(1,0);this.b.j(0,1)};v.K=function(){this.a.j(0,0);this.b.j(0,0)};v.Tb=function(){return Math.atan2(this.a.y,this.a.x)};
v.ke=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function ic(a,c){return a.x*c.x+a.y*c.y}function jc(a,c){return a.x*c.y-a.y*c.x}function kc(a){return new D(1*a.y,-1*a.x)}function lc(a,c){return new D(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function mc(a,c){return new D(ic(c,a.a),ic(c,a.b))}function G(a,c){var b=lc(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function nc(a,c){var b=I(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function I(a,c){return new D(a.x-c.x,a.y-c.y)}
function J(a,c,b){return a<c?c:a>b?b:a};function K(a){if(!a)throw"Assertion Failed";}var oc=2/180*Math.PI,pc=8/180*Math.PI,qc=0.5*Math.PI,rc=qc*qc,sc=2/180*Math.PI;function tc(){}tc.prototype.j=function(a){this.Ja.m(a.Ja);this.Eb.m(a.Eb);this.Ga.m(a.Ga);this.n=a.n;this.ra=a.ra;this.sa=a.sa};function uc(){this.T=new tc;this.ha=new tc;this.kb=new tc;this.r=[this.T,this.ha,this.kb]}function vc(a){return a.z==1?0:a.z==2?Bb(I(a.T.Ga,a.ha.Ga)):a.z==3?jc(I(a.ha.Ga,a.T.Ga),I(a.kb.Ga,a.T.Ga)):(K(!1),0)};function wc(a,c,b){var d=new uc,e=b.zc,g=b.uf,f=b.Ac,h=b.vf;K(0<=c.count&&c.count<=3);var i,j;d.z=c.count;for(var l=d.r,m=0;m<d.z;m++){var n=l[m];n.ra=c.ra[m];n.sa=c.sa[m];i=L(e,n.ra);j=L(f,n.sa);n.Ja=G(g,i);n.Eb=G(h,j);n.Ga=I(n.Eb,n.Ja);n.n=0}if(d.z>1&&(i=c.cj,j=vc(d),j<0.5*i||2*i<j||j<Number.MIN_VALUE))d.z=0;if(d.z==0)n=l[0],n.ra=0,n.sa=0,i=L(e,0),j=L(f,0),n.Ja=G(g,i),n.Eb=G(h,j),n.Ga=I(n.Eb,n.Ja),d.z=1;(d.z<1||d.z>3)&&K(!1);for(e=0;e<20;){g=[];for(f=0;f<d.z;f++)g[f]={},g[f].ra=d.r[f].ra,g[f].sa=
d.r[f].sa;if(d.z==2)f=d,h=f.T.Ga,l=f.ha.Ga,i=I(l,h),h=-(h.x*i.x+h.y*i.y),h<=0?(f.T.n=1,f.z=1):(l=l.x*i.x+l.y*i.y,l<=0?(f.ha.n=1,f.z=1,f.T.j(f.ha)):(i=1/(l+h),f.T.n=l*i,f.ha.n=h*i,f.z=2));else if(d.z==3){var f=d,p=f.T.Ga,s=f.ha.Ga,r=f.kb.Ga,t=I(s,p),h=ic(s,t),l=-ic(p,t),u=I(r,p);i=ic(r,u);j=-ic(p,u);n=I(r,s);m=ic(r,n);n=-ic(s,n);u=jc(t,u);t=u*jc(s,r);r=u*jc(r,p);p=u*jc(p,s);l<=0&&j<=0?(f.T.n=1,f.z=1):h>0&&l>0&&p<=0?(i=1/(h+l),f.T.n=h*i,f.ha.n=l*i,f.z=2):i>0&&j>0&&r<=0?(h=1/(i+j),f.T.n=i*h,f.kb.n=j*
h,f.z=2,f.ha.j(f.kb)):h<=0&&n<=0?(f.ha.n=1,f.z=1,f.T.j(f.ha)):i<=0&&m<=0?(f.kb.n=1,f.z=1,f.T.j(f.kb)):m>0&&n>0&&t<=0?(h=1/(m+n),f.ha.n=m*h,f.kb.n=n*h,f.z=2,f.T.j(f.kb)):(h=1/(t+r+p),f.T.n=t*h,f.ha.n=r*h,f.kb.n=p*h,f.z=3)}if(d.z==3)break;d.z==1?f=d.T.Ga.bd():d.z==2?(f=I(d.ha.Ga,d.T.Ga),f=jc(f,d.T.Ga.bd())>0?new D(-1*f.y,1*f.x):kc(f)):(K(!1),f=new D(0,0));if(Cb(f)<xc)break;d.r[d.z].ra=b.zc.Pe(mc(b.uf.d,f.bd()));d.r[d.z].Ja=G(b.uf,L(b.zc,d.r[d.z].ra));d.r[d.z].sa=b.Ac.Pe(mc(b.vf.d,f));d.r[d.z].Eb=G(b.vf,
L(b.Ac,d.r[d.z].sa));d.r[d.z].Ga=I(d.r[d.z].Eb,d.r[d.z].Ja);e++;h=!1;for(f=0;f<g.length;f++)if(d.r[d.z].ra==g[f].ra&&d.r[d.z].sa==g[f].sa){h=!0;break}if(h)break;d.z++}e=a.xc;g=a.yc;d.z==1?(e.m(d.T.Ja),g.m(d.T.Eb)):d.z==2?(e.x=d.T.n*d.T.Ja.x+d.ha.n*d.ha.Ja.x,e.y=d.T.n*d.T.Ja.y+d.ha.n*d.ha.Ja.y,g.x=d.T.n*d.T.Eb.x+d.ha.n*d.ha.Eb.x,g.y=d.T.n*d.T.Eb.y+d.ha.n*d.ha.Eb.y):d.z==3?(g.x=e.x=d.T.n*d.T.Ja.x+d.ha.n*d.ha.Ja.x+d.kb.n*d.kb.Ja.x,g.y=e.y=d.T.n*d.T.Ja.y+d.ha.n*d.ha.Ja.y+d.kb.n*d.kb.Ja.y):K(!1);a.hd=
Bb(I(a.xc,a.yc));c.cj=vc(d);c.count=d.z;e=d.r;for(g=0;g<d.z;g++)c.ra[g]=e[g].ra,c.sa[g]=e[g].sa;if(b.Bh)c=b.zc.N,b=b.Ac.N,a.hd>c+b&&a.hd>Number.MIN_VALUE?(a.hd-=c+b,d=I(a.yc,a.xc),E(d),a.xc.x+=c*d.x,a.xc.y+=c*d.y,a.yc.x-=b*d.x,a.yc.y-=b*d.y):(b=new D(0,0),b.x=0.5*(a.xc.x+a.yc.x),b.y=0.5*(a.xc.y+a.yc.y),a.xc.x=a.yc.x=b.x,a.xc.y=a.yc.y=b.y,a.hd=0)};function yc(){};function zc(){this.xc=new D(0,0);this.yc=new D(0,0);this.hd=0};function Ac(){this.ra=[0,0,0];this.sa=[0,0,0]};function Bc(){}Bc.prototype.j=function(a){a.Gf(this)};Bc.prototype.Pe=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.z;d++){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};Bc.prototype.ce=function(a){return this.r[this.Pe(a)]};Bc.prototype.Bg=aa("z");function L(a,c){c===k&&(c=0);K(0<=c&&c<a.z);return a.r[c]};function Cc(){this.N=0.005}v=Cc.prototype;v.ja=ba(o);v.j=function(a){this.N=a.N};v.$d=q();v.Af=q();v.Gf=function(){K(!1)};function Dc(){this.Wc=0;this.ed=new D(0,0);this.ee=0};function Ec(a,c){this.position=new D(0,0);this.d=new gc;a&&this.position.m(a);c&&this.d.Bd(c)}Ec.prototype.X=function(a,c){this.position.m(a);this.d.Bd(c)};Ec.prototype.Qe=function(){this.position.K();this.d.Qe()};Ec.prototype.j=function(a){this.position.m(a.position);this.d.Bd(a.d)};Ec.prototype.Tb=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function O(){this.N=0.005;this.zb=new D(0,0);this.r=[];this.ma=[]}z(O,Cc);v=O.prototype;v.de=ba("b2PolygonShape");v.ja=function(){var a=new O;a.j(this);return a};v.j=function(a){Cc.prototype.j.call(this,a);if(a instanceof O){this.zb.m(a.zb);this.ea=a.ea;Fc(this,this.ea);for(var c=0;c<this.ea;c++)this.r[c].m(a.r[c]),this.ma[c].m(a.ma[c])}};function Gc(a,c){Hc(a,c)}
function Hc(a,c){var b=c.length;K(2<=b);a.ea=b;Fc(a,b);for(b=b=0;b<a.ea;b++)a.r[b].m(c[b]);for(b=0;b<a.ea;++b){var d=I(a.r[b+1<a.ea?b+1:0],a.r[b]);K(Cb(d)>Number.MIN_VALUE);a.ma[b].m(kc(d));E(a.ma[b])}b=a.r;d=a.ea;d===k&&(d=0);for(var e=new D(0,0),g=0,f=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],l=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));g+=l;e.x+=l*f*(0+i.x+j.x);e.y+=l*f*(0+i.y+j.y)}e.x*=1/g;e.y*=1/g;a.zb=e}
function Ic(a,c,b){a.ea=4;Fc(a,4);a.r[0].j(-c,-b);a.r[1].j(c,-b);a.r[2].j(c,b);a.r[3].j(-c,b);a.ma[0].j(0,-1);a.ma[1].j(1,0);a.ma[2].j(0,1);a.ma[3].j(-1,0);a.zb.K()}
v.$d=function(a,c){for(var b=c.d,d=this.r[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),g=c.position.y+(b.a.y*d.x+b.b.y*d.y),f=e,h=g,i=1;i<this.ea;++i)var d=this.r[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,g=g<d?g:d,f=f>j?f:j,h=h>d?h:d;a.lowerBound.x=e-this.N;a.lowerBound.y=g-this.N;a.upperBound.x=f+this.N;a.upperBound.y=h+this.N};
v.Af=function(a,c){c===k&&(c=0);if(this.ea==2)a.ed.x=0.5*(this.r[0].x+this.r[1].x),a.ed.y=0.5*(this.r[0].y+this.r[1].y),a.Wc=0,a.ee=0;else{for(var b=0,d=0,e=0,g=0,f=1/3,h=0;h<this.ea;++h){var i=this.r[h],j=h+1<this.ea?this.r[h+1]:this.r[0],l=i.x-0,m=i.y-0,n=j.x-0,p=j.y-0,s=l*p-m*n,r=0.5*s;e+=r;b+=r*f*(0+i.x+j.x);d+=r*f*(0+i.y+j.y);i=l;g+=s*(f*(0.25*(i*i+n*i+n*n)+(0*i+0*n))+0+(f*(0.25*(m*m+p*m+p*p)+(0*m+0*p))+0))}a.Wc=c*e;b*=1/e;d*=1/e;a.ed.j(b,d);a.ee=c*g}};
v.Gf=function(a){a.r=this.r;a.z=this.ea;a.N=this.N};v.Bg=aa("ea");v.Pe=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ea;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};v.ce=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ea;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return this.r[c]};function Fc(a,c){a.r=[];a.ma=[];for(var b=a.r.length;b<c;b++)a.r[b]=new D(0,0),a.ma[b]=new D(0,0)}new gc;function Jc(){}Jc.prototype.Wb=function(a,c){var b=a.bg.ja(),d=c.bg.ja();return b.kd==d.kd&&b.kd!=0?b.kd>0:(b.Ge&d.pe)!=0&&(b.pe&d.Ge)!=0};var Kc=new Jc;function Lc(){};function P(a){this.Za=new Lc;this.$a=new Lc;this.Ce=new D(0,0);this.De=new D(0,0);K(a.U!=a.W);this.C=a.type;this.w=this.Aa=o;this.F=a.U;this.I=a.W;this.eh=a.Of}v=P.prototype;v.Rb=ba(o);v.Sb=ba(o);v.ic=function(){return this.F.ic()&&this.I.ic()};v.Ub=q();v.Hb=q();v.Cf=q();v.Gb=ba(!1);function Mc(a){P.call(this,a);this.bc=new D(0,0);this.cc=new D(0,0);this.A=new D(0,0);this.B=new D(0,0);this.Z=new D(0,0);this.$=new D(0,0);this.hb=this.F.Ra.eg;this.bc.x=a.We.x-this.hb.e.position.x;this.bc.y=a.We.y-this.hb.e.position.y;this.cc.x=a.Xe.x-this.hb.e.position.x;this.cc.y=a.Xe.y-this.hb.e.position.y;this.A.m(a.Xa);this.B.m(a.Ya);this.oa=a.Xc;this.Jd=a.Vf+this.oa*a.Wf;this.lh=Math.min(a.oh,this.Jd-this.oa*Nc);this.mh=Math.min(a.ph,(this.Jd-Nc)/this.oa);this.uc=this.tc=this.i=0}z(Mc,P);
v=Mc.prototype;v.Rb=function(){return Q(this.F,this.A)};v.Sb=function(){return Q(this.I,this.B)};function Oc(a){var c=a.hb.e.position.ja();c.Nb(a.bc);return c}function Pc(a){var c=a.hb.e.position.ja();c.Nb(a.cc);return c}
v.Ub=function(a){var c=this.F,b=this.I,d;d=c.e.d;var e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,f=d.a.x*e+d.b.x*g,g=d.a.y*e+d.b.y*g,e=f;d=b.e.d;var h=this.B.x-b.c.o.x,i=this.B.y-b.c.o.y,f=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=f;d=b.c.g.x+h;var f=b.c.g.y+i,j=this.hb.e.position.x+this.cc.x,l=this.hb.e.position.y+this.cc.y;this.Z.j(c.c.g.x+e-(this.hb.e.position.x+this.bc.x),c.c.g.y+g-(this.hb.e.position.y+this.bc.y));this.$.j(d-j,f-l);d=Bb(this.Z);f=Bb(this.$);d>0.005?this.Z.Hc(1/d):this.Z.K();f>0.005?this.$.Hc(1/
f):this.$.K();this.Jd-d-this.oa*f>0?this.i=this.kg=0:this.kg=2;d<this.lh?this.tc=this.fg=0:this.fg=2;f<this.mh?this.uc=this.gg=0:this.gg=2;d=e*this.Z.y-g*this.Z.x;f=h*this.$.y-i*this.$.x;this.Ae=c.l+c.t*d*d;this.Be=b.l+b.t*f*f;this.hf=this.Ae+this.oa*this.oa*this.Be;this.Ae=1/this.Ae;this.Be=1/this.Be;this.hf=1/this.hf;a.hc?(this.i*=a.Va,this.tc*=a.Va,this.uc*=a.Va,a=(-this.i-this.tc)*this.Z.x,d=(-this.i-this.tc)*this.Z.y,f=(-this.oa*this.i-this.uc)*this.$.x,j=(-this.oa*this.i-this.uc)*this.$.y,c.h.x+=
c.l*a,c.h.y+=c.l*d,c.s+=c.t*(e*d-g*a),b.h.x+=b.l*f,b.h.y+=b.l*j,b.s+=b.t*(h*j-i*f)):this.uc=this.tc=this.i=0};
v.Hb=function(){var a=this.F,c=this.I,b;b=a.e.d;var d=this.A.x-a.c.o.x,e=this.A.y-a.c.o.y,g=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=g;b=c.e.d;var f=this.B.x-c.c.o.x,h=this.B.y-c.c.o.y,g=b.a.x*f+b.b.x*h,h=b.a.y*f+b.b.y*h,f=g,i=g=b=0,j=0;b=j=b=j=i=g=b=0;if(this.kg==2)b=a.h.x+-a.s*e,g=a.h.y+a.s*d,i=c.h.x+-c.s*h,j=c.h.y+c.s*f,b=-(this.Z.x*b+this.Z.y*g)-this.oa*(this.$.x*i+this.$.y*j),j=this.hf*-b,b=this.i,this.i=Math.max(0,this.i+j),j=this.i-b,b=-j*this.Z.x,g=-j*this.Z.y,i=-this.oa*j*this.$.x,j=-this.oa*
j*this.$.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.s+=a.t*(d*g-e*b),c.h.x+=c.l*i,c.h.y+=c.l*j,c.s+=c.t*(f*j-h*i);if(this.fg==2)b=a.h.x+-a.s*e,g=a.h.y+a.s*d,b=-(this.Z.x*b+this.Z.y*g),j=-this.Ae*b,b=this.tc,this.tc=Math.max(0,this.tc+j),j=this.tc-b,b=-j*this.Z.x,g=-j*this.Z.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.s+=a.t*(d*g-e*b);if(this.gg==2)i=c.h.x+-c.s*h,j=c.h.y+c.s*f,b=-(this.$.x*i+this.$.y*j),j=-this.Be*b,b=this.uc,this.uc=Math.max(0,this.uc+j),j=this.uc-b,i=-j*this.$.x,j=-j*this.$.y,c.h.x+=c.l*i,c.h.y+=c.l*j,c.s+=
c.t*(f*j-h*i)};
v.Gb=function(){var a=this.F,c=this.I,b,d=this.hb.e.position.x+this.bc.x,e=this.hb.e.position.y+this.bc.y,g=this.hb.e.position.x+this.cc.x,f=this.hb.e.position.y+this.cc.y,h=0,i=0,j=0,l=0,m=b=0,n=0,p=0,s=m=p=b=m=b=0;if(this.kg==2)b=a.e.d,h=this.A.x-a.c.o.x,i=this.A.y-a.c.o.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=c.e.d,j=this.B.x-c.c.o.x,l=this.B.y-c.c.o.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,b=a.c.g.x+h,m=a.c.g.y+i,n=c.c.g.x+j,p=c.c.g.y+l,this.Z.j(b-d,m-e),this.$.j(n-g,p-f),b=Bb(this.Z),m=
Bb(this.$),b>0.005?this.Z.Hc(1/b):this.Z.K(),m>0.005?this.$.Hc(1/m):this.$.K(),b=this.Jd-b-this.oa*m,s=Math.max(s,-b),b=J(b+0.005,-0.2,0),p=-this.hf*b,b=-p*this.Z.x,m=-p*this.Z.y,n=-this.oa*p*this.$.x,p=-this.oa*p*this.$.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.t*(h*m-i*b),c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=c.t*(j*p-l*n),R(a),R(c);if(this.fg==2)b=a.e.d,h=this.A.x-a.c.o.x,i=this.A.y-a.c.o.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=a.c.g.x+h,m=a.c.g.y+i,this.Z.j(b-d,m-e),b=Bb(this.Z),b>0.005?(this.Z.x*=
1/b,this.Z.y*=1/b):this.Z.K(),b=this.lh-b,s=Math.max(s,-b),b=J(b+0.005,-0.2,0),p=-this.Ae*b,b=-p*this.Z.x,m=-p*this.Z.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.t*(h*m-i*b),R(a);if(this.gg==2)b=c.e.d,j=this.B.x-c.c.o.x,l=this.B.y-c.c.o.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,n=c.c.g.x+j,p=c.c.g.y+l,this.$.j(n-g,p-f),m=Bb(this.$),m>0.005?(this.$.x*=1/m,this.$.y*=1/m):this.$.K(),b=this.mh-m,s=Math.max(s,-b),b=J(b+0.005,-0.2,0),p=-this.Be*b,n=-p*this.$.x,p=-p*this.$.y,c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=
c.t*(j*p-l*n),R(c);return s<0.005};var Nc=1;function Qc(){this.Je=o;this.th=0};var Rc=!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function?function(a,c,b){b.get instanceof Function&&a.__defineGetter__(c,b.get);b.set instanceof Function&&a.__defineSetter__(c,b.set)}:Object.defineProperty;function Sc(a,c){return function(){c.apply(a,arguments)}};function Tc(){}Rc(Tc.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:aa("Mf")});Rc(Tc.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Mf=a;this.Jc.Ta=this.Jc.Ta&4294967040|this.Mf&255}});Rc(Tc.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:aa("Kf")});Rc(Tc.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Kf=a;this.Jc.Ta=this.Jc.Ta&4294902015|this.Kf<<8&65280}});
Rc(Tc.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:aa("Lf")});Rc(Tc.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Lf=a;this.Jc.Ta=this.Jc.Ta&4278255615|this.Lf<<16&16711680}});Rc(Tc.prototype,"flip",{enumerable:!1,configurable:!0,get:aa("Jf")});Rc(Tc.prototype,"flip",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Jf=a;this.Jc.Ta=this.Jc.Ta&16777215|this.Jf<<24&4278190080}});function Uc(){this.tb=new Tc;this.tb.Jc=this;this.Ta=0}function Vc(a,c){a.Ta=c;a.tb.Mf=a.Ta&255;a.tb.Kf=(a.Ta&65280)>>8&255;a.tb.Lf=(a.Ta&16711680)>>16&255;a.tb.Jf=(a.Ta&4278190080)>>24&255}Uc.prototype.j=function(a){Vc(this,a.Ta)};Uc.prototype.ja=function(){var a=new Uc;a.j(this);return a};function Wc(){this.rb=new D(0,0);this.id=new Uc}Wc.prototype.j=function(a){this.rb.m(a.rb);this.id.j(a.id)};function Xc(){this.J=new D(0,0);this.sc=new Uc;this.constructor===Xc&&this.Ka()}Xc.prototype.Ka=function(){this.J.K();this.ud=this.rd=0;Vc(this.sc,0)};Xc.prototype.j=function(a){this.J.m(a.J);this.rd=a.rd;this.ud=a.ud;this.sc.j(a.sc)};function Yc(){this.na=0;if(this.constructor===Yc){this.G=[];for(var a=0;a<2;a++)this.G[a]=new Xc;this.Fa=new D(0,0);this.J=new D(0,0)}}Yc.prototype.Ka=function(){for(var a=0;a<2;a++)this.G[a].Ka();this.Fa.K();this.J.K();this.na=this.C=0};Yc.prototype.j=function(a){this.na=a.na;for(var c=0;c<2;c++)this.G[c].j(a.G[c]);this.Fa.m(a.Fa);this.J.m(a.J);this.C=a.C};Yc.prototype.ja=function(){var a=new Yc;a.j(this);return a};function Zc(a,c,b,d){var e=0,g=c[0].rb,f=c[1].rb,h=b.x*g.x+b.y*g.y-d,b=b.x*f.x+b.y*f.y-d;h<=0&&a[e++].j(c[0]);b<=0&&a[e++].j(c[1]);if(h*b<0)b=h/(h-b),d=a[e].rb,d.x=g.x+b*(f.x-g.x),d.y=g.y+b*(f.y-g.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function $c(a,c,b,d,e){b===k&&(b=0);for(var g=a.r,f=a.ma,a=d.r,h=c.d.a.x*f[b].x+c.d.b.x*f[b].y,f=c.d.a.y*f[b].x+c.d.b.y*f[b].y,i=e.d.a.x*h+e.d.a.y*f,j=e.d.b.x*h+e.d.b.y*f,l=0,m=Number.MAX_VALUE,n=0;n<d.ea;++n){var p=a[n].x*i+a[n].y*j;p<m&&(m=p,l=n)}return(e.position.x+(e.d.a.x*a[l].x+e.d.b.x*a[l].y)-(c.position.x+(c.d.a.x*g[b].x+c.d.b.x*g[b].y)))*h+(e.position.y+(e.d.a.y*a[l].x+e.d.b.y*a[l].y)-(c.position.y+(c.d.a.y*g[b].x+c.d.b.y*g[b].y)))*f}
function ad(a,c,b,d,e){var g=c.ma,f=e.position.x+(e.d.a.x*d.zb.x+e.d.b.x*d.zb.y),h=e.position.y+(e.d.a.y*d.zb.x+e.d.b.y*d.zb.y);f-=b.position.x+(b.d.a.x*c.zb.x+b.d.b.x*c.zb.y);h-=b.position.y+(b.d.a.y*c.zb.x+b.d.b.y*c.zb.y);for(var i=f*b.d.a.x+h*b.d.a.y,h=f*b.d.b.x+h*b.d.b.y,f=0,j=-Number.MAX_VALUE,l=0;l<c.ea;++l){var m=g[l].x*i+g[l].y*h;m>j&&(j=m,f=l)}g=$c(c,b,f,d,e);i=f-1;i<0&&(i=c.ea-1);h=$c(c,b,i,d,e);j=f+1;j>=c.ea&&(j=0);var l=$c(c,b,j,d,e),n=m=0,p=0;if(h>g&&h>l)p=-1,m=i,n=h;else if(l>g)p=1,
m=j,n=l;else return a[0]=f,g;for(;;)if(p==-1?(f=m-1,f<0&&(f=c.ea-1)):(f=m+1,f>=c.ea&&(f=0)),g=$c(c,b,f,d,e),g>n)m=f,n=g;else break;a[0]=m;return n}var bd=[new Wc,new Wc],cd=[new Wc,new Wc],dd=[new Wc,new Wc],ed=[0],fd=[0],gd=new D(0,0),hd=new D(0,0),id=new D(0,0),jd=new D(0,0),kd=new D(0,0),ld=new D(0,0),md=new D(0,0),nd=new D(0,0);function od(){this.J=new D(0,0);this.D=new D(0,0)}
od.prototype.X=function(a,c,b,d,e){this.Uc=c;this.Vc=d;var g=a.count;K(0<g&&g<3);var f,h,i=h=f=0,j=0,d=c=0,l,m,i=0;g==1?(this.C=pd,g=L(this.Uc,a.ra[0]),a=L(this.Vc,a.sa[0]),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),this.D.x=i-f,this.D.y=j-h,E(this.D)):(a.sa[0]==a.sa[1]?(this.C=qd,c=L(this.Uc,a.ra[0]),d=L(this.Uc,a.ra[1]),a=L(this.Vc,a.sa[0]),this.J.x=0.5*(c.x+d.x),this.J.y=
0.5*(c.y+d.y),this.D=kc(I(d,c)),E(this.D),m=this.D,l=b.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*m.x+l.b.y*m.y,m=this.J,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),i=(i-f)*c+(j-h)*d):a.ra[0]==a.ra[0]?(this.C=rd,f=L(this.Vc,a.sa[0]),h=L(this.Vc,a.sa[1]),g=L(this.Uc,a.ra[0]),this.J.x=0.5*(f.x+h.x),this.J.y=0.5*(f.y+h.y),this.D=kc(I(h,f)),E(this.D),m=this.D,l=e.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*
m.x+l.b.y*m.y,m=this.J,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),i=(f-i)*c+(h-j)*d):(c=L(this.Uc,a.ra[0]),d=L(this.Uc,a.ra[1]),f=L(this.Vc,a.sa[0]),h=L(this.Vc,a.sa[1]),i=lc(b.d,I(d,c)),j=lc(e.d,I(h,f)),e=i.x*i.x+i.y*i.y,b=j.x*j.x+j.y*j.y,g=I(j,i),a=i.x*g.x+i.y*g.y,g=j.x*g.x+j.y*g.y,j=i.x*j.x+i.y*j.y,l=e*b-j*j,i=0,l!=0&&(i=J((j*g-a*b)/l,0,1)),(j*i+g)/b<0&&(i=J((j-a)/e,0,1)),g=
new D(0,0),g.x=c.x+i*(d.x-c.x),g.y=c.y+i*(d.y-c.y),a=new D(0,0),a.x=f.x+i*(h.x-f.x),a.y=f.y+i*(h.y-f.y),i==0||i==1?(this.C=rd,this.D=kc(I(h,f)),E(this.D),this.J=a):(this.C=qd,this.D=kc(I(d,c)),this.J=g)),i<0&&this.D.Dg())};
od.prototype.Qb=function(a,c){var b,d,e=0;switch(this.C){case pd:b=mc(a.d,this.D);d=mc(c.d,this.D.bd());b=this.Uc.ce(b);d=this.Vc.ce(d);b=G(a,b);d=G(c,d);e=(d.x-b.x)*this.D.x+(d.y-b.y)*this.D.y;break;case qd:e=lc(a.d,this.D);b=G(a,this.J);d=mc(c.d,e.bd());d=this.Vc.ce(d);d=G(c,d);e=(d.x-b.x)*e.x+(d.y-b.y)*e.y;break;case rd:e=lc(c.d,this.D);d=G(c,this.J);b=mc(a.d,e.bd());b=this.Uc.ce(b);b=G(a,b);e=(b.x-d.x)*e.x+(b.y-d.y)*e.y;break;default:K(!1)}return e};var pd=1,qd=2,rd=4;var sd=0,td=0,ud=0,vd=0,wd=0,xd=new Ac,yd=new yc,zd=new Ec,Ad=new Ec,Bd=new od,Cd=new zc;function Dd(){this.o=new D(0,0);this.Da=new D(0,0);this.g=new D(0,0)}Dd.prototype.j=function(a){this.o.m(a.o);this.Da.m(a.Da);this.g.m(a.g);this.sb=a.sb;this.n=a.n;this.Ca=a.Ca};Dd.prototype.ja=function(){var a=new Dd;a.o.m(this.o);a.Da.m(this.Da);a.g.m(this.g);a.sb=this.sb;a.n=this.n;a.Ca=this.Ca;return a};
Dd.prototype.lb=function(a,c){c===k&&(c=0);a.position.x=(1-c)*this.Da.x+c*this.g.x;a.position.y=(1-c)*this.Da.y+c*this.g.y;a.d.j((1-c)*this.sb+c*this.n);var b=a.d;a.position.x-=b.a.x*this.o.x+b.b.x*this.o.y;a.position.y-=b.a.y*this.o.x+b.b.y*this.o.y};Dd.prototype.Ec=function(a){a===k&&(a=0);if(this.Ca<a&&1-this.Ca>Number.MIN_VALUE){var c=(a-this.Ca)/(1-this.Ca);this.Da.x=(1-c)*this.Da.x+c*this.g.x;this.Da.y=(1-c)*this.Da.y+c*this.g.y;this.sb=(1-c)*this.sb+c*this.n;this.Ca=a}};function Ed(){};function Fd(){this.position=new D(0,0);this.ah=new D(0,0);this.Ch=o;this.position.K();this.bb=0;this.ah.K();this.Yh=this.Ei=this.Zh=0;this.$h=this.Xh=!0;this.di=this.Lc=!1;this.type=S;this.Wh=!0;this.xi=1}var S=0;function T(){this.Ha=new Ed;this.Ia=new Ed;this.jb=new Yc;this.Ee=new Yc}function Gd(a,c){var b=a.O.v,d=a.M.da,e=a.O.da;c.X(a.jb,a.M.v.lb(),d.N,b.lb(),e.N)}T.prototype.jc=aa("qf");
T.prototype.Ka=function(a,c){a===k&&(a=o);c===k&&(c=o);this.enabled=!0;this.Ue=this.wd=this.Pf=this.qf=!1;if(!a||!c)this.O=this.M=o;else{if(a.jc()||c.jc())this.qf=!0;var b=a.v,d=c.v;if(b.C!=2||(b.ac&Hd)==Hd||d.C!=2||(d.ac&Hd)==Hd)this.Pf=!0;this.M=a;this.O=c;this.jb.na=0;this.w=this.Aa=o;this.Ha.ta=o;this.Ha.ia=o;this.Ha.next=o;this.Ha.aa=o;this.Ia.ta=o;this.Ia.ia=o;this.Ia.next=o;this.Ia.aa=o}};
function Id(a,c){var b=a.Ee;a.Ee=a.jb;a.jb=b;a.enabled=!0;var d=!1,b=a.wd,e=a.M.v,g=a.O.v,f=a.M.Nc.Cd(a.O.Nc);if(a.qf){if(f){var d=a.M.da,e=e.lb(),f=a.O.da,h=g.lb(),g=new yc;g.zc=new Bc;g.zc.j(d);g.Ac=new Bc;g.Ac.j(f);g.uf=e;g.vf=h;g.Bh=!0;e=new Ac;e.count=0;d=new zc;wc(d,e,g);d=d.hd<10*Number.MIN_VALUE}a.jb.na=0}else{a.Pf=e.C!=2||(e.ac&Hd)==Hd||g.C!=2||(g.ac&Hd)==Hd?!0:!1;if(f){a.Qb();d=a.jb.na>0;for(f=0;f<a.jb.na;f++){h=a.jb.G[f];h.rd=0;for(var i=h.ud=0;i<a.Ee.na;i++){var j=a.Ee.G[i];if(j.sc.Ta==
h.sc.Ta){h.rd=j.rd;h.ud=j.ud;break}}}}else a.jb.na=0;d!=b&&(Jd(e,!0),Jd(g,!0))}a.wd=d;!b&&d&&c.Yd(a);b&&!d&&c.xd(a);a.qf||c.je(a,a.Ee)}T.prototype.Qb=q();var Kd=new function(){this.zc=new Bc;this.Ac=new Bc;this.xh=new Dd;this.yh=new Dd};function Ld(){T.call(this)}z(Ld,T);function Md(){return new Ld}Ld.prototype.Ka=function(a,c){T.prototype.Ka.call(this,a,c)};
Ld.prototype.Qb=function(){var a=this.jb,c=this.M.da,b=this.M.v.e,d=this.O.da,e=this.O.v.e;a.na=0;var g=e.position.x+(e.d.a.x*d.ca.x+e.d.b.x*d.ca.y)-(b.position.x+(b.d.a.x*c.ca.x+b.d.b.x*c.ca.y)),b=e.position.y+(e.d.a.y*d.ca.x+e.d.b.y*d.ca.y)-(b.position.y+(b.d.a.y*c.ca.x+b.d.b.y*c.ca.y)),e=c.N+d.N;if(!(g*g+b*b>e*e))a.C=1,a.J.m(c.ca),a.Fa.K(),a.na=1,a.G[0].J.m(d.ca),Vc(a.G[0].sc,0)};function Nd(){T.call(this)}z(Nd,T);function Od(){return new Nd}Nd.prototype.Ka=function(a,c){T.prototype.Ka.call(this,a,c)};Nd.prototype.Qb=q();function Pd(a){this.N=0.005;this.N=a;this.ca=new D(0,0)}z(Pd,Cc);v=Pd.prototype;v.de=ba("b2CircleShape");v.ja=function(){var a=new Pd(this.N);a.j(this);return a};v.j=function(a){Cc.prototype.j.call(this,a);a instanceof Pd&&this.ca.m(a.ca)};v.$d=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.ca.x+b.b.x*this.ca.y),b=c.position.y+(b.a.y*this.ca.x+b.b.y*this.ca.y);a.lowerBound.j(d-this.N,b-this.N);a.upperBound.j(d+this.N,b+this.N)};
v.Af=function(a,c){a.Wc=c*Math.PI*this.N*this.N;a.ed.m(this.ca);a.ee=a.Wc*(0.5*this.N*this.N+(this.ca.x*this.ca.x+this.ca.y*this.ca.y))};v.Gf=function(a){a.r=[this.ca];a.z=1;a.N=this.N};function Qd(){T.call(this)}z(Qd,T);function Rd(){return new Qd}Qd.prototype.Ka=function(a,c){K(a.da instanceof O);K(c.da instanceof Pd);T.prototype.Ka.call(this,a,c)};
Qd.prototype.Qb=function(){a:{var a=this.jb,c=this.M.da,b=this.M.v.e,d=this.O.da,e=this.O.v.e;a.na=0;for(var g=e.position.x+(e.d.a.x*d.ca.x+e.d.b.x*d.ca.y)-b.position.x,f=e.position.y+(e.d.a.y*d.ca.x+e.d.b.y*d.ca.y)-b.position.y,e=g*b.d.a.x+f*b.d.a.y,b=g*b.d.b.x+f*b.d.b.y,g=0,f=-Number.MAX_VALUE,h=c.N+d.N,i=0;i<c.ea;++i){var j=c.ma[i].x*(e-c.r[i].x)+c.ma[i].y*(b-c.r[i].y);if(j>h)break a;j>f&&(f=j,g=i)}j=g+1;j>=c.ea&&(j=0);var i=c.r[g],l=c.r[j];if(f<Number.MIN_VALUE)a.na=1,a.C=2,a.Fa.m(c.ma[g]),a.J.x=
0.5*(i.x+l.x),a.J.y=0.5*(i.y+l.y);else if((e-i.x)*(l.x-i.x)+(b-i.y)*(l.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.na=1;a.C=2;a.Fa.x=e-i.x;a.Fa.y=b-i.y;E(a.Fa);a.J.m(i)}else if((e-l.x)*(i.x-l.x)+(b-l.y)*(i.y-l.y)<=0){if((e-l.x)*(e-l.x)+(b-l.y)*(b-l.y)>h*h)break a;a.na=1;a.C=2;a.Fa.x=e-l.x;a.Fa.y=b-l.y;E(a.Fa);a.J.m(l)}else{j=0.5*(i.x+l.x);i=0.5*(i.y+l.y);f=(e-j)*c.ma[g].x+(b-i)*c.ma[g].y;if(f>h)break a;a.na=1;a.C=2;a.Fa.x=c.ma[g].x;a.Fa.y=c.ma[g].y;E(a.Fa);a.J.j(j,i)}a.G[0].J.m(d.ca);
Vc(a.G[0].sc,0)}};function Sd(){T.call(this)}z(Sd,T);function Td(){return new Sd}Sd.prototype.Ka=function(a,c){K(a.da instanceof O);K(!1);T.prototype.Ka.call(this,a,c)};Sd.prototype.Qb=q();function Ud(){T.call(this)}z(Ud,T);function Vd(){return new Ud}Ud.prototype.Ka=function(a,c){T.prototype.Ka.call(this,a,c)};
Ud.prototype.Qb=function(){var a=this.jb,c=this.M.da,b=this.M.v.e,d=this.O.da,e=this.O.v.e;a.na=0;var g=c.N+d.N;ed[0]=0;var f=ad(ed,c,b,d,e);if(!(f>g)){fd[0]=0;var h=ad(fd,d,e,c,b);if(!(h>g)){var i=c,j=d,l=b,m=e,n=ed[0],p=0;a.C=2;if(h>0.98*f+0.001)i=d,j=c,l=e,m=b,n=fd[0],a.C=4,p=1;c=n;b=m;c===k&&(c=0);for(var d=l.d.a.x*i.ma[c].x+l.d.b.x*i.ma[c].y,e=l.d.a.y*i.ma[c].x+l.d.b.y*i.ma[c].y,f=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=f,f=0,h=Number.MAX_VALUE,s=0;s<j.ea;s++){var r=d*j.ma[s].x+e*j.ma[s].y;
r<h&&(h=r,f=s)}d=f+1;d>=j.ea&&(d=0);bd[0].rb.x=b.position.x+(b.d.a.x*j.r[f].x+b.d.b.x*j.r[f].y);bd[0].rb.y=b.position.y+(b.d.a.y*j.r[f].x+b.d.b.y*j.r[f].y);bd[0].id.tb.kj=c;bd[0].id.tb.vi=f;bd[0].id.tb.wi=0;bd[1].rb.x=b.position.x+(b.d.a.x*j.r[d].x+b.d.b.x*j.r[d].y);bd[1].rb.y=b.position.y+(b.d.a.y*j.r[d].x+b.d.b.y*j.r[d].y);bd[1].id.tb.kj=c;bd[1].id.tb.vi=d;bd[1].id.tb.wi=1;c=i.r[n];i=n+1<i.ea?i.r[n+1]:i.r[0];gd.j(i.x-c.x,i.y-c.y);E(gd);hd.x=gd.y;hd.y=-gd.x;id.j(0.5*(c.x+i.x),0.5*(c.y+i.y));kd.x=
l.d.a.x*gd.x+l.d.b.x*gd.y;kd.y=l.d.a.y*gd.x+l.d.b.y*gd.y;ld.x=-kd.x;ld.y=-kd.y;jd.x=kd.y;jd.y=-kd.x;md.x=l.position.x+(l.d.a.x*c.x+l.d.b.x*c.y);md.y=l.position.y+(l.d.a.y*c.x+l.d.b.y*c.y);nd.x=l.position.x+(l.d.a.x*i.x+l.d.b.x*i.y);nd.y=l.position.y+(l.d.a.y*i.x+l.d.b.y*i.y);if(!(Zc(cd,bd,ld,-kd.x*md.x-kd.y*md.y+g)<2)&&!(Zc(dd,cd,kd,kd.x*nd.x+kd.y*nd.y+g)<2)){a.Fa.m(hd);a.J.m(id);l=jd.x*md.x+jd.y*md.y;for(n=i=0;n<2;++n)if(jd.x*dd[n].rb.x+jd.y*dd[n].rb.y-l<=g)c=dd[n].rb.x-m.position.x,j=dd[n].rb.y-
m.position.y,a.G[i].J.x=c*m.d.a.x+j*m.d.a.y,a.G[i].J.y=c*m.d.b.x+j*m.d.b.y,a.G[i].sc.j(dd[n].id),a.G[i].sc.tb.Cj=p,i++;a.na=i}}}};function Wd(){this.Cb=[];Xd(this,Md,"b2CircleShape","b2CircleShape");Xd(this,Rd,"b2PolygonShape","b2CircleShape");Xd(this,Vd,"b2PolygonShape","b2PolygonShape");Xd(this,Od,"b2EdgeShape","b2CircleShape");Xd(this,Td,"b2PolygonShape","b2EdgeShape")}function Xd(a,c,b,d){a.Cb[b]=a.Cb[b]||[];a.Cb[b][d]=new Qc;a.Cb[b][d].Rg=c;a.Cb[b][d].uh=!0;if(b!=d)a.Cb[d]=a.Cb[d]||[],a.Cb[d][b]=new Qc,a.Cb[d][b].Rg=c,a.Cb[d][b].uh=!1}
Wd.prototype.Pb=function(a,c){var b=this.Cb[a.da.de()][c.da.de()],d;if(b.Je)return d=b.Je,b.Je=d.w,b.th--,d.Ka(a,c),d;d=b.Rg;return d!=o?(b.uh?(d=d(),d.Ka(a,c)):(d=d(),d.Ka(c,a)),d):o};Wd.prototype.Fc=function(a){a.jb.na>0&&(Jd(a.M.v,!0),Jd(a.O.v,!0));var c=this.Cb[a.M.da.de()][a.O.da.de()];c.th++;a.w=c.Je;c.Je=a};function Yd(a,c){this.se=a;this.te=c};function Zd(a){this.L=new Sb;this.parent=this.lc=this.cb=o;if(typeof a!="undefined")this.Ve=a};function $d(){this.fc=o;this.Pi=this.Fj=0}v=$d.prototype;v.ae=function(a,c){var b=new Zd(c);b.L.lowerBound.x=a.lowerBound.x-0.1;b.L.lowerBound.y=a.lowerBound.y-0.1;b.L.upperBound.x=a.upperBound.x+0.1;b.L.upperBound.y=a.upperBound.y+0.1;ae(this,b);return b};v.be=function(a){be(this,a)};
v.Ef=function(a,c,b){K(a.cb===o);if(Ub(a.L,c))return!1;be(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.L.lowerBound.x=c.lowerBound.x-d;a.L.lowerBound.y=c.lowerBound.y-b;a.L.upperBound.x=c.upperBound.x+d;a.L.upperBound.y=c.upperBound.y+b;ae(this,a);return!0};v.yd=function(a){return a.L};v.Ff=function(a,c){if(this.fc!==o){var b=[];for(b.push(this.fc);b.length>0;){var d=b.pop();if(d.L.Cd(c))if(d.cb===o){if(!a(d.Ve))break}else b.push(d.cb),b.push(d.lc)}}};
function ae(a,c){a.Pi++;if(a.fc===o)a.fc=c,a.fc.parent=o;else{var b;b=Tb(c.L);for(var d=a.fc;d.cb!==o;)var e=d.cb,d=d.lc,d=Math.abs((e.L.lowerBound.x+e.L.upperBound.x)/2-b.x)+Math.abs((e.L.lowerBound.y+e.L.upperBound.y)/2-b.y)<Math.abs((d.L.lowerBound.x+d.L.upperBound.x)/2-b.x)+Math.abs((d.L.lowerBound.y+d.L.upperBound.y)/2-b.y)?e:d;b=d;e=b.parent;d=new Zd;d.parent=e;Vb(d.L,c.L,b.L);if(e){b.parent.cb==b?e.cb=d:e.lc=d;d.cb=b;d.lc=c;b.parent=d;for(c.parent=d;e;){if(Ub(e.L,d.L))break;Vb(e.L,e.cb.L,e.lc.L);
d=e;e=e.parent}}else d.cb=b,d.lc=c,b.parent=d,c.parent=d,a.fc=d}}function be(a,c){if(c==a.fc)a.fc=o;else{var b=c.parent,d=b.parent,e;e=b.cb==c?b.lc:b.cb;if(d){d.cb==b?d.cb=e:d.lc=e;for(e.parent=d;d;){b=d.L;e=d;var g=new Sb;Vb(g,d.cb.L,d.lc.L);e.L=g;if(Ub(b,d.L))break;d=d.parent}}else a.fc=e,e.parent=o}};function ce(){this.vc=new $d;this.Nd=[]}v=ce.prototype;v.ae=function(a,c){var b=this.vc.ae(a,c);this.Nd.push(b);return b};v.be=function(a){Ia(this.Nd,a);this.vc.be(a)};v.Ef=function(a,c,b){this.vc.Ef(a,c,b)&&this.Nd.push(a)};v.Cd=function(a,c){return this.vc.yd(a).Cd(this.vc.yd(c))};v.yd=function(a){return this.vc.yd(a)};
function de(a,c){for(var b=[],d=0;d<a.Nd.length;d++){var e=a.Nd[d];a.vc.Ff(function(a){a!=e.Ve&&b.push(new Yd(e.Ve,a));return!0},a.vc.yd(e))}a.Nd=[];for(d=0;d<b.length;){var g=b[d];c(g.se,g.te);for(d++;d<b.length;){var f=b[d];if(!(f.se==g.se&&f.te==g.te)&&!(f.se==g.te&&f.te==g.se))break;d++}}}v.Ff=function(a,c){this.vc.Ff(a,c)};function ee(){}ee.prototype.Yd=q();ee.prototype.xd=q();ee.prototype.je=q();ee.prototype.ie=q();var fe=new ee;function ge(a){this.Ra=a;this.Mb=0;this.$f=Kc;this.Kd=fe;this.fh=new Wd;this.ld=new ce}
ge.prototype.Fh=function(a,c){var b=a.v,d=c.v;if(b!=d&&d.Wb(b)&&this.$f.Wb(a,c)){for(d=d.V;d;){if(d.aa==b){var e=d.ta.M,g=d.ta.O;if(e==a&&g==c)return;if(e==c&&g==a)return}d=d.next}e=this.fh.Pb(a,c);a=e.M;c=e.O;b=a.v;d=c.v;e.Aa=o;e.w=this.Ra.V;if(this.Ra.V!=o)this.Ra.V.Aa=e;this.Ra.V=e;e.Ha.ta=e;e.Ha.aa=d;e.Ha.ia=o;e.Ha.next=b.V;if(b.V!=o)b.V.ia=e.Ha;b.V=e.Ha;e.Ia.ta=e;e.Ia.aa=b;e.Ia.ia=o;e.Ia.next=d.V;if(d.V!=o)d.V.ia=e.Ia;d.V=e.Ia;this.Ra.Mb++}};function he(a){de(a.ld,Sc(a,a.Fh))}
ge.prototype.Fc=function(a){var c=a.M.v,b=a.O.v;a.wd&&this.Kd.xd(a);if(a.Aa)a.Aa.w=a.w;if(a.w)a.w.Aa=a.Aa;if(a==this.Ra.V)this.Ra.V=a.w;if(a.Ha.ia)a.Ha.ia.next=a.Ha.next;if(a.Ha.next)a.Ha.next.ia=a.Ha.ia;if(a.Ha==c.V)c.V=a.Ha.next;if(a.Ia.ia)a.Ia.ia.next=a.Ia.next;if(a.Ia.next)a.Ia.next.ia=a.Ia.ia;if(a.Ia==b.V)b.V=a.Ia.next;this.fh.Fc(a);this.Mb--};new function(){this.position=new D(0,0);this.Nj=new D(0,0);this.wc=new D(0,0);this.id=new Uc};function ie(a,c,b){this.Lg=255*J(a,0,1);this.Kg=255*J(c,0,1);this.Jg=255*J(b,0,1)}ie.prototype.j=function(a,c,b){this.Lg=255*J(a,0,1);this.Kg=255*J(c,0,1);this.Jg=255*J(b,0,1)};function Pb(a){return a.Lg<<16|a.Kg<<8|a.Jg};var xc=Number.MIN_VALUE*Number.MIN_VALUE;function je(){this.P=new D(0,0);this.G=[];for(var a=this.na=0;a<2;a++)this.G[a]=new D(0,0)}
je.prototype.X=function(a,c,b,d,e){if(a.na!=0){var g=0,f,h,i=0,j=0,l=0,m=0,n=0;f=0;switch(a.C){case 1:h=c.d;f=a.J;g=c.position.x+h.a.x*f.x+h.b.x*f.y;c=c.position.y+h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.G[0].J;a=d.position.x+h.a.x*f.x+h.b.x*f.y;d=d.position.y+h.a.y*f.x+h.b.y*f.y;f=a-g;h=d-c;i=f*f+h*h;i>xc?(i=Math.sqrt(i),this.P.x=f/i,this.P.y=h/i):(this.P.x=1,this.P.y=0);f=c+b*this.P.y;d-=e*this.P.y;this.G[0].x=0.5*(g+b*this.P.x+(a-e*this.P.x));this.G[0].y=0.5*(f+d);break;case 2:h=c.d;f=a.Fa;i=h.a.x*f.x+h.b.x*
f.y;j=h.a.y*f.x+h.b.y*f.y;h=c.d;f=a.J;l=c.position.x+h.a.x*f.x+h.b.x*f.y;m=c.position.y+h.a.y*f.x+h.b.y*f.y;this.P.x=i;this.P.y=j;for(g=0;g<a.na;g++)h=d.d,f=a.G[g].J,n=d.position.x+h.a.x*f.x+h.b.x*f.y,f=d.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(b-(n-l)*i-(f-m)*j-e)*i,this.G[g].y=f+0.5*(b-(n-l)*i-(f-m)*j-e)*j;break;case 4:h=d.d;f=a.Fa;i=h.a.x*f.x+h.b.x*f.y;j=h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.J;l=d.position.x+h.a.x*f.x+h.b.x*f.y;m=d.position.y+h.a.y*f.x+h.b.y*f.y;this.P.x=-i;this.P.y=-j;for(g=
0;g<a.na;g++)h=c.d,f=a.G[g].J,n=c.position.x+h.a.x*f.x+h.b.x*f.y,f=c.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(e-(n-l)*i-(f-m)*j-b)*i,this.G[g].y=f+0.5*(e-(n-l)*i-(f-m)*j-b)*j}}};function ke(){}ke.prototype.j=function(a){this.Y=a.Y;this.wb=a.wb;this.Ud=a.Ud;this.Xd=a.Xd;this.hc=a.hc};function le(){this.Zb=new D(0,0);this.Q=new D(0,0);this.R=new D(0,0)};function me(){this.af=new D(0,0);this.Zb=new D(0,0);this.wc=new D(0,0);this.Td=new gc;this.Fb=new gc;this.Sa=[];for(var a=0;a<2;a++)this.Sa[a]=new le};function ne(){this.P=new D(0,0);this.jf=[];this.G=[];for(var a=0;a<2;a++)this.G[a]=new D(0,0)}
ne.prototype.X=function(a){K(a.pb>0);var c=0,b=0,d=0,e=0,g=0;switch(a.type){case 1:var f=a.U.e.d,d=a.Zb,c=a.U.e.position.x+(f.a.x*d.x+f.b.x*d.y),b=a.U.e.position.y+(f.a.y*d.x+f.b.y*d.y),f=a.W.e.d,d=a.Sa[0].Zb,e=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y),f=a.W.e.position.y+(f.a.y*d.x+f.b.y*d.y),d=e-c,g=f-b,h=d*d+g*g;h>xc?(h=Math.sqrt(h),this.P.x=d/h,this.P.y=g/h):(this.P.x=1,this.P.y=0);this.G[0].x=0.5*(c+e);this.G[0].y=0.5*(b+f);this.jf[0]=d*this.P.x+g*this.P.y-a.ug;break;case 2:f=a.U.e.d;d=a.af;this.P.x=
f.a.x*d.x+f.b.x*d.y;this.P.y=f.a.y*d.x+f.b.y*d.y;f=a.U.e.d;d=a.Zb;e=a.U.e.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.U.e.position.y+(f.a.y*d.x+f.b.y*d.y);f=a.W.e.d;for(c=0;c<a.pb;c++)d=a.Sa[c].Zb,b=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.W.e.position.y+(f.a.y*d.x+f.b.y*d.y),this.jf[c]=(b-e)*this.P.x+(d-g)*this.P.y-a.ug,this.G[c].x=b,this.G[c].y=d;break;case 4:f=a.W.e.d;d=a.af;this.P.x=f.a.x*d.x+f.b.x*d.y;this.P.y=f.a.y*d.x+f.b.y*d.y;f=a.W.e.d;d=a.Zb;e=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.W.e.position.y+
(f.a.y*d.x+f.b.y*d.y);f=a.U.e.d;for(c=0;c<a.pb;c++)d=a.Sa[c].Zb,b=a.U.e.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.U.e.position.y+(f.a.y*d.x+f.b.y*d.y),this.jf[c]=(b-e)*this.P.x+(d-g)*this.P.y-a.ug,this.G[c].j(b,d);this.P.x*=-1;this.P.y*=-1}};function oe(){this.Yi=new ke;this.$b=[]}v=oe.prototype;
v.X=function(a,c,b){b===k&&(b=0);var d;this.Yi.j(a);a=0;for(this.xe=b;this.$b.length<this.xe;)this.$b[this.$b.length]=new me;for(a=0;a<b;++a){d=c[a];var e=d.M,g=d.O,f=e.da.N,h=g.da.N,i=e.v,j=g.v,l=d.jb,m;d=e.dg;var n=g.dg;d===k&&(d=0);n===k&&(n=0);m=Math.sqrt(d*n);var p,e=e.jg,g=g.jg;e===k&&(e=0);g===k&&(g=0);p=e>g?e:g;var n=i.h.x,s=i.h.y,r=j.h.x,t=j.h.y,u=i.s,M=j.s;K(l.na>0);pe.X(l,i.e,f,j.e,h);e=pe.P.x;d=pe.P.y;g=this.$b[a];g.U=i;g.W=j;g.$i=l;g.wc.x=e;g.wc.y=d;g.pb=l.na;g.ub=m;g.Bc=p;g.af.x=l.Fa.x;
g.af.y=l.Fa.y;g.Zb.x=l.J.x;g.Zb.y=l.J.y;g.ug=f+h;g.type=l.C;for(f=0;f<g.pb;++f){m=l.G[f];h=g.Sa[f];h.Ba=m.rd;h.Dc=m.ud;h.Zb.m(m.J);m=h.Q.x=pe.G[f].x-i.c.g.x;p=h.Q.y=pe.G[f].y-i.c.g.y;var H=h.R.x=pe.G[f].x-j.c.g.x,N=h.R.y=pe.G[f].y-j.c.g.y,w=m*d-p*e,C=H*d-N*e;w*=w;C*=C;h.Td=1/(i.l+j.l+i.t*w+j.t*C);var Y=i.q*i.l+j.q*j.l;Y+=i.q*i.t*w+j.q*j.t*C;h.oi=1/Y;C=d;Y=-e;w=m*Y-p*C;C=H*Y-N*C;w*=w;C*=C;h.oj=1/(i.l+j.l+i.t*w+j.t*C);h.wf=0;m=g.wc.x*(r+-M*N-n- -u*p)+g.wc.y*(t+M*H-s-u*m);m<-1&&(h.wf+=-g.Bc*m)}if(g.pb==
2)t=g.Sa[0],r=g.Sa[1],l=i.l,i=i.t,n=j.l,j=j.t,s=t.Q.x*d-t.Q.y*e,t=t.R.x*d-t.R.y*e,u=r.Q.x*d-r.Q.y*e,r=r.R.x*d-r.R.y*e,e=l+n+i*s*s+j*t*t,d=l+n+i*u*u+j*r*r,j=l+n+i*s*u+j*t*r,e*e<100*(e*d-j*j)?(g.Fb.a.j(e,j),g.Fb.b.j(j,d),j=g.Fb,g=g.Td,i=j.a.x*j.b.y-j.b.x*j.a.y,i!==0&&(i=1/i),g.a.x=i*j.b.y,g.b.x=-i*j.b.x,g.a.y=-i*j.a.y,g.b.y=i*j.a.x):g.pb=1}};
v.Ub=function(a){for(var c=0;c<this.xe;++c){var b=this.$b[c],d=b.U,e=b.W,g=d.l,f=d.t,h=e.l,i=e.t,j=b.wc.x,l=b.wc.y,m=l,n=-j,p=0,s=0;if(a.hc){s=b.pb;for(p=0;p<s;++p){var r=b.Sa[p];r.Ba*=a.Va;r.Dc*=a.Va;var t=r.Ba*j+r.Dc*m,u=r.Ba*l+r.Dc*n;d.s-=f*(r.Q.x*u-r.Q.y*t);d.h.x-=g*t;d.h.y-=g*u;e.s+=i*(r.R.x*u-r.R.y*t);e.h.x+=h*t;e.h.y+=h*u}}else{s=b.pb;for(p=0;p<s;++p)d=b.Sa[p],d.Ba=0,d.Dc=0}}};
v.Hb=function(){for(var a=0,c,b=0,d=0,e=0,g=d=d=b=b=0,f=b=b=0,h=b=e=0,i=0,j,l=0;l<this.xe;++l){var e=this.$b[l],m=e.U,n=e.W,p=m.s,s=n.s,r=m.h,t=n.h,u=m.l,M=m.t,H=n.l,N=n.t,h=e.wc.x,w=i=e.wc.y;j=-h;f=e.ub;for(a=0;a<e.pb;a++)c=e.Sa[a],b=t.x-s*c.R.y-r.x+p*c.Q.y,d=t.y+s*c.R.x-r.y-p*c.Q.x,b=b*w+d*j,b=c.oj*-b,d=f*c.Ba,d=J(c.Dc+b,-d,d),b=d-c.Dc,g=b*w,b*=j,r.x-=u*g,r.y-=u*b,p-=M*(c.Q.x*b-c.Q.y*g),t.x+=H*g,t.y+=H*b,s+=N*(c.R.x*b-c.R.y*g),c.Dc=d;if(e.pb==1)c=e.Sa[0],b=t.x+-s*c.R.y-r.x- -p*c.Q.y,d=t.y+s*c.R.x-
r.y-p*c.Q.x,e=b*h+d*i,b=-c.Td*(e-c.wf),d=c.Ba+b,d=d>0?d:0,b=d-c.Ba,g=b*h,b*=i,r.x-=u*g,r.y-=u*b,p-=M*(c.Q.x*b-c.Q.y*g),t.x+=H*g,t.y+=H*b,s+=N*(c.R.x*b-c.R.y*g),c.Ba=d;else{c=e.Sa[0];var a=e.Sa[1],b=c.Ba,f=a.Ba,C=(t.x-s*c.R.y-r.x+p*c.Q.y)*h+(t.y+s*c.R.x-r.y-p*c.Q.x)*i,Y=(t.x-s*a.R.y-r.x+p*a.Q.y)*h+(t.y+s*a.R.x-r.y-p*a.Q.x)*i,d=C-c.wf,g=Y-a.wf;j=e.Fb;d-=j.a.x*b+j.b.x*f;for(g-=j.a.y*b+j.b.y*f;;){j=e.Td;w=-(j.a.x*d+j.b.x*g);j=-(j.a.y*d+j.b.y*g);if(w>=0&&j>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=u*(e+
h);r.y-=u*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}w=-c.Td*d;j=0;Y=e.Fb.a.y*w+g;if(w>=0&&Y>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=u*(e+h);r.y-=u*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}w=0;j=-a.Td*g;C=e.Fb.b.x*j+d;if(j>=0&&C>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=u*(e+h);r.y-=u*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*
h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}j=w=0;C=d;Y=g;if(C>=0&&Y>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=u*(e+h);r.y-=u*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}break}}m.s=p;n.s=s}};v.Cf=function(){for(var a=0;a<this.xe;++a)for(var c=this.$b[a],b=c.$i,d=0;d<c.pb;++d){var e=b.G[d],g=c.Sa[d];e.rd=g.Ba;e.ud=g.Dc}};
v.Gb=function(a){a===k&&(a=0);for(var c=0,b=0;b<this.xe;b++){var d=this.$b[b],e=d.U,g=d.W,f=e.q*e.l,h=e.q*e.t,i=g.q*g.l,j=g.q*g.t;qe.X(d);for(var l=qe.P,m=0;m<d.pb;m++){var n=d.Sa[m],p=qe.G[m],s=qe.jf[m],r=p.x-e.c.g.x,t=p.y-e.c.g.y,u=p.x-g.c.g.x,p=p.y-g.c.g.y,c=c<s?c:s,s=-n.oi*J(a*(s+0.005),-0.2,0),n=s*l.x;s*=l.y;e.c.g.x-=f*n;e.c.g.y-=f*s;e.c.n-=h*(r*s-t*n);R(e);g.c.g.x+=i*n;g.c.g.y+=i*s;g.c.n+=j*(u*s-p*n);R(g)}}return c>-0.0075};var pe=new je,qe=new ne;function re(a,c){this.kh=a;this.md=c;se(this)}function se(a){a.ob=0;a.Mb=0;a.ib=0;a.yb=[];a.nd=[];a.dc=[]}
re.prototype.ke=function(a,c,b){for(var d=0,e=0,g,d=0;d<this.ob;++d)e=this.yb[d],e.C==2&&(e.h.x+=a.Y*(c.x+e.l*e.ze.x),e.h.y+=a.Y*(c.y+e.l*e.ze.y),e.s+=a.Y*e.t*e.lg,e.h.Hc(J(1-a.Y*e.Ti,0,1)),e.s*=J(1-a.Y*e.Hi,0,1));this.md.X(a,this.nd,this.Mb);c=this.md;c.Ub(a);for(d=0;d<this.ib;++d)g=this.dc[d],g.Ub(a);for(d=0;d<a.Xd;++d){for(e=0;e<this.ib;++e)g=this.dc[e],g.Hb(a);c.Hb()}for(d=0;d<this.ib;++d)g=this.dc[d],g.Cf();c.Cf();for(d=0;d<this.ob;++d)if(e=this.yb[d],e.C!=S){var f=a.Y*e.h.x,h=a.Y*e.h.y;f*f+
h*h>4&&(E(e.h),e.h.x*=2*a.wb,e.h.y*=2*a.wb);f=a.Y*e.s;if(f*f>rc)e.s=e.s<0?-qc*a.wb:qc*a.wb;e.c.Da.m(e.c.g);e.c.sb=e.c.n;e.c.g.x+=a.Y*e.h.x;e.c.g.y+=a.Y*e.h.y;e.c.n+=a.Y*e.s;R(e)}for(d=0;d<a.Ud;++d){f=c.Gb(0.2);h=!0;for(e=0;e<this.ib;++e)g=this.dc[e],g=g.Gb(0.2),h=h&&g;if(f&&h)break}te(this,c.$b);if(b){b=Number.MAX_VALUE;c=sc*sc;for(d=0;d<this.ob;++d)if(e=this.yb[d],e.C!=S)!e.Zf||e.s*e.s>c||ic(e.h,e.h)>1.0E-4?b=e.kf=0:(e.kf+=a.Y,b=Math.min(b,e.kf));if(b>=0.5)for(d=0;d<this.ob;++d)e=this.yb[d],Jd(e,
!1)}};
re.prototype.Hf=function(a){var c=0,b=0;this.md.X(a,this.nd,this.Mb);for(var d=this.md,c=0;c<this.ib;++c)this.dc[c].Ub(a);for(c=0;c<a.Xd;++c){d.Hb();for(b=0;b<this.ib;++b)this.dc[b].Hb(a)}for(c=0;c<this.ob;++c)if(b=this.yb[c],b.C!=S){var e=a.Y*b.h.x,g=a.Y*b.h.y;e*e+g*g>4&&(E(b.h),b.h.x*=2*a.wb,b.h.y*=2*a.wb);e=a.Y*b.s;if(e*e>rc)b.s=b.s<0?-qc*a.wb:qc*a.wb;b.c.Da.m(b.c.g);b.c.sb=b.c.n;b.c.g.x+=a.Y*b.h.x;b.c.g.y+=a.Y*b.h.y;b.c.n+=a.Y*b.s;R(b)}for(c=0;c<a.Ud;++c){e=d.Gb(0.75);g=!0;for(b=0;b<this.ib;++b)var f=this.dc[b].Gb(0.2),
g=g&&f;if(e&&g)break}te(this,d.$b)};function te(a,c){if(a.kh!=o)for(var b=0;b<a.Mb;++b){for(var d=a.nd[b],e=c[b],g=0;g<e.pb;++g)ue.hj[g]=e.Sa[g].Ba,ue.nj[g]=e.Sa[g].Dc;a.kh.ie(d,ue)}}var ue=new function(){this.hj=[];this.nj=[]};function ve(a){P.call(this,a);this.A=new D(0,0);this.B=new D(0,0);this.wa=new D(0,0);this.A.m(a.Xa);this.B.m(a.Ya);this.jh=a.length;this.cg=a.Xg;this.Ki=a.Tg;this.dh=this.pd=this.i=0}z(ve,P);v=ve.prototype;v.Rb=function(){return Q(this.F,this.A)};v.Sb=function(){return Q(this.I,this.B)};
v.Ub=function(a){var c,b=0,d=this.F,e=this.I;c=d.e.d;var g=this.A.x-d.c.o.x,f=this.A.y-d.c.o.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.e.d;var h=this.B.x-e.c.o.x,i=this.B.y-e.c.o.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.wa.x=e.c.g.x+h-d.c.g.x-g;this.wa.y=e.c.g.y+i-d.c.g.y-f;b=Math.sqrt(this.wa.x*this.wa.x+this.wa.y*this.wa.y);b>0.005?this.wa.Hc(1/b):this.wa.K();c=g*this.wa.y-f*this.wa.x;var j=h*this.wa.y-i*this.wa.x;c=d.l+d.t*c*c+e.l+e.t*j*j;this.q=c!=0?1/c:0;if(this.cg>0){b-=this.jh;var j=
2*Math.PI*this.cg,l=this.q*j*j;this.pd=a.Y*(2*this.q*this.Ki*j+a.Y*l);this.pd=this.pd!=0?1/this.pd:0;this.dh=b*a.Y*l*this.pd;this.q=c+this.pd;this.q=this.q!=0?1/this.q:0}a.hc?(this.i*=a.Va,a=this.i*this.wa.x,c=this.i*this.wa.y,d.h.x-=d.l*a,d.h.y-=d.l*c,d.s-=d.t*(g*c-f*a),e.h.x+=e.l*a,e.h.y+=e.l*c,e.s+=e.t*(h*c-i*a)):this.i=0};
v.Hb=function(){var a,c=this.F,b=this.I;a=c.e.d;var d=this.A.x-c.c.o.x,e=this.A.y-c.c.o.y,g=a.a.x*d+a.b.x*e,e=a.a.y*d+a.b.y*e,d=g;a=b.e.d;var f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,g=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=g,g=-this.q*(this.wa.x*(b.h.x+-b.s*h-(c.h.x+-c.s*e))+this.wa.y*(b.h.y+b.s*f-(c.h.y+c.s*d))+this.dh+this.pd*this.i);this.i+=g;a=g*this.wa.x;g*=this.wa.y;c.h.x-=c.l*a;c.h.y-=c.l*g;c.s-=c.t*(d*g-e*a);b.h.x+=b.l*a;b.h.y+=b.l*g;b.s+=b.t*(f*g-h*a)};
v.Gb=function(){var a;if(this.cg>0)return!0;var c=this.F,b=this.I;a=c.e.d;var d=this.A.x-c.c.o.x,e=this.A.y-c.c.o.y,g=a.a.x*d+a.b.x*e,e=a.a.y*d+a.b.y*e,d=g;a=b.e.d;var f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,g=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=g,g=b.c.g.x+f-c.c.g.x-d,i=b.c.g.y+h-c.c.g.y-e;a=Math.sqrt(g*g+i*i);g/=a;i/=a;a-=this.jh;a=J(a,-0.2,0.2);var j=-this.q*a;this.wa.j(g,i);g=j*this.wa.x;i=j*this.wa.y;c.c.g.x-=c.l*g;c.c.g.y-=c.l*i;c.c.n-=c.t*(d*i-e*g);b.c.g.x+=b.l*g;b.c.g.y+=b.l*i;b.c.n+=b.t*(f*
i-h*g);R(c);R(b);return Math.abs(a)<0.005};function we(){this.bg=new ec;this.Nc=new Sb;this.da=this.w=this.v=o;this.jg=this.dg=this.df=0}v=we.prototype;v.jc=aa("Qi");v.Ag=function(a){a===k&&(a=o);a==o&&(a=new Dc);this.da.Af(a,this.df);return a};v.Pb=function(a,c,b){this.dg=b.ub;this.jg=b.Bc;this.v=a;this.w=o;this.bg=b.filter.ja();this.Qi=b.Ze;this.da=b.shape.ja();this.df=b.re};v.Fc=function(){this.da=o};v.ae=function(a,c){this.da.$d(this.Nc,c);this.Tc=a.ae(this.Nc,this)};v.be=function(a){if(this.Tc!=o)a.be(this.Tc),this.Tc=o};
function xe(a,c,b,d){if(a.Tc){var e=new Sb,g=new Sb;a.da.$d(e,b);a.da.$d(g,d);Vb(a.Nc,e,g);c.Ef(a.Tc,a.Nc,I(d.position,b.position))}};function ye(a,c){this.e=new Ec;this.c=new Dd;this.h=new D(0,0);this.ze=new D(0,0);this.ac=0;a.di&&(this.ac|=Hd);a.Lc&&(this.ac|=ze);this.Zf=a.Xh;this.xb=a.$h;a.Wh&&(this.ac|=Ae);this.Ra=c;this.e.position.m(a.position);this.e.d.j(a.bb);this.c.o.K();this.c.Ca=1;this.c.sb=this.c.n=a.bb;var b=this.e.d,d=this.c.o;this.c.g.x=b.a.x*d.x+b.b.x*d.y;this.c.g.y=b.a.y*d.x+b.b.y*d.y;this.c.g.x+=this.e.position.x;this.c.g.y+=this.e.position.y;this.c.Da.m(this.c.g);this.V=this.cf=this.la=o;this.Ji=0;this.w=this.Aa=
o;this.h.m(a.ah);this.s=a.Zh;this.Ti=a.Ei;this.Hi=a.Yh;this.ze.K();this.kf=this.lg=0;this.C=a.type;this.l=this.C==2?this.q=1:this.q=0;this.t=this.pc=0;this.Oi=a.xi;this.rc=o;this.hh=0}v=ye.prototype;v.lb=aa("e");v.Tb=function(){return this.c.n};function U(a){return a.c.g}function Be(a,c,b){a.C==2&&(a.xb==!1&&Jd(a,!0),a.h.x+=a.l*c.x,a.h.y+=a.l*c.y,a.s+=a.t*((b.x-a.c.g.x)*c.y-(b.y-a.c.g.y)*c.x))}v.Ag=function(a){a.Wc=this.q;a.ee=this.pc;a.ed.m(this.c.o)};
function Q(a,c){var b=a.e.d,b=new D(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.e.position.x;b.y+=a.e.position.y;return b}function Jd(a,c){a.xb=c;a.kf=0;if(!c)a.h.K(),a.s=0,a.ze.K(),a.lg=0}v.ic=function(){return(this.ac&Ae)==Ae};function Ce(a){De.d.j(a.c.sb);var c=De.d,b=a.c.o;De.position.x=a.c.Da.x-(c.a.x*b.x+c.b.x*b.y);De.position.y=a.c.Da.y-(c.a.y*b.x+c.b.y*b.y);b=a.Ra.Na.ld;for(c=a.rc;c;c=c.w)xe(c,b,De,a.e)}
function R(a){a.e.d.j(a.c.n);var c=a.e.d,b=a.c.o;a.e.position.x=a.c.g.x-(c.a.x*b.x+c.b.x*b.y);a.e.position.y=a.c.g.y-(c.a.y*b.x+c.b.y*b.y)}v.Wb=function(a){if(this.C!=2&&a.C!=2)return!1;for(var c=this.la;c;c=c.next)if(c.aa==a&&c.Yb.eh==!1)return!1;return!0};v.Ec=function(a){a===k&&(a=0);this.c.Ec(a);this.c.g.m(this.c.Da);this.c.n=this.c.sb;R(this)};var De=new Ec,Hd=8,ze=16,Ae=32;function Ee(){this.sg=[];this.start=this.size=0}function Fe(a,c){a.sg[a.start+a.size]=c;a.size++};function Ge(a,c){this.Na=new ge(this);this.md=new oe;this.ig=this.qd=!1;this.cf=this.la=this.V=this.gb=this.Oa=this.ef=o;this.Ji=this.ib=this.Mb=this.ob=0;this.Ii=this.Zi=!0;this.Zf=c;this.Li=a;this.ih=0;this.eg=He(this,new Fd)}var Ie=1-100*Number.MIN_VALUE;function He(a,c){K(!a.qd);var b=new ye(c,a);b.Aa=o;if(b.w=a.gb)a.gb.Aa=b;a.gb=b;a.ob++;return b}
function V(a,c){var b=c.Pb();b.Aa=o;if(b.w=a.la)a.la.Aa=b;a.la=b;a.ib++;b.Za.Yb=b;b.Za.aa=b.I;b.Za.ia=o;if(b.Za.next=b.F.la)b.F.la.ia=b.Za;b.F.la=b.Za;b.$a.Yb=b;b.$a.aa=b.F;b.$a.ia=o;if(b.$a.next=b.I.la)b.I.la.ia=b.$a;b.I.la=b.$a;var d=c.U,e=c.W;if(!c.Of)for(e=e.V;e;){if(e.aa==d)e.ta.Ue=!0;e=e.next}return b}
function Je(a,c,b,d){if(a.ig)he(a.Na),a.ig=!1;a.qd=!0;var e=new ke;e.Y=c;e.Xd=b;e.Ud=d;e.wb=c>0?1/c:0;e.Va=a.ih*c;e.hc=a.Zi;c=a.Na;for(b=c.Ra.V;b;){var d=b.M,g=b.O,f=d.v,h=g.v;if(f.xb==!1&&h.xb==!1)b=b.w;else{if(b.Ue){if(h.Wb(f)==!1){d=b;b=d.w;c.Fc(d);continue}if(c.$f.Wb(d,g)==!1){d=b;b=d.w;c.Fc(d);continue}b.Ue=!1}c.ld.Cd(d.Tc,g.Tc)==!1?(d=b,b=d.w,c.Fc(d)):(Id(b,c.Kd),b=b.w)}}if(e.Y>0)a.ke(e),a.Ii&&e.Y>0&&a.Hf(e),a.ih=e.wb;a.qd=!1}
Ge.prototype.ke=function(a){for(var c=this.cf;c;c=c.w)Je(c,a);for(var c=new re(this.Na.Kd,this.md),b=this.gb;b;b=b.w)b.ga=!1;for(var d=this.V;d;d=d.w)d.ga=!1;for(d=this.la;d;d=d.w)d.ga=!1;for(d=this.gb;d;d=d.w)if(!d.ga&&d.xb&&d.ic()&&d.C!=S){se(c);var e=[];e.push(d);for(d.ga=!0;e.length>0;){var b=e.pop(),g=c,f=b;f.Ri=g.ob;g.yb[g.ob++]=f;b.xb||Jd(b,!0);if(b.C!=S){for(g=b.V;g;g=g.next)if(!g.ta.ga&&!g.ta.jc()&&g.ta.enabled!=!1&&g.ta.wd&&(f=g.ta,c.nd[c.Mb++]=f,g.ta.ga=!0,!g.aa.ga))e.push(g.aa),g.aa.ga=
!0;for(b=b.la;b;b=b.next)if(!b.Yb.ga&&b.aa.ic()&&(g=b.Yb,c.dc[c.ib++]=g,b.Yb.ga=!0,!b.aa.ga))e.push(b.aa),b.aa.ga=!0}}c.ke(a,this.Li,this.Zf)}for(b=this.gb;b;b=b.w)b.xb&&b.ic()&&b.C!=S&&Ce(b);he(this.Na)};
Ge.prototype.Hf=function(a){for(var c,b,d=new re(this.Na.Kd,this.md),e=this.gb;e;e=e.w)e.ga=!1,e.c.Ca=0;for(b=this.V;b;b=b.w)b.ga=!1,b.Qd=o;for(b=this.la;b;b=b.w)b.ga=!1;for(;;){c=o;b=1;for(e=this.V;e;e=e.w)if(!(e.jc()||e.enabled==!1||!e.Pf||(e.M.v.C!=2||!e.M.v.xb)&&(e.O.v.C!=2||!e.O.v.xb))){var g=1;if(e.Qd!=o)g=e.Qd;else{if(e.wd)g=1;else{var f=e.M.v.c.Ca;if(e.M.v.c.Ca<e.O.v.c.Ca)f=e.O.v.c.Ca,e.M.v.c.Ec(f);else if(e.O.v.c.Ca<e.M.v.c.Ca)f=e.M.v.c.Ca,e.O.v.c.Ec(f);var g=e,h=e.M.v.c,i=e.O.v.c;Kd.zc.j(g.M.da);
Kd.Ac.j(g.O.da);Kd.xh=h;Kd.yh=i;Kd.pj=0.005;var j=Kd;sd++;var g=j.zc,h=j.Ac,i=j.xh,l=j.yh;K(i.Ca==l.Ca);K(1-i.Ca>Number.MIN_VALUE);var m=g.N+h.N,j=j.pj,n=0,p=0,s=0;xd.count=0;for(yd.Bh=!1;;){i.lb(zd,n);l.lb(Ad,n);yd.zc=g;yd.Ac=h;yd.uf=zd;yd.vf=Ad;wc(Cd,xd,yd);if(Cd.hd<=0){n=1;break}Bd.X(xd,g,zd,h,Ad);var r=Bd.Qb(zd,Ad);if(r<=0){n=1;break}p==0&&(s=r>m?Math.max(m-j,0.75*m):Math.max(r-j,0.02*m));if(r-s<0.5*j){if(p==0){n=1;break}break}var t=n,u=n,M=1;i.lb(zd,M);l.lb(Ad,M);var H=Bd.Qb(zd,Ad);if(H>=s){n=
1;break}for(var N=0;;){var w=0,w=N&1?u+(s-r)*(M-u)/(H-r):0.5*(u+M);i.lb(zd,w);l.lb(Ad,w);var C=Bd.Qb(zd,Ad);if(Math.abs(C-s)<0.025*j){t=w;break}C>s?(u=w,r=C):(M=w,H=C);N++;vd++;if(N==50)break}wd=Math.max(wd,N);if(t<(1+100*Number.MIN_VALUE)*n)break;n=t;p++;td++;if(p==1E3)break}ud=Math.max(ud,p);g=n;K(0<=g&&g<=1);g>0&&g<1&&(g=(1-g)*f+g)}e.Qd=g}Number.MIN_VALUE<g&&g<b&&(c=e,b=g)}if(c===o||Ie<b)break;Ke.j(c.M.v.c);Le.j(c.O.v.c);c.M.v.Ec(b);c.O.v.Ec(b);Id(c,this.Na.Kd);c.Qd=o;if(c.jc()||c.enabled==!1)c.M.v.c.j(Ke),
c.O.v.c.j(Le),R(c.M.v),R(c.O.v);else if(c.wd){e=c.M.v;if(e.C!=2)e=c.O.v;se(d);c=new Ee;Fe(c,e);for(e.ga=!0;c.size>0;)if(e=c,f=e.sg[e.start],e.sg[e.start]=o,e.size--,e.start++,e=f,f=d,g=e,g.Ri=f.ob,f.yb[f.ob++]=g,e.xb||Jd(e,!0),e.C==2){for(f=e.V;f;f=f.next){if(d.Mb==32)break;if(!f.ta.ga&&!f.ta.jc()&&f.ta.enabled!=!1&&f.ta.wd&&(g=f.ta,d.nd[d.Mb++]=g,f.ta.ga=!0,!f.aa.ga))f.aa.C!=S&&(f.aa.Ec(b),Jd(f.aa,!0),Fe(c,f.aa)),f.aa.ga=!0}for(e=e.la;e;e=e.next)if(d.ib!=32&&!e.Yb.ga&&e.aa.ic()&&(f=e.Yb,d.dc[d.ib++]=
f,e.Yb.ga=!0,!e.aa.ga))e.aa.C!=S&&(e.aa.Ec(b),Jd(e.aa,!0),Fe(c,e.aa)),e.aa.ga=!0}c=new ke;c.hc=!1;c.Y=(1-b)*a.Y;c.wb=1/c.Y;c.Va=0;c.Xd=a.Xd;c.Ud=a.Ud;d.Hf(c);for(b=0;b<d.ob;b++)if(d.yb[b].ga=!1,d.yb[b].xb&&d.yb[b].C==2){Ce(d.yb[b]);for(f=d.yb[b].V;f;f=f.next)f.ta.Qd=o}for(b=0;b<d.Mb;b++)d.nd[b].ga=!1,d.nd[b].Qd=o;for(b=0;b<d.ib;b++)d.dc[b].ga=!1;he(this.Na)}}};
function Me(a,c,b,d){if(c instanceof Pd)a.Oa.Ih(G(b,c.ca),c.N,b.d.a,d);else if(c instanceof O){for(var e=0,g=c.Bg(),c=c.r,f=[],e=0;e<g;e++)f[e]=G(b,c[e]);a.Oa.Jh(f,g,d)}}var Qb=new Ec,Ke=new Dd,Le=new Dd,Ne=new ie(0.5,0.8,0.8);function Oe(a){this.Fg=Pe++;this.position=a.ja();this.bb=0;this.yg=[];this.me=[];this.Zd=[];this.body=o}var Pe=0;function Qe(a,c,b){this.tg=[];this.Ea=[];this.Jj=0;this.qg={};this.ua=a;this.ab=new D(c.x,c.y);this.pa=new Ge(b,!0);this.pa.Na.$f=this;this.pa.Na.Kd=this;this.top=W(this,new D(this.ab.x+5,5),new D(this.ab.x/2,-2.5),!1,o,{ub:0});this.bottom=W(this,new D(this.ab.x+5,5),new D(this.ab.x/2,this.ab.y+2.5),!1,o,{ub:0});this.left=W(this,new D(5,this.ab.y+5),new D(-2.5,this.ab.y/2),!1,o,{ub:0});this.right=W(this,new D(5,this.ab.y+5),new D(this.ab.x+2.5,this.ab.y/2),!1,o,{ub:0})}v=Qe.prototype;
v.update=function(a,c){Je(this.pa,c,Re,Re);for(var b=this.pa.gb;b;b=b.w)b.ze.K(),b.lg=0;b=this.tg;this.tg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};v.Wb=function(a,c){if(!a.jc()&&!c.jc())for(var b=0;b<this.Ea.length;b++)if(this.Ea[b].Wb&&!this.Ea[b].Wb(a,c))return!1;return Jc.prototype.Wb(a,c)};
v.Yd=function(a){for(var c=a.M,b=c.v,d=b.object,e=a.O,g=e.v,f=g.object,h=0;h<d.me.length;h++)d.me[h](a,d,b,c,f,g,e);for(h=0;h<f.me.length;h++)f.me[h](a,f,g,e,d,b,c);for(h=0;h<this.Ea.length;h++)if(this.Ea[h].Gg&&this.Ea[h].Gg(a),a.disabled)a.enabled=!1;for(h=0;h<d.Zd.length;h++)d.Zd[h](a,d,b,c,f,g,e);for(h=0;h<f.Zd.length;h++)f.Zd[h](a,f,g,e,d,b,c);for(h=0;h<this.Ea.length;h++)this.Ea[h].Yd&&this.Ea[h].Yd(a)};
v.xd=function(a){for(var c=0;c<this.Ea.length;c++)this.Ea[c].xd&&this.Ea[c].xd(a);a.disabled=!1;a.enabled=!0};v.je=function(a,c){if(a.disabled)a.enabled=!1;for(var b=0;b<this.Ea.length;b++)this.Ea[b].je&&this.Ea[b].je(a,c)};v.ie=function(a,c){for(var b=0;b<this.Ea.length;b++)this.Ea[b].ie&&this.Ea[b].ie(a,c)};function X(a,c,b,d){d=d||0;a=Se(a,c,b,!0);a.display.Eh=-10+d;return a}function W(a,c,b,d,e,g){e=e||{};e.type=S;return Te(a,c,b,d,{xa:e,oc:g})}
function Te(a,c,b,d,e){var g=new O;Ic(g,c.x/2,c.y/2);return a.Ib(c,b,d,g,e)}function Ue(a,c,b){var d=new O,e=new D(c.x/2,c.y/2);Hc(d,[new D(0,e.y),new D(-e.x+0.01,e.y-0.01),new D(-e.x,0),new D(-e.x+0.01,-e.y+0.01),new D(0,-e.y),new D(e.x-0.01,-e.y+0.01),new D(e.x,0),new D(e.x-0.01,e.y-0.01)]);return a.Ib(c,b,!0,d,{xa:{Lc:!0},oc:{Bc:0}})}function Ve(a,c){a.pa.qd?a.tg.push(c):c.apply(a)}
v.Ib=function(a,c,b,d,e){var g=Se(this,a,c,b);Ve(this,function(){var a=e,a=a||{},b=We(a.xa,Xe),i=new Fd;i.type=b.type;i.bb=b.bb;i.Lc=b.Lc;i.position=c;b=He(this.pa,i);a=Ye(b,d,a);g.body=b;g.Ve=a;b.object=g});return g};function Se(a,c,b,d){b=new Oe(b);a.qg[b.Fg]=b;d!==!1&&bc(b,c);return b}
function Ye(a,c,b){var b=b||{},d=We(b.oc,Ze),b=new fc;b.re=d.re;b.ub=d.ub;b.Bc=d.Bc;b.Ze=d.Ze;b.shape=c;K(!a.Ra.qd);c=new we;c.Pb(a,a.e,b);a.ac&Ae&&c.ae(a.Ra.Na.ld,a.e);c.w=a.rc;a.rc=c;a.hh++;c.v=a;if(c.df>0&&(a.q=0,a.l=0,a.pc=0,a.t=0,a.c.o.K(),!(a.C==S||a.C==1))){b=new D(0,0);for(d=a.rc;d;d=d.w)if(d.df!=0){var e=d.Ag();a.q+=e.Wc;b.x+=e.ed.x*e.Wc;b.y+=e.ed.y*e.Wc;a.pc+=e.ee}a.q>0?(a.l=1/a.q,b.x*=a.l,b.y*=a.l):(a.q=1,a.l=1);a.pc>0&&(a.ac&ze)==0?(a.pc-=a.q*(b.x*b.x+b.y*b.y),a.pc*=a.Oi,K(a.pc>0),a.t=
1/a.pc):(a.pc=0,a.t=0);d=a.c.g.ja();a.c.o.m(b);a.c.Da.m(G(a.e,a.c.o));a.c.g.m(a.c.Da);a.h.x+=a.s*-(a.c.g.y-d.y);a.h.y+=a.s*+(a.c.g.x-d.x)}a.Ra.ig=!0;return c}
function $e(a,c){Ve(a,function(){if(c.body){var a=this.pa,d=c.body;K(!a.qd);for(var e=d.la;e;){var g=e,e=e.next;a.ef&&a.ef.zj(g.Yb);var f=a,h=g.Yb,i=h.eh;if(h.Aa)h.Aa.w=h.w;if(h.w)h.w.Aa=h.Aa;if(h==f.la)f.la=h.w;var g=h.F,j=h.I;Jd(g,!0);Jd(j,!0);if(h.Za.ia)h.Za.ia.next=h.Za.next;if(h.Za.next)h.Za.next.ia=h.Za.ia;if(h.Za==g.la)g.la=h.Za.next;h.Za.ia=o;h.Za.next=o;if(h.$a.ia)h.$a.ia.next=h.$a.next;if(h.$a.next)h.$a.next.ia=h.$a.ia;if(h.$a==j.la)j.la=h.$a.next;h.$a.ia=o;h.$a.next=o;f.ib--;if(!i)for(f=
j.V;f;){if(f.aa==g)f.ta.Ue=!0;f=f.next}}for(e=d.cf;e;)f=e,e=e.Ij,f.Aj.xj(d);for(e=d.V;e;)f=e,e=e.next,a.Na.Fc(f.ta);d.V=o;for(e=d.rc;e;)f=e,e=e.w,a.ef&&a.ef.yj(f),f.be(a.Na.ld),f.Fc();d.rc=o;d.hh=0;if(d.Aa)d.Aa.w=d.w;if(d.w)d.w.Aa=d.Aa;if(d==a.gb)a.gb=d.w;a.ob--}delete this.qg[c.Fg]})}
function af(a,c,b){Ve(a,function(){if(c.body){var a=c.body,e=a.Tb();K(!a.Ra.qd);a.e.d.j(e);a.e.position.m(b);var g=a.e.d,f=a.c.o;a.c.g.x=g.a.x*f.x+g.b.x*f.y;a.c.g.y=g.a.y*f.x+g.b.y*f.y;a.c.g.x+=a.e.position.x;a.c.g.y+=a.e.position.y;a.c.Da.m(a.c.g);a.c.sb=a.c.n=e;e=a.Ra.Na.ld;for(g=a.rc;g;g=g.w)xe(g,e,a.e,a.e);he(a.Ra.Na)}else c.position=b.ja()})}var Re=10,Ze={re:0.1,ub:0.6,Bc:0.01,Ze:!1},Xe={Lc:!1,bb:0,type:2};
function We(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===k||a[d]===o?c[d]:a[d];return b};function bf(a){this.ua=a}function cf(a,c,b,d,e){var g=new D(4,4);bc(c.body,b);F(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.tf=new Rb("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,g,e);c.display.kc={};c.display.kc.Ej=e;c.display.kc.qi=4;c.display.kc.Mc=0;c.display.kc.nb={n:df,x:df,y:ef};a=a.ua.Ng;c.yg.push(ff);a=a.xg;Ha(a,c)>=0||a.push(c)}var df=0,ef=2;
function ff(a,c){var b=this.display.kc;b.Mc+=c;var d=new D(1,1),e=this.body.h,g=Math.abs(e.x),f=Math.abs(e.y);if(f<0.01||g>=f){if(e.x>0.01){if(b.nb.x=df,b.nb.n!=df)b.nb.n=df,b.Mc=0}else if(e.x<-0.01){if(b.nb.x=1,b.nb.n!=1)b.nb.n=1,b.Mc=0}else b.Mc=0;d.y=b.nb.x==1?4:2}else if(e.y>0.01){b.nb.y=3;if(b.nb.n!=3)b.nb.n=3,b.Mc=0;d.y=3}else{b.nb.y=ef;if(b.nb.n!=ef)b.nb.n=ef,b.Mc=0;d.y=1}d.x=b.Mc==0?1:Math.floor(b.Mc*b.qi);b=this.display.tf;b.qb=d.ja();b.qb.x%=b.rf.x;b.qb.y%=b.rf.y;if(b.qb.x===0)b.qb.x=b.rf.x;
if(b.qb.y===0)b.qb.y=b.rf.y};function gf(){this.xg=[]};function hf(a,c,b,d,e,g,f){this.Zc=a;this.paused=!1;this.Oe=0;this.Ng=new gf;this.kc=new bf(this);this.p=new Qe(this,b,d);this.viewport=new Wb(this,c,g,e,f)}function jf(a){if(a.Zg===o)a.Zg=new Date;var c=new Date-a.Zg>=5E3;Eb>0&&!c?setTimeout(function(){jf(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
hf.prototype.update=function(a,c){if(this.paused)this.Oe=0,Zb(this.viewport.sh),this.Zc.yf&&this.Zc.yf(a,c);else{this.Zc.of&&this.Zc.of(a,c);for(var b=this.Ng,d=0;d<b.xg.length;d++)for(var e=b.xg[d],g=0;g<e.yg.length;g++)e.yg[g].apply(e,[a,c]);this.Oe+=c;for(b=a-this.Oe;this.Oe>=0.015;)this.Oe-=0.015,b+=0.015,this.Zc.jj&&this.Zc.jj(b,0.015),this.p.update(b,0.015);this.Zc.nf&&this.Zc.nf(a,c);ac(this.viewport.sh);b=this.viewport;b.display.style.visibility="hidden";if(b.$e.x!=b.ya.x||b.$e.y!=b.ya.y){b.$e.x=
b.ya.x;b.$e.y=b.ya.y;if(b.fb!==o)b.fb.style.left="-"+(b.ya.x*b.scale-b.Db.x/2)+"px",b.fb.style.top="-"+(b.ya.y*b.scale-b.Db.y/2)+"px";b.display.style.left="-"+(b.ya.x*b.scale-b.Db.x/2)+"px";b.display.style.top="-"+(b.ya.y*b.scale-b.Db.y/2)+"px";d=b.xf;e=b.ya;g=Tb(d);d.lowerBound.If(g);d.upperBound.If(g);d.lowerBound.Nb(e);d.upperBound.Nb(e)}var d=[],f;for(f in b.nc)d[f]=b.nc[f];f=b.xf;var e=b.ua.p.qg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,l=i.si(b.ya),m=j.size;j.L.lowerBound.j(l.x-
m.x,l.y-m.y);j.L.upperBound.j(l.x+m.x,l.y+m.y);if(f.Cd(j.L)){if(j.$c==o)j.$c=cc++;delete d[j.$c];if(b.nc[j.$c]==o)b.nc[j.$c]=document.createElement("span"),b.nc[j.$c].className="gameObject",b.nc[j.$c].style.zIndex=100+(j.Eh||0),b.display.appendChild(b.nc[j.$c]);var g=b.nc[j.$c],n=Gb(g),p=b.scale!=n.scale;n.scale=b.scale;var s=l.x-m.x/2;if(p||n.left!=s)n.left=s,g.style.left=s*b.scale+"px";l=l.y-m.y/2;if(p||n.top!=l)n.top=l,g.style.top=l*b.scale+"px";l=m.x;if(p||n.width!=l)n.width=l,g.style.width=l*
b.scale+"px";m=m.y;if(p||n.height!=m)n.height=m,g.style.height=m*b.scale+"px";i=i.ri();if(n.rotation!=i)n.rotation=i,g.style.webkitTransform="rotate("+i+"rad)";if(j.tf!=o){j=j.tf;n=!1;i=Gb(g);if(i.ai!=j.url)i.ai=j.url,g.style.backgroundImage="url("+j.url+")",g.style.backgroundColor="transparent",n=!0;else if(i.bi!=j.qb.x||i.ci!=j.qb.y)n=!0;if(n)i.bi=j.qb.x,i.ci=j.qb.y,g.style.backgroundPosition=(j.rh.x+(j.qb.x-1)*j.zh.x)*-1+"px "+(j.rh.y+(j.qb.y-1)*j.zh.y)*-1+"px"}}}}for(var r in d)b.display.removeChild(d[r]),
delete b.nc[r];if(b.fb!==o){b.fb.style.visibility="hidden";h=b.ua.p.pa;if(h.Oa!==o){h.Oa.Xi.ti.clear();r=h.Oa.gh;if(r&Ib){e=new ie(0.5,0.5,0.3);g=new ie(0.5,0.9,0.5);j=new ie(0.5,0.5,0.9);n=new ie(0.6,0.6,0.6);i=new ie(0.9,0.7,0.7);for(d=h.gb;d;d=d.w)for(f=d.rc;f;f=f.w)p=f.da,d.ic()?d.C==S?Me(h,p,d.e,g):d.C==1?Me(h,p,d.e,j):d.xb?Me(h,p,d.e,i):Me(h,p,d.e,n):Me(h,p,d.e,e)}if(r&Jb)for(d=h.la;d;d=d.w)f=h,e=d,e instanceof ve?f.Oa.Gc(e.Rb(),e.Sb(),Ne):e instanceof Mc?(f.Oa.Gc(Oc(e),e.Rb(),Ne),f.Oa.Gc(Pc(e),
e.Sb(),Ne),f.Oa.Gc(Oc(e),Pc(e),Ne)):(e.F!=f.eg&&f.Oa.Gc(e.F.e.position,e.Rb(),Ne),f.Oa.Gc(e.Rb(),e.Sb(),Ne),e.I!=f.eg&&f.Oa.Gc(e.I.e.position,e.Sb(),Ne));if(r&Nb)for(d=h.cf;d;d=d.w)d.uj(h.Oa);if(r&Lb){d=new ie(0.3,0.9,0.9);for(f=h.Na.V;f;f=f.w)h.Oa.Gc(Tb(f.M.Nc),Tb(f.O.Nc),d)}if(r&Kb){e=new ie(0,0,0.8);for(d=h.gb;d;d=d.w)if(d.ic())for(f=d.rc;f;f=f.w)g=h.Na.ld.yd(f.Tc),h.Oa.Hh([new D(g.lowerBound.x,g.lowerBound.y),new D(g.upperBound.x,g.lowerBound.y),new D(g.upperBound.x,g.upperBound.y),new D(g.lowerBound.x,
g.upperBound.y)],e)}if(r&Mb)for(d=h.gb;d;d=d.w)Qb.d=d.e.d,Qb.position=U(d),h.Oa.Kh()}b.fb.style.visibility=""}b.display.style.visibility=""}};hf.prototype.start=function(){ac(this.viewport.Xf);var a=kf;Ha(a,this)>=0||a.push(this);lf||(mf=document.getElementById("fps"),lf=!0,nf())};var lf=!1,kf=[],of=60,pf=o,mf=o;
function nf(a){a==o&&(a=(new Date).getTime());var c=0;pf!==o?c=(a-pf)/1E3:pf=a;if(c>0){c>0.2&&(c=0.2);if(mf){var b=1/c;of=of*0.99+b*0.01;mf.innerHTML=Math.round(b)+" - "+Math.round(of)}pf=a;for(b=0;b<kf.length;b++)kf[b].update(a,c);for(var d in wb)wb[d].Dh=!0;rb=qb;tb=sb;vb=ub}dc(nf,document.body)};function qf(){this.type=0;this.W=this.U=this.Ch=o;this.Of=!1};function rf(){qf.call(this);this.We=new D(0,0);this.Xe=new D(0,0);this.Xa=new D(0,0);this.Ya=new D(0,0);this.type=4;this.We.j(-1,1);this.Xe.j(1,1);this.Xa.j(-1,0);this.Ya.j(1,0);this.ph=this.Wf=this.oh=this.Vf=0;this.Xc=1;this.Of=!0}z(rf,qf);
rf.prototype.X=function(a,c,b,d,e,g,f){f===k&&(f=0);this.U=a;this.W=c;this.We.m(b);this.Xe.m(d);this.Xa=nc(this.U.e,e);this.Ya=nc(this.W.e,g);a=e.x-b.x;b=e.y-b.y;this.Vf=Math.sqrt(a*a+b*b);b=g.x-d.x;d=g.y-d.y;this.Wf=Math.sqrt(b*b+d*d);this.Xc=f;f=this.Vf+this.Xc*this.Wf;this.oh=f-this.Xc*Nc;this.ph=(f-Nc)/this.Xc};rf.prototype.Pb=function(){return new Mc(this)};function sf(a,c,b){this.execute=a;this.name=c;this.pi=b};function Z(a){this.ua=a;this.ua.p.Ea.push(this)}
Z.prototype.mc=function(a,c){var b=Ue(this.ua.p,a,c);Z.Ai(b);Z.Ci(b);Z.Bi(b);var d=new O,e=new D(a.x/2,a.y/2);Gc(d,[new D(-e.x+0.01,e.y-0.01),new D(-e.x-0.01,0),new D(-e.x+0.01,-e.y+0.01),new D(e.x-0.01,-e.y+0.01),new D(e.x+0.01,0),new D(e.x-0.01,e.y-0.01)]);b.Bj=Ye(b.body,d,{oc:{ub:0}});b.Ua={};b.Ua.pg=new sf(function(){b.f.Wa.Di()},"Move Up",!0);b.Ua.og=new sf(q(),"Move Down",!0);b.Ua.He=new sf(function(){b.f.Sd.He()},"Move Left",!0);b.Ua.Ie=new sf(function(){b.f.Sd.Ie()},"Move Right",!0);return b};
(function(a){a.mb=0.1;a.tj=new D(0,9.8);a.ad={Df:new D(0,9.8),Mh:1.5,Eg:8,Qh:1};a.Vb={Gh:1,Lh:2,Oh:4,sj:8,zg:16,Cg:32,Bf:64};a.Nh={Ph:1,rj:2,vj:4};a.fa={le:1,zd:2,Ob:4,Ad:8};a.Uf=function(c,b){c.f=c.f||{};c.f.type|=a.Vb.Gh;c.f.Se={gj:b&a.fa.le,dj:b&a.fa.Ob,ej:b&a.fa.zd,fj:b&a.fa.Ad};c.me.push(function(b,c){if(!b.disabled){b.disabled=!0;var g=new je;Gd(b,g);g=g.P;if(!c.f.Se.gj&&g.y>a.mb)b.disabled=!1;else if(!c.f.Se.dj&&g.y<-a.mb)b.disabled=!1;else if(!c.f.Se.fj&&g.x>a.mb)b.disabled=!1;else if(!c.f.Se.ej&&
g.x<-a.mb)b.disabled=!1}})};a.Ai=function(c){var b=Z.ad.Eg;c.f=c.f||{};c.f.type|=a.Vb.Lh;c.f.Wa={vb:[],sf:b,Di:function(){var b=c.f.Wa.vb;if(b.length>0){var e=c.body.q*c.f.Wa.sf*a.ad.Mh,g=U(c.body),f=c.body.h;f.y=0;var h=c.body;h.C!=S&&h.h.m(f);Be(c.body,new D(0,-e),g);for(f=0;f<b.length;f++)Be(b[f].body,new D(0,e/b.length),g)}}};c.Zd.push(function(b,c,g,f,h,i){if(!b.disabled&&(g=new je,Gd(b,g),g.P.y>a.mb)){g=!1;for(f=0;f<c.f.Wa.vb.length;f++)if(c.f.Wa.vb[f].body==i){c.f.Wa.vb[f].count++;g=!0;break}g||
c.f.Wa.vb.push({body:i,count:1});b.vd=b.vd||[];b.vd.push({Wa:c,ui:i})}})};a.Ci=function(c){var b=Z.ad.Eg,d=Z.ad.Qh;c.f=c.f||{};c.f.type|=a.Vb.Oh;c.f.Sd={Mg:d,sf:b,Ie:function(){var a=c.body.h,a=Math.min(a.x+c.f.Sd.Mg,c.f.Sd.sf)-a.x;a>0&&Be(c.body,new D(c.body.q*a,0),U(c.body))},He:function(){var a=c.body.h,a=Math.max(a.x-c.f.Sd.Mg,-c.f.Sd.sf)-a.x;a<0&&Be(c.body,new D(c.body.q*a,0),U(c.body))}}};a.Fd=function(c,b,d,e){c.f=c.f||{};c.f.type|=a.Vb.Bf;c.f.u=c.f.u||{};if(d&a.fa.le)c.f.u.Tf=!0,c.f.u.Me=
c.f.u.Me||[],c.f.u.Me.push(b);if(d&a.fa.Ob)c.f.u.Tf=!0,c.f.u.ne=c.f.u.ne||[],c.f.u.ne.push(b);if(d&a.fa.zd)c.f.u.Tf=!0,c.f.u.ue=c.f.u.ue||[],c.f.u.ue.push(b);if(d&a.fa.Ad)c.f.u.Tf=!0,c.f.u.Ke=c.f.u.Ke||[],c.f.u.Ke.push(b);if(e&a.fa.le)c.f.u.Ye=!0,c.f.u.Ne=c.f.u.Ne||[],c.f.u.Ne.push(b);if(e&a.fa.Ob)c.f.u.Ye=!0,c.f.u.oe=c.f.u.oe||[],c.f.u.oe.push(b);if(e&a.fa.zd)c.f.u.Ye=!0,c.f.u.ve=c.f.u.ve||[],c.f.u.ve.push(b);if(e&a.fa.Ad)c.f.u.Ye=!0,c.f.u.Le=c.f.u.Le||[],c.f.u.Le.push(b)};a.zi=function(c,b){c.f=
c.f||{};c.f.type|=a.Vb.zg;c.f.Rf={lj:b,filter:0}};a.Bi=function(c){var b=Z.Nh.Ph;c.f=c.f||{};c.f.type|=a.Vb.Cg;c.f.Fi={filter:b}};a.prototype.Wb=o;a.prototype.Gg=o;a.prototype.Yd=function(a){if(!a.disabled){var b=a.M.v.object,d=a.O.v.object;b&&d&&(b.f&&this.Hg(a,b,d),d.f&&this.Hg(a,d,b))}};a.prototype.Hg=function(c,b,d){if(b.f.type&a.Vb.Bf){var e=new je;Gd(c,e);e=e.P;if(e.y>a.mb&&b.f.u.Me)for(var g=0;g<b.f.u.Me.length;g++)b.f.u.Me[g](c);else if(e.y<-a.mb&&b.f.u.ne)for(g=0;g<b.f.u.ne.length;g++)b.f.u.ne[g](c);
if(e.x>a.mb&&b.f.u.ue)for(g=0;g<b.f.u.ue.length;g++)b.f.u.ue[g](c);else if(e.x<-a.mb&&b.f.u.Ke)for(g=0;g<b.f.u.Ke.length;g++)b.f.u.Ke[g](c)}b.f.type&a.Vb.zg&&d.f&&d.f.type&a.Vb.Cg&&(b.f.Rf.filter==0||b.f.Rf.filter&d.f.Fi.filter)&&af(this.ua.p,d,b.f.Rf.lj)};a.prototype.xd=function(a){if(a.vd){for(var b=0;b<a.vd.length;b++){for(var d=a.vd[b].Wa,e=a.vd[b].ui,g=[],f=0;f<d.f.Wa.vb.length;f++)d.f.Wa.vb[f].body==e?(d.f.Wa.vb[f].count--,d.f.Wa.vb[f].count>0&&g.push(d.f.Wa.vb[f])):g.push(d.f.Wa.vb[f]);d.f.Wa.vb=
g}a.vd=o}if(!a.disabled)b=a.M.v.object,d=a.O.v.object,b&&d&&(b.f&&this.Ig(a,b),d.f&&this.Ig(a,d))};a.prototype.Ig=function(c,b){if(b.f.type&a.Vb.Bf&&b.f.u.Ye){var d=new je;Gd(c,d);d=d.P;if(d.y>a.mb&&b.f.u.Ne)for(var e=0;e<b.f.u.Ne.length;e++)b.f.u.Ne[e](c);else if(d.y<-a.mb&&b.f.u.oe)for(e=0;e<b.f.u.oe.length;e++)b.f.u.oe[e](c);if(d.x>a.mb&&b.f.u.ve)for(e=0;e<b.f.u.ve.length;e++)b.f.u.ve[e](c);else if(d.x<-a.mb&&b.f.u.Le)for(e=0;e<b.f.u.Le.length;e++)b.f.u.Le[e](c)}};a.prototype.je=o;a.prototype.ie=
o;a.prototype.eb=function(a,b){return W(this.ua.p,a,b,!0)};a.prototype.Qf=function(c,b){var d,e=W(this.ua.p,c,b,!0,o,o);if(d===k||d===o)d=a.fa.Ob|a.fa.zd|a.fa.Ad;a.Uf(e,d)};a.prototype.yi=function(c,b){var d=this;a.Fd(c,function(){$e(d.ua.p,c)},b,o)};a.prototype.qe=function(c,b){var d,e=W(this.ua.p,c,b,!0,o,o);if(d===k||d===o)d=a.fa.Ob;this.yi(e,d);return e};a.prototype.fi=function(c,b,d){c=W(this.ua.p,c,b,!0,o,o);a.zi(c,d);return c}})(Z);var tf={};
(function(a){var c,b=new D(350,30),d=new D(600,300),e,g,f,h,i=new D(0,454),j=new D(178,326),l=new D(2,124),m=new D(354,54),n=new D(0,58),p=new D(290,54),s=new D(178,326),r=new D(0,0),t=new D(32,84),u=new D(354,54),M=new D(0,90),H=new D(0,0),N=new D(2,158),w=new D(158,388),C=new D(190,388),Y=new D(158,356),Mf=new D(190,356),Nf=new D(158,356),Of=new D(190,356),Pf=new D(55,380),Qf=new D(10,396),Rf=new D(466,168),Sf=new D(452,136),Tf=new D(466,104),Uf=new D(300,424),Vf=new D(300,352),Wf=new D(364,424),
Xf=new D(364,384),Yf=new D(332,352),Zf=new D(332,320),$f=new D(396,352),ag=new D(396,320),bg=new D(364,352),cg=new D(362,264),dg=new D(160,64);a.Xb=function(c,e,g){f=new hf(a,c,b,Z.ad.Df,d,20,e);h=new Z(f);c=new D(5,b.y-7);a.mc(c,g);a.Sg(f,h,new D(0,b.y),c);g=X(f.p,new D(d.x/20,d.y/20),new D(0,0),-1);F(g,"graphics/sky.png");g.display.mf=1;jf(f)};a.mc=function(a,b){var d=new D(0,0),i=new D(21,47),j=new D(i.x/20,i.y/20);c=h.mc(j,a);cf(f.kc,c,j,d,i);g=new nb("game");B(g,new sf(function(){f.paused=!f.paused},
"Pause",!1),80,!1,!1,!1);e=new nb("player");B(e,c.Ua.pg,b?87:38,!1,!1,!1);B(e,c.Ua.He,b?65:37,!1,!1,!1);B(e,c.Ua.og,b?83:40,!1,!1,!1);B(e,c.Ua.Ie,b?68:39,!1,!1,!1)};a.Sg=function(b,c,d,e){for(var f=new D(1.6,1.6),g=new D(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new D(g.x,g.y-f.y*(d.length-1)),h=0;h<d.length;h++)for(var i=0;i<d[h].length;i++)a.hi(b,c,d[h][i],new D(i,h),g,f,e)};a.hi=function(a,b,c,d,e,f,g){var h=o,y=o;switch(c){case " ":break;case "-":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=i;break;case "=":h=b.eb(f,new D(e.x+d.x*
f.x,e.y+d.y*f.y));y=l;break;case "O":h=b.qe(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));Z.Fd(h,function(){var c=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));F(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new D(e.x+d.x*f.x,e.y+(d.y-1)*f.y));F(c,"graphics/smbsheet.gif",n)},Z.fa.Ob);y=m;break;case "@":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));h.Pg=8;h.Nf=0;Z.Fd(h,function(){h.Nf++;var c=X(a.p,f,new D(e.x+d.x*f.x,e.y+(d.y-h.Nf/h.Pg)*f.y));F(c,"graphics/smbsheet.gif",n);h.Nf==h.Pg&&($e(a.p,h),c=b.eb(f,new D(e.x+d.x*f.x,e.y+
d.y*f.y)),F(c,"graphics/smbsheet.gif",p))},Z.fa.Ob);y=s;break;case "#":h=b.qe(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=j;break;case "1":h=b.qe(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));Z.Uf(h,Z.fa.le|Z.fa.zd|Z.fa.Ad);Z.Fd(h,function(){var c=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));F(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new D(e.x+d.x*f.x,e.y+(d.y-1)*f.y));F(c,"graphics/smbsheet.gif",N)},Z.fa.Ob);y=H;break;case "*":h=b.qe(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));Z.Uf(h,Z.fa.le|Z.fa.zd|Z.fa.Ad);Z.Fd(h,function(){var c=
b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));F(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new D(e.x+d.x*f.x,e.y+(d.y-1)*f.y));F(c,"graphics/smbsheet.gif",t)},Z.fa.Ob);y=r;break;case "M":h=b.qe(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));Z.Fd(h,function(){var c=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));F(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new D(e.x+d.x*f.x,e.y+(d.y-1)*f.y));F(c,"graphics/smbsheet.gif",M)},Z.fa.Ob);y=u;break;case "[":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=w;break;case "]":h=b.eb(f,new D(e.x+d.x*f.x,
e.y+d.y*f.y));y=C;break;case "<":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Y;break;case ">":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Mf;break;case "{":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Nf;break;case "}":h=b.eb(f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Of;break;case "T":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Pf;break;case "G":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Qf;break;case "|":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Rf;break;case "F":h=X(a.p,f,new D(e.x+d.x*f.x+f.x/2,e.y+d.y*
f.y),1);y=Sf;break;case "o":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Tf;break;case "+":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Uf;break;case "^":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Vf;break;case "8":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Wf;break;case "u":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Xf;break;case "R":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Zf;break;case "r":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=Yf;break;case "L":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));
y=ag;break;case "l":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=$f;break;case "&":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y));y=bg;break;case "$":h=X(a.p,f,new D(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));y=cg;break;case "x":h=b.fi(f,new D(e.x+d.x*f.x,e.y+d.y*f.y),g);y=dg;break;default:throw"Invalid type: "+c;}h!==o&&"graphics/smbsheet.gif"!==o&&y!==o&&F(h,"graphics/smbsheet.gif",y)};a.yf=function(a,b){pb(g,b)};a.of=function(a,b){pb(g,b);pb(e,b)};a.nf=function(){Xb(f.viewport,U(c.body))}})(tf);
ca("mario.init",tf.Xb);function $(a,c,b){this.x=a;this.y=c;this.k=b}v=$.prototype;v.K=function(){this.k=this.y=this.x=0};v.j=function(a,c,b){this.x=a;this.y=c;this.k=b};v.m=function(a){this.x=a.x;this.y=a.y;this.k=a.k};v.bd=function(){return new $(-this.x,-this.y,-this.k)};v.Dg=function(){this.x=-this.x;this.y=-this.y;this.k=-this.k};v.ja=function(){return new $(this.x,this.y,this.k)};v.Nb=function(a){this.x+=a.x;this.y+=a.y;this.k+=a.k};v.If=function(a){this.x-=a.x;this.y-=a.y;this.k-=a.k};
v.Hc=function(a){this.x*=a;this.y*=a;this.k*=a};function uf(a,c,b){this.a=new $(0,0,0);this.b=new $(0,0,0);this.H=new $(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.H.m(b)}v=uf.prototype;v.ja=function(){return new uf(this.a,this.b,this.H)};v.Bd=function(a){this.a.m(a.a);this.b.m(a.b);this.H.m(a.H)};v.zf=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.k+=a.a.k;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.k+=a.b.k;this.H.x+=a.H.x;this.H.y+=a.H.y;this.H.k+=a.H.k};v.Qe=function(){this.a.j(1,0,0);this.b.j(0,1,0);this.H.j(0,0,1)};
v.K=function(){this.a.j(0,0,0);this.b.j(0,0,0);this.H.j(0,0,0)};function vf(a,c,b,d){var e=a.a.x,g=a.b.x,f=a.a.y,a=a.b.y,h=e*a-g*f;h!=0&&(h=1/h);c.x=h*(a*b-g*d);c.y=h*(e*d-f*b);return c}function wf(a,c,b,d,e){var g=a.a.x,f=a.a.y,h=a.a.k,i=a.b.x,j=a.b.y,l=a.b.k,m=a.H.x,n=a.H.y,a=a.H.k,p=g*(j*a-l*n)+f*(l*m-i*a)+h*(i*n-j*m);p!=0&&(p=1/p);c.x=p*(b*(j*a-l*n)+d*(l*m-i*a)+e*(i*n-j*m));c.y=p*(g*(d*a-e*n)+f*(e*m-b*a)+h*(b*n-d*m));c.k=p*(g*(j*e-l*d)+f*(l*b-i*e)+h*(i*d-j*b));return c};function xf(a){P.call(this,a);this.A=new D(0,0);this.B=new D(0,0);this.Sc=new D(0,0);this.ff=new D(0,0);this.D=new D(0,0);this.qa=new D(0,0);this.S=new uf;this.i=new $(0,0,0);this.A.m(a.Xa);this.B.m(a.Ya);this.Sc.m(a.Yf);this.ff.x=-this.Sc.y;this.ff.y=this.Sc.x;this.Wi=a.Yc;this.i.K();this.va=this.ec=0;this.Md=a.bh;this.Rd=a.Ah;this.Ui=a.aj;this.hg=a.ng;this.od=a.Te;this.ye=a.Sf;this.ba=0;this.D.K();this.qa.K()}z(xf,P);v=xf.prototype;v.Rb=function(){return Q(this.F,this.A)};
v.Sb=function(){return Q(this.I,this.B)};function yf(a){var c=a.F,b=a.I,d=Q(c,a.A),b=Q(b,a.B),a=lc(c.e.d,a.Sc);return a.x*(b.x-d.x)+a.y*(b.y-d.y)}
v.Ub=function(a){var c=this.F,b=this.I,d,e=0;this.Ce.m(c.c.o);this.De.m(b.c.o);var g=c.lb();b.lb();d=c.e.d;var f=this.A.x-this.Ce.x,h=this.A.y-this.Ce.y,e=d.a.x*f+d.b.x*h,h=d.a.y*f+d.b.y*h,f=e;d=b.e.d;var i=this.B.x-this.De.x,j=this.B.y-this.De.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.g.x+i-c.c.g.x-f;e=b.c.g.y+j-c.c.g.y-h;this.Ab=c.l;this.Bb=b.l;this.Oc=c.t;this.Pc=b.t;this.D.m(lc(g.d,this.Sc));this.La=(d+f)*this.D.y-(e+h)*this.D.x;this.Ma=i*this.D.y-j*this.D.x;this.ec=this.Ab+this.Bb+this.Oc*
this.La*this.La+this.Pc*this.Ma*this.Ma;if(this.ec>Number.MIN_VALUE)this.ec=1/this.ec;this.qa.m(lc(g.d,this.ff));this.Pa=(d+f)*this.qa.y-(e+h)*this.qa.x;this.Qa=i*this.qa.y-j*this.qa.x;g=this.Ab;f=this.Bb;h=this.Oc;i=this.Pc;this.S.a.x=g+f+h*this.Pa*this.Pa+i*this.Qa*this.Qa;this.S.a.y=h*this.Pa+i*this.Qa;this.S.a.k=h*this.Pa*this.La+i*this.Qa*this.Ma;this.S.b.x=this.S.a.y;this.S.b.y=h+i;this.S.b.k=h*this.La+i*this.Ma;this.S.H.x=this.S.a.k;this.S.H.y=this.S.b.k;this.S.H.k=g+f+h*this.La*this.La+i*
this.Ma*this.Ma;if(this.od)if(d=this.D.x*d+this.D.y*e,Math.abs(this.Rd-this.Md)<0.01)this.ba=3;else if(d<=this.Md){if(this.ba!=1)this.ba=1,this.i.k=0}else if(d>=this.Rd){if(this.ba!=2)this.ba=2,this.i.k=0}else this.ba=0,this.i.k=0;else this.ba=0;if(this.ye==!1)this.va=0;a.hc?(this.i.x*=a.Va,this.i.y*=a.Va,this.va*=a.Va,a=this.i.x*this.qa.x+(this.va+this.i.k)*this.D.x,d=this.i.x*this.qa.y+(this.va+this.i.k)*this.D.y,e=this.i.x*this.Pa+this.i.y+(this.va+this.i.k)*this.La,g=this.i.x*this.Qa+this.i.y+
(this.va+this.i.k)*this.Ma,c.h.x-=this.Ab*a,c.h.y-=this.Ab*d,c.s-=this.Oc*e,b.h.x+=this.Bb*a,b.h.y+=this.Bb*d,b.s+=this.Pc*g):(this.i.K(),this.va=0)};
v.Hb=function(a){var c=this.F,b=this.I,d=c.h,e=c.s,g=b.h,f=b.s,h=0,i=0,j=0,l=0;if(this.ye&&this.ba!=3)l=this.ec*(this.hg-(this.D.x*(g.x-d.x)+this.D.y*(g.y-d.y)+this.Ma*f-this.La*e)),h=this.va,i=a.Y*this.Ui,this.va=J(this.va+l,-i,i),l=this.va-h,h=l*this.D.x,i=l*this.D.y,j=l*this.La,l*=this.Ma,d.x-=this.Ab*h,d.y-=this.Ab*i,e-=this.Oc*j,g.x+=this.Bb*h,g.y+=this.Bb*i,f+=this.Pc*l;i=this.qa.x*(g.x-d.x)+this.qa.y*(g.y-d.y)+this.Qa*f-this.Pa*e;j=f-e;if(this.od&&this.ba!=0){a=this.D.x*(g.x-d.x)+this.D.y*
(g.y-d.y)+this.Ma*f-this.La*e;h=this.i.ja();a=wf(this.S,new $(0,0,0),-i,-j,-a);this.i.Nb(a);if(this.ba==1)this.i.k=Math.max(this.i.k,0);else if(this.ba==2)this.i.k=Math.min(this.i.k,0);i=vf(this.S,new D(0,0),-i-(this.i.k-h.k)*this.S.H.x,-j-(this.i.k-h.k)*this.S.H.y);i.x+=h.x;i.y+=h.y;this.i.x=i.x;this.i.y=i.y;a.x=this.i.x-h.x;a.y=this.i.y-h.y;a.k=this.i.k-h.k;h=a.x*this.qa.x+a.k*this.D.x;i=a.x*this.qa.y+a.k*this.D.y;j=a.x*this.Pa+a.y+a.k*this.La;l=a.x*this.Qa+a.y+a.k*this.Ma}else a=vf(this.S,new D(0,
0),-i,-j),this.i.x+=a.x,this.i.y+=a.y,h=a.x*this.qa.x,i=a.x*this.qa.y,j=a.x*this.Pa+a.y,l=a.x*this.Qa+a.y;d.x-=this.Ab*h;d.y-=this.Ab*i;e-=this.Oc*j;g.x+=this.Bb*h;g.y+=this.Bb*i;f+=this.Pc*l;c.h.m(d);c.s=e;b.h.m(g);b.s=f};
v.Gb=function(){var a=this.F,c=this.I,b=a.c.g,d=a.c.n,e=c.c.g,g=c.c.n,f,h=0,i=0,j=0,l=h=f=0,m=0,i=!1,n=0,p=hc(d),s=hc(g);f=p;var m=this.A.x-this.Ce.x,r=this.A.y-this.Ce.y,h=f.a.x*m+f.b.x*r,r=f.a.y*m+f.b.y*r,m=h;f=s;s=this.B.x-this.De.x;j=this.B.y-this.De.y;h=f.a.x*s+f.b.x*j;j=f.a.y*s+f.b.y*j;s=h;f=e.x+s-b.x-m;h=e.y+j-b.y-r;if(this.od){this.D=lc(p,this.Sc);this.La=(f+m)*this.D.y-(h+r)*this.D.x;this.Ma=s*this.D.y-j*this.D.x;var t=this.D.x*f+this.D.y*h;Math.abs(this.Rd-this.Md)<0.01?(n=J(t,-0.2,0.2),
l=Math.abs(t),i=!0):t<=this.Md?(n=J(t-this.Md+0.005,-0.2,0),l=this.Md-t,i=!0):t>=this.Rd&&(n=J(t-this.Rd+0.005,0,0.2),l=t-this.Rd,i=!0)}this.qa=lc(p,this.ff);this.Pa=(f+m)*this.qa.y-(h+r)*this.qa.x;this.Qa=s*this.qa.y-j*this.qa.x;p=new $(0,0,0);r=this.qa.x*f+this.qa.y*h;s=g-d-this.Wi;l=Math.max(l,Math.abs(r));m=Math.abs(s);i?(i=this.Ab,j=this.Bb,f=this.Oc,h=this.Pc,this.S.a.x=i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,this.S.a.y=f*this.Pa+h*this.Qa,this.S.a.k=f*this.Pa*this.La+h*this.Qa*this.Ma,this.S.b.x=
this.S.a.y,this.S.b.y=f+h,this.S.b.k=f*this.La+h*this.Ma,this.S.H.x=this.S.a.k,this.S.H.y=this.S.b.k,this.S.H.k=i+j+f*this.La*this.La+h*this.Ma*this.Ma,wf(this.S,p,-r,-s,-n)):(i=this.Ab,j=this.Bb,f=this.Oc,h=this.Pc,n=f*this.Pa+h*this.Qa,t=f+h,this.S.a.j(i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,n,0),this.S.b.j(n,t,0),n=vf(this.S,new D(0,0),-r,-s),p.x=n.x,p.y=n.y,p.k=0);n=p.x*this.qa.x+p.k*this.D.x;i=p.x*this.qa.y+p.k*this.D.y;r=p.x*this.Pa+p.y+p.k*this.La;p=p.x*this.Qa+p.y+p.k*this.Ma;b.x-=this.Ab*
n;b.y-=this.Ab*i;d-=this.Oc*r;e.x+=this.Bb*n;e.y+=this.Bb*i;g+=this.Pc*p;a.c.n=d;c.c.n=g;R(a);R(c);return l<=0.005&&m<=oc};function zf(){qf.call(this);this.Xa=new D(0,0);this.Ya=new D(0,0);this.Yf=new D(0,0);this.type=2;this.Yf.j(1,0);this.Yc=0;this.Te=!1;this.Ah=this.bh=0;this.Sf=!1;this.ng=this.aj=0}z(zf,qf);zf.prototype.X=function(a,c,b,d){this.U=a;this.W=c;this.Xa=nc(this.U.e,b);this.Ya=nc(this.W.e,b);this.Yf=mc(this.U.e.d,d);this.Yc=this.W.Tb()-this.U.Tb()};zf.prototype.Pb=function(){return new xf(this)};function Af(){qf.call(this);this.Xa=new D(0,0);this.Ya=new D(0,0);this.type=3;this.length=1;this.Tg=this.Xg=0}z(Af,qf);Af.prototype.X=function(a,c,b,d){this.U=a;this.W=c;this.Xa.m(nc(this.U.e,b));this.Ya.m(nc(this.W.e,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.Tg=this.Xg=0};Af.prototype.Pb=function(){return new ve(this)};function Bf(a){P.call(this,a);this.Qc=new D(0,0);this.Rc=new D(0,0);this.i=new $(0,0,0);this.q=new uf;this.Qc.m(a.Xa);this.Rc.m(a.Ya);this.Fe=a.Yc}z(Bf,P);v=Bf.prototype;v.Rb=function(){return Q(this.F,this.Qc)};v.Sb=function(){return Q(this.I,this.Rc)};
v.Ub=function(a){var c,b=0,d=this.F,e=this.I;c=d.e.d;var g=this.Qc.x-d.c.o.x,f=this.Qc.y-d.c.o.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.e.d;var h=this.Rc.x-e.c.o.x,i=this.Rc.y-e.c.o.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.l;var b=e.l,j=d.t,l=e.t;this.q.a.x=c+b+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=c+b+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;a.hc?(this.i.x*=a.Va,this.i.y*=a.Va,this.i.k*=
a.Va,d.h.x-=c*this.i.x,d.h.y-=c*this.i.y,d.s-=j*(g*this.i.y-f*this.i.x+this.i.k),e.h.x+=b*this.i.x,e.h.y+=b*this.i.y,e.s+=l*(h*this.i.y-i*this.i.x+this.i.k)):this.i.K()};
v.Hb=function(){var a,c=0,b=this.F,d=this.I,e=b.h,g=b.s,f=d.h,h=d.s,i=b.l,j=d.l,l=b.t,m=d.t;a=b.e.d;var n=this.Qc.x-b.c.o.x,p=this.Qc.y-b.c.o.y,c=a.a.x*n+a.b.x*p,p=a.a.y*n+a.b.y*p,n=c;a=d.e.d;var s=this.Rc.x-d.c.o.x,r=this.Rc.y-d.c.o.y,c=a.a.x*s+a.b.x*r,r=a.a.y*s+a.b.y*r,s=c;a=new $(0,0,0);wf(this.q,a,-(f.x-h*r-e.x+g*p),-(f.y+h*s-e.y-g*n),-(h-g));this.i.Nb(a);e.x-=i*a.x;e.y-=i*a.y;g-=l*(n*a.y-p*a.x+a.k);f.x+=j*a.x;f.y+=j*a.y;h+=m*(s*a.y-r*a.x+a.k);b.s=g;d.s=h};
v.Gb=function(){var a,c=0,b=this.F,d=this.I;a=b.e.d;var e=this.Qc.x-b.c.o.x,g=this.Qc.y-b.c.o.y,c=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=c;a=d.e.d;var f=this.Rc.x-d.c.o.x,h=this.Rc.y-d.c.o.y,c=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=c;a=b.l;var c=d.l,i=b.t,j=d.t,l=d.c.g.x+f-b.c.g.x-e,m=d.c.g.y+h-b.c.g.y-g,n=d.c.n-b.c.n-this.Fe,p=Math.sqrt(l*l+m*m),s=Math.abs(n);p>0.05&&(i*=1,j*=1);this.q.a.x=a+c+g*g*i+h*h*j;this.q.b.x=-g*e*i-h*f*j;this.q.H.x=-g*i-h*j;this.q.a.y=this.q.b.x;this.q.b.y=a+c+e*e*i+f*f*j;this.q.H.y=
e*i+f*j;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=i+j;var r=new $(0,0,0);wf(this.q,r,-l,-m,-n);b.c.g.x-=a*r.x;b.c.g.y-=a*r.y;b.c.n-=i*(e*r.y-g*r.x+r.k);d.c.g.x+=c*r.x;d.c.g.y+=c*r.y;d.c.n+=j*(f*r.y-h*r.x+r.k);R(b);R(d);return p<=0.005&&s<=oc};function Cf(){qf.call(this);this.Xa=new D(0,0);this.Ya=new D(0,0);this.type=8;this.Yc=0}z(Cf,qf);Cf.prototype.X=function(a,c,b){this.U=a;this.W=c;this.Xa.m(nc(this.U.e,b));this.Ya.m(nc(this.W.e,b));this.Yc=this.W.Tb()-this.U.Tb()};Cf.prototype.Pb=function(){return new Bf(this)};function Df(a){P.call(this,a);this.Fb=new gc;this.fe=new gc;this.ge=new gc;this.he=new gc;this.za=new $(0,0,0);this.Jb=new D(0,0);this.gc=new D(0,0);this.A=new D(0,0);this.B=new D(0,0);this.i=new $(0,0,0);this.q=new uf;this.A.m(a.Xa);this.B.m(a.Ya);this.Fe=a.Yc;this.i.K();this.va=0;this.gf=a.Gi;this.mg=a.qj;this.Vi=a.bj;this.hg=a.ng;this.od=a.Te;this.ye=a.Sf;this.ba=0}z(Df,P);v=Df.prototype;v.Rb=function(){return Q(this.F,this.A)};v.Sb=function(){return Q(this.I,this.B)};
function Ef(a){return a.I.c.n-a.F.c.n-a.Fe}
v.Ub=function(a){var c=this.F,b=this.I,d,e=0;d=c.e.d;var g=this.A.x-c.c.o.x,f=this.A.y-c.c.o.y,e=d.a.x*g+d.b.x*f,f=d.a.y*g+d.b.y*f,g=e;d=b.e.d;var h=this.B.x-b.c.o.x,i=this.B.y-b.c.o.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.l;var e=b.l,j=c.t,l=b.t;this.q.a.x=d+e+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=d+e+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;this.ec=1/(j+l);if(!this.ye)this.va=0;if(this.od){var m=
b.c.n-c.c.n-this.Fe;if(Math.abs(this.mg-this.gf)<2*oc)this.ba=3;else if(m<=this.gf){if(this.ba!=1)this.i.k=0;this.ba=1}else if(m>=this.mg){if(this.ba!=2)this.i.k=0;this.ba=2}else this.ba=0,this.i.k=0}else this.ba=0;a.hc?(this.i.x*=a.Va,this.i.y*=a.Va,this.va*=a.Va,a=this.i.x,m=this.i.y,c.h.x-=d*a,c.h.y-=d*m,c.s-=j*(g*m-f*a+this.va+this.i.k),b.h.x+=e*a,b.h.y+=e*m,b.s+=l*(h*m-i*a+this.va+this.i.k)):(this.i.K(),this.va=0)};
v.Hb=function(a){var c=this.F,b=this.I,d=0,e=d=0,g=0,f=0,h=0,i=c.h,j=c.s,l=b.h,m=b.s,n=c.l,p=b.l,s=c.t,r=b.t;if(this.ye&&this.ba!=3)e=this.ec*-(m-j-this.hg),g=this.va,f=a.Y*this.Vi,this.va=J(this.va+e,-f,f),e=this.va-g,j-=s*e,m+=r*e;if(this.od&&this.ba!=0){var a=c.e.d,e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.e.d,f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,a=l.x+-m*h-i.x- -j*g,t=l.y+m*f-i.y-j*e;wf(this.q,this.za,-a,-t,-(m-j));
if(this.ba==3)this.i.Nb(this.za);else if(this.ba==1){if(d=this.i.k+this.za.k,d<0)vf(this.q,this.gc,-a,-t),this.za.x=this.gc.x,this.za.y=this.gc.y,this.za.k=-this.i.k,this.i.x+=this.gc.x,this.i.y+=this.gc.y,this.i.k=0}else if(this.ba==2&&(d=this.i.k+this.za.k,d>0))vf(this.q,this.gc,-a,-t),this.za.x=this.gc.x,this.za.y=this.gc.y,this.za.k=-this.i.k,this.i.x+=this.gc.x,this.i.y+=this.gc.y,this.i.k=0;i.x-=n*this.za.x;i.y-=n*this.za.y;j-=s*(e*this.za.y-g*this.za.x+this.za.k);l.x+=p*this.za.x;l.y+=p*this.za.y;
m+=r*(f*this.za.y-h*this.za.x+this.za.k)}else a=c.e.d,e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.e.d,f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,vf(this.q,this.Jb,-(l.x+-m*h-i.x- -j*g),-(l.y+m*f-i.y-j*e)),this.i.x+=this.Jb.x,this.i.y+=this.Jb.y,i.x-=n*this.Jb.x,i.y-=n*this.Jb.y,j-=s*(e*this.Jb.y-g*this.Jb.x),l.x+=p*this.Jb.x,l.y+=p*this.Jb.y,m+=r*(f*this.Jb.y-h*this.Jb.x);c.h.m(i);c.s=j;b.h.m(l);b.s=m};
v.Gb=function(){var a=0,c,b=this.F,d=this.I,e=0,g=c=0,f=0,h=0;if(this.od&&this.ba!=0){var a=d.c.n-b.c.n-this.Fe,i=0;this.ba==3?(a=J(a-this.gf,-pc,pc),i=-this.ec*a,e=Math.abs(a)):this.ba==1?(a-=this.gf,e=-a,a=J(a+oc,-pc,0),i=-this.ec*a):this.ba==2&&(a-=this.mg,e=a,a=J(a-oc,0,pc),i=-this.ec*a);b.c.n-=b.t*i;d.c.n+=d.t*i;R(b);R(d)}c=b.e.d;i=this.A.x-b.c.o.x;a=this.A.y-b.c.o.y;g=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=g;c=d.e.d;var j=this.B.x-d.c.o.x,l=this.B.y-d.c.o.y,g=c.a.x*j+c.b.x*l,l=c.a.y*j+c.b.y*l,
j=g,f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a,m=f*f+h*h;c=Math.sqrt(m);var g=b.l,n=d.l,p=b.t,s=d.t;m>0.05*0.05&&(m=1/(g+n),f=m*-f,h=m*-h,b.c.g.x-=0.5*g*f,b.c.g.y-=0.5*g*h,d.c.g.x+=0.5*n*f,d.c.g.y+=0.5*n*h,f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a);this.fe.a.x=g+n;this.fe.b.x=0;this.fe.a.y=0;this.fe.b.y=g+n;this.ge.a.x=p*a*a;this.ge.b.x=-p*i*a;this.ge.a.y=-p*i*a;this.ge.b.y=p*i*i;this.he.a.x=s*l*l;this.he.b.x=-s*j*l;this.he.a.y=-s*j*l;this.he.b.y=s*j*j;this.Fb.Bd(this.fe);this.Fb.zf(this.ge);this.Fb.zf(this.he);
this.Fb.ke(Ff,-f,-h);f=Ff.x;h=Ff.y;b.c.g.x-=b.l*f;b.c.g.y-=b.l*h;b.c.n-=b.t*(i*h-a*f);d.c.g.x+=d.l*f;d.c.g.y+=d.l*h;d.c.n+=d.t*(j*h-l*f);R(b);R(d);return c<=0.005&&e<=oc};var Ff=new D(0,0);function Gf(){qf.call(this);this.Xa=new D(0,0);this.Ya=new D(0,0);this.type=1;this.Xa.K();this.Ya.K();this.ng=this.bj=this.qj=this.Gi=this.Yc=0;this.Sf=this.Te=!1}z(Gf,qf);Gf.prototype.X=function(a,c,b){this.U=a;this.W=c;this.Xa=nc(this.U.e,b);this.Ya=nc(this.W.e,b);this.Yc=this.W.Tb()-this.U.Tb()};Gf.prototype.Pb=function(){return new Df(this)};function Hf(){this.Kb=new D(0,0);this.Lb=new D(0,0)}Hf.prototype.K=function(){this.Kb.K();this.cd=0;this.Lb.K();this.dd=0};Hf.prototype.j=function(a,c,b,d){c===k&&(c=0);d===k&&(d=0);this.Kb.m(a);this.cd=c;this.Lb.m(b);this.dd=d};function If(a){P.call(this,a);this.bc=new D(0,0);this.cc=new D(0,0);this.A=new D(0,0);this.B=new D(0,0);this.ka=new Hf;var c=a.Gd.C,b=a.Hd.C;this.Pd=this.td=this.Od=this.sd=o;var d=0,e=0;this.Mi=a.Gd.F;this.F=a.Gd.I;c==1?(this.sd=a.Gd,this.bc.m(this.sd.A),this.A.m(this.sd.B),d=Ef(this.sd)):(this.Od=a.Gd,this.bc.m(this.Od.A),this.A.m(this.Od.B),d=yf(this.Od));this.Ni=a.Hd.F;this.I=a.Hd.I;b==1?(this.td=a.Hd,this.cc.m(this.td.A),this.B.m(this.td.B),e=Ef(this.td)):(this.Pd=a.Hd,this.cc.m(this.Pd.A),this.B.m(this.Pd.B),
e=yf(this.Pd));this.oa=a.Xc;this.Jd=d+this.oa*e;this.i=0}z(If,P);v=If.prototype;v.Rb=function(){return Q(this.F,this.A)};v.Sb=function(){return Q(this.I,this.B)};
v.Ub=function(a){var c=this.Mi,b=this.Ni,d=this.F,e=this.I,g=0,f=0,h=0,i=0,j=h=0,l=0;this.ka.K();this.sd?(this.ka.cd=-1,l+=d.t):(c=c.e.d,f=this.Od.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=d.e.d,h=this.A.x-d.c.o.x,i=this.A.y-d.c.o.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ka.Kb.j(-g,-f),this.ka.cd=-h,l+=d.l+d.t*h*h);this.td?(this.ka.dd=-this.oa,l+=this.oa*this.oa*e.t):(c=b.e.d,f=this.Pd.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=e.e.d,h=this.B.x-e.c.o.x,i=this.B.y-e.c.o.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ka.Lb.j(-this.oa*g,-this.oa*f),this.ka.dd=-this.oa*h,l+=this.oa*this.oa*(e.l+e.t*h*h));this.q=l>0?1/l:0;a.hc?(d.h.x+=d.l*this.i*this.ka.Kb.x,d.h.y+=d.l*this.i*this.ka.Kb.y,d.s+=d.t*this.i*this.ka.cd,e.h.x+=e.l*this.i*this.ka.Lb.x,e.h.y+=e.l*this.i*this.ka.Lb.y,e.s+=e.t*this.i*this.ka.dd):this.i=0};
v.Hb=function(){var a=this.F,c=this.I,b=this.ka,d=a.h,e=a.s,g=c.h,f=c.s;e===k&&(e=0);f===k&&(f=0);b=-this.q*(b.Kb.x*d.x+b.Kb.y*d.y+b.cd*e+(b.Lb.x*g.x+b.Lb.y*g.y)+b.dd*f);this.i+=b;a.h.x+=a.l*b*this.ka.Kb.x;a.h.y+=a.l*b*this.ka.Kb.y;a.s+=a.t*b*this.ka.cd;c.h.x+=c.l*b*this.ka.Lb.x;c.h.y+=c.l*b*this.ka.Lb.y;c.s+=c.t*b*this.ka.dd};
v.Gb=function(){var a=this.F,c=this.I,b=0,d=0,b=this.sd?Ef(this.sd):yf(this.Od),d=this.td?Ef(this.td):yf(this.Pd),b=-this.q*(this.Jd-(b+this.oa*d));a.c.g.x+=a.l*b*this.ka.Kb.x;a.c.g.y+=a.l*b*this.ka.Kb.y;a.c.n+=a.t*b*this.ka.cd;c.c.g.x+=c.l*b*this.ka.Lb.x;c.c.g.y+=c.l*b*this.ka.Lb.y;c.c.n+=c.t*b*this.ka.dd;R(a);R(c);return!0};function Jf(){qf.call(this);this.type=6;this.Hd=this.Gd=o;this.Xc=1}z(Jf,qf);Jf.prototype.X=function(a,c,b){this.Gd=a;this.U=a.F;this.Hd=c;this.W=c.F;this.Xc=b};Jf.prototype.Pb=function(){return new If(this)};var Kf={};
(function(a){var c,b=new D(350,80),d=new D(1024,600),e,g,f,h;a.Xb=function(c,e,g){f=new hf(a,c,b,Z.ad.Df,d,20,e);h=new Z(f);c=new D(5,b.y-7-24);a.mc(c,g);tf.Sg(f,h,new D(0,b.y),c);g=0;a.ii(++g);a.ki(++g);a.ji(g);a.gi();jf(f)};a.mc=function(a,b){var d=new D(0,0),m=new D(21,47),n=new D(m.x/20,m.y/20);c=h.mc(n,a);cf(f.kc,c,n,d,m);g=new nb("game");B(g,new sf(function(){f.paused=!f.paused},"Pause",!1),80,!1,!1,!1);e=new nb("player");B(e,c.Ua.pg,b?87:38,!1,!1,!1);B(e,c.Ua.He,b?65:37,!1,!1,!1);B(e,c.Ua.og,
b?83:40,!1,!1,!1);B(e,c.Ua.Ie,b?68:39,!1,!1,!1)};a.ji=function(a){for(var c=new D(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Qf(c,new D(4,b.y-f-e)),h.Qf(c,new D(10,b.y-f-e));h.Qf(new D(b.x-15,0.25),new D((b.x-15)/2+15,b.y-e-24))}};a.ki=function(a){for(var a=new D(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,W(f.p,new D(3,0.3),new D(a.x,a.y-1.5),!0,{bb:c},o),a.x+=3.5};a.ii=function(a){for(var a=new D(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new Gf,e=new Cf;a.x+=4;var g=
{bb:Math.random()*Math.PI},h=a.y-6,s=W(f.p,new D(0.01,0.01),new D(a.x,h),!1,{xa:g}),r=Te(f.p,new D(8,0.8),new D(a.x,h),!0,{xa:g});F(r,"graphics/spinner.png");g.bb+=Math.PI/2;g=Te(f.p,new D(8,0.8),new D(a.x,h),!0,{xa:g});F(g,"graphics/spinner.png");d.X(s.body,r.body,U(s.body));V(f.p.pa,d);d.X(s.body,g.body,U(s.body));V(f.p.pa,d);e.X(r.body,g.body,U(r.body));V(f.p.pa,e);a.x+=6}for(c=0;c<1;c++)g={Lc:!0},d=new Af,a.x+=2,h=a.y-6,r=Te(f.p,new D(3,0.2),new D(a.x+0.1,h+2),!0,{xa:g}),e=Te(f.p,new D(3,0.2),
new D(a.x+0.1,h-2),!0,{xa:g}),s=Te(f.p,new D(0.2,3),new D(a.x-2,h+0.1),!0,{xa:g}),g=Te(f.p,new D(0.2,3),new D(a.x+2,h+0.1),!0,{xa:g}),d.X(r.body,e.body,U(r.body),U(e.body)),V(f.p.pa,d),d.X(r.body,s.body,U(r.body),U(s.body)),V(f.p.pa,d),d.X(r.body,g.body,U(r.body),U(g.body)),V(f.p.pa,d),d.X(e.body,s.body,U(e.body),U(s.body)),V(f.p.pa,d),d.X(e.body,g.body,U(e.body),U(g.body)),V(f.p.pa,d),d.X(s.body,g.body,U(s.body),U(g.body)),V(f.p.pa,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,g={Lc:!0},d=new rf,a.x+=1.5,s=
Te(f.p,new D(3,0.3),new D(a.x+1.5,h),!0,{xa:g}),a.x+=6,g=Te(f.p,new D(3,0.3),new D(a.x+1.5,h),!0,{xa:g}),h=U(s.body).ja(),h.y-=3,X(f.p,new D(0.3,0.3),h),r=U(g.body).ja(),r.y-=3,X(f.p,new D(0.3,0.3),r),d.X(s.body,g.body,h,r,U(s.body),U(g.body),(c+1)/2),V(f.p.pa,d),a.x+=3.5;for(c=0;c<2;c++){var d=new Jf,t=new Gf;new zf;g={bb:0};a.x+=2;for(var e=o,u=0;u<2;u++)h=a.y-(u+1)*4,s=W(f.p,new D(0.01,0.01),new D(a.x,h),!1,{xa:g}),r=Te(f.p,new D(4,0.2),new D(a.x,h),!0,{xa:g}),t.X(s.body,r.body,U(s.body)),h=V(f.p.pa,
t),e!==o&&(d.X(h,e,u),V(f.p.pa,d)),e=h;h=a.y-12;s=W(f.p,new D(0.01,0.01),new D(a.x,h),!1,{xa:g});r=Te(f.p,new D(0.4,0.2),new D(a.x,h),!0,{xa:g});g=new zf;g.X(s.body,r.body,U(s.body),new D(Math.random(),Math.random()));g.Te=!0;g.bh=-1;g.Ah=1;h=V(f.p.pa,g);d.X(h,e,0.5);V(f.p.pa,d);a.x+=4}};a.gi=function(){for(var a={type:2,Lc:!1},c={Bc:1.5},d=new Pd(0.25),e=new D(0.5,0.5),g=0;g<50;g++){var h=g*5%(b.x-10),h=new D(h+g%20/20+4.5,15+g%20);f.p.Ib(e,h,!0,d,{xa:a,oc:c})}d=new O;Ic(d,0.25,0.25);for(g=0;g<50;g++)h=
g*5%(b.x-10),h=new D(h+(g+5)%20/20+4.5,15+(g+5)%20),a.bb=g%17/17,f.p.Ib(e,h,!0,d,{xa:a,oc:c});d=new O;Hc(d,[new D(-0.5,-0.5),new D(0.5,-0.5),new D(-0.5,0.5)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new D(h+(g+10)%20/20+4.5,15+(g+10)%20),a.bb=g%22/22,f.p.Ib(e,h,!0,d,{xa:a,oc:c});d=new O;Hc(d,[new D(-Math.random()*0.5,-Math.random()*0.5),new D(Math.random()*0.5,-Math.random()*0.5),new D(Math.random()*0.5,Math.random()*0.5),new D(-Math.random()*0.5,Math.random()*0.5)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new D(h+
(g+15)%20/20+4.5,15+(g+15)%20),a.bb=g%35/35,f.p.Ib(e,h,!0,d,{xa:a,oc:c});d=new O;Hc(d,[new D(-0.5,-0.5),new D(0,-0.5),new D(0.5,0),new D(0.5,0.5),new D(0,0.3)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new D(h+(g+15)%20/20+4.5,15+(g+15)%20),a.bb=g%35/35,f.p.Ib(e,h,!0,d,{xa:a,oc:c})};a.yf=function(a,b){pb(g,b)};a.of=function(a,b){pb(g,b);pb(e,b)};a.nf=function(){Xb(f.viewport,U(c.body))}})(Kf);ca("test.init",Kf.Xb);var Lf={};
(function(a){var c,b=new D(5,10),d=new D(100,200),e,g,f,h;a.Xb=function(c,e,g){f=new hf(a,c,b,Z.ad.Df,d,20,e);h=new Z(f);c=new D(2,2);a.li();a.mc(c,g);jf(f)};a.mc=function(a,b){var d=new D(0,0),m=new D(21,47),n=new D(m.x/20,m.y/20);c=h.mc(n,a);cf(f.kc,c,n,d,m);g=new nb("game");B(g,new sf(function(){f.paused=!f.paused},"Pause",!1),80,!1,!1,!1);e=new nb("player");B(e,c.Ua.pg,b?87:38,!1,!1,!1);B(e,c.Ua.He,b?65:37,!1,!1,!1);B(e,c.Ua.og,b?83:40,!1,!1,!1);B(e,c.Ua.Ie,b?68:39,!1,!1,!1)};a.li=function(){h.eb(new D(b.x,0.5),
new D(b.x/2,b.y-0.25));a.ei(new D(b.x,6),new D(0,b.y-0.25))};a.ei=function(a,b){W(f.p,new D(0.25,a.y),new D(b.x+0,b.y-a.y/2),!0,o,o);W(f.p,new D(0.25,a.y),new D(b.x+a.x-0.125,b.y-a.y/2),!0,o,o);for(var c=new Pd(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var g=0;g<a.y/2;g+=0.3){var h=f.p.Ib(new D(0.3,0.3),new D(b.x+e-d++%2*0.15,b.y-g),!0,c,{oc:{re:0.1,Bc:0.1,ub:0.1}}),r=Math.random();r<=0.25?F(h,"graphics/ball-red.png"):r<=0.5?F(h,"graphics/ball-green.png"):r<=0.75?F(h,"graphics/ball-yellow.png"):F(h,
"graphics/ball-blue.png")}};a.yf=function(a,b){pb(g,b)};a.of=function(a,b){pb(g,b);pb(e,b)};a.nf=function(){Xb(f.viewport,U(c.body))}})(Lf);ca("pit.init",Lf.Xb);})();
