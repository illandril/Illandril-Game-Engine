(function(){var k=void 0,o=null;function q(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var u,x=this;function ca(a,c){var b=a.split("."),d=x;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==k?d[e]=c:d=d[e]?d[e]:d[e]={}}function da(){}
function ea(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var fa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ga=0;function z(a,c){function b(){}b.prototype=c.prototype;a.xh=c.prototype;a.prototype=new b;a.prototype.constructor=a};function ha(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),g=Math.max(d.length,e.length),f=0;b==0&&f<g;f++){var h=d[f]||"",i=e[f]||"",j=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(h)||["","",""],n=l.exec(i)||["","",""];if(m[0].length==0&&n[0].length==0)break;b=ia(m[1].length==0?0:parseInt(m[1],10),n[1].length==0?0:parseInt(n[1],10))||ia(m[2].length==0,n[2].length==0)||ia(m[2],n[2])}while(b==
0)}return b}function ia(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ja,ka,la,ma;function na(){return x.navigator?x.navigator.userAgent:o}ma=la=ka=ja=!1;var oa;if(oa=na()){var pa=x.navigator;ja=oa.indexOf("Opera")==0;ka=!ja&&oa.indexOf("MSIE")!=-1;la=!ja&&oa.indexOf("WebKit")!=-1;ma=!ja&&!la&&pa.product=="Gecko"}var qa=ka,ra=ma,sa=la,ta=x.navigator,ua=(ta&&ta.platform||"").indexOf("Mac")!=-1,va;
a:{var wa="",xa;if(ja&&x.opera)var ya=x.opera.version,wa=typeof ya=="function"?ya():ya;else if(ra?xa=/rv\:([^\);]+)(\)|;)/:qa?xa=/MSIE\s+([^\);]+)(\)|;)/:sa&&(xa=/WebKit\/(\S+)/),xa)var za=xa.exec(na()),wa=za?za[1]:"";if(qa){var Aa,Ba=x.document;Aa=Ba?Ba.documentMode:k;if(Aa>parseFloat(wa)){va=String(Aa);break a}}va=wa}var Ca={},Da={};var Ea,Fa={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var Ga=Array.prototype,Ha=Ga.indexOf?function(a,c,b){return Ga.indexOf.call(a,c,b)}:function(a,c,b){b=b==o?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Ia(a,c){var b=Ha(a,c);b>=0&&Ga.splice.call(a,b,1)};qa&&(Da[9]||(Da[9]=qa&&document.documentMode&&document.documentMode>=9));qa&&(Ca["8"]||(Ca["8"]=ha(va,"8")>=0));function Ja(){}Ja.prototype.Wg=!1;Ja.prototype.Dd=function(){if(!this.Wg)this.Wg=!0,this.Ed()};Ja.prototype.Ed=function(){this.li&&Ka.apply(o,this.li)};function Ka(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=ea(d);e=="array"||e=="object"&&typeof d.length=="number"?Ka.apply(o,d):d&&typeof d.Dd=="function"&&d.Dd()}};function La(a,c){this.type=a;this.currentTarget=this.target=c}z(La,Ja);La.prototype.Ed=function(){delete this.type;delete this.target;delete this.currentTarget};La.prototype.tg=!1;La.prototype.kj=!0;function Ma(a){Ma[" "](a);return a}Ma[" "]=da;function Na(a,c){a&&this.Xb(a,c)}z(Na,La);u=Na.prototype;u.target=o;u.relatedTarget=o;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=!1;u.altKey=!1;u.shiftKey=!1;u.metaKey=!1;u.gj=!1;u.Xg=o;
u.Xb=function(a,c){var b=this.type=a.type;La.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(ra){var e;a:{try{Ma(d.nodeName);e=!0;break a}catch(g){}e=!1}e||(d=o)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.gj=ua?a.metaKey:a.ctrlKey;this.state=a.state;this.Xg=a;delete this.kj;delete this.tg};u.Ed=function(){Na.xh.Ed.call(this);this.relatedTarget=this.currentTarget=this.target=this.Xg=o};function Oa(){}var Pa=0;u=Oa.prototype;u.key=0;u.Wd=!1;u.Pg=!1;u.Xb=function(a,c,b,d,e,g){if(ea(a)=="function")this.ah=!0;else if(a&&a.handleEvent&&ea(a.handleEvent)=="function")this.ah=!1;else throw Error("Invalid listener argument");this.ue=a;this.wh=c;this.src=b;this.type=d;this.capture=!!e;this.Zg=g;this.Pg=!1;this.key=++Pa;this.Wd=!1};u.handleEvent=function(a){return this.ah?this.ue.call(this.Zg||this.src,a):this.ue.handleEvent.call(this.ue,a)};var Qa,Ra=(Qa="ScriptEngine"in x&&x.ScriptEngine()=="JScript")?x.ScriptEngineMajorVersion()+"."+x.ScriptEngineMinorVersion()+"."+x.ScriptEngineBuildVersion():"0";function Sa(a,c){this.oh=c;this.jd=[];if(a>this.oh)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.jd.push(this.Jb())}z(Sa,Ja);u=Sa.prototype;u.fd=o;u.Vg=o;u.getObject=function(){return this.jd.length?this.jd.pop():this.Jb()};function Ta(a,c){a.jd.length<a.oh?a.jd.push(c):Ua(a,c)}u.Jb=function(){return this.fd?this.fd():{}};
function Ua(a,c){if(a.Vg)a.Vg(c);else{var b=ea(c);if(b=="object"||b=="array"||b=="function")if(ea(c.Dd)=="function")c.Dd();else for(var d in c)delete c[d]}}u.Ed=function(){Sa.xh.Ed.call(this);for(var a=this.jd;a.length;)Ua(this,a.pop());delete this.jd};var Va,Wa,Xa,Ya,Za,$a,ab,bb,cb,db,eb;
(function(){function a(){return{Kc:0,Vd:0}}function c(){return[]}function b(){function a(b){b=f.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Oa}function e(){return new Na}var g=Qa&&!(ha(Ra,"5.7")>=0),f;$a=function(a){f=a};if(g){Va=function(){return h.getObject()};Wa=function(a){Ta(h,a)};Xa=function(){return i.getObject()};Ya=function(a){Ta(i,a)};Za=function(){return j.getObject()};ab=function(){Ta(j,b())};bb=function(){return l.getObject()};cb=function(a){Ta(l,a)};db=function(){return m.getObject()};
eb=function(a){Ta(m,a)};var h=new Sa(0,600);h.fd=a;var i=new Sa(0,600);i.fd=c;var j=new Sa(0,600);j.fd=b;var l=new Sa(0,600);l.fd=d;var m=new Sa(0,600);m.fd=e}else Va=a,Wa=da,Xa=c,Ya=da,Za=b,ab=da,bb=d,cb=da,db=e,eb=da})();var fb={},gb={},hb={},ib={};
function jb(a,c,b,d,e){if(c)if(ea(c)=="array")for(var g=0;g<c.length;g++)jb(a,c[g],b,d,e);else{var d=!!d,f=gb;c in f||(f[c]=Va());f=f[c];d in f||(f[d]=Va(),f.Kc++);var f=f[d],h=a[fa]||(a[fa]=++ga),i;f.Vd++;if(f[h]){i=f[h];for(g=0;g<i.length;g++)if(f=i[g],f.ue==b&&f.Zg==e){if(f.Wd)break;return}}else i=f[h]=Xa(),f.Kc++;g=Za();g.src=a;f=bb();f.Xb(b,g,a,c,d,e);b=f.key;g.key=b;i.push(f);fb[b]=f;hb[h]||(hb[h]=Xa());hb[h].push(f);a.addEventListener?(a==x||!a.ki)&&a.addEventListener(c,g,d):a.attachEvent(c in
ib?ib[c]:ib[c]="on"+c,g)}else throw Error("Invalid event type");}function kb(a,c,b,d){if(!d.$e&&d.rh){for(var e=0,g=0;e<d.length;e++)if(d[e].Wd){var f=d[e].wh;f.src=o;ab(f);cb(d[e])}else e!=g&&(d[g]=d[e]),g++;d.length=g;d.rh=!1;g==0&&(Ya(d),delete gb[a][c][b],gb[a][c].Kc--,gb[a][c].Kc==0&&(Wa(gb[a][c]),delete gb[a][c],gb[a].Kc--),gb[a].Kc==0&&(Wa(gb[a]),delete gb[a]))}}
function lb(a,c,b,d,e){var g=1,c=c[fa]||(c[fa]=++ga);if(a[c]){a.Vd--;a=a[c];a.$e?a.$e++:a.$e=1;try{for(var f=a.length,h=0;h<f;h++){var i=a[h];i&&!i.Wd&&(g&=mb(i,e)!==!1)}}finally{a.$e--,kb(b,d,c,a)}}return Boolean(g)}
function mb(a,c){var b=a.handleEvent(c);if(a.Pg){var d=a.key;if(fb[d]){var e=fb[d];if(!e.Wd){var g=e.src,f=e.type,h=e.wh,i=e.capture;g.removeEventListener?(g==x||!g.ki)&&g.removeEventListener(f,h,i):g.detachEvent&&g.detachEvent(f in ib?ib[f]:ib[f]="on"+f,h);g=g[fa]||(g[fa]=++ga);h=gb[f][i][g];if(hb[g]){var j=hb[g];Ia(j,e);j.length==0&&delete hb[g]}e.Wd=!0;h.rh=!0;kb(f,i,g,h);delete fb[d]}}}return b}
$a(function(a,c){if(!fb[a])return!0;var b=fb[a],d=b.type,e=gb;if(!(d in e))return!0;var e=e[d],g,f;Ea===k&&(Ea=qa&&!x.addEventListener);if(Ea){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=x;g=h.shift();)if(i[g]!=o)i=i[g];else{h=o;break a}h=i}g=h;h=!0 in e;i=!1 in e;if(h){if(g.keyCode<0||g.returnValue!=k)return!0;a:{var j=!1;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(l){j=!0}if(j||g.returnValue==k)g.returnValue=!0}}j=db();j.Xb(g,this);g=!0;try{if(h){for(var m=Xa(),n=j.currentTarget;n;n=
n.parentNode)m.push(n);f=e[!0];f.Vd=f.Kc;for(var p=m.length-1;!j.tg&&p>=0&&f.Vd;p--)j.currentTarget=m[p],g&=lb(f,m[p],d,!0,j);if(i){f=e[!1];f.Vd=f.Kc;for(p=0;!j.tg&&p<m.length&&f.Vd;p++)j.currentTarget=m[p],g&=lb(f,m[p],d,!1,j)}}else g=mb(b,j)}finally{if(m)m.length=0,Ya(m);j.Dd();eb(j)}return g}d=new Na(c,this);try{g=mb(b,d)}finally{d.Dd()}return g});var nb={61:187,59:186};qa||sa&&(Ca["525"]||(Ca["525"]=ha(va,"525")>=0));function ob(a){this.id=pb++;this.name=a;this.controls={};this.xg={};this.Rg=[];this.nf=this.Pe=o}function qb(a,c){var b=0,d=rb==sb&&tb==ub&&vb==wb,e;for(e in xb){var g=d&&xb[e].Eh;b++;var f=yb(e,rb,tb,vb);a.Pe==o&&a.controls[f]!=o&&(!g||a.controls[f].ni)&&a.controls[f].execute(c)}if(b==1&&a.Pe!=o)a.nf!=o&&clearTimeout(a.nf),a.nf=setTimeout(function(){A(a,a.Pe,f);a.Pe=o;a.nf=o},100)}
function A(a,c,b,d,e,g){var f=b;typeof b=="number"&&(f=yb(b,d,e,g));b=[];d=a.controls[f];e=a.xg[c.name];if(d!=o)if(e!=o)a.controls[e]=d,a.xg[d.name]=e,b.push(new zb(e,d));else throw"The specified key is already in use for a different function.";else e!=o&&delete a.controls[e];a.controls[f]=c;a.xg[c.name]=f;b.push(new zb(f,c));for(c=0;c<a.Rg.length;c++)f=a.Rg[c],f.Cj.apply(f.ue,b||[],Ab(a))}function Ab(a){var c=[],b;for(b in a.controls)c.push(new zb(b,a.controls[b]));return c}
var pb=0,xb={},rb=!1,sb={},tb=!1,ub={},vb=!1,wb={};function Bb(a){var c=a.uj,c=ra&&a.keyCode in nb?nb[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function yb(a,c,b,d){var e=Fa[a];e==o&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}jb(document,"keydown",function(a){a=Bb(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&xb[a.keyCode]==o&&(xb[a.keyCode]={Eh:!1});rb=a.ctrlKey;tb=a.altKey;vb=a.shiftKey});
jb(document,"keyup",function(a){a=Bb(a);delete xb[a.keyCode];rb=a.ctrlKey;tb=a.altKey;vb=a.shiftKey});jb(document,"blur",function(){xb={};wb=vb=ub=tb=sb=rb=!1});function zb(a,c){this.key=this.key=a;this.action=this.action=c};function B(a,c){this.x=a;this.y=c}u=B.prototype;u.K=function(){this.y=this.x=0};u.j=function(a,c){this.x=a;this.y=c};u.m=function(a){this.x=a.x;this.y=a.y};u.bd=function(){return new B(-this.x,-this.y)};u.Gg=function(){this.x=-this.x;this.y=-this.y};u.ja=function(){return new B(this.x,this.y)};u.Ob=function(a){this.x+=a.x;this.y+=a.y};u.Hf=function(a){this.x-=a.x;this.y-=a.y};u.Hc=function(a){this.x*=a;this.y*=a};function Cb(a){return Math.sqrt(Db(a))}function Db(a){return a.x*a.x+a.y*a.y}
function Eb(a){var c=Cb(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Fb={},Gb=0;function Hb(){Gb--}function Ib(a){if(a.yg===k||a.yg===o)a.yg={};return a.yg};function Jb(){this.jf=this.cg=this.Id=this.Qi=this.Ld=1;var a=this;this.Vi={ri:{clear:function(){a.qc.clearRect(0,0,a.qc.canvas.width,a.qc.canvas.height)}}};this.hh=0}var Kb,Lb,Mb,Nb,Ob,Pb;
(function(a){a.prototype.Ic=function(a,b){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+b+")"};a.prototype.Rh=function(){var a=Qb;a===k&&(a=0);this.hh=a};a.prototype.Th=function(a){this.qc=a};a.prototype.Ph=function(a){a===k&&(a=0);this.Ld=a};a.prototype.Sh=function(){var a=1;a===k&&(a=0);this.Qi=a;this.qc.Lj=a};a.prototype.Qh=function(){var a=0.3;a===k&&(a=0);this.cg=a};a.prototype.Hh=function(a,b){var d=this.qc,e=this.Ld;d.beginPath();d.strokeStyle=this.Ic(b.color,this.Id);
d.moveTo(a[0].x*e,a[0].y*e);for(var g=1;g<4;g++)d.lineTo(a[g].x*e,a[g].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.Jh=function(a,b,d){if(b){var e=this.qc,g=this.Ld;e.beginPath();e.strokeStyle=this.Ic(d.color,this.Id);e.fillStyle=this.Ic(d.color,this.cg);e.moveTo(a[0].x*g,a[0].y*g);for(d=1;d<b;d++)e.lineTo(a[d].x*g,a[d].y*g);e.lineTo(a[0].x*g,a[0].y*g);e.closePath();e.fill();e.stroke()}};a.prototype.Ih=function(a,b,d,e){if(b){var g=this.qc,f=this.Ld,h=a.x*f,i=a.y*f;g.moveTo(0,
0);g.beginPath();g.strokeStyle=this.Ic(e.color,this.Id);g.fillStyle=this.Ic(e.color,this.cg);g.arc(h,i,b*f,0,Math.PI*2,!0);g.moveTo(h,i);g.lineTo((a.x+d.x*b)*f,(a.y+d.y*b)*f);g.closePath();g.fill();g.stroke()}};a.prototype.Gc=function(a,b,d){var e=this.qc,g=this.Ld;e.strokeStyle=this.Ic(d.color,this.Id);e.beginPath();e.moveTo(a.x*g,a.y*g);e.lineTo(b.x*g,b.y*g);e.closePath();e.stroke()};a.prototype.Kh=function(){var a=Rb,b=this.qc,d=this.Ld;b.beginPath();b.strokeStyle=this.Ic(16711680,this.Id);b.moveTo(a.position.x*
d,a.position.y*d);b.lineTo((a.position.x+this.jf*a.d.a.x)*d,(a.position.y+this.jf*a.d.a.y)*d);b.strokeStyle=this.Ic(65280,this.Id);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.jf*a.d.b.x)*d,(a.position.y+this.jf*a.d.b.y)*d);b.closePath();b.stroke()};Kb=1;Lb=2;Mb=4;Nb=8;Ob=16;Pb=32})(Jb);function Sb(a,c,b,d){if(Fb[a]==o)Gb++,Fb[a]=new Image,Fb[a].onload=Hb,Fb[a].src=a;this.url=a;this.sh=c||new B(0,0);this.pf=b||new B(1,1);this.Ah=d||new B(1,1);this.qb=new B(1,1)};function Tb(){this.lowerBound=new B(0,0);this.upperBound=new B(0,0)}function Ub(a){return new B((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}function Vb(a,c){var b;return b=(b=(b=(b=a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}
Tb.prototype.Cd=function(a){return a.lowerBound.x-this.upperBound.x>0?!1:a.lowerBound.y-this.upperBound.y>0?!1:this.lowerBound.x-a.upperBound.x>0?!1:this.lowerBound.y-a.upperBound.y>0?!1:!0};function Wb(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function Xb(a,c,b,d,e){this.nc={};this.ua=a;this.Eb=d;this.Cc=new B(d.x/b,d.y/b);this.scale=b;this.ya=new B(0,0);this.Ye=new B(-1,-1);this.vf=new Tb;this.vf.upperBound=this.Cc.ja();this.vf.upperBound.Hc(1.25);Yb(this,new B(0,0));a=document.getElementById(c);this.gd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.Eb.x+"px; height: "+this.Eb.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.Eb.x/2+"px; height: "+this.Eb.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.gd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.gd.className="viewportContainer";this.gd.style.width=this.Eb.x+"px";this.gd.style.height=this.Eb.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.gd.appendChild(this.display);a.appendChild(this.gd);this.Zf=document.createElement("div");this.Zf=Zb(this,"Loading, please wait.");$b(this.Zf);this.th=Zb(this,
"Paused");e?(this.fb=document.getElementById(c+"__DEBUG"),this.fb.width=this.ua.p.$a.x*b,this.fb.height=this.ua.p.$a.y*b,this.fb.style.marginRight="-"+this.fb.width+"px",this.fb.style.marginBottom="-"+this.fb.height+"px",c=new Jb,c.Th(this.fb.getContext("2d")),c.Ph(b),c.Qh(),c.Sh(),c.Rh(),this.ua.p.pa.Oa=c):this.fb=o}
function Zb(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+ac;b.innerHTML=c;b.style.width=a.Eb.x+"px";b.style.height=a.Eb.y+"px";a.gd.appendChild(b);return b}function $b(a){if(a.style.display=="none")a.style.display="table-cell"}
function bc(a){if(a.style.display!="none")a.style.display="none"}function Yb(a,c){a.ya.x=c.x;a.ya.y=c.y;if(a.ya.x<a.Cc.x/2)a.ya.x=a.Cc.x/2;else if(a.ya.x>a.ua.p.$a.x-a.Cc.x/2)a.ya.x=a.ua.p.$a.x-a.Cc.x/2;if(a.ya.y<a.Cc.y/2)a.ya.y=a.Cc.y/2;else if(a.ya.y>a.ua.p.$a.y-a.Cc.y/2)a.ya.y=a.ua.p.$a.y-a.Cc.y/2}
function cc(a,c){if(a.display==o)a.display={},a.display.L=new Tb,a.qi=function(a){var c=this.body?this.body.f.position:this.position.ja();return this.display.kf==0?c:new B(c.x+(a.x-c.x)*this.display.kf,c.y+(a.y-c.y)*this.display.kf)},a.pi=function(){return this.body?this.body.Ub():this.ab},a.display.kf=0,a.display.Fh=0;a.display.size=c.ja()}function D(a,c,b){a.display.rf=new Sb(c,b)}var ac=100,Qb=0|Mb|Kb,dc=0;var ec=function(){var a=window.Kj||window.Nj||window.Fj||window.Jj||window.Gj||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function fc(){this.ne=1;this.Ee=65535;this.kd=0}fc.prototype.ja=function(){var a=new fc;a.ne=this.ne;a.Ee=this.Ee;a.kd=this.kd;return a};function gc(){this.filter=new fc;this.Dh=this.shape=o;this.vb=0.2;this.pe=this.Bc=0;this.filter.ne=1;this.filter.Ee=65535;this.filter.kd=0;this.Xe=!1};function hc(){this.a=new B(0,0);this.b=new B(0,0);this.Oe()}function ic(a){var c=new hc;c.j(a);return c}u=hc.prototype;u.j=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.j(c,a);this.b.j(-a,c)};u.ja=function(){var a=new hc;a.Bd(this);return a};u.Bd=function(a){this.a.m(a.a);this.b.m(a.b)};u.xf=function(a){this.a.Ob(a.a);this.b.Ob(a.b)};u.Oe=function(){this.a.j(1,0);this.b.j(0,1)};u.K=function(){this.a.j(0,0);this.b.j(0,0)};u.Ub=function(){return Math.atan2(this.a.y,this.a.x)};
u.je=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function jc(a,c){return a.x*c.x+a.y*c.y}function kc(a,c){return a.x*c.y-a.y*c.x}function lc(a){return new B(1*a.y,-1*a.x)}function mc(a,c){return new B(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function nc(a,c){return new B(jc(c,a.a),jc(c,a.b))}function E(a,c){var b=mc(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function oc(a,c){var b=F(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function F(a,c){return new B(a.x-c.x,a.y-c.y)}
function G(a,c,b){return a<c?c:a>b?b:a};function I(a){if(!a)throw"Assertion Failed";}var pc=2/180*Math.PI,qc=8/180*Math.PI,rc=0.5*Math.PI,sc=rc*rc,tc=2/180*Math.PI;function uc(){}uc.prototype.j=function(a){this.Ja.m(a.Ja);this.Fb.m(a.Fb);this.Fa.m(a.Fa);this.n=a.n;this.ra=a.ra;this.sa=a.sa};function vc(){this.T=new uc;this.ha=new uc;this.kb=new uc;this.r=[this.T,this.ha,this.kb]}function wc(a){return a.z==1?0:a.z==2?Cb(F(a.T.Fa,a.ha.Fa)):a.z==3?kc(F(a.ha.Fa,a.T.Fa),F(a.kb.Fa,a.T.Fa)):(I(!1),0)};function xc(a,c,b){var d=new vc,e=b.zc,g=b.sf,f=b.Ac,h=b.tf;I(0<=c.count&&c.count<=3);var i,j;d.z=c.count;for(var l=d.r,m=0;m<d.z;m++){var n=l[m];n.ra=c.ra[m];n.sa=c.sa[m];i=J(e,n.ra);j=J(f,n.sa);n.Ja=E(g,i);n.Fb=E(h,j);n.Fa=F(n.Fb,n.Ja);n.n=0}if(d.z>1&&(i=c.aj,j=wc(d),j<0.5*i||2*i<j||j<Number.MIN_VALUE))d.z=0;if(d.z==0)n=l[0],n.ra=0,n.sa=0,i=J(e,0),j=J(f,0),n.Ja=E(g,i),n.Fb=E(h,j),n.Fa=F(n.Fb,n.Ja),d.z=1;(d.z<1||d.z>3)&&I(!1);for(e=0;e<20;){g=[];for(f=0;f<d.z;f++)g[f]={},g[f].ra=d.r[f].ra,g[f].sa=
d.r[f].sa;if(d.z==2)f=d,h=f.T.Fa,l=f.ha.Fa,i=F(l,h),h=-(h.x*i.x+h.y*i.y),h<=0?(f.T.n=1,f.z=1):(l=l.x*i.x+l.y*i.y,l<=0?(f.ha.n=1,f.z=1,f.T.j(f.ha)):(i=1/(l+h),f.T.n=l*i,f.ha.n=h*i,f.z=2));else if(d.z==3){var f=d,p=f.T.Fa,s=f.ha.Fa,r=f.kb.Fa,t=F(s,p),h=jc(s,t),l=-jc(p,t),v=F(r,p);i=jc(r,v);j=-jc(p,v);n=F(r,s);m=jc(r,n);n=-jc(s,n);v=kc(t,v);t=v*kc(s,r);r=v*kc(r,p);p=v*kc(p,s);l<=0&&j<=0?(f.T.n=1,f.z=1):h>0&&l>0&&p<=0?(i=1/(h+l),f.T.n=h*i,f.ha.n=l*i,f.z=2):i>0&&j>0&&r<=0?(h=1/(i+j),f.T.n=i*h,f.kb.n=j*
h,f.z=2,f.ha.j(f.kb)):h<=0&&n<=0?(f.ha.n=1,f.z=1,f.T.j(f.ha)):i<=0&&m<=0?(f.kb.n=1,f.z=1,f.T.j(f.kb)):m>0&&n>0&&t<=0?(h=1/(m+n),f.ha.n=m*h,f.kb.n=n*h,f.z=2,f.T.j(f.kb)):(h=1/(t+r+p),f.T.n=t*h,f.ha.n=r*h,f.kb.n=p*h,f.z=3)}if(d.z==3)break;d.z==1?f=d.T.Fa.bd():d.z==2?(f=F(d.ha.Fa,d.T.Fa),f=kc(f,d.T.Fa.bd())>0?new B(-1*f.y,1*f.x):lc(f)):(I(!1),f=new B(0,0));if(Db(f)<yc)break;d.r[d.z].ra=b.zc.Ne(nc(b.sf.d,f.bd()));d.r[d.z].Ja=E(b.sf,J(b.zc,d.r[d.z].ra));d.r[d.z].sa=b.Ac.Ne(nc(b.tf.d,f));d.r[d.z].Fb=E(b.tf,
J(b.Ac,d.r[d.z].sa));d.r[d.z].Fa=F(d.r[d.z].Fb,d.r[d.z].Ja);e++;h=!1;for(f=0;f<g.length;f++)if(d.r[d.z].ra==g[f].ra&&d.r[d.z].sa==g[f].sa){h=!0;break}if(h)break;d.z++}e=a.xc;g=a.yc;d.z==1?(e.m(d.T.Ja),g.m(d.T.Fb)):d.z==2?(e.x=d.T.n*d.T.Ja.x+d.ha.n*d.ha.Ja.x,e.y=d.T.n*d.T.Ja.y+d.ha.n*d.ha.Ja.y,g.x=d.T.n*d.T.Fb.x+d.ha.n*d.ha.Fb.x,g.y=d.T.n*d.T.Fb.y+d.ha.n*d.ha.Fb.y):d.z==3?(g.x=e.x=d.T.n*d.T.Ja.x+d.ha.n*d.ha.Ja.x+d.kb.n*d.kb.Ja.x,g.y=e.y=d.T.n*d.T.Ja.y+d.ha.n*d.ha.Ja.y+d.kb.n*d.kb.Ja.y):I(!1);a.hd=
Cb(F(a.xc,a.yc));c.aj=wc(d);c.count=d.z;e=d.r;for(g=0;g<d.z;g++)c.ra[g]=e[g].ra,c.sa[g]=e[g].sa;if(b.Ch)c=b.zc.N,b=b.Ac.N,a.hd>c+b&&a.hd>Number.MIN_VALUE?(a.hd-=c+b,d=F(a.yc,a.xc),Eb(d),a.xc.x+=c*d.x,a.xc.y+=c*d.y,a.yc.x-=b*d.x,a.yc.y-=b*d.y):(b=new B(0,0),b.x=0.5*(a.xc.x+a.yc.x),b.y=0.5*(a.xc.y+a.yc.y),a.xc.x=a.yc.x=b.x,a.xc.y=a.yc.y=b.y,a.hd=0)};function zc(){};function Ac(){this.xc=new B(0,0);this.yc=new B(0,0);this.hd=0};function Bc(){this.ra=[0,0,0];this.sa=[0,0,0]};function Cc(){}Cc.prototype.j=function(a){a.Ff(this)};Cc.prototype.Ne=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.z;d++){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};Cc.prototype.be=function(a){return this.r[this.Ne(a)]};Cc.prototype.Eg=aa("z");function J(a,c){c===k&&(c=0);I(0<=c&&c<a.z);return a.r[c]};function Dc(){this.N=0.005}u=Dc.prototype;u.ja=ba(o);u.j=function(a){this.N=a.N};u.Zd=q();u.yf=q();u.Ff=function(){I(!1)};function Ec(){this.Wc=0;this.ed=new B(0,0);this.de=0};function Fc(a,c){this.position=new B(0,0);this.d=new hc;a&&this.position.m(a);c&&this.d.Bd(c)}Fc.prototype.X=function(a,c){this.position.m(a);this.d.Bd(c)};Fc.prototype.Oe=function(){this.position.K();this.d.Oe()};Fc.prototype.j=function(a){this.position.m(a.position);this.d.Bd(a.d)};Fc.prototype.Ub=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function K(){this.N=0.005;this.Ab=new B(0,0);this.r=[];this.ma=[]}z(K,Dc);u=K.prototype;u.ce=ba("b2PolygonShape");u.ja=function(){var a=new K;a.j(this);return a};u.j=function(a){Dc.prototype.j.call(this,a);if(a instanceof K){this.Ab.m(a.Ab);this.ea=a.ea;Gc(this,this.ea);for(var c=0;c<this.ea;c++)this.r[c].m(a.r[c]),this.ma[c].m(a.ma[c])}};function Hc(a,c){Ic(a,c)}
function Ic(a,c){var b=c.length;I(2<=b);a.ea=b;Gc(a,b);for(b=b=0;b<a.ea;b++)a.r[b].m(c[b]);for(b=0;b<a.ea;++b){var d=F(a.r[b+1<a.ea?b+1:0],a.r[b]);I(Db(d)>Number.MIN_VALUE);a.ma[b].m(lc(d));Eb(a.ma[b])}b=a.r;d=a.ea;d===k&&(d=0);for(var e=new B(0,0),g=0,f=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],l=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));g+=l;e.x+=l*f*(0+i.x+j.x);e.y+=l*f*(0+i.y+j.y)}e.x*=1/g;e.y*=1/g;a.Ab=e}
function Jc(a,c,b){a.ea=4;Gc(a,4);a.r[0].j(-c,-b);a.r[1].j(c,-b);a.r[2].j(c,b);a.r[3].j(-c,b);a.ma[0].j(0,-1);a.ma[1].j(1,0);a.ma[2].j(0,1);a.ma[3].j(-1,0);a.Ab.K()}
u.Zd=function(a,c){for(var b=c.d,d=this.r[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),g=c.position.y+(b.a.y*d.x+b.b.y*d.y),f=e,h=g,i=1;i<this.ea;++i)var d=this.r[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,g=g<d?g:d,f=f>j?f:j,h=h>d?h:d;a.lowerBound.x=e-this.N;a.lowerBound.y=g-this.N;a.upperBound.x=f+this.N;a.upperBound.y=h+this.N};
u.yf=function(a,c){c===k&&(c=0);if(this.ea==2)a.ed.x=0.5*(this.r[0].x+this.r[1].x),a.ed.y=0.5*(this.r[0].y+this.r[1].y),a.Wc=0,a.de=0;else{for(var b=0,d=0,e=0,g=0,f=1/3,h=0;h<this.ea;++h){var i=this.r[h],j=h+1<this.ea?this.r[h+1]:this.r[0],l=i.x-0,m=i.y-0,n=j.x-0,p=j.y-0,s=l*p-m*n,r=0.5*s;e+=r;b+=r*f*(0+i.x+j.x);d+=r*f*(0+i.y+j.y);i=l;g+=s*(f*(0.25*(i*i+n*i+n*n)+(0*i+0*n))+0+(f*(0.25*(m*m+p*m+p*p)+(0*m+0*p))+0))}a.Wc=c*e;b*=1/e;d*=1/e;a.ed.j(b,d);a.de=c*g}};
u.Ff=function(a){a.r=this.r;a.z=this.ea;a.N=this.N};u.Eg=aa("ea");u.Ne=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ea;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};u.be=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ea;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return this.r[c]};function Gc(a,c){a.r=[];a.ma=[];for(var b=a.r.length;b<c;b++)a.r[b]=new B(0,0),a.ma[b]=new B(0,0)}new hc;function Kc(){}Kc.prototype.Wb=function(a,c){var b=a.dg.ja(),d=c.dg.ja();return b.kd==d.kd&&b.kd!=0?b.kd>0:(b.Ee&d.ne)!=0&&(b.ne&d.Ee)!=0};var Lc=new Kc;function Mc(){};function L(a){this.Ya=new Mc;this.Za=new Mc;this.Ae=new B(0,0);this.Be=new B(0,0);I(a.U!=a.W);this.C=a.type;this.w=this.Aa=o;this.F=a.U;this.I=a.W;this.fh=a.Qf}u=L.prototype;u.Sb=ba(o);u.Tb=ba(o);u.ic=function(){return this.F.ic()&&this.I.ic()};u.Vb=q();u.Ib=q();u.Af=q();u.Hb=ba(!1);function Nc(a){L.call(this,a);this.bc=new B(0,0);this.cc=new B(0,0);this.A=new B(0,0);this.B=new B(0,0);this.Z=new B(0,0);this.$=new B(0,0);this.hb=this.F.Ra.gg;this.bc.x=a.Ue.x-this.hb.f.position.x;this.bc.y=a.Ue.y-this.hb.f.position.y;this.cc.x=a.Ve.x-this.hb.f.position.x;this.cc.y=a.Ve.y-this.hb.f.position.y;this.A.m(a.Wa);this.B.m(a.Xa);this.na=a.Xc;this.Jd=a.Xf+this.na*a.Yf;this.mh=Math.min(a.ph,this.Jd-this.na*Oc);this.nh=Math.min(a.qh,(this.Jd-Oc)/this.na);this.uc=this.tc=this.i=0}z(Nc,L);
u=Nc.prototype;u.Sb=function(){return O(this.F,this.A)};u.Tb=function(){return O(this.I,this.B)};function Pc(a){var c=a.hb.f.position.ja();c.Ob(a.bc);return c}function Qc(a){var c=a.hb.f.position.ja();c.Ob(a.cc);return c}
u.Vb=function(a){var c=this.F,b=this.I,d;d=c.f.d;var e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,f=d.a.x*e+d.b.x*g,g=d.a.y*e+d.b.y*g,e=f;d=b.f.d;var h=this.B.x-b.c.o.x,i=this.B.y-b.c.o.y,f=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=f;d=b.c.g.x+h;var f=b.c.g.y+i,j=this.hb.f.position.x+this.cc.x,l=this.hb.f.position.y+this.cc.y;this.Z.j(c.c.g.x+e-(this.hb.f.position.x+this.bc.x),c.c.g.y+g-(this.hb.f.position.y+this.bc.y));this.$.j(d-j,f-l);d=Cb(this.Z);f=Cb(this.$);d>0.005?this.Z.Hc(1/d):this.Z.K();f>0.005?this.$.Hc(1/
f):this.$.K();this.Jd-d-this.na*f>0?this.i=this.mg=0:this.mg=2;d<this.mh?this.tc=this.hg=0:this.hg=2;f<this.nh?this.uc=this.ig=0:this.ig=2;d=e*this.Z.y-g*this.Z.x;f=h*this.$.y-i*this.$.x;this.ye=c.l+c.t*d*d;this.ze=b.l+b.t*f*f;this.ff=this.ye+this.na*this.na*this.ze;this.ye=1/this.ye;this.ze=1/this.ze;this.ff=1/this.ff;a.hc?(this.i*=a.Ua,this.tc*=a.Ua,this.uc*=a.Ua,a=(-this.i-this.tc)*this.Z.x,d=(-this.i-this.tc)*this.Z.y,f=(-this.na*this.i-this.uc)*this.$.x,j=(-this.na*this.i-this.uc)*this.$.y,c.h.x+=
c.l*a,c.h.y+=c.l*d,c.s+=c.t*(e*d-g*a),b.h.x+=b.l*f,b.h.y+=b.l*j,b.s+=b.t*(h*j-i*f)):this.uc=this.tc=this.i=0};
u.Ib=function(){var a=this.F,c=this.I,b;b=a.f.d;var d=this.A.x-a.c.o.x,e=this.A.y-a.c.o.y,g=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=g;b=c.f.d;var f=this.B.x-c.c.o.x,h=this.B.y-c.c.o.y,g=b.a.x*f+b.b.x*h,h=b.a.y*f+b.b.y*h,f=g,i=g=b=0,j=0;b=j=b=j=i=g=b=0;if(this.mg==2)b=a.h.x+-a.s*e,g=a.h.y+a.s*d,i=c.h.x+-c.s*h,j=c.h.y+c.s*f,b=-(this.Z.x*b+this.Z.y*g)-this.na*(this.$.x*i+this.$.y*j),j=this.ff*-b,b=this.i,this.i=Math.max(0,this.i+j),j=this.i-b,b=-j*this.Z.x,g=-j*this.Z.y,i=-this.na*j*this.$.x,j=-this.na*
j*this.$.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.s+=a.t*(d*g-e*b),c.h.x+=c.l*i,c.h.y+=c.l*j,c.s+=c.t*(f*j-h*i);if(this.hg==2)b=a.h.x+-a.s*e,g=a.h.y+a.s*d,b=-(this.Z.x*b+this.Z.y*g),j=-this.ye*b,b=this.tc,this.tc=Math.max(0,this.tc+j),j=this.tc-b,b=-j*this.Z.x,g=-j*this.Z.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.s+=a.t*(d*g-e*b);if(this.ig==2)i=c.h.x+-c.s*h,j=c.h.y+c.s*f,b=-(this.$.x*i+this.$.y*j),j=-this.ze*b,b=this.uc,this.uc=Math.max(0,this.uc+j),j=this.uc-b,i=-j*this.$.x,j=-j*this.$.y,c.h.x+=c.l*i,c.h.y+=c.l*j,c.s+=
c.t*(f*j-h*i)};
u.Hb=function(){var a=this.F,c=this.I,b,d=this.hb.f.position.x+this.bc.x,e=this.hb.f.position.y+this.bc.y,g=this.hb.f.position.x+this.cc.x,f=this.hb.f.position.y+this.cc.y,h=0,i=0,j=0,l=0,m=b=0,n=0,p=0,s=m=p=b=m=b=0;if(this.mg==2)b=a.f.d,h=this.A.x-a.c.o.x,i=this.A.y-a.c.o.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=c.f.d,j=this.B.x-c.c.o.x,l=this.B.y-c.c.o.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,b=a.c.g.x+h,m=a.c.g.y+i,n=c.c.g.x+j,p=c.c.g.y+l,this.Z.j(b-d,m-e),this.$.j(n-g,p-f),b=Cb(this.Z),m=
Cb(this.$),b>0.005?this.Z.Hc(1/b):this.Z.K(),m>0.005?this.$.Hc(1/m):this.$.K(),b=this.Jd-b-this.na*m,s=Math.max(s,-b),b=G(b+0.005,-0.2,0),p=-this.ff*b,b=-p*this.Z.x,m=-p*this.Z.y,n=-this.na*p*this.$.x,p=-this.na*p*this.$.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.t*(h*m-i*b),c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=c.t*(j*p-l*n),P(a),P(c);if(this.hg==2)b=a.f.d,h=this.A.x-a.c.o.x,i=this.A.y-a.c.o.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=a.c.g.x+h,m=a.c.g.y+i,this.Z.j(b-d,m-e),b=Cb(this.Z),b>0.005?(this.Z.x*=
1/b,this.Z.y*=1/b):this.Z.K(),b=this.mh-b,s=Math.max(s,-b),b=G(b+0.005,-0.2,0),p=-this.ye*b,b=-p*this.Z.x,m=-p*this.Z.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.t*(h*m-i*b),P(a);if(this.ig==2)b=c.f.d,j=this.B.x-c.c.o.x,l=this.B.y-c.c.o.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,n=c.c.g.x+j,p=c.c.g.y+l,this.$.j(n-g,p-f),m=Cb(this.$),m>0.005?(this.$.x*=1/m,this.$.y*=1/m):this.$.K(),b=this.nh-m,s=Math.max(s,-b),b=G(b+0.005,-0.2,0),p=-this.ze*b,n=-p*this.$.x,p=-p*this.$.y,c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=
c.t*(j*p-l*n),P(c);return s<0.005};var Oc=1;function Rc(){this.He=o;this.uh=0};var Q=!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function?function(a,c,b){b.get instanceof Function&&a.__defineGetter__(c,b.get);b.set instanceof Function&&a.__defineSetter__(c,b.set)}:Object.defineProperty;function Sc(a,c){return function(){c.apply(a,arguments)}};function Tc(){}Q(Tc.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:aa("Of")});Q(Tc.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Of=a;this.Jc.eb=this.Jc.eb&4294967040|this.Of&255}});Q(Tc.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:aa("Lf")});Q(Tc.prototype,"incidentEdge",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Lf=a;this.Jc.eb=this.Jc.eb&4294902015|this.Lf<<8&65280}});
Q(Tc.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:aa("Mf")});Q(Tc.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Mf=a;this.Jc.eb=this.Jc.eb&4278255615|this.Mf<<16&16711680}});Q(Tc.prototype,"flip",{enumerable:!1,configurable:!0,get:aa("Jf")});Q(Tc.prototype,"flip",{enumerable:!1,configurable:!0,set:function(a){a===k&&(a=0);this.Jf=a;this.Jc.eb=this.Jc.eb&16777215|this.Jf<<24&4278190080}});function Uc(){this.ub=new Tc;this.ub.Jc=this}Uc.prototype.j=function(a){this.key=a.eb};Uc.prototype.ja=function(){var a=new Uc;a.key=this.key;return a};Q(Uc.prototype,"key",{enumerable:!1,configurable:!0,get:aa("eb"),set:function(a){a===k&&(a=0);this.eb=a;this.ub.Of=this.eb&255;this.ub.Lf=(this.eb&65280)>>8&255;this.ub.Mf=(this.eb&16711680)>>16&255;this.ub.Jf=(this.eb&4278190080)>>24&255}});function Vc(){this.rb=new B(0,0);this.id=new Uc}Vc.prototype.j=function(a){this.rb.m(a.rb);this.id.j(a.id)};function Wc(){this.J=new B(0,0);this.sc=new Uc;this.constructor===Wc&&this.Ka()}Wc.prototype.Ka=function(){this.J.K();this.ud=this.rd=0;this.sc.key=0};Wc.prototype.j=function(a){this.J.m(a.J);this.rd=a.rd;this.ud=a.ud;this.sc.j(a.sc)};function Xc(){this.oa=0;if(this.constructor===Xc){this.G=[];for(var a=0;a<2;a++)this.G[a]=new Wc;this.Ea=new B(0,0);this.J=new B(0,0)}}Xc.prototype.Ka=function(){for(var a=0;a<2;a++)this.G[a].Ka();this.Ea.K();this.J.K();this.oa=this.C=0};Xc.prototype.j=function(a){this.oa=a.oa;for(var c=0;c<2;c++)this.G[c].j(a.G[c]);this.Ea.m(a.Ea);this.J.m(a.J);this.C=a.C};Xc.prototype.ja=function(){var a=new Xc;a.j(this);return a};function Yc(a,c,b,d){var e=0,g=c[0].rb,f=c[1].rb,h=b.x*g.x+b.y*g.y-d,b=b.x*f.x+b.y*f.y-d;h<=0&&a[e++].j(c[0]);b<=0&&a[e++].j(c[1]);if(h*b<0)b=h/(h-b),d=a[e].rb,d.x=g.x+b*(f.x-g.x),d.y=g.y+b*(f.y-g.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function Zc(a,c,b,d,e){b===k&&(b=0);for(var g=a.r,f=a.ma,a=d.r,h=c.d.a.x*f[b].x+c.d.b.x*f[b].y,f=c.d.a.y*f[b].x+c.d.b.y*f[b].y,i=e.d.a.x*h+e.d.a.y*f,j=e.d.b.x*h+e.d.b.y*f,l=0,m=Number.MAX_VALUE,n=0;n<d.ea;++n){var p=a[n].x*i+a[n].y*j;p<m&&(m=p,l=n)}return(e.position.x+(e.d.a.x*a[l].x+e.d.b.x*a[l].y)-(c.position.x+(c.d.a.x*g[b].x+c.d.b.x*g[b].y)))*h+(e.position.y+(e.d.a.y*a[l].x+e.d.b.y*a[l].y)-(c.position.y+(c.d.a.y*g[b].x+c.d.b.y*g[b].y)))*f}
function $c(a,c,b,d,e){var g=c.ma,f=e.position.x+(e.d.a.x*d.Ab.x+e.d.b.x*d.Ab.y),h=e.position.y+(e.d.a.y*d.Ab.x+e.d.b.y*d.Ab.y);f-=b.position.x+(b.d.a.x*c.Ab.x+b.d.b.x*c.Ab.y);h-=b.position.y+(b.d.a.y*c.Ab.x+b.d.b.y*c.Ab.y);for(var i=f*b.d.a.x+h*b.d.a.y,h=f*b.d.b.x+h*b.d.b.y,f=0,j=-Number.MAX_VALUE,l=0;l<c.ea;++l){var m=g[l].x*i+g[l].y*h;m>j&&(j=m,f=l)}g=Zc(c,b,f,d,e);i=f-1;i<0&&(i=c.ea-1);h=Zc(c,b,i,d,e);j=f+1;j>=c.ea&&(j=0);var l=Zc(c,b,j,d,e),n=m=0,p=0;if(h>g&&h>l)p=-1,m=i,n=h;else if(l>g)p=1,
m=j,n=l;else return a[0]=f,g;for(;;)if(p==-1?(f=m-1,f<0&&(f=c.ea-1)):(f=m+1,f>=c.ea&&(f=0)),g=Zc(c,b,f,d,e),g>n)m=f,n=g;else break;a[0]=m;return n}var ad=[new Vc,new Vc],bd=[new Vc,new Vc],cd=[new Vc,new Vc],dd=[0],ed=[0],fd=new B(0,0),gd=new B(0,0),hd=new B(0,0),id=new B(0,0),jd=new B(0,0),kd=new B(0,0),ld=new B(0,0),md=new B(0,0);function nd(){this.J=new B(0,0);this.D=new B(0,0)}
nd.prototype.X=function(a,c,b,d,e){this.Uc=c;this.Vc=d;var g=a.count;I(0<g&&g<3);var f,h,i=h=f=0,j=0,d=c=0,l,m,i=0;g==1?(this.C=od,g=J(this.Uc,a.ra[0]),a=J(this.Vc,a.sa[0]),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),this.D.x=i-f,this.D.y=j-h,Eb(this.D)):(a.sa[0]==a.sa[1]?(this.C=pd,c=J(this.Uc,a.ra[0]),d=J(this.Uc,a.ra[1]),a=J(this.Vc,a.sa[0]),this.J.x=0.5*(c.x+d.x),this.J.y=
0.5*(c.y+d.y),this.D=lc(F(d,c)),Eb(this.D),m=this.D,l=b.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*m.x+l.b.y*m.y,m=this.J,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),i=(i-f)*c+(j-h)*d):a.ra[0]==a.ra[0]?(this.C=qd,f=J(this.Vc,a.sa[0]),h=J(this.Vc,a.sa[1]),g=J(this.Uc,a.ra[0]),this.J.x=0.5*(f.x+h.x),this.J.y=0.5*(f.y+h.y),this.D=lc(F(h,f)),Eb(this.D),m=this.D,l=e.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*
m.x+l.b.y*m.y,m=this.J,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),i=(f-i)*c+(h-j)*d):(c=J(this.Uc,a.ra[0]),d=J(this.Uc,a.ra[1]),f=J(this.Vc,a.sa[0]),h=J(this.Vc,a.sa[1]),i=mc(b.d,F(d,c)),j=mc(e.d,F(h,f)),e=i.x*i.x+i.y*i.y,b=j.x*j.x+j.y*j.y,g=F(j,i),a=i.x*g.x+i.y*g.y,g=j.x*g.x+j.y*g.y,j=i.x*j.x+i.y*j.y,l=e*b-j*j,i=0,l!=0&&(i=G((j*g-a*b)/l,0,1)),(j*i+g)/b<0&&(i=G((j-a)/e,0,1)),g=
new B(0,0),g.x=c.x+i*(d.x-c.x),g.y=c.y+i*(d.y-c.y),a=new B(0,0),a.x=f.x+i*(h.x-f.x),a.y=f.y+i*(h.y-f.y),i==0||i==1?(this.C=qd,this.D=lc(F(h,f)),Eb(this.D),this.J=a):(this.C=pd,this.D=lc(F(d,c)),this.J=g)),i<0&&this.D.Gg())};
nd.prototype.Rb=function(a,c){var b,d,e=0;switch(this.C){case od:b=nc(a.d,this.D);d=nc(c.d,this.D.bd());b=this.Uc.be(b);d=this.Vc.be(d);b=E(a,b);d=E(c,d);e=(d.x-b.x)*this.D.x+(d.y-b.y)*this.D.y;break;case pd:e=mc(a.d,this.D);b=E(a,this.J);d=nc(c.d,e.bd());d=this.Vc.be(d);d=E(c,d);e=(d.x-b.x)*e.x+(d.y-b.y)*e.y;break;case qd:e=mc(c.d,this.D);d=E(c,this.J);b=nc(a.d,e.bd());b=this.Uc.be(b);b=E(a,b);e=(b.x-d.x)*e.x+(b.y-d.y)*e.y;break;default:I(!1)}return e};var od=1,pd=2,qd=4;var rd=0,sd=0,td=0,ud=0,vd=0,wd=new Bc,xd=new zc,yd=new Fc,zd=new Fc,Ad=new nd,Bd=new Ac;function Cd(){this.o=new B(0,0);this.Da=new B(0,0);this.g=new B(0,0)}Cd.prototype.j=function(a){this.o.m(a.o);this.Da.m(a.Da);this.g.m(a.g);this.tb=a.tb;this.n=a.n;this.Ca=a.Ca};Cd.prototype.ja=function(){var a=new Cd;a.o.m(this.o);a.Da.m(this.Da);a.g.m(this.g);a.tb=this.tb;a.n=this.n;a.Ca=this.Ca;return a};
Cd.prototype.lb=function(a,c){c===k&&(c=0);a.position.x=(1-c)*this.Da.x+c*this.g.x;a.position.y=(1-c)*this.Da.y+c*this.g.y;a.d.j((1-c)*this.tb+c*this.n);var b=a.d;a.position.x-=b.a.x*this.o.x+b.b.x*this.o.y;a.position.y-=b.a.y*this.o.x+b.b.y*this.o.y};Cd.prototype.Ec=function(a){a===k&&(a=0);if(this.Ca<a&&1-this.Ca>Number.MIN_VALUE){var c=(a-this.Ca)/(1-this.Ca);this.Da.x=(1-c)*this.Da.x+c*this.g.x;this.Da.y=(1-c)*this.Da.y+c*this.g.y;this.tb=(1-c)*this.tb+c*this.n;this.Ca=a}};function Dd(){};function Ed(){this.position=new B(0,0);this.bh=new B(0,0);this.Dh=o;this.position.K();this.ab=0;this.bh.K();this.Wh=this.Ci=this.Xh=0;this.Yh=this.Vh=!0;this.bi=this.Lc=!1;this.type=R;this.Uh=!0;this.vi=1}var R=0;function S(){this.Ha=new Dd;this.Ia=new Dd;this.jb=new Xc;this.Ce=new Xc}function Fd(a,c){var b=a.O.v,d=a.M.da,e=a.O.da;c.X(a.jb,a.M.v.lb(),d.N,b.lb(),e.N)}S.prototype.jc=aa("of");
S.prototype.Ka=function(a,c){a===k&&(a=o);c===k&&(c=o);this.enabled=!0;this.Se=this.wd=this.Rf=this.of=!1;if(!a||!c)this.O=this.M=o;else{if(a.jc()||c.jc())this.of=!0;var b=a.v,d=c.v;if(b.C!=2||(b.ac&Gd)==Gd||d.C!=2||(d.ac&Gd)==Gd)this.Rf=!0;this.M=a;this.O=c;this.jb.oa=0;this.w=this.Aa=o;this.Ha.ta=o;this.Ha.ia=o;this.Ha.next=o;this.Ha.aa=o;this.Ia.ta=o;this.Ia.ia=o;this.Ia.next=o;this.Ia.aa=o}};
function Hd(a,c){var b=a.Ce;a.Ce=a.jb;a.jb=b;a.enabled=!0;var d=!1,b=a.wd,e=a.M.v,g=a.O.v,f=a.M.Nc.Cd(a.O.Nc);if(a.of){if(f){var d=a.M.da,e=e.lb(),f=a.O.da,h=g.lb(),g=new zc;g.zc=new Cc;g.zc.j(d);g.Ac=new Cc;g.Ac.j(f);g.sf=e;g.tf=h;g.Ch=!0;e=new Bc;e.count=0;d=new Ac;xc(d,e,g);d=d.hd<10*Number.MIN_VALUE}a.jb.oa=0}else{a.Rf=e.C!=2||(e.ac&Gd)==Gd||g.C!=2||(g.ac&Gd)==Gd?!0:!1;if(f){a.Rb();d=a.jb.oa>0;for(f=0;f<a.jb.oa;f++){h=a.jb.G[f];h.rd=0;for(var i=h.ud=0;i<a.Ce.oa;i++){var j=a.Ce.G[i];if(j.sc.key==
h.sc.key){h.rd=j.rd;h.ud=j.ud;break}}}}else a.jb.oa=0;d!=b&&(Id(e,!0),Id(g,!0))}a.wd=d;!b&&d&&c.Yd(a);b&&!d&&c.xd(a);a.of||c.ie(a,a.Ce)}S.prototype.Rb=q();var Jd=new function(){this.zc=new Cc;this.Ac=new Cc;this.yh=new Cd;this.zh=new Cd};function Kd(){S.call(this)}z(Kd,S);function Ld(){return new Kd}Kd.prototype.Ka=function(a,c){S.prototype.Ka.call(this,a,c)};
Kd.prototype.Rb=function(){var a=this.jb,c=this.M.da,b=this.M.v.f,d=this.O.da,e=this.O.v.f;a.oa=0;var g=e.position.x+(e.d.a.x*d.ca.x+e.d.b.x*d.ca.y)-(b.position.x+(b.d.a.x*c.ca.x+b.d.b.x*c.ca.y)),b=e.position.y+(e.d.a.y*d.ca.x+e.d.b.y*d.ca.y)-(b.position.y+(b.d.a.y*c.ca.x+b.d.b.y*c.ca.y)),e=c.N+d.N;if(!(g*g+b*b>e*e))a.C=1,a.J.m(c.ca),a.Ea.K(),a.oa=1,a.G[0].J.m(d.ca),a.G[0].sc.key=0};function Md(){S.call(this)}z(Md,S);function Nd(){return new Md}Md.prototype.Ka=function(a,c){S.prototype.Ka.call(this,a,c)};Md.prototype.Rb=q();function Od(a){this.N=0.005;this.N=a;this.ca=new B(0,0)}z(Od,Dc);u=Od.prototype;u.ce=ba("b2CircleShape");u.ja=function(){var a=new Od(this.N);a.j(this);return a};u.j=function(a){Dc.prototype.j.call(this,a);a instanceof Od&&this.ca.m(a.ca)};u.Zd=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.ca.x+b.b.x*this.ca.y),b=c.position.y+(b.a.y*this.ca.x+b.b.y*this.ca.y);a.lowerBound.j(d-this.N,b-this.N);a.upperBound.j(d+this.N,b+this.N)};
u.yf=function(a,c){a.Wc=c*Math.PI*this.N*this.N;a.ed.m(this.ca);a.de=a.Wc*(0.5*this.N*this.N+(this.ca.x*this.ca.x+this.ca.y*this.ca.y))};u.Ff=function(a){a.r=[this.ca];a.z=1;a.N=this.N};function Pd(){S.call(this)}z(Pd,S);function Qd(){return new Pd}Pd.prototype.Ka=function(a,c){I(a.da instanceof K);I(c.da instanceof Od);S.prototype.Ka.call(this,a,c)};
Pd.prototype.Rb=function(){a:{var a=this.jb,c=this.M.da,b=this.M.v.f,d=this.O.da,e=this.O.v.f;a.oa=0;for(var g=e.position.x+(e.d.a.x*d.ca.x+e.d.b.x*d.ca.y)-b.position.x,f=e.position.y+(e.d.a.y*d.ca.x+e.d.b.y*d.ca.y)-b.position.y,e=g*b.d.a.x+f*b.d.a.y,b=g*b.d.b.x+f*b.d.b.y,g=0,f=-Number.MAX_VALUE,h=c.N+d.N,i=0;i<c.ea;++i){var j=c.ma[i].x*(e-c.r[i].x)+c.ma[i].y*(b-c.r[i].y);if(j>h)break a;j>f&&(f=j,g=i)}j=g+1;j>=c.ea&&(j=0);var i=c.r[g],l=c.r[j];if(f<Number.MIN_VALUE)a.oa=1,a.C=2,a.Ea.m(c.ma[g]),a.J.x=
0.5*(i.x+l.x),a.J.y=0.5*(i.y+l.y);else if((e-i.x)*(l.x-i.x)+(b-i.y)*(l.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.oa=1;a.C=2;a.Ea.x=e-i.x;a.Ea.y=b-i.y;Eb(a.Ea);a.J.m(i)}else if((e-l.x)*(i.x-l.x)+(b-l.y)*(i.y-l.y)<=0){if((e-l.x)*(e-l.x)+(b-l.y)*(b-l.y)>h*h)break a;a.oa=1;a.C=2;a.Ea.x=e-l.x;a.Ea.y=b-l.y;Eb(a.Ea);a.J.m(l)}else{j=0.5*(i.x+l.x);i=0.5*(i.y+l.y);f=(e-j)*c.ma[g].x+(b-i)*c.ma[g].y;if(f>h)break a;a.oa=1;a.C=2;a.Ea.x=c.ma[g].x;a.Ea.y=c.ma[g].y;Eb(a.Ea);a.J.j(j,i)}a.G[0].J.m(d.ca);
a.G[0].sc.key=0}};function Rd(){S.call(this)}z(Rd,S);function Sd(){return new Rd}Rd.prototype.Ka=function(a,c){I(a.da instanceof K);I(!1);S.prototype.Ka.call(this,a,c)};Rd.prototype.Rb=q();function Td(){S.call(this)}z(Td,S);function Ud(){return new Td}Td.prototype.Ka=function(a,c){S.prototype.Ka.call(this,a,c)};
Td.prototype.Rb=function(){var a=this.jb,c=this.M.da,b=this.M.v.f,d=this.O.da,e=this.O.v.f;a.oa=0;var g=c.N+d.N;dd[0]=0;var f=$c(dd,c,b,d,e);if(!(f>g)){ed[0]=0;var h=$c(ed,d,e,c,b);if(!(h>g)){var i=c,j=d,l=b,m=e,n=dd[0],p=0;a.C=2;if(h>0.98*f+0.001)i=d,j=c,l=e,m=b,n=ed[0],a.C=4,p=1;c=n;b=m;c===k&&(c=0);for(var d=l.d.a.x*i.ma[c].x+l.d.b.x*i.ma[c].y,e=l.d.a.y*i.ma[c].x+l.d.b.y*i.ma[c].y,f=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=f,f=0,h=Number.MAX_VALUE,s=0;s<j.ea;s++){var r=d*j.ma[s].x+e*j.ma[s].y;
r<h&&(h=r,f=s)}d=f+1;d>=j.ea&&(d=0);ad[0].rb.x=b.position.x+(b.d.a.x*j.r[f].x+b.d.b.x*j.r[f].y);ad[0].rb.y=b.position.y+(b.d.a.y*j.r[f].x+b.d.b.y*j.r[f].y);ad[0].id.ub.ij=c;ad[0].id.ub.ti=f;ad[0].id.ub.ui=0;ad[1].rb.x=b.position.x+(b.d.a.x*j.r[d].x+b.d.b.x*j.r[d].y);ad[1].rb.y=b.position.y+(b.d.a.y*j.r[d].x+b.d.b.y*j.r[d].y);ad[1].id.ub.ij=c;ad[1].id.ub.ti=d;ad[1].id.ub.ui=1;c=i.r[n];i=n+1<i.ea?i.r[n+1]:i.r[0];fd.j(i.x-c.x,i.y-c.y);Eb(fd);gd.x=fd.y;gd.y=-fd.x;hd.j(0.5*(c.x+i.x),0.5*(c.y+i.y));jd.x=
l.d.a.x*fd.x+l.d.b.x*fd.y;jd.y=l.d.a.y*fd.x+l.d.b.y*fd.y;kd.x=-jd.x;kd.y=-jd.y;id.x=jd.y;id.y=-jd.x;ld.x=l.position.x+(l.d.a.x*c.x+l.d.b.x*c.y);ld.y=l.position.y+(l.d.a.y*c.x+l.d.b.y*c.y);md.x=l.position.x+(l.d.a.x*i.x+l.d.b.x*i.y);md.y=l.position.y+(l.d.a.y*i.x+l.d.b.y*i.y);if(!(Yc(bd,ad,kd,-jd.x*ld.x-jd.y*ld.y+g)<2)&&!(Yc(cd,bd,jd,jd.x*md.x+jd.y*md.y+g)<2)){a.Ea.m(gd);a.J.m(hd);l=id.x*ld.x+id.y*ld.y;for(n=i=0;n<2;++n)if(id.x*cd[n].rb.x+id.y*cd[n].rb.y-l<=g)c=cd[n].rb.x-m.position.x,j=cd[n].rb.y-
m.position.y,a.G[i].J.x=c*m.d.a.x+j*m.d.a.y,a.G[i].J.y=c*m.d.b.x+j*m.d.b.y,a.G[i].sc.j(cd[n].id),a.G[i].sc.ub.Bj=p,i++;a.oa=i}}}};function Vd(){this.Db=[];Wd(this,Ld,"b2CircleShape","b2CircleShape");Wd(this,Qd,"b2PolygonShape","b2CircleShape");Wd(this,Ud,"b2PolygonShape","b2PolygonShape");Wd(this,Nd,"b2EdgeShape","b2CircleShape");Wd(this,Sd,"b2PolygonShape","b2EdgeShape")}function Wd(a,c,b,d){a.Db[b]=a.Db[b]||[];a.Db[b][d]=new Rc;a.Db[b][d].Sg=c;a.Db[b][d].vh=!0;if(b!=d)a.Db[d]=a.Db[d]||[],a.Db[d][b]=new Rc,a.Db[d][b].Sg=c,a.Db[d][b].vh=!1}
Vd.prototype.Qb=function(a,c){var b=this.Db[a.da.ce()][c.da.ce()],d;if(b.He)return d=b.He,b.He=d.w,b.uh--,d.Ka(a,c),d;d=b.Sg;return d!=o?(b.vh?(d=d(),d.Ka(a,c)):(d=d(),d.Ka(c,a)),d):o};Vd.prototype.Fc=function(a){a.jb.oa>0&&(Id(a.M.v,!0),Id(a.O.v,!0));var c=this.Db[a.M.da.ce()][a.O.da.ce()];c.uh++;a.w=c.He;c.He=a};function Xd(a,c){this.qe=a;this.re=c};function Yd(a){this.L=new Tb;this.parent=this.lc=this.bb=o;this.Te=a};function Zd(){this.fc=o;this.Ni=this.Ej=0}u=Zd.prototype;u.$d=function(a,c){var b=new Yd(c);b.L.lowerBound.x=a.lowerBound.x-0.1;b.L.lowerBound.y=a.lowerBound.y-0.1;b.L.upperBound.x=a.upperBound.x+0.1;b.L.upperBound.y=a.upperBound.y+0.1;$d(this,b);return b};u.ae=function(a){ae(this,a)};
u.Df=function(a,c,b){I(a.bb===o);if(Vb(a.L,c))return!1;ae(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.L.lowerBound.x=c.lowerBound.x-d;a.L.lowerBound.y=c.lowerBound.y-b;a.L.upperBound.x=c.upperBound.x+d;a.L.upperBound.y=c.upperBound.y+b;$d(this,a);return!0};u.yd=function(a){return a.L};u.Ef=function(a,c){if(this.fc!==o){var b=[];for(b.push(this.fc);b.length>0;){var d=b.pop();if(d.L.Cd(c))if(d.bb===o){if(!a(d.Te))break}else b.push(d.bb),b.push(d.lc)}}};
function $d(a,c){a.Ni++;if(a.fc===o)a.fc=c,a.fc.parent=o;else{var b;b=Ub(c.L);for(var d=a.fc;d.bb!==o;)var e=d.bb,d=d.lc,d=Math.abs((e.L.lowerBound.x+e.L.upperBound.x)/2-b.x)+Math.abs((e.L.lowerBound.y+e.L.upperBound.y)/2-b.y)<Math.abs((d.L.lowerBound.x+d.L.upperBound.x)/2-b.x)+Math.abs((d.L.lowerBound.y+d.L.upperBound.y)/2-b.y)?e:d;b=d;e=b.parent;d=new Yd;d.parent=e;Wb(d.L,c.L,b.L);if(e){b.parent.bb==b?e.bb=d:e.lc=d;d.bb=b;d.lc=c;b.parent=d;for(c.parent=d;e;){if(Vb(e.L,d.L))break;Wb(e.L,e.bb.L,e.lc.L);
d=e;e=e.parent}}else d.bb=b,d.lc=c,b.parent=d,c.parent=d,a.fc=d}}function ae(a,c){if(c==a.fc)a.fc=o;else{var b=c.parent,d=b.parent,e;e=b.bb==c?b.lc:b.bb;if(d){d.bb==b?d.bb=e:d.lc=e;for(e.parent=d;d;){b=d.L;e=d;var g=new Tb;Wb(g,d.bb.L,d.lc.L);e.L=g;if(Vb(b,d.L))break;d=d.parent}}else a.fc=e,e.parent=o}};function be(){this.vc=new Zd;this.Nd=[]}u=be.prototype;u.$d=function(a,c){var b=this.vc.$d(a,c);this.Nd.push(b);return b};u.ae=function(a){Ia(this.Nd,a);this.vc.ae(a)};u.Df=function(a,c,b){this.vc.Df(a,c,b)&&this.Nd.push(a)};u.Cd=function(a,c){return this.vc.yd(a).Cd(this.vc.yd(c))};u.yd=function(a){return this.vc.yd(a)};
function ce(a,c){for(var b=[],d=0;d<a.Nd.length;d++){var e=a.Nd[d];a.vc.Ef(function(a){a!=e.Te&&b.push(new Xd(e.Te,a));return!0},a.vc.yd(e))}a.Nd=[];for(d=0;d<b.length;){var g=b[d];c(g.qe,g.re);for(d++;d<b.length;){var f=b[d];if(!(f.qe==g.qe&&f.re==g.re)&&!(f.qe==g.re&&f.re==g.qe))break;d++}}}u.Ef=function(a,c){this.vc.Ef(a,c)};function de(){}de.prototype.Yd=q();de.prototype.xd=q();de.prototype.ie=q();de.prototype.he=q();var ee=new de;function fe(a){this.Ra=a;this.Nb=0;this.bg=Lc;this.Kd=ee;this.gh=new Vd;this.ld=new be}
fe.prototype.Gh=function(a,c){var b=a.v,d=c.v;if(b!=d&&d.Wb(b)&&this.bg.Wb(a,c)){for(d=d.V;d;){if(d.aa==b){var e=d.ta.M,g=d.ta.O;if(e==a&&g==c)return;if(e==c&&g==a)return}d=d.next}e=this.gh.Qb(a,c);a=e.M;c=e.O;b=a.v;d=c.v;e.Aa=o;e.w=this.Ra.V;if(this.Ra.V!=o)this.Ra.V.Aa=e;this.Ra.V=e;e.Ha.ta=e;e.Ha.aa=d;e.Ha.ia=o;e.Ha.next=b.V;if(b.V!=o)b.V.ia=e.Ha;b.V=e.Ha;e.Ia.ta=e;e.Ia.aa=b;e.Ia.ia=o;e.Ia.next=d.V;if(d.V!=o)d.V.ia=e.Ia;d.V=e.Ia;this.Ra.Nb++}};function ge(a){ce(a.ld,Sc(a,a.Gh))}
fe.prototype.Fc=function(a){var c=a.M.v,b=a.O.v;a.wd&&this.Kd.xd(a);if(a.Aa)a.Aa.w=a.w;if(a.w)a.w.Aa=a.Aa;if(a==this.Ra.V)this.Ra.V=a.w;if(a.Ha.ia)a.Ha.ia.next=a.Ha.next;if(a.Ha.next)a.Ha.next.ia=a.Ha.ia;if(a.Ha==c.V)c.V=a.Ha.next;if(a.Ia.ia)a.Ia.ia.next=a.Ia.next;if(a.Ia.next)a.Ia.next.ia=a.Ia.ia;if(a.Ia==b.V)b.V=a.Ia.next;this.gh.Fc(a);this.Nb--};new function(){this.position=new B(0,0);this.Mj=new B(0,0);this.wc=new B(0,0);this.id=new Uc};function T(a,c,b){this.Nf=255*G(a,0,1);this.Kf=255*G(c,0,1);this.If=255*G(b,0,1)}T.prototype.j=function(a,c,b){this.Nf=255*G(a,0,1);this.Kf=255*G(c,0,1);this.If=255*G(b,0,1)};Q(T.prototype,"r",{enumerable:!1,configurable:!0,set:function(a){this.Nf=255*G(a,0,1)}});Q(T.prototype,"g",{enumerable:!1,configurable:!0,set:function(a){this.Kf=255*G(a,0,1)}});Q(T.prototype,"b",{enumerable:!1,configurable:!0,set:function(a){this.If=255*G(a,0,1)}});
Q(T.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this.Nf<<16|this.Kf<<8|this.If}});var yc=Number.MIN_VALUE*Number.MIN_VALUE;function he(){this.P=new B(0,0);this.G=[];for(var a=0;a<2;a++)this.G[a]=new B(0,0)}
he.prototype.X=function(a,c,b,d,e){b===k&&(b=0);e===k&&(e=0);if(a.oa!=0){var g=0,f,h,i=0,j=0,l=0,m=0,n=0;f=0;switch(a.C){case 1:h=c.d;f=a.J;g=c.position.x+h.a.x*f.x+h.b.x*f.y;c=c.position.y+h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.G[0].J;a=d.position.x+h.a.x*f.x+h.b.x*f.y;d=d.position.y+h.a.y*f.x+h.b.y*f.y;f=a-g;h=d-c;i=f*f+h*h;i>yc?(i=Math.sqrt(i),this.P.x=f/i,this.P.y=h/i):(this.P.x=1,this.P.y=0);f=c+b*this.P.y;d-=e*this.P.y;this.G[0].x=0.5*(g+b*this.P.x+(a-e*this.P.x));this.G[0].y=0.5*(f+d);break;case 2:h=
c.d;f=a.Ea;i=h.a.x*f.x+h.b.x*f.y;j=h.a.y*f.x+h.b.y*f.y;h=c.d;f=a.J;l=c.position.x+h.a.x*f.x+h.b.x*f.y;m=c.position.y+h.a.y*f.x+h.b.y*f.y;this.P.x=i;this.P.y=j;for(g=0;g<a.oa;g++)h=d.d,f=a.G[g].J,n=d.position.x+h.a.x*f.x+h.b.x*f.y,f=d.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(b-(n-l)*i-(f-m)*j-e)*i,this.G[g].y=f+0.5*(b-(n-l)*i-(f-m)*j-e)*j;break;case 4:h=d.d;f=a.Ea;i=h.a.x*f.x+h.b.x*f.y;j=h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.J;l=d.position.x+h.a.x*f.x+h.b.x*f.y;m=d.position.y+h.a.y*f.x+h.b.y*f.y;
this.P.x=-i;this.P.y=-j;for(g=0;g<a.oa;g++)h=c.d,f=a.G[g].J,n=c.position.x+h.a.x*f.x+h.b.x*f.y,f=c.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(e-(n-l)*i-(f-m)*j-b)*i,this.G[g].y=f+0.5*(e-(n-l)*i-(f-m)*j-b)*j}}};function ie(){}ie.prototype.j=function(a){this.Y=a.Y;this.xb=a.xb;this.Ud=a.Ud;this.Xd=a.Xd;this.hc=a.hc};function je(){this.Zb=new B(0,0);this.Q=new B(0,0);this.R=new B(0,0)};function ke(){this.Ze=new B(0,0);this.Zb=new B(0,0);this.wc=new B(0,0);this.Td=new hc;this.Gb=new hc;this.Sa=[];for(var a=0;a<2;a++)this.Sa[a]=new je};function le(){this.P=new B(0,0);this.gf=[];this.G=[];for(var a=0;a<2;a++)this.G[a]=new B(0,0)}
le.prototype.X=function(a){I(a.pb>0);var c=0,b=0,d=0,e=0,g=0;switch(a.type){case 1:var f=a.U.f.d,d=a.Zb,c=a.U.f.position.x+(f.a.x*d.x+f.b.x*d.y),b=a.U.f.position.y+(f.a.y*d.x+f.b.y*d.y),f=a.W.f.d,d=a.Sa[0].Zb,e=a.W.f.position.x+(f.a.x*d.x+f.b.x*d.y),f=a.W.f.position.y+(f.a.y*d.x+f.b.y*d.y),d=e-c,g=f-b,h=d*d+g*g;h>yc?(h=Math.sqrt(h),this.P.x=d/h,this.P.y=g/h):(this.P.x=1,this.P.y=0);this.G[0].x=0.5*(c+e);this.G[0].y=0.5*(b+f);this.gf[0]=d*this.P.x+g*this.P.y-a.wg;break;case 2:f=a.U.f.d;d=a.Ze;this.P.x=
f.a.x*d.x+f.b.x*d.y;this.P.y=f.a.y*d.x+f.b.y*d.y;f=a.U.f.d;d=a.Zb;e=a.U.f.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.U.f.position.y+(f.a.y*d.x+f.b.y*d.y);f=a.W.f.d;for(c=0;c<a.pb;c++)d=a.Sa[c].Zb,b=a.W.f.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.W.f.position.y+(f.a.y*d.x+f.b.y*d.y),this.gf[c]=(b-e)*this.P.x+(d-g)*this.P.y-a.wg,this.G[c].x=b,this.G[c].y=d;break;case 4:f=a.W.f.d;d=a.Ze;this.P.x=f.a.x*d.x+f.b.x*d.y;this.P.y=f.a.y*d.x+f.b.y*d.y;f=a.W.f.d;d=a.Zb;e=a.W.f.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.W.f.position.y+
(f.a.y*d.x+f.b.y*d.y);f=a.U.f.d;for(c=0;c<a.pb;c++)d=a.Sa[c].Zb,b=a.U.f.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.U.f.position.y+(f.a.y*d.x+f.b.y*d.y),this.gf[c]=(b-e)*this.P.x+(d-g)*this.P.y-a.wg,this.G[c].j(b,d);this.P.x*=-1;this.P.y*=-1}};function me(){this.Wi=new ie;this.$b=[]}u=me.prototype;
u.X=function(a,c,b){b===k&&(b=0);var d;this.Wi.j(a);a=0;for(this.ve=b;this.$b.length<this.ve;)this.$b[this.$b.length]=new ke;for(a=0;a<b;++a){d=c[a];var e=d.M,g=d.O,f=e.da.N,h=g.da.N,i=e.v,j=g.v,l=d.jb,m;d=e.fg;var n=g.fg;d===k&&(d=0);n===k&&(n=0);m=Math.sqrt(d*n);var p,e=e.lg,g=g.lg;e===k&&(e=0);g===k&&(g=0);p=e>g?e:g;var n=i.h.x,s=i.h.y,r=j.h.x,t=j.h.y,v=i.s,M=j.s;I(l.oa>0);ne.X(l,i.f,f,j.f,h);e=ne.P.x;d=ne.P.y;g=this.$b[a];g.U=i;g.W=j;g.Yi=l;g.wc.x=e;g.wc.y=d;g.pb=l.oa;g.vb=m;g.Bc=p;g.Ze.x=l.Ea.x;
g.Ze.y=l.Ea.y;g.Zb.x=l.J.x;g.Zb.y=l.J.y;g.wg=f+h;g.type=l.C;for(f=0;f<g.pb;++f){m=l.G[f];h=g.Sa[f];h.Ba=m.rd;h.Dc=m.ud;h.Zb.m(m.J);m=h.Q.x=ne.G[f].x-i.c.g.x;p=h.Q.y=ne.G[f].y-i.c.g.y;var H=h.R.x=ne.G[f].x-j.c.g.x,N=h.R.y=ne.G[f].y-j.c.g.y,w=m*d-p*e,C=H*d-N*e;w*=w;C*=C;h.Td=1/(i.l+j.l+i.t*w+j.t*C);var $=i.q*i.l+j.q*j.l;$+=i.q*i.t*w+j.q*j.t*C;h.mi=1/$;C=d;$=-e;w=m*$-p*C;C=H*$-N*C;w*=w;C*=C;h.mj=1/(i.l+j.l+i.t*w+j.t*C);h.uf=0;m=g.wc.x*(r+-M*N-n- -v*p)+g.wc.y*(t+M*H-s-v*m);m<-1&&(h.uf+=-g.Bc*m)}if(g.pb==
2)t=g.Sa[0],r=g.Sa[1],l=i.l,i=i.t,n=j.l,j=j.t,s=t.Q.x*d-t.Q.y*e,t=t.R.x*d-t.R.y*e,v=r.Q.x*d-r.Q.y*e,r=r.R.x*d-r.R.y*e,e=l+n+i*s*s+j*t*t,d=l+n+i*v*v+j*r*r,j=l+n+i*s*v+j*t*r,e*e<100*(e*d-j*j)?(g.Gb.a.j(e,j),g.Gb.b.j(j,d),j=g.Gb,g=g.Td,i=j.a.x*j.b.y-j.b.x*j.a.y,i!==0&&(i=1/i),g.a.x=i*j.b.y,g.b.x=-i*j.b.x,g.a.y=-i*j.a.y,g.b.y=i*j.a.x):g.pb=1}};
u.Vb=function(a){for(var c=0;c<this.ve;++c){var b=this.$b[c],d=b.U,e=b.W,g=d.l,f=d.t,h=e.l,i=e.t,j=b.wc.x,l=b.wc.y,m=l,n=-j,p=0,s=0;if(a.hc){s=b.pb;for(p=0;p<s;++p){var r=b.Sa[p];r.Ba*=a.Ua;r.Dc*=a.Ua;var t=r.Ba*j+r.Dc*m,v=r.Ba*l+r.Dc*n;d.s-=f*(r.Q.x*v-r.Q.y*t);d.h.x-=g*t;d.h.y-=g*v;e.s+=i*(r.R.x*v-r.R.y*t);e.h.x+=h*t;e.h.y+=h*v}}else{s=b.pb;for(p=0;p<s;++p)d=b.Sa[p],d.Ba=0,d.Dc=0}}};
u.Ib=function(){for(var a=0,c,b=0,d=0,e=0,g=d=d=b=b=0,f=b=b=0,h=b=e=0,i=0,j,l=0;l<this.ve;++l){var e=this.$b[l],m=e.U,n=e.W,p=m.s,s=n.s,r=m.h,t=n.h,v=m.l,M=m.t,H=n.l,N=n.t,h=e.wc.x,w=i=e.wc.y;j=-h;f=e.vb;for(a=0;a<e.pb;a++)c=e.Sa[a],b=t.x-s*c.R.y-r.x+p*c.Q.y,d=t.y+s*c.R.x-r.y-p*c.Q.x,b=b*w+d*j,b=c.mj*-b,d=f*c.Ba,d=G(c.Dc+b,-d,d),b=d-c.Dc,g=b*w,b*=j,r.x-=v*g,r.y-=v*b,p-=M*(c.Q.x*b-c.Q.y*g),t.x+=H*g,t.y+=H*b,s+=N*(c.R.x*b-c.R.y*g),c.Dc=d;if(e.pb==1)c=e.Sa[0],b=t.x+-s*c.R.y-r.x- -p*c.Q.y,d=t.y+s*c.R.x-
r.y-p*c.Q.x,e=b*h+d*i,b=-c.Td*(e-c.uf),d=c.Ba+b,d=d>0?d:0,b=d-c.Ba,g=b*h,b*=i,r.x-=v*g,r.y-=v*b,p-=M*(c.Q.x*b-c.Q.y*g),t.x+=H*g,t.y+=H*b,s+=N*(c.R.x*b-c.R.y*g),c.Ba=d;else{c=e.Sa[0];var a=e.Sa[1],b=c.Ba,f=a.Ba,C=(t.x-s*c.R.y-r.x+p*c.Q.y)*h+(t.y+s*c.R.x-r.y-p*c.Q.x)*i,$=(t.x-s*a.R.y-r.x+p*a.Q.y)*h+(t.y+s*a.R.x-r.y-p*a.Q.x)*i,d=C-c.uf,g=$-a.uf;j=e.Gb;d-=j.a.x*b+j.b.x*f;for(g-=j.a.y*b+j.b.y*f;;){j=e.Td;w=-(j.a.x*d+j.b.x*g);j=-(j.a.y*d+j.b.y*g);if(w>=0&&j>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=v*(e+
h);r.y-=v*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}w=-c.Td*d;j=0;$=e.Gb.a.y*w+g;if(w>=0&&$>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=v*(e+h);r.y-=v*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}w=0;j=-a.Td*g;C=e.Gb.b.x*j+d;if(j>=0&&C>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=v*(e+h);r.y-=v*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*
h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}j=w=0;C=d;$=g;if(C>=0&&$>=0){b=w-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;r.x-=v*(e+h);r.y-=v*(b+i);p-=M*(c.Q.x*b-c.Q.y*e+a.Q.x*i-a.Q.y*h);t.x+=H*(e+h);t.y+=H*(b+i);s+=N*(c.R.x*b-c.R.y*e+a.R.x*i-a.R.y*h);c.Ba=w;a.Ba=j;break}break}}m.s=p;n.s=s}};u.Af=function(){for(var a=0;a<this.ve;++a)for(var c=this.$b[a],b=c.Yi,d=0;d<c.pb;++d){var e=b.G[d],g=c.Sa[d];e.rd=g.Ba;e.ud=g.Dc}};
u.Hb=function(a){a===k&&(a=0);for(var c=0,b=0;b<this.ve;b++){var d=this.$b[b],e=d.U,g=d.W,f=e.q*e.l,h=e.q*e.t,i=g.q*g.l,j=g.q*g.t;oe.X(d);for(var l=oe.P,m=0;m<d.pb;m++){var n=d.Sa[m],p=oe.G[m],s=oe.gf[m],r=p.x-e.c.g.x,t=p.y-e.c.g.y,v=p.x-g.c.g.x,p=p.y-g.c.g.y,c=c<s?c:s,s=-n.mi*G(a*(s+0.005),-0.2,0),n=s*l.x;s*=l.y;e.c.g.x-=f*n;e.c.g.y-=f*s;e.c.n-=h*(r*s-t*n);P(e);g.c.g.x+=i*n;g.c.g.y+=i*s;g.c.n+=j*(v*s-p*n);P(g)}}return c>-0.0075};var ne=new he,oe=new le;function pe(a,c){this.lh=a;this.md=c;qe(this)}function qe(a){a.ob=0;a.Nb=0;a.ib=0;a.zb=[];a.nd=[];a.dc=[]}
pe.prototype.je=function(a,c,b){for(var d=0,e=0,g,d=0;d<this.ob;++d)e=this.zb[d],e.C==2&&(e.h.x+=a.Y*(c.x+e.l*e.xe.x),e.h.y+=a.Y*(c.y+e.l*e.xe.y),e.s+=a.Y*e.t*e.ng,e.h.Hc(G(1-a.Y*e.Ri,0,1)),e.s*=G(1-a.Y*e.Fi,0,1));this.md.X(a,this.nd,this.Nb);c=this.md;c.Vb(a);for(d=0;d<this.ib;++d)g=this.dc[d],g.Vb(a);for(d=0;d<a.Xd;++d){for(e=0;e<this.ib;++e)g=this.dc[e],g.Ib(a);c.Ib()}for(d=0;d<this.ib;++d)g=this.dc[d],g.Af();c.Af();for(d=0;d<this.ob;++d)if(e=this.zb[d],e.C!=R){var f=a.Y*e.h.x,h=a.Y*e.h.y;f*f+
h*h>4&&(Eb(e.h),e.h.x*=2*a.xb,e.h.y*=2*a.xb);f=a.Y*e.s;if(f*f>sc)e.s=e.s<0?-rc*a.xb:rc*a.xb;e.c.Da.m(e.c.g);e.c.tb=e.c.n;e.c.g.x+=a.Y*e.h.x;e.c.g.y+=a.Y*e.h.y;e.c.n+=a.Y*e.s;P(e)}for(d=0;d<a.Ud;++d){f=c.Hb(0.2);h=!0;for(e=0;e<this.ib;++e)g=this.dc[e],g=g.Hb(0.2),h=h&&g;if(f&&h)break}re(this,c.$b);if(b){b=Number.MAX_VALUE;c=tc*tc;for(d=0;d<this.ob;++d)if(e=this.zb[d],e.C!=R)!e.ag||e.s*e.s>c||jc(e.h,e.h)>1.0E-4?b=e.hf=0:(e.hf+=a.Y,b=Math.min(b,e.hf));if(b>=0.5)for(d=0;d<this.ob;++d)e=this.zb[d],Id(e,
!1)}};
pe.prototype.Gf=function(a){var c=0,b=0;this.md.X(a,this.nd,this.Nb);for(var d=this.md,c=0;c<this.ib;++c)this.dc[c].Vb(a);for(c=0;c<a.Xd;++c){d.Ib();for(b=0;b<this.ib;++b)this.dc[b].Ib(a)}for(c=0;c<this.ob;++c)if(b=this.zb[c],b.C!=R){var e=a.Y*b.h.x,g=a.Y*b.h.y;e*e+g*g>4&&(Eb(b.h),b.h.x*=2*a.xb,b.h.y*=2*a.xb);e=a.Y*b.s;if(e*e>sc)b.s=b.s<0?-rc*a.xb:rc*a.xb;b.c.Da.m(b.c.g);b.c.tb=b.c.n;b.c.g.x+=a.Y*b.h.x;b.c.g.y+=a.Y*b.h.y;b.c.n+=a.Y*b.s;P(b)}for(c=0;c<a.Ud;++c){e=d.Hb(0.75);g=!0;for(b=0;b<this.ib;++b)var f=this.dc[b].Hb(0.2),
g=g&&f;if(e&&g)break}re(this,d.$b)};function re(a,c){if(a.lh!=o)for(var b=0;b<a.Nb;++b){for(var d=a.nd[b],e=c[b],g=0;g<e.pb;++g)se.fj[g]=e.Sa[g].Ba,se.lj[g]=e.Sa[g].Dc;a.lh.he(d,se)}}var se=new function(){this.fj=[];this.lj=[]};function te(a){L.call(this,a);this.A=new B(0,0);this.B=new B(0,0);this.wa=new B(0,0);this.A.m(a.Wa);this.B.m(a.Xa);this.kh=a.length;this.eg=a.Yg;this.Ii=a.Ug;this.eh=this.pd=this.i=0}z(te,L);u=te.prototype;u.Sb=function(){return O(this.F,this.A)};u.Tb=function(){return O(this.I,this.B)};
u.Vb=function(a){var c,b=0,d=this.F,e=this.I;c=d.f.d;var g=this.A.x-d.c.o.x,f=this.A.y-d.c.o.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.f.d;var h=this.B.x-e.c.o.x,i=this.B.y-e.c.o.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.wa.x=e.c.g.x+h-d.c.g.x-g;this.wa.y=e.c.g.y+i-d.c.g.y-f;b=Math.sqrt(this.wa.x*this.wa.x+this.wa.y*this.wa.y);b>0.005?this.wa.Hc(1/b):this.wa.K();c=g*this.wa.y-f*this.wa.x;var j=h*this.wa.y-i*this.wa.x;c=d.l+d.t*c*c+e.l+e.t*j*j;this.q=c!=0?1/c:0;if(this.eg>0){b-=this.kh;var j=
2*Math.PI*this.eg,l=this.q*j*j;this.pd=a.Y*(2*this.q*this.Ii*j+a.Y*l);this.pd=this.pd!=0?1/this.pd:0;this.eh=b*a.Y*l*this.pd;this.q=c+this.pd;this.q=this.q!=0?1/this.q:0}a.hc?(this.i*=a.Ua,a=this.i*this.wa.x,c=this.i*this.wa.y,d.h.x-=d.l*a,d.h.y-=d.l*c,d.s-=d.t*(g*c-f*a),e.h.x+=e.l*a,e.h.y+=e.l*c,e.s+=e.t*(h*c-i*a)):this.i=0};
u.Ib=function(){var a,c=this.F,b=this.I;a=c.f.d;var d=this.A.x-c.c.o.x,e=this.A.y-c.c.o.y,g=a.a.x*d+a.b.x*e,e=a.a.y*d+a.b.y*e,d=g;a=b.f.d;var f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,g=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=g,g=-this.q*(this.wa.x*(b.h.x+-b.s*h-(c.h.x+-c.s*e))+this.wa.y*(b.h.y+b.s*f-(c.h.y+c.s*d))+this.eh+this.pd*this.i);this.i+=g;a=g*this.wa.x;g*=this.wa.y;c.h.x-=c.l*a;c.h.y-=c.l*g;c.s-=c.t*(d*g-e*a);b.h.x+=b.l*a;b.h.y+=b.l*g;b.s+=b.t*(f*g-h*a)};
u.Hb=function(){var a;if(this.eg>0)return!0;var c=this.F,b=this.I;a=c.f.d;var d=this.A.x-c.c.o.x,e=this.A.y-c.c.o.y,g=a.a.x*d+a.b.x*e,e=a.a.y*d+a.b.y*e,d=g;a=b.f.d;var f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,g=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=g,g=b.c.g.x+f-c.c.g.x-d,i=b.c.g.y+h-c.c.g.y-e;a=Math.sqrt(g*g+i*i);g/=a;i/=a;a-=this.kh;a=G(a,-0.2,0.2);var j=-this.q*a;this.wa.j(g,i);g=j*this.wa.x;i=j*this.wa.y;c.c.g.x-=c.l*g;c.c.g.y-=c.l*i;c.c.n-=c.t*(d*i-e*g);b.c.g.x+=b.l*g;b.c.g.y+=b.l*i;b.c.n+=b.t*(f*
i-h*g);P(c);P(b);return Math.abs(a)<0.005};function ue(){this.dg=new fc;this.Nc=new Tb;this.da=this.w=this.v=o;this.lg=this.fg=this.bf=0}u=ue.prototype;u.jc=aa("Oi");u.Dg=function(a){a===k&&(a=o);a==o&&(a=new Ec);this.da.yf(a,this.bf);return a};u.Qb=function(a,c,b){this.fg=b.vb;this.lg=b.Bc;this.v=a;this.w=o;this.dg=b.filter.ja();this.Oi=b.Xe;this.da=b.shape.ja();this.bf=b.pe};u.Fc=function(){this.da=o};u.$d=function(a,c){this.da.Zd(this.Nc,c);this.Tc=a.$d(this.Nc,this)};u.ae=function(a){if(this.Tc!=o)a.ae(this.Tc),this.Tc=o};
function ve(a,c,b,d){if(a.Tc){var e=new Tb,g=new Tb;a.da.Zd(e,b);a.da.Zd(g,d);Wb(a.Nc,e,g);c.Df(a.Tc,a.Nc,F(d.position,b.position))}};function we(a,c){this.f=new Fc;this.c=new Cd;this.h=new B(0,0);this.xe=new B(0,0);this.ac=0;a.bi&&(this.ac|=Gd);a.Lc&&(this.ac|=xe);this.ag=a.Vh;this.yb=a.Yh;a.Uh&&(this.ac|=ye);this.Ra=c;this.f.position.m(a.position);this.f.d.j(a.ab);this.c.o.K();this.c.Ca=1;this.c.tb=this.c.n=a.ab;var b=this.f.d,d=this.c.o;this.c.g.x=b.a.x*d.x+b.b.x*d.y;this.c.g.y=b.a.y*d.x+b.b.y*d.y;this.c.g.x+=this.f.position.x;this.c.g.y+=this.f.position.y;this.c.Da.m(this.c.g);this.V=this.af=this.la=o;this.Hi=0;this.w=this.Aa=
o;this.h.m(a.bh);this.s=a.Xh;this.Ri=a.Ci;this.Fi=a.Wh;this.xe.K();this.hf=this.ng=0;this.C=a.type;this.l=this.C==2?this.q=1:this.q=0;this.t=this.pc=0;this.Mi=a.vi;this.rc=o;this.ih=0}u=we.prototype;u.lb=aa("f");u.Ub=function(){return this.c.n};function U(a){return a.c.g}function ze(a,c,b){a.C==2&&(a.yb==!1&&Id(a,!0),a.h.x+=a.l*c.x,a.h.y+=a.l*c.y,a.s+=a.t*((b.x-a.c.g.x)*c.y-(b.y-a.c.g.y)*c.x))}u.Dg=function(a){a.Wc=this.q;a.de=this.pc;a.ed.m(this.c.o)};
function O(a,c){var b=a.f.d,b=new B(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.f.position.x;b.y+=a.f.position.y;return b}function Id(a,c){a.yb=c;a.hf=0;if(!c)a.h.K(),a.s=0,a.xe.K(),a.ng=0}u.ic=function(){return(this.ac&ye)==ye};function Ae(a){Be.d.j(a.c.tb);var c=Be.d,b=a.c.o;Be.position.x=a.c.Da.x-(c.a.x*b.x+c.b.x*b.y);Be.position.y=a.c.Da.y-(c.a.y*b.x+c.b.y*b.y);b=a.Ra.Na.ld;for(c=a.rc;c;c=c.w)ve(c,b,Be,a.f)}
function P(a){a.f.d.j(a.c.n);var c=a.f.d,b=a.c.o;a.f.position.x=a.c.g.x-(c.a.x*b.x+c.b.x*b.y);a.f.position.y=a.c.g.y-(c.a.y*b.x+c.b.y*b.y)}u.Wb=function(a){if(this.C!=2&&a.C!=2)return!1;for(var c=this.la;c;c=c.next)if(c.aa==a&&c.Yb.fh==!1)return!1;return!0};u.Ec=function(a){a===k&&(a=0);this.c.Ec(a);this.c.g.m(this.c.Da);this.c.n=this.c.tb;P(this)};var Be=new Fc,Gd=8,xe=16,ye=32;function Ce(){this.ug=[];this.start=this.size=0}function De(a,c){a.ug[a.start+a.size]=c;a.size++};function Ee(a,c){this.Na=new fe(this);this.md=new me;this.kg=this.qd=!1;this.af=this.la=this.V=this.gb=this.Oa=this.cf=o;this.Hi=this.ib=this.Nb=this.ob=0;this.Gi=this.Xi=!0;this.ag=c;this.Ji=a;this.jh=0;this.gg=Fe(this,new Ed)}var Ge=1-100*Number.MIN_VALUE;function Fe(a,c){I(!a.qd);var b=new we(c,a);b.Aa=o;if(b.w=a.gb)a.gb.Aa=b;a.gb=b;a.ob++;return b}
function V(a,c){var b=c.Qb();b.Aa=o;if(b.w=a.la)a.la.Aa=b;a.la=b;a.ib++;b.Ya.Yb=b;b.Ya.aa=b.I;b.Ya.ia=o;if(b.Ya.next=b.F.la)b.F.la.ia=b.Ya;b.F.la=b.Ya;b.Za.Yb=b;b.Za.aa=b.F;b.Za.ia=o;if(b.Za.next=b.I.la)b.I.la.ia=b.Za;b.I.la=b.Za;var d=c.U,e=c.W;if(!c.Qf)for(e=e.V;e;){if(e.aa==d)e.ta.Se=!0;e=e.next}return b}
function He(a,c,b,d){if(a.kg)ge(a.Na),a.kg=!1;a.qd=!0;var e=new ie;e.Y=c;e.Xd=b;e.Ud=d;e.xb=c>0?1/c:0;e.Ua=a.jh*c;e.hc=a.Xi;c=a.Na;for(b=c.Ra.V;b;){var d=b.M,g=b.O,f=d.v,h=g.v;if(f.yb==!1&&h.yb==!1)b=b.w;else{if(b.Se){if(h.Wb(f)==!1){d=b;b=d.w;c.Fc(d);continue}if(c.bg.Wb(d,g)==!1){d=b;b=d.w;c.Fc(d);continue}b.Se=!1}c.ld.Cd(d.Tc,g.Tc)==!1?(d=b,b=d.w,c.Fc(d)):(Hd(b,c.Kd),b=b.w)}}if(e.Y>0)a.je(e),a.Gi&&e.Y>0&&a.Gf(e),a.jh=e.xb;a.qd=!1}
Ee.prototype.je=function(a){for(var c=this.af;c;c=c.w)He(c,a);for(var c=new pe(this.Na.Kd,this.md),b=this.gb;b;b=b.w)b.ga=!1;for(var d=this.V;d;d=d.w)d.ga=!1;for(d=this.la;d;d=d.w)d.ga=!1;for(d=this.gb;d;d=d.w)if(!d.ga&&d.yb&&d.ic()&&d.C!=R){qe(c);var e=[];e.push(d);for(d.ga=!0;e.length>0;){var b=e.pop(),g=c,f=b;f.Pi=g.ob;g.zb[g.ob++]=f;b.yb||Id(b,!0);if(b.C!=R){for(g=b.V;g;g=g.next)if(!g.ta.ga&&!g.ta.jc()&&g.ta.enabled!=!1&&g.ta.wd&&(f=g.ta,c.nd[c.Nb++]=f,g.ta.ga=!0,!g.aa.ga))e.push(g.aa),g.aa.ga=
!0;for(b=b.la;b;b=b.next)if(!b.Yb.ga&&b.aa.ic()&&(g=b.Yb,c.dc[c.ib++]=g,b.Yb.ga=!0,!b.aa.ga))e.push(b.aa),b.aa.ga=!0}}c.je(a,this.Ji,this.ag)}for(b=this.gb;b;b=b.w)b.yb&&b.ic()&&b.C!=R&&Ae(b);ge(this.Na)};
Ee.prototype.Gf=function(a){for(var c,b,d=new pe(this.Na.Kd,this.md),e=this.gb;e;e=e.w)e.ga=!1,e.c.Ca=0;for(b=this.V;b;b=b.w)b.ga=!1,b.Qd=o;for(b=this.la;b;b=b.w)b.ga=!1;for(;;){c=o;b=1;for(e=this.V;e;e=e.w)if(!(e.jc()||e.enabled==!1||!e.Rf||(e.M.v.C!=2||!e.M.v.yb)&&(e.O.v.C!=2||!e.O.v.yb))){var g=1;if(e.Qd!=o)g=e.Qd;else{if(e.wd)g=1;else{var f=e.M.v.c.Ca;if(e.M.v.c.Ca<e.O.v.c.Ca)f=e.O.v.c.Ca,e.M.v.c.Ec(f);else if(e.O.v.c.Ca<e.M.v.c.Ca)f=e.M.v.c.Ca,e.O.v.c.Ec(f);var g=e,h=e.M.v.c,i=e.O.v.c;Jd.zc.j(g.M.da);
Jd.Ac.j(g.O.da);Jd.yh=h;Jd.zh=i;Jd.nj=0.005;var j=Jd;rd++;var g=j.zc,h=j.Ac,i=j.yh,l=j.zh;I(i.Ca==l.Ca);I(1-i.Ca>Number.MIN_VALUE);var m=g.N+h.N,j=j.nj,n=0,p=0,s=0;wd.count=0;for(xd.Ch=!1;;){i.lb(yd,n);l.lb(zd,n);xd.zc=g;xd.Ac=h;xd.sf=yd;xd.tf=zd;xc(Bd,wd,xd);if(Bd.hd<=0){n=1;break}Ad.X(wd,g,yd,h,zd);var r=Ad.Rb(yd,zd);if(r<=0){n=1;break}p==0&&(s=r>m?Math.max(m-j,0.75*m):Math.max(r-j,0.02*m));if(r-s<0.5*j){if(p==0){n=1;break}break}var t=n,v=n,M=1;i.lb(yd,M);l.lb(zd,M);var H=Ad.Rb(yd,zd);if(H>=s){n=
1;break}for(var N=0;;){var w=0,w=N&1?v+(s-r)*(M-v)/(H-r):0.5*(v+M);i.lb(yd,w);l.lb(zd,w);var C=Ad.Rb(yd,zd);if(Math.abs(C-s)<0.025*j){t=w;break}C>s?(v=w,r=C):(M=w,H=C);N++;ud++;if(N==50)break}vd=Math.max(vd,N);if(t<(1+100*Number.MIN_VALUE)*n)break;n=t;p++;sd++;if(p==1E3)break}td=Math.max(td,p);g=n;I(0<=g&&g<=1);g>0&&g<1&&(g=(1-g)*f+g)}e.Qd=g}Number.MIN_VALUE<g&&g<b&&(c=e,b=g)}if(c===o||Ge<b)break;Ie.j(c.M.v.c);Je.j(c.O.v.c);c.M.v.Ec(b);c.O.v.Ec(b);Hd(c,this.Na.Kd);c.Qd=o;if(c.jc()||c.enabled==!1)c.M.v.c.j(Ie),
c.O.v.c.j(Je),P(c.M.v),P(c.O.v);else if(c.wd){e=c.M.v;if(e.C!=2)e=c.O.v;qe(d);c=new Ce;De(c,e);for(e.ga=!0;c.size>0;)if(e=c,f=e.ug[e.start],e.ug[e.start]=o,e.size--,e.start++,e=f,f=d,g=e,g.Pi=f.ob,f.zb[f.ob++]=g,e.yb||Id(e,!0),e.C==2){for(f=e.V;f;f=f.next){if(d.Nb==32)break;if(!f.ta.ga&&!f.ta.jc()&&f.ta.enabled!=!1&&f.ta.wd&&(g=f.ta,d.nd[d.Nb++]=g,f.ta.ga=!0,!f.aa.ga))f.aa.C!=R&&(f.aa.Ec(b),Id(f.aa,!0),De(c,f.aa)),f.aa.ga=!0}for(e=e.la;e;e=e.next)if(d.ib!=32&&!e.Yb.ga&&e.aa.ic()&&(f=e.Yb,d.dc[d.ib++]=
f,e.Yb.ga=!0,!e.aa.ga))e.aa.C!=R&&(e.aa.Ec(b),Id(e.aa,!0),De(c,e.aa)),e.aa.ga=!0}c=new ie;c.hc=!1;c.Y=(1-b)*a.Y;c.xb=1/c.Y;c.Ua=0;c.Xd=a.Xd;c.Ud=a.Ud;d.Gf(c);for(b=0;b<d.ob;b++)if(d.zb[b].ga=!1,d.zb[b].yb&&d.zb[b].C==2){Ae(d.zb[b]);for(f=d.zb[b].V;f;f=f.next)f.ta.Qd=o}for(b=0;b<d.Nb;b++)d.nd[b].ga=!1,d.nd[b].Qd=o;for(b=0;b<d.ib;b++)d.dc[b].ga=!1;ge(this.Na)}}};
function Ke(a,c,b,d){if(c instanceof Od)a.Oa.Ih(E(b,c.ca),c.N,b.d.a,d);else if(c instanceof K){for(var e=0,g=c.Eg(),c=c.r,f=[],e=0;e<g;e++)f[e]=E(b,c[e]);a.Oa.Jh(f,g,d)}}var Rb=new Fc,Ie=new Cd,Je=new Cd,Le=new T(0.5,0.8,0.8);function Me(a){this.Ig=Ne++;this.position=a.ja();this.ab=0;this.Ag=[]}var Ne=0;function Oe(a,c,b){this.vg=[];this.Ga=[];this.Ij=0;this.sg={};this.ua=a;this.$a=new B(c.x,c.y);this.pa=new Ee(b,!0);this.pa.Na.bg=this;this.pa.Na.Kd=this;this.top=W(this,new B(this.$a.x+5,5),new B(this.$a.x/2,-2.5),!1,o,{vb:0});this.bottom=W(this,new B(this.$a.x+5,5),new B(this.$a.x/2,this.$a.y+2.5),!1,o,{vb:0});this.left=W(this,new B(5,this.$a.y+5),new B(-2.5,this.$a.y/2),!1,o,{vb:0});this.right=W(this,new B(5,this.$a.y+5),new B(this.$a.x+2.5,this.$a.y/2),!1,o,{vb:0})}u=Oe.prototype;
u.update=function(a,c){He(this.pa,c,Pe,Pe);for(var b=this.pa.gb;b;b=b.w)b.xe.K(),b.ng=0;b=this.vg;this.vg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};u.Wb=function(a,c){if(!a.jc()&&!c.jc())for(var b=0;b<this.Ga.length;b++)if(this.Ga[b].Wb&&!this.Ga[b].Wb(a,c))return!1;return Kc.prototype.Wb(a,c)};u.Yd=function(a){for(var c=0;c<this.Ga.length;c++){this.Ga[c].Jg&&this.Ga[c].Jg(a);if(a.disabled)a.enabled=!1;this.Ga[c].Yd&&this.Ga[c].Yd(a)}};
u.xd=function(a){for(var c=0;c<this.Ga.length;c++)this.Ga[c].xd&&this.Ga[c].xd(a);a.disabled=!1;a.enabled=!0};u.ie=function(a,c){if(a.disabled)a.enabled=!1;for(var b=0;b<this.Ga.length;b++)this.Ga[b].ie&&this.Ga[b].ie(a,c)};u.he=function(a,c){for(var b=0;b<this.Ga.length;b++)this.Ga[b].he&&this.Ga[b].he(a,c)};function X(a,c,b,d){d=d||0;a=Qe(a,c,b,!0);a.display.Fh=-10+d;return a}function W(a,c,b,d,e,g){e=e||{};e.type=R;return Re(a,c,b,d,{xa:e,oc:g})}
function Re(a,c,b,d,e){var g=new K;Jc(g,c.x/2,c.y/2);return a.Jb(c,b,d,g,e)}function Se(a,c,b){var d=new K,e=new B(c.x/2,c.y/2);Ic(d,[new B(0,e.y),new B(-e.x+0.01,e.y-0.01),new B(-e.x,0),new B(-e.x+0.01,-e.y+0.01),new B(0,-e.y),new B(e.x-0.01,-e.y+0.01),new B(e.x,0),new B(e.x-0.01,e.y-0.01)]);return a.Jb(c,b,!0,d,{xa:{Lc:!0},oc:{Bc:0}})}function Te(a,c){a.pa.qd?a.vg.push(c):c.apply(a)}
u.Jb=function(a,c,b,d,e){var g=Qe(this,a,c,b);Te(this,function(){var a=e,a=a||{},b=Ue(a.xa,Ve),i=new Ed;i.type=b.type;i.ab=b.ab;i.Lc=b.Lc;i.position=c;b=Fe(this.pa,i);a=We(b,d,a);g.body=b;g.Te=a;b.object=g});return g};function Qe(a,c,b,d){b=new Me(b);a.sg[b.Ig]=b;d!==!1&&cc(b,c);return b}
function We(a,c,b){var b=b||{},d=Ue(b.oc,Xe),b=new gc;b.pe=d.pe;b.vb=d.vb;b.Bc=d.Bc;b.Xe=d.Xe;b.shape=c;I(!a.Ra.qd);c=new ue;c.Qb(a,a.f,b);a.ac&ye&&c.$d(a.Ra.Na.ld,a.f);c.w=a.rc;a.rc=c;a.ih++;c.v=a;if(c.bf>0&&(a.q=0,a.l=0,a.pc=0,a.t=0,a.c.o.K(),!(a.C==R||a.C==1))){b=new B(0,0);for(d=a.rc;d;d=d.w)if(d.bf!=0){var e=d.Dg();a.q+=e.Wc;b.x+=e.ed.x*e.Wc;b.y+=e.ed.y*e.Wc;a.pc+=e.de}a.q>0?(a.l=1/a.q,b.x*=a.l,b.y*=a.l):(a.q=1,a.l=1);a.pc>0&&(a.ac&xe)==0?(a.pc-=a.q*(b.x*b.x+b.y*b.y),a.pc*=a.Mi,I(a.pc>0),a.t=
1/a.pc):(a.pc=0,a.t=0);d=a.c.g.ja();a.c.o.m(b);a.c.Da.m(E(a.f,a.c.o));a.c.g.m(a.c.Da);a.h.x+=a.s*-(a.c.g.y-d.y);a.h.y+=a.s*+(a.c.g.x-d.x)}a.Ra.kg=!0;return c}
function Ye(a,c){Te(a,function(){if(c.body){var a=this.pa,d=c.body;I(!a.qd);for(var e=d.la;e;){var g=e,e=e.next;a.cf&&a.cf.yj(g.Yb);var f=a,h=g.Yb,i=h.fh;if(h.Aa)h.Aa.w=h.w;if(h.w)h.w.Aa=h.Aa;if(h==f.la)f.la=h.w;var g=h.F,j=h.I;Id(g,!0);Id(j,!0);if(h.Ya.ia)h.Ya.ia.next=h.Ya.next;if(h.Ya.next)h.Ya.next.ia=h.Ya.ia;if(h.Ya==g.la)g.la=h.Ya.next;h.Ya.ia=o;h.Ya.next=o;if(h.Za.ia)h.Za.ia.next=h.Za.next;if(h.Za.next)h.Za.next.ia=h.Za.ia;if(h.Za==j.la)j.la=h.Za.next;h.Za.ia=o;h.Za.next=o;f.ib--;if(!i)for(f=
j.V;f;){if(f.aa==g)f.ta.Se=!0;f=f.next}}for(e=d.af;e;)f=e,e=e.Hj,f.zj.wj(d);for(e=d.V;e;)f=e,e=e.next,a.Na.Fc(f.ta);d.V=o;for(e=d.rc;e;)f=e,e=e.w,a.cf&&a.cf.xj(f),f.ae(a.Na.ld),f.Fc();d.rc=o;d.ih=0;if(d.Aa)d.Aa.w=d.w;if(d.w)d.w.Aa=d.Aa;if(d==a.gb)a.gb=d.w;a.ob--}delete this.sg[c.Ig]})}
function Ze(a,c,b){Te(a,function(){if(c.body){var a=c.body,e=a.Ub();I(!a.Ra.qd);a.f.d.j(e);a.f.position.m(b);var g=a.f.d,f=a.c.o;a.c.g.x=g.a.x*f.x+g.b.x*f.y;a.c.g.y=g.a.y*f.x+g.b.y*f.y;a.c.g.x+=a.f.position.x;a.c.g.y+=a.f.position.y;a.c.Da.m(a.c.g);a.c.tb=a.c.n=e;e=a.Ra.Na.ld;for(g=a.rc;g;g=g.w)ve(g,e,a.f,a.f);ge(a.Ra.Na)}else c.position=b.ja()})}var Pe=10,Xe={pe:0.1,vb:0.6,Bc:0.01,Xe:!1},Ve={Lc:!1,ab:0,type:2};
function Ue(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===k||a[d]===o?c[d]:a[d];return b};function $e(a){this.ua=a}function af(a,c,b,d,e){var g=new B(4,4);cc(c.body,b);D(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.rf=new Sb("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,g,e);c.display.kc={};c.display.kc.Dj=e;c.display.kc.oi=4;c.display.kc.Mc=0;c.display.kc.nb={n:bf,x:bf,y:cf};a=a.ua.Og;c.Ag.push(df);a=a.zg;Ha(a,c)>=0||a.push(c)}var bf=0,cf=2;
function df(a,c){var b=this.display.kc;b.Mc+=c;var d=new B(1,1),e=this.body.h,g=Math.abs(e.x),f=Math.abs(e.y);if(f<0.01||g>=f){if(e.x>0.01){if(b.nb.x=bf,b.nb.n!=bf)b.nb.n=bf,b.Mc=0}else if(e.x<-0.01){if(b.nb.x=1,b.nb.n!=1)b.nb.n=1,b.Mc=0}else b.Mc=0;d.y=b.nb.x==1?4:2}else if(e.y>0.01){b.nb.y=3;if(b.nb.n!=3)b.nb.n=3,b.Mc=0;d.y=3}else{b.nb.y=cf;if(b.nb.n!=cf)b.nb.n=cf,b.Mc=0;d.y=1}d.x=b.Mc==0?1:Math.floor(b.Mc*b.oi);b=this.display.rf;b.qb=d.ja();b.qb.x%=b.pf.x;b.qb.y%=b.pf.y;if(b.qb.x===0)b.qb.x=b.pf.x;
if(b.qb.y===0)b.qb.y=b.pf.y};function ef(){this.zg=[]};function ff(a,c,b,d,e,g,f){this.Zc=a;this.paused=!1;this.Me=0;this.Og=new ef;this.kc=new $e(this);this.p=new Oe(this,b,d);this.viewport=new Xb(this,c,g,e,f)}function gf(a){if(a.$g===o)a.$g=new Date;var c=new Date-a.$g>=5E3;Gb>0&&!c?setTimeout(function(){gf(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
ff.prototype.update=function(a,c){if(this.paused)this.Me=0,$b(this.viewport.th),this.Zc.wf&&this.Zc.wf(a,c);else{this.Zc.mf&&this.Zc.mf(a,c);for(var b=this.Og,d=0;d<b.zg.length;d++)for(var e=b.zg[d],g=0;g<e.Ag.length;g++)e.Ag[g].apply(e,[a,c]);this.Me+=c;for(b=a-this.Me;this.Me>=0.015;)this.Me-=0.015,b+=0.015,this.Zc.hj&&this.Zc.hj(b,0.015),this.p.update(b,0.015);this.Zc.lf&&this.Zc.lf(a,c);bc(this.viewport.th);b=this.viewport;b.display.style.visibility="hidden";if(b.Ye.x!=b.ya.x||b.Ye.y!=b.ya.y){b.Ye.x=
b.ya.x;b.Ye.y=b.ya.y;if(b.fb!==o)b.fb.style.left="-"+(b.ya.x*b.scale-b.Eb.x/2)+"px",b.fb.style.top="-"+(b.ya.y*b.scale-b.Eb.y/2)+"px";b.display.style.left="-"+(b.ya.x*b.scale-b.Eb.x/2)+"px";b.display.style.top="-"+(b.ya.y*b.scale-b.Eb.y/2)+"px";d=b.vf;e=b.ya;g=Ub(d);d.lowerBound.Hf(g);d.upperBound.Hf(g);d.lowerBound.Ob(e);d.upperBound.Ob(e)}var d=[],f;for(f in b.nc)d[f]=b.nc[f];f=b.vf;var e=b.ua.p.sg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,l=i.qi(b.ya),m=j.size;j.L.lowerBound.j(l.x-
m.x,l.y-m.y);j.L.upperBound.j(l.x+m.x,l.y+m.y);if(f.Cd(j.L)){if(j.$c==o)j.$c=dc++;delete d[j.$c];if(b.nc[j.$c]==o)b.nc[j.$c]=document.createElement("span"),b.nc[j.$c].className="gameObject",b.nc[j.$c].style.zIndex=100+(j.Fh||0),b.display.appendChild(b.nc[j.$c]);var g=b.nc[j.$c],n=Ib(g),p=b.scale!=n.scale;n.scale=b.scale;var s=l.x-m.x/2;if(p||n.left!=s)n.left=s,g.style.left=s*b.scale+"px";l=l.y-m.y/2;if(p||n.top!=l)n.top=l,g.style.top=l*b.scale+"px";l=m.x;if(p||n.width!=l)n.width=l,g.style.width=l*
b.scale+"px";m=m.y;if(p||n.height!=m)n.height=m,g.style.height=m*b.scale+"px";i=i.pi();if(n.rotation!=i)n.rotation=i,g.style.webkitTransform="rotate("+i+"rad)";if(j.rf!=o){j=j.rf;n=!1;i=Ib(g);if(i.Zh!=j.url)i.Zh=j.url,g.style.backgroundImage="url("+j.url+")",g.style.backgroundColor="transparent",n=!0;else if(i.$h!=j.qb.x||i.ai!=j.qb.y)n=!0;if(n)i.$h=j.qb.x,i.ai=j.qb.y,g.style.backgroundPosition=(j.sh.x+(j.qb.x-1)*j.Ah.x)*-1+"px "+(j.sh.y+(j.qb.y-1)*j.Ah.y)*-1+"px"}}}}for(var r in d)b.display.removeChild(d[r]),
delete b.nc[r];if(b.fb!==o){b.fb.style.visibility="hidden";h=b.ua.p.pa;if(h.Oa!==o){h.Oa.Vi.ri.clear();r=h.Oa.hh;if(r&Kb){e=new T(0.5,0.5,0.3);g=new T(0.5,0.9,0.5);j=new T(0.5,0.5,0.9);n=new T(0.6,0.6,0.6);i=new T(0.9,0.7,0.7);for(d=h.gb;d;d=d.w)for(f=d.rc;f;f=f.w)p=f.da,d.ic()?d.C==R?Ke(h,p,d.f,g):d.C==1?Ke(h,p,d.f,j):d.yb?Ke(h,p,d.f,i):Ke(h,p,d.f,n):Ke(h,p,d.f,e)}if(r&Lb)for(d=h.la;d;d=d.w)f=h,e=d,e instanceof te?f.Oa.Gc(e.Sb(),e.Tb(),Le):e instanceof Nc?(f.Oa.Gc(Pc(e),e.Sb(),Le),f.Oa.Gc(Qc(e),
e.Tb(),Le),f.Oa.Gc(Pc(e),Qc(e),Le)):(e.F!=f.gg&&f.Oa.Gc(e.F.f.position,e.Sb(),Le),f.Oa.Gc(e.Sb(),e.Tb(),Le),e.I!=f.gg&&f.Oa.Gc(e.I.f.position,e.Tb(),Le));if(r&Pb)for(d=h.af;d;d=d.w)d.sj(h.Oa);if(r&Nb){d=new T(0.3,0.9,0.9);for(f=h.Na.V;f;f=f.w)h.Oa.Gc(Ub(f.M.Nc),Ub(f.O.Nc),d)}if(r&Mb){e=new T(0,0,0.8);for(d=h.gb;d;d=d.w)if(d.ic())for(f=d.rc;f;f=f.w)g=h.Na.ld.yd(f.Tc),h.Oa.Hh([new B(g.lowerBound.x,g.lowerBound.y),new B(g.upperBound.x,g.lowerBound.y),new B(g.upperBound.x,g.upperBound.y),new B(g.lowerBound.x,
g.upperBound.y)],e)}if(r&Ob)for(d=h.gb;d;d=d.w)Rb.d=d.f.d,Rb.position=U(d),h.Oa.Kh()}b.fb.style.visibility=""}b.display.style.visibility=""}};ff.prototype.start=function(){bc(this.viewport.Zf);var a=hf;Ha(a,this)>=0||a.push(this);jf||(kf=document.getElementById("fps"),jf=!0,lf())};var jf=!1,hf=[],mf=60,nf=o,kf=o;
function lf(a){a==o&&(a=(new Date).getTime());var c=0;nf!==o?c=(a-nf)/1E3:nf=a;if(c>0){c>0.2&&(c=0.2);if(kf){var b=1/c;mf=mf*0.99+b*0.01;kf.innerHTML=Math.round(b)+" - "+Math.round(mf)}nf=a;for(b=0;b<hf.length;b++)hf[b].update(a,c);for(var d in xb)xb[d].Eh=!0;sb=rb;ub=tb;wb=vb}ec(lf,document.body)};function of(){this.type=0;this.W=this.U=this.Dh=o;this.Qf=!1};function pf(){of.call(this);this.Ue=new B(0,0);this.Ve=new B(0,0);this.Wa=new B(0,0);this.Xa=new B(0,0);this.type=4;this.Ue.j(-1,1);this.Ve.j(1,1);this.Wa.j(-1,0);this.Xa.j(1,0);this.qh=this.Yf=this.ph=this.Xf=0;this.Xc=1;this.Qf=!0}z(pf,of);
pf.prototype.X=function(a,c,b,d,e,g,f){f===k&&(f=0);this.U=a;this.W=c;this.Ue.m(b);this.Ve.m(d);this.Wa=oc(this.U.f,e);this.Xa=oc(this.W.f,g);a=e.x-b.x;b=e.y-b.y;this.Xf=Math.sqrt(a*a+b*b);b=g.x-d.x;d=g.y-d.y;this.Yf=Math.sqrt(b*b+d*d);this.Xc=f;f=this.Xf+this.Xc*this.Yf;this.ph=f-this.Xc*Oc;this.qh=(f-Oc)/this.Xc};pf.prototype.Qb=function(){return new Nc(this)};function qf(a,c,b){this.execute=a;this.name=c;this.ni=b};function Y(a){this.ua=a;this.ua.p.Ga.push(this)}
Y.prototype.mc=function(a,c){var b=Se(this.ua.p,a,c);Y.yi(b);Y.Ai(b);Y.zi(b);var d=new K,e=new B(a.x/2,a.y/2);Hc(d,[new B(-e.x+0.01,e.y-0.01),new B(-e.x-0.01,0),new B(-e.x+0.01,-e.y+0.01),new B(e.x-0.01,-e.y+0.01),new B(e.x+0.01,0),new B(e.x-0.01,e.y-0.01)]);b.Aj=We(b.body,d,{oc:{vb:0}});b.Ta={};b.Ta.rg=new qf(function(){b.e.Va.Bi()},"Move Up",!0);b.Ta.qg=new qf(q(),"Move Down",!0);b.Ta.Fe=new qf(function(){b.e.Sd.Fe()},"Move Left",!0);b.Ta.Ge=new qf(function(){b.e.Sd.Ge()},"Move Right",!0);return b};
(function(a){a.mb=0.1;a.rj=new B(0,9.8);a.ad={Bf:new B(0,9.8),Lh:1.5,Hg:8,Oh:1};a.sb={Cg:1,Cf:2,vj:4,qj:8,Bg:16,Fg:32,zf:64};a.Mh={Nh:1,pj:2,tj:4};a.fa={ke:1,zd:2,Pb:4,Ad:8};a.Wf=function(c,b){c.e=c.e||{};c.e.type|=a.sb.Cg;c.e.Qe={ej:b&a.fa.ke,bj:b&a.fa.Pb,cj:b&a.fa.zd,dj:b&a.fa.Ad}};a.yi=function(c){var b=Y.ad.Hg;c.e=c.e||{};c.e.type|=a.sb.Cf;c.e.Va={wb:[],qf:b,Bi:function(){var b=c.e.Va.wb;if(b.length>0){var e=c.body.q*c.e.Va.qf*a.ad.Lh,g=U(c.body),f=c.body.h;f.y=0;var h=c.body;h.C!=R&&h.h.m(f);
ze(c.body,new B(0,-e),g);for(f=0;f<b.length;f++)ze(b[f].body,new B(0,e/b.length),g)}}}};a.Ai=function(c){var b=Y.ad.Hg,d=Y.ad.Oh;c.e=c.e||{};c.e.type|=a.sb.Cf;c.e.Sd={Ng:d,qf:b,Ge:function(){var a=c.body.h,a=Math.min(a.x+c.e.Sd.Ng,c.e.Sd.qf)-a.x;a>0&&ze(c.body,new B(c.body.q*a,0),U(c.body))},Fe:function(){var a=c.body.h,a=Math.max(a.x-c.e.Sd.Ng,-c.e.Sd.qf)-a.x;a<0&&ze(c.body,new B(c.body.q*a,0),U(c.body))}}};a.Fd=function(c,b,d,e){c.e=c.e||{};c.e.type|=a.sb.zf;c.e.u=c.e.u||{};if(d&a.fa.ke)c.e.u.Vf=
!0,c.e.u.Ke=c.e.u.Ke||[],c.e.u.Ke.push(b);if(d&a.fa.Pb)c.e.u.Vf=!0,c.e.u.le=c.e.u.le||[],c.e.u.le.push(b);if(d&a.fa.zd)c.e.u.Vf=!0,c.e.u.se=c.e.u.se||[],c.e.u.se.push(b);if(d&a.fa.Ad)c.e.u.Vf=!0,c.e.u.Ie=c.e.u.Ie||[],c.e.u.Ie.push(b);if(e&a.fa.ke)c.e.u.We=!0,c.e.u.Le=c.e.u.Le||[],c.e.u.Le.push(b);if(e&a.fa.Pb)c.e.u.We=!0,c.e.u.me=c.e.u.me||[],c.e.u.me.push(b);if(e&a.fa.zd)c.e.u.We=!0,c.e.u.te=c.e.u.te||[],c.e.u.te.push(b);if(e&a.fa.Ad)c.e.u.We=!0,c.e.u.Je=c.e.u.Je||[],c.e.u.Je.push(b)};a.xi=function(c,
b){c.e=c.e||{};c.e.type|=a.sb.Bg;c.e.Tf={jj:b,filter:0}};a.zi=function(c){var b=Y.Mh.Nh;c.e=c.e||{};c.e.type|=a.sb.Fg;c.e.Di={filter:b}};a.prototype.Wb=o;a.prototype.Jg=function(a){var b=a.M.v.object,d=a.O.v.object;!a.disabled&&b&&b.e&&this.Mg(a,b);!a.disabled&&d&&d.e&&this.Mg(a,d)};a.prototype.Mg=function(c,b){if(b.e.type&a.sb.Cg){c.disabled=!0;var d=new he;Fd(c,d);d=d.P;if(!b.e.Qe.ej&&d.y>a.mb)c.disabled=!1;else if(!b.e.Qe.bj&&d.y<-a.mb)c.disabled=!1;else if(!b.e.Qe.dj&&d.x>a.mb)c.disabled=!1;else if(!b.e.Qe.cj&&
d.x<-a.mb)c.disabled=!1}};a.prototype.Yd=function(a){if(!a.disabled){var b=a.M.v,d=b.object,e=a.O.v,g=e.object;d&&g&&(d.e&&this.Kg(a,d,g,e),g.e&&this.Kg(a,g,d,b))}};a.prototype.Kg=function(c,b,d,e){if(b.e.type&a.sb.Cf){var g=new he;Fd(c,g);var f=g.P;if(f.y>a.mb){f=!1;for(g=0;g<b.e.Va.wb.length;g++)if(b.e.Va.wb[g].body==e){b.e.Va.wb[g].count++;f=!0;break}f||b.e.Va.wb.push({body:e,count:1});c.vd=c.vd||[];c.vd.push({Va:b,si:e})}}if(b.e.type&a.sb.zf){g=new he;Fd(c,g);f=g.P;if(f.y>a.mb&&b.e.u.Ke)for(g=
0;g<b.e.u.Ke.length;g++)b.e.u.Ke[g](c);else if(f.y<-a.mb&&b.e.u.le)for(g=0;g<b.e.u.le.length;g++)b.e.u.le[g](c);if(f.x>a.mb&&b.e.u.se)for(g=0;g<b.e.u.se.length;g++)b.e.u.se[g](c);else if(f.x<-a.mb&&b.e.u.Ie)for(g=0;g<b.e.u.Ie.length;g++)b.e.u.Ie[g](c)}b.e.type&a.sb.Bg&&d.e&&d.e.type&a.sb.Fg&&(b.e.Tf.filter==0||b.e.Tf.filter&d.e.Di.filter)&&Ze(this.ua.p,d,b.e.Tf.jj)};a.prototype.xd=function(a){if(a.vd){for(var b=0;b<a.vd.length;b++){for(var d=a.vd[b].Va,e=a.vd[b].si,g=[],f=0;f<d.e.Va.wb.length;f++)d.e.Va.wb[f].body==
e?(d.e.Va.wb[f].count--,d.e.Va.wb[f].count>0&&g.push(d.e.Va.wb[f])):g.push(d.e.Va.wb[f]);d.e.Va.wb=g}a.vd=o}if(!a.disabled)b=a.M.v.object,d=a.O.v.object,b&&d&&(b.e&&this.Lg(a,b),d.e&&this.Lg(a,d))};a.prototype.Lg=function(c,b){if(b.e.type&a.sb.zf&&b.e.u.We){var d=new he;Fd(c,d);d=d.P;if(d.y>a.mb&&b.e.u.Le)for(var e=0;e<b.e.u.Le.length;e++)b.e.u.Le[e](c);else if(d.y<-a.mb&&b.e.u.me)for(e=0;e<b.e.u.me.length;e++)b.e.u.me[e](c);if(d.x>a.mb&&b.e.u.te)for(e=0;e<b.e.u.te.length;e++)b.e.u.te[e](c);else if(d.x<
-a.mb&&b.e.u.Je)for(e=0;e<b.e.u.Je.length;e++)b.e.u.Je[e](c)}};a.prototype.ie=o;a.prototype.he=o;a.prototype.cb=function(a,b){return W(this.ua.p,a,b,!0)};a.prototype.Sf=function(c,b){var d,e=W(this.ua.p,c,b,!0,o,o);if(d===k||d===o)d=a.fa.Pb|a.fa.zd|a.fa.Ad;a.Wf(e,d)};a.prototype.wi=function(c,b){var d=this;a.Fd(c,function(){Ye(d.ua.p,c)},b,o)};a.prototype.oe=function(c,b){var d,e=W(this.ua.p,c,b,!0,o,o);if(d===k||d===o)d=a.fa.Pb;this.wi(e,d);return e};a.prototype.di=function(c,b,d){c=W(this.ua.p,
c,b,!0,o,o);a.xi(c,d);return c}})(Y);var rf={};
(function(a){var c,b=new B(350,30),d=new B(600,300),e,g,f,h,i=new B(0,454),j=new B(178,326),l=new B(2,124),m=new B(354,54),n=new B(0,58),p=new B(290,54),s=new B(178,326),r=new B(0,0),t=new B(32,84),v=new B(354,54),M=new B(0,90),H=new B(0,0),N=new B(2,158),w=new B(158,388),C=new B(190,388),$=new B(158,356),Kf=new B(190,356),Lf=new B(158,356),Mf=new B(190,356),Nf=new B(55,380),Of=new B(10,396),Pf=new B(466,168),Qf=new B(452,136),Rf=new B(466,104),Sf=new B(300,424),Tf=new B(300,352),Uf=new B(364,424),
Vf=new B(364,384),Wf=new B(332,352),Xf=new B(332,320),Yf=new B(396,352),Zf=new B(396,320),$f=new B(364,352),ag=new B(362,264),bg=new B(160,64);a.Xb=function(c,e,g){f=new ff(a,c,b,Y.ad.Bf,d,20,e);h=new Y(f);c=new B(5,b.y-7);a.mc(c,g);a.Tg(f,h,new B(0,b.y),c);g=X(f.p,new B(d.x/20,d.y/20),new B(0,0),-1);D(g,"graphics/sky.png");g.display.kf=1;gf(f)};a.mc=function(a,b){var d=new B(0,0),i=new B(21,47),j=new B(i.x/20,i.y/20);c=h.mc(j,a);af(f.kc,c,j,d,i);g=new ob("game");A(g,new qf(function(){f.paused=!f.paused},
"Pause",!1),80,!1,!1,!1);e=new ob("player");A(e,c.Ta.rg,b?87:38,!1,!1,!1);A(e,c.Ta.Fe,b?65:37,!1,!1,!1);A(e,c.Ta.qg,b?83:40,!1,!1,!1);A(e,c.Ta.Ge,b?68:39,!1,!1,!1)};a.Tg=function(b,c,d,e){for(var f=new B(1.6,1.6),g=new B(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new B(g.x,g.y-f.y*(d.length-1)),i=0;i<d.length;i++)for(var h=0;h<d[i].length;h++)a.fi(b,c,d[i][h],new B(h,i),g,f,e)};a.fi=function(a,b,c,d,e,f,g){var h=o,y=o;switch(c){case " ":break;case "-":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=i;break;case "=":h=b.cb(f,new B(e.x+d.x*
f.x,e.y+d.y*f.y));y=l;break;case "O":h=b.oe(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));Y.Fd(h,function(){var c=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));D(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new B(e.x+d.x*f.x,e.y+(d.y-1)*f.y));D(c,"graphics/smbsheet.gif",n)},Y.fa.Pb);y=m;break;case "@":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));h.Qg=8;h.Pf=0;Y.Fd(h,function(){h.Pf++;var c=X(a.p,f,new B(e.x+d.x*f.x,e.y+(d.y-h.Pf/h.Qg)*f.y));D(c,"graphics/smbsheet.gif",n);h.Pf==h.Qg&&(Ye(a.p,h),c=b.cb(f,new B(e.x+d.x*f.x,e.y+
d.y*f.y)),D(c,"graphics/smbsheet.gif",p))},Y.fa.Pb);y=s;break;case "#":h=b.oe(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=j;break;case "1":h=b.oe(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));Y.Wf(h,Y.fa.ke|Y.fa.zd|Y.fa.Ad);Y.Fd(h,function(){var c=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));D(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new B(e.x+d.x*f.x,e.y+(d.y-1)*f.y));D(c,"graphics/smbsheet.gif",N)},Y.fa.Pb);y=H;break;case "*":h=b.oe(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));Y.Wf(h,Y.fa.ke|Y.fa.zd|Y.fa.Ad);Y.Fd(h,function(){var c=
b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));D(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new B(e.x+d.x*f.x,e.y+(d.y-1)*f.y));D(c,"graphics/smbsheet.gif",t)},Y.fa.Pb);y=r;break;case "M":h=b.oe(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));Y.Fd(h,function(){var c=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));D(c,"graphics/smbsheet.gif",p);c=X(a.p,f,new B(e.x+d.x*f.x,e.y+(d.y-1)*f.y));D(c,"graphics/smbsheet.gif",M)},Y.fa.Pb);y=v;break;case "[":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=w;break;case "]":h=b.cb(f,new B(e.x+d.x*f.x,
e.y+d.y*f.y));y=C;break;case "<":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=$;break;case ">":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Kf;break;case "{":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Lf;break;case "}":h=b.cb(f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Mf;break;case "T":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Nf;break;case "G":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Of;break;case "|":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Pf;break;case "F":h=X(a.p,f,new B(e.x+d.x*f.x+f.x/2,e.y+d.y*
f.y),1);y=Qf;break;case "o":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Rf;break;case "+":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Sf;break;case "^":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Tf;break;case "8":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Uf;break;case "u":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Vf;break;case "R":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Xf;break;case "r":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Wf;break;case "L":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));
y=Zf;break;case "l":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=Yf;break;case "&":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y));y=$f;break;case "$":h=X(a.p,f,new B(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));y=ag;break;case "x":h=b.di(f,new B(e.x+d.x*f.x,e.y+d.y*f.y),g);y=bg;break;default:throw"Invalid type: "+c;}h!==o&&"graphics/smbsheet.gif"!==o&&y!==o&&D(h,"graphics/smbsheet.gif",y)};a.wf=function(a,b){qb(g,b)};a.mf=function(a,b){qb(g,b);qb(e,b)};a.lf=function(){Yb(f.viewport,U(c.body))}})(rf);
ca("mario.init",rf.Xb);function Z(a,c,b){this.x=a;this.y=c;this.k=b}u=Z.prototype;u.K=function(){this.k=this.y=this.x=0};u.j=function(a,c,b){this.x=a;this.y=c;this.k=b};u.m=function(a){this.x=a.x;this.y=a.y;this.k=a.k};u.bd=function(){return new Z(-this.x,-this.y,-this.k)};u.Gg=function(){this.x=-this.x;this.y=-this.y;this.k=-this.k};u.ja=function(){return new Z(this.x,this.y,this.k)};u.Ob=function(a){this.x+=a.x;this.y+=a.y;this.k+=a.k};u.Hf=function(a){this.x-=a.x;this.y-=a.y;this.k-=a.k};
u.Hc=function(a){this.x*=a;this.y*=a;this.k*=a};function sf(a,c,b){this.a=new Z(0,0,0);this.b=new Z(0,0,0);this.H=new Z(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.H.m(b)}u=sf.prototype;u.ja=function(){return new sf(this.a,this.b,this.H)};u.Bd=function(a){this.a.m(a.a);this.b.m(a.b);this.H.m(a.H)};u.xf=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.k+=a.a.k;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.k+=a.b.k;this.H.x+=a.H.x;this.H.y+=a.H.y;this.H.k+=a.H.k};u.Oe=function(){this.a.j(1,0,0);this.b.j(0,1,0);this.H.j(0,0,1)};
u.K=function(){this.a.j(0,0,0);this.b.j(0,0,0);this.H.j(0,0,0)};function tf(a,c,b,d){var e=a.a.x,g=a.b.x,f=a.a.y,a=a.b.y,h=e*a-g*f;h!=0&&(h=1/h);c.x=h*(a*b-g*d);c.y=h*(e*d-f*b);return c}function uf(a,c,b,d,e){var g=a.a.x,f=a.a.y,h=a.a.k,i=a.b.x,j=a.b.y,l=a.b.k,m=a.H.x,n=a.H.y,a=a.H.k,p=g*(j*a-l*n)+f*(l*m-i*a)+h*(i*n-j*m);p!=0&&(p=1/p);c.x=p*(b*(j*a-l*n)+d*(l*m-i*a)+e*(i*n-j*m));c.y=p*(g*(d*a-e*n)+f*(e*m-b*a)+h*(b*n-d*m));c.k=p*(g*(j*e-l*d)+f*(l*b-i*e)+h*(i*d-j*b));return c};function vf(a){L.call(this,a);this.A=new B(0,0);this.B=new B(0,0);this.Sc=new B(0,0);this.df=new B(0,0);this.D=new B(0,0);this.qa=new B(0,0);this.S=new sf;this.i=new Z(0,0,0);this.A.m(a.Wa);this.B.m(a.Xa);this.Sc.m(a.$f);this.df.x=-this.Sc.y;this.df.y=this.Sc.x;this.Ui=a.Yc;this.i.K();this.va=this.ec=0;this.Md=a.dh;this.Rd=a.Bh;this.Si=a.Zi;this.jg=a.pg;this.od=a.Re;this.we=a.Uf;this.ba=0;this.D.K();this.qa.K()}z(vf,L);u=vf.prototype;u.Sb=function(){return O(this.F,this.A)};
u.Tb=function(){return O(this.I,this.B)};function wf(a){var c=a.F,b=a.I,d=O(c,a.A),b=O(b,a.B),a=mc(c.f.d,a.Sc);return a.x*(b.x-d.x)+a.y*(b.y-d.y)}
u.Vb=function(a){var c=this.F,b=this.I,d,e=0;this.Ae.m(c.c.o);this.Be.m(b.c.o);var g=c.lb();b.lb();d=c.f.d;var f=this.A.x-this.Ae.x,h=this.A.y-this.Ae.y,e=d.a.x*f+d.b.x*h,h=d.a.y*f+d.b.y*h,f=e;d=b.f.d;var i=this.B.x-this.Be.x,j=this.B.y-this.Be.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.g.x+i-c.c.g.x-f;e=b.c.g.y+j-c.c.g.y-h;this.Bb=c.l;this.Cb=b.l;this.Oc=c.t;this.Pc=b.t;this.D.m(mc(g.d,this.Sc));this.La=(d+f)*this.D.y-(e+h)*this.D.x;this.Ma=i*this.D.y-j*this.D.x;this.ec=this.Bb+this.Cb+this.Oc*
this.La*this.La+this.Pc*this.Ma*this.Ma;if(this.ec>Number.MIN_VALUE)this.ec=1/this.ec;this.qa.m(mc(g.d,this.df));this.Pa=(d+f)*this.qa.y-(e+h)*this.qa.x;this.Qa=i*this.qa.y-j*this.qa.x;g=this.Bb;f=this.Cb;h=this.Oc;i=this.Pc;this.S.a.x=g+f+h*this.Pa*this.Pa+i*this.Qa*this.Qa;this.S.a.y=h*this.Pa+i*this.Qa;this.S.a.k=h*this.Pa*this.La+i*this.Qa*this.Ma;this.S.b.x=this.S.a.y;this.S.b.y=h+i;this.S.b.k=h*this.La+i*this.Ma;this.S.H.x=this.S.a.k;this.S.H.y=this.S.b.k;this.S.H.k=g+f+h*this.La*this.La+i*
this.Ma*this.Ma;if(this.od)if(d=this.D.x*d+this.D.y*e,Math.abs(this.Rd-this.Md)<0.01)this.ba=3;else if(d<=this.Md){if(this.ba!=1)this.ba=1,this.i.k=0}else if(d>=this.Rd){if(this.ba!=2)this.ba=2,this.i.k=0}else this.ba=0,this.i.k=0;else this.ba=0;if(this.we==!1)this.va=0;a.hc?(this.i.x*=a.Ua,this.i.y*=a.Ua,this.va*=a.Ua,a=this.i.x*this.qa.x+(this.va+this.i.k)*this.D.x,d=this.i.x*this.qa.y+(this.va+this.i.k)*this.D.y,e=this.i.x*this.Pa+this.i.y+(this.va+this.i.k)*this.La,g=this.i.x*this.Qa+this.i.y+
(this.va+this.i.k)*this.Ma,c.h.x-=this.Bb*a,c.h.y-=this.Bb*d,c.s-=this.Oc*e,b.h.x+=this.Cb*a,b.h.y+=this.Cb*d,b.s+=this.Pc*g):(this.i.K(),this.va=0)};
u.Ib=function(a){var c=this.F,b=this.I,d=c.h,e=c.s,g=b.h,f=b.s,h=0,i=0,j=0,l=0;if(this.we&&this.ba!=3)l=this.ec*(this.jg-(this.D.x*(g.x-d.x)+this.D.y*(g.y-d.y)+this.Ma*f-this.La*e)),h=this.va,i=a.Y*this.Si,this.va=G(this.va+l,-i,i),l=this.va-h,h=l*this.D.x,i=l*this.D.y,j=l*this.La,l*=this.Ma,d.x-=this.Bb*h,d.y-=this.Bb*i,e-=this.Oc*j,g.x+=this.Cb*h,g.y+=this.Cb*i,f+=this.Pc*l;i=this.qa.x*(g.x-d.x)+this.qa.y*(g.y-d.y)+this.Qa*f-this.Pa*e;j=f-e;if(this.od&&this.ba!=0){a=this.D.x*(g.x-d.x)+this.D.y*
(g.y-d.y)+this.Ma*f-this.La*e;h=this.i.ja();a=uf(this.S,new Z(0,0,0),-i,-j,-a);this.i.Ob(a);if(this.ba==1)this.i.k=Math.max(this.i.k,0);else if(this.ba==2)this.i.k=Math.min(this.i.k,0);i=tf(this.S,new B(0,0),-i-(this.i.k-h.k)*this.S.H.x,-j-(this.i.k-h.k)*this.S.H.y);i.x+=h.x;i.y+=h.y;this.i.x=i.x;this.i.y=i.y;a.x=this.i.x-h.x;a.y=this.i.y-h.y;a.k=this.i.k-h.k;h=a.x*this.qa.x+a.k*this.D.x;i=a.x*this.qa.y+a.k*this.D.y;j=a.x*this.Pa+a.y+a.k*this.La;l=a.x*this.Qa+a.y+a.k*this.Ma}else a=tf(this.S,new B(0,
0),-i,-j),this.i.x+=a.x,this.i.y+=a.y,h=a.x*this.qa.x,i=a.x*this.qa.y,j=a.x*this.Pa+a.y,l=a.x*this.Qa+a.y;d.x-=this.Bb*h;d.y-=this.Bb*i;e-=this.Oc*j;g.x+=this.Cb*h;g.y+=this.Cb*i;f+=this.Pc*l;c.h.m(d);c.s=e;b.h.m(g);b.s=f};
u.Hb=function(){var a=this.F,c=this.I,b=a.c.g,d=a.c.n,e=c.c.g,g=c.c.n,f,h=0,i=0,j=0,l=h=f=0,m=0,i=!1,n=0,p=ic(d),s=ic(g);f=p;var m=this.A.x-this.Ae.x,r=this.A.y-this.Ae.y,h=f.a.x*m+f.b.x*r,r=f.a.y*m+f.b.y*r,m=h;f=s;s=this.B.x-this.Be.x;j=this.B.y-this.Be.y;h=f.a.x*s+f.b.x*j;j=f.a.y*s+f.b.y*j;s=h;f=e.x+s-b.x-m;h=e.y+j-b.y-r;if(this.od){this.D=mc(p,this.Sc);this.La=(f+m)*this.D.y-(h+r)*this.D.x;this.Ma=s*this.D.y-j*this.D.x;var t=this.D.x*f+this.D.y*h;Math.abs(this.Rd-this.Md)<0.01?(n=G(t,-0.2,0.2),
l=Math.abs(t),i=!0):t<=this.Md?(n=G(t-this.Md+0.005,-0.2,0),l=this.Md-t,i=!0):t>=this.Rd&&(n=G(t-this.Rd+0.005,0,0.2),l=t-this.Rd,i=!0)}this.qa=mc(p,this.df);this.Pa=(f+m)*this.qa.y-(h+r)*this.qa.x;this.Qa=s*this.qa.y-j*this.qa.x;p=new Z(0,0,0);r=this.qa.x*f+this.qa.y*h;s=g-d-this.Ui;l=Math.max(l,Math.abs(r));m=Math.abs(s);i?(i=this.Bb,j=this.Cb,f=this.Oc,h=this.Pc,this.S.a.x=i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,this.S.a.y=f*this.Pa+h*this.Qa,this.S.a.k=f*this.Pa*this.La+h*this.Qa*this.Ma,this.S.b.x=
this.S.a.y,this.S.b.y=f+h,this.S.b.k=f*this.La+h*this.Ma,this.S.H.x=this.S.a.k,this.S.H.y=this.S.b.k,this.S.H.k=i+j+f*this.La*this.La+h*this.Ma*this.Ma,uf(this.S,p,-r,-s,-n)):(i=this.Bb,j=this.Cb,f=this.Oc,h=this.Pc,n=f*this.Pa+h*this.Qa,t=f+h,this.S.a.j(i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,n,0),this.S.b.j(n,t,0),n=tf(this.S,new B(0,0),-r,-s),p.x=n.x,p.y=n.y,p.k=0);n=p.x*this.qa.x+p.k*this.D.x;i=p.x*this.qa.y+p.k*this.D.y;r=p.x*this.Pa+p.y+p.k*this.La;p=p.x*this.Qa+p.y+p.k*this.Ma;b.x-=this.Bb*
n;b.y-=this.Bb*i;d-=this.Oc*r;e.x+=this.Cb*n;e.y+=this.Cb*i;g+=this.Pc*p;a.c.n=d;c.c.n=g;P(a);P(c);return l<=0.005&&m<=pc};function xf(){of.call(this);this.Wa=new B(0,0);this.Xa=new B(0,0);this.$f=new B(0,0);this.type=2;this.$f.j(1,0);this.Yc=0;this.Re=!1;this.Bh=this.dh=0;this.Uf=!1;this.pg=this.Zi=0}z(xf,of);xf.prototype.X=function(a,c,b,d){this.U=a;this.W=c;this.Wa=oc(this.U.f,b);this.Xa=oc(this.W.f,b);this.$f=nc(this.U.f.d,d);this.Yc=this.W.Ub()-this.U.Ub()};xf.prototype.Qb=function(){return new vf(this)};function yf(){of.call(this);this.Wa=new B(0,0);this.Xa=new B(0,0);this.type=3;this.length=1;this.Ug=this.Yg=0}z(yf,of);yf.prototype.X=function(a,c,b,d){this.U=a;this.W=c;this.Wa.m(oc(this.U.f,b));this.Xa.m(oc(this.W.f,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.Ug=this.Yg=0};yf.prototype.Qb=function(){return new te(this)};function zf(a){L.call(this,a);this.Qc=new B(0,0);this.Rc=new B(0,0);this.i=new Z(0,0,0);this.q=new sf;this.Qc.m(a.Wa);this.Rc.m(a.Xa);this.De=a.Yc}z(zf,L);u=zf.prototype;u.Sb=function(){return O(this.F,this.Qc)};u.Tb=function(){return O(this.I,this.Rc)};
u.Vb=function(a){var c,b=0,d=this.F,e=this.I;c=d.f.d;var g=this.Qc.x-d.c.o.x,f=this.Qc.y-d.c.o.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.f.d;var h=this.Rc.x-e.c.o.x,i=this.Rc.y-e.c.o.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.l;var b=e.l,j=d.t,l=e.t;this.q.a.x=c+b+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=c+b+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;a.hc?(this.i.x*=a.Ua,this.i.y*=a.Ua,this.i.k*=
a.Ua,d.h.x-=c*this.i.x,d.h.y-=c*this.i.y,d.s-=j*(g*this.i.y-f*this.i.x+this.i.k),e.h.x+=b*this.i.x,e.h.y+=b*this.i.y,e.s+=l*(h*this.i.y-i*this.i.x+this.i.k)):this.i.K()};
u.Ib=function(){var a,c=0,b=this.F,d=this.I,e=b.h,g=b.s,f=d.h,h=d.s,i=b.l,j=d.l,l=b.t,m=d.t;a=b.f.d;var n=this.Qc.x-b.c.o.x,p=this.Qc.y-b.c.o.y,c=a.a.x*n+a.b.x*p,p=a.a.y*n+a.b.y*p,n=c;a=d.f.d;var s=this.Rc.x-d.c.o.x,r=this.Rc.y-d.c.o.y,c=a.a.x*s+a.b.x*r,r=a.a.y*s+a.b.y*r,s=c;a=new Z(0,0,0);uf(this.q,a,-(f.x-h*r-e.x+g*p),-(f.y+h*s-e.y-g*n),-(h-g));this.i.Ob(a);e.x-=i*a.x;e.y-=i*a.y;g-=l*(n*a.y-p*a.x+a.k);f.x+=j*a.x;f.y+=j*a.y;h+=m*(s*a.y-r*a.x+a.k);b.s=g;d.s=h};
u.Hb=function(){var a,c=0,b=this.F,d=this.I;a=b.f.d;var e=this.Qc.x-b.c.o.x,g=this.Qc.y-b.c.o.y,c=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=c;a=d.f.d;var f=this.Rc.x-d.c.o.x,h=this.Rc.y-d.c.o.y,c=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=c;a=b.l;var c=d.l,i=b.t,j=d.t,l=d.c.g.x+f-b.c.g.x-e,m=d.c.g.y+h-b.c.g.y-g,n=d.c.n-b.c.n-this.De,p=Math.sqrt(l*l+m*m),s=Math.abs(n);p>0.05&&(i*=1,j*=1);this.q.a.x=a+c+g*g*i+h*h*j;this.q.b.x=-g*e*i-h*f*j;this.q.H.x=-g*i-h*j;this.q.a.y=this.q.b.x;this.q.b.y=a+c+e*e*i+f*f*j;this.q.H.y=
e*i+f*j;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=i+j;var r=new Z(0,0,0);uf(this.q,r,-l,-m,-n);b.c.g.x-=a*r.x;b.c.g.y-=a*r.y;b.c.n-=i*(e*r.y-g*r.x+r.k);d.c.g.x+=c*r.x;d.c.g.y+=c*r.y;d.c.n+=j*(f*r.y-h*r.x+r.k);P(b);P(d);return p<=0.005&&s<=pc};function Af(){of.call(this);this.Wa=new B(0,0);this.Xa=new B(0,0);this.type=8;this.Yc=0}z(Af,of);Af.prototype.X=function(a,c,b){this.U=a;this.W=c;this.Wa.m(oc(this.U.f,b));this.Xa.m(oc(this.W.f,b));this.Yc=this.W.Ub()-this.U.Ub()};Af.prototype.Qb=function(){return new zf(this)};function Bf(a){L.call(this,a);this.Gb=new hc;this.ee=new hc;this.fe=new hc;this.ge=new hc;this.za=new Z(0,0,0);this.Kb=new B(0,0);this.gc=new B(0,0);this.A=new B(0,0);this.B=new B(0,0);this.i=new Z(0,0,0);this.q=new sf;this.A.m(a.Wa);this.B.m(a.Xa);this.De=a.Yc;this.i.K();this.va=0;this.ef=a.Ei;this.og=a.oj;this.Ti=a.$i;this.jg=a.pg;this.od=a.Re;this.we=a.Uf;this.ba=0}z(Bf,L);u=Bf.prototype;u.Sb=function(){return O(this.F,this.A)};u.Tb=function(){return O(this.I,this.B)};
function Cf(a){return a.I.c.n-a.F.c.n-a.De}
u.Vb=function(a){var c=this.F,b=this.I,d,e=0;d=c.f.d;var g=this.A.x-c.c.o.x,f=this.A.y-c.c.o.y,e=d.a.x*g+d.b.x*f,f=d.a.y*g+d.b.y*f,g=e;d=b.f.d;var h=this.B.x-b.c.o.x,i=this.B.y-b.c.o.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.l;var e=b.l,j=c.t,l=b.t;this.q.a.x=d+e+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=d+e+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;this.ec=1/(j+l);if(!this.we)this.va=0;if(this.od){var m=
b.c.n-c.c.n-this.De;if(Math.abs(this.og-this.ef)<2*pc)this.ba=3;else if(m<=this.ef){if(this.ba!=1)this.i.k=0;this.ba=1}else if(m>=this.og){if(this.ba!=2)this.i.k=0;this.ba=2}else this.ba=0,this.i.k=0}else this.ba=0;a.hc?(this.i.x*=a.Ua,this.i.y*=a.Ua,this.va*=a.Ua,a=this.i.x,m=this.i.y,c.h.x-=d*a,c.h.y-=d*m,c.s-=j*(g*m-f*a+this.va+this.i.k),b.h.x+=e*a,b.h.y+=e*m,b.s+=l*(h*m-i*a+this.va+this.i.k)):(this.i.K(),this.va=0)};
u.Ib=function(a){var c=this.F,b=this.I,d=0,e=d=0,g=0,f=0,h=0,i=c.h,j=c.s,l=b.h,m=b.s,n=c.l,p=b.l,s=c.t,r=b.t;if(this.we&&this.ba!=3)e=this.ec*-(m-j-this.jg),g=this.va,f=a.Y*this.Ti,this.va=G(this.va+e,-f,f),e=this.va-g,j-=s*e,m+=r*e;if(this.od&&this.ba!=0){var a=c.f.d,e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.f.d,f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,a=l.x+-m*h-i.x- -j*g,t=l.y+m*f-i.y-j*e;uf(this.q,this.za,-a,-t,-(m-j));
if(this.ba==3)this.i.Ob(this.za);else if(this.ba==1){if(d=this.i.k+this.za.k,d<0)tf(this.q,this.gc,-a,-t),this.za.x=this.gc.x,this.za.y=this.gc.y,this.za.k=-this.i.k,this.i.x+=this.gc.x,this.i.y+=this.gc.y,this.i.k=0}else if(this.ba==2&&(d=this.i.k+this.za.k,d>0))tf(this.q,this.gc,-a,-t),this.za.x=this.gc.x,this.za.y=this.gc.y,this.za.k=-this.i.k,this.i.x+=this.gc.x,this.i.y+=this.gc.y,this.i.k=0;i.x-=n*this.za.x;i.y-=n*this.za.y;j-=s*(e*this.za.y-g*this.za.x+this.za.k);l.x+=p*this.za.x;l.y+=p*this.za.y;
m+=r*(f*this.za.y-h*this.za.x+this.za.k)}else a=c.f.d,e=this.A.x-c.c.o.x,g=this.A.y-c.c.o.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.f.d,f=this.B.x-b.c.o.x,h=this.B.y-b.c.o.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,tf(this.q,this.Kb,-(l.x+-m*h-i.x- -j*g),-(l.y+m*f-i.y-j*e)),this.i.x+=this.Kb.x,this.i.y+=this.Kb.y,i.x-=n*this.Kb.x,i.y-=n*this.Kb.y,j-=s*(e*this.Kb.y-g*this.Kb.x),l.x+=p*this.Kb.x,l.y+=p*this.Kb.y,m+=r*(f*this.Kb.y-h*this.Kb.x);c.h.m(i);c.s=j;b.h.m(l);b.s=m};
u.Hb=function(){var a=0,c,b=this.F,d=this.I,e=0,g=c=0,f=0,h=0;if(this.od&&this.ba!=0){var a=d.c.n-b.c.n-this.De,i=0;this.ba==3?(a=G(a-this.ef,-qc,qc),i=-this.ec*a,e=Math.abs(a)):this.ba==1?(a-=this.ef,e=-a,a=G(a+pc,-qc,0),i=-this.ec*a):this.ba==2&&(a-=this.og,e=a,a=G(a-pc,0,qc),i=-this.ec*a);b.c.n-=b.t*i;d.c.n+=d.t*i;P(b);P(d)}c=b.f.d;i=this.A.x-b.c.o.x;a=this.A.y-b.c.o.y;g=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=g;c=d.f.d;var j=this.B.x-d.c.o.x,l=this.B.y-d.c.o.y,g=c.a.x*j+c.b.x*l,l=c.a.y*j+c.b.y*l,
j=g,f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a,m=f*f+h*h;c=Math.sqrt(m);var g=b.l,n=d.l,p=b.t,s=d.t;m>0.05*0.05&&(m=1/(g+n),f=m*-f,h=m*-h,b.c.g.x-=0.5*g*f,b.c.g.y-=0.5*g*h,d.c.g.x+=0.5*n*f,d.c.g.y+=0.5*n*h,f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a);this.ee.a.x=g+n;this.ee.b.x=0;this.ee.a.y=0;this.ee.b.y=g+n;this.fe.a.x=p*a*a;this.fe.b.x=-p*i*a;this.fe.a.y=-p*i*a;this.fe.b.y=p*i*i;this.ge.a.x=s*l*l;this.ge.b.x=-s*j*l;this.ge.a.y=-s*j*l;this.ge.b.y=s*j*j;this.Gb.Bd(this.ee);this.Gb.xf(this.fe);this.Gb.xf(this.ge);
this.Gb.je(Df,-f,-h);f=Df.x;h=Df.y;b.c.g.x-=b.l*f;b.c.g.y-=b.l*h;b.c.n-=b.t*(i*h-a*f);d.c.g.x+=d.l*f;d.c.g.y+=d.l*h;d.c.n+=d.t*(j*h-l*f);P(b);P(d);return c<=0.005&&e<=pc};var Df=new B(0,0);function Ef(){of.call(this);this.Wa=new B(0,0);this.Xa=new B(0,0);this.type=1;this.Wa.K();this.Xa.K();this.pg=this.$i=this.oj=this.Ei=this.Yc=0;this.Uf=this.Re=!1}z(Ef,of);Ef.prototype.X=function(a,c,b){this.U=a;this.W=c;this.Wa=oc(this.U.f,b);this.Xa=oc(this.W.f,b);this.Yc=this.W.Ub()-this.U.Ub()};Ef.prototype.Qb=function(){return new Bf(this)};function Ff(){this.Lb=new B(0,0);this.Mb=new B(0,0)}Ff.prototype.K=function(){this.Lb.K();this.cd=0;this.Mb.K();this.dd=0};Ff.prototype.j=function(a,c,b,d){c===k&&(c=0);d===k&&(d=0);this.Lb.m(a);this.cd=c;this.Mb.m(b);this.dd=d};function Gf(a){L.call(this,a);this.bc=new B(0,0);this.cc=new B(0,0);this.A=new B(0,0);this.B=new B(0,0);this.ka=new Ff;var c=a.Gd.C,b=a.Hd.C;this.Pd=this.td=this.Od=this.sd=o;var d=0,e=0;this.Ki=a.Gd.F;this.F=a.Gd.I;c==1?(this.sd=a.Gd,this.bc.m(this.sd.A),this.A.m(this.sd.B),d=Cf(this.sd)):(this.Od=a.Gd,this.bc.m(this.Od.A),this.A.m(this.Od.B),d=wf(this.Od));this.Li=a.Hd.F;this.I=a.Hd.I;b==1?(this.td=a.Hd,this.cc.m(this.td.A),this.B.m(this.td.B),e=Cf(this.td)):(this.Pd=a.Hd,this.cc.m(this.Pd.A),this.B.m(this.Pd.B),
e=wf(this.Pd));this.na=a.Xc;this.Jd=d+this.na*e;this.i=0}z(Gf,L);u=Gf.prototype;u.Sb=function(){return O(this.F,this.A)};u.Tb=function(){return O(this.I,this.B)};
u.Vb=function(a){var c=this.Ki,b=this.Li,d=this.F,e=this.I,g=0,f=0,h=0,i=0,j=h=0,l=0;this.ka.K();this.sd?(this.ka.cd=-1,l+=d.t):(c=c.f.d,f=this.Od.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=d.f.d,h=this.A.x-d.c.o.x,i=this.A.y-d.c.o.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ka.Lb.j(-g,-f),this.ka.cd=-h,l+=d.l+d.t*h*h);this.td?(this.ka.dd=-this.na,l+=this.na*this.na*e.t):(c=b.f.d,f=this.Pd.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=e.f.d,h=this.B.x-e.c.o.x,i=this.B.y-e.c.o.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ka.Mb.j(-this.na*g,-this.na*f),this.ka.dd=-this.na*h,l+=this.na*this.na*(e.l+e.t*h*h));this.q=l>0?1/l:0;a.hc?(d.h.x+=d.l*this.i*this.ka.Lb.x,d.h.y+=d.l*this.i*this.ka.Lb.y,d.s+=d.t*this.i*this.ka.cd,e.h.x+=e.l*this.i*this.ka.Mb.x,e.h.y+=e.l*this.i*this.ka.Mb.y,e.s+=e.t*this.i*this.ka.dd):this.i=0};
u.Ib=function(){var a=this.F,c=this.I,b=this.ka,d=a.h,e=a.s,g=c.h,f=c.s;e===k&&(e=0);f===k&&(f=0);b=-this.q*(b.Lb.x*d.x+b.Lb.y*d.y+b.cd*e+(b.Mb.x*g.x+b.Mb.y*g.y)+b.dd*f);this.i+=b;a.h.x+=a.l*b*this.ka.Lb.x;a.h.y+=a.l*b*this.ka.Lb.y;a.s+=a.t*b*this.ka.cd;c.h.x+=c.l*b*this.ka.Mb.x;c.h.y+=c.l*b*this.ka.Mb.y;c.s+=c.t*b*this.ka.dd};
u.Hb=function(){var a=this.F,c=this.I,b=0,d=0,b=this.sd?Cf(this.sd):wf(this.Od),d=this.td?Cf(this.td):wf(this.Pd),b=-this.q*(this.Jd-(b+this.na*d));a.c.g.x+=a.l*b*this.ka.Lb.x;a.c.g.y+=a.l*b*this.ka.Lb.y;a.c.n+=a.t*b*this.ka.cd;c.c.g.x+=c.l*b*this.ka.Mb.x;c.c.g.y+=c.l*b*this.ka.Mb.y;c.c.n+=c.t*b*this.ka.dd;P(a);P(c);return!0};function Hf(){of.call(this);this.type=6;this.Hd=this.Gd=o;this.Xc=1}z(Hf,of);Hf.prototype.X=function(a,c,b){this.Gd=a;this.U=a.F;this.Hd=c;this.W=c.F;this.Xc=b};Hf.prototype.Qb=function(){return new Gf(this)};var If={};
(function(a){var c,b=new B(350,80),d=new B(1024,600),e,g,f,h;a.Xb=function(c,e,g){f=new ff(a,c,b,Y.ad.Bf,d,20,e);h=new Y(f);c=new B(5,b.y-7-24);a.mc(c,g);rf.Tg(f,h,new B(0,b.y),c);g=0;a.gi(++g);a.ii(++g);a.hi(g);a.ei();gf(f)};a.mc=function(a,b){var d=new B(0,0),m=new B(21,47),n=new B(m.x/20,m.y/20);c=h.mc(n,a);af(f.kc,c,n,d,m);g=new ob("game");A(g,new qf(function(){f.paused=!f.paused},"Pause",!1),80,!1,!1,!1);e=new ob("player");A(e,c.Ta.rg,b?87:38,!1,!1,!1);A(e,c.Ta.Fe,b?65:37,!1,!1,!1);A(e,c.Ta.qg,
b?83:40,!1,!1,!1);A(e,c.Ta.Ge,b?68:39,!1,!1,!1)};a.hi=function(a){for(var c=new B(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Sf(c,new B(4,b.y-f-e)),h.Sf(c,new B(10,b.y-f-e));h.Sf(new B(b.x-15,0.25),new B((b.x-15)/2+15,b.y-e-24))}};a.ii=function(a){for(var a=new B(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,W(f.p,new B(3,0.3),new B(a.x,a.y-1.5),!0,{ab:c},o),a.x+=3.5};a.gi=function(a){for(var a=new B(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new Ef,e=new Af;a.x+=4;var g=
{ab:Math.random()*Math.PI},h=a.y-6,s=W(f.p,new B(0.01,0.01),new B(a.x,h),!1,{xa:g}),r=Re(f.p,new B(8,0.8),new B(a.x,h),!0,{xa:g});D(r,"graphics/spinner.png");g.ab+=Math.PI/2;g=Re(f.p,new B(8,0.8),new B(a.x,h),!0,{xa:g});D(g,"graphics/spinner.png");d.X(s.body,r.body,U(s.body));V(f.p.pa,d);d.X(s.body,g.body,U(s.body));V(f.p.pa,d);e.X(r.body,g.body,U(r.body));V(f.p.pa,e);a.x+=6}for(c=0;c<1;c++)g={Lc:!0},d=new yf,a.x+=2,h=a.y-6,r=Re(f.p,new B(3,0.2),new B(a.x+0.1,h+2),!0,{xa:g}),e=Re(f.p,new B(3,0.2),
new B(a.x+0.1,h-2),!0,{xa:g}),s=Re(f.p,new B(0.2,3),new B(a.x-2,h+0.1),!0,{xa:g}),g=Re(f.p,new B(0.2,3),new B(a.x+2,h+0.1),!0,{xa:g}),d.X(r.body,e.body,U(r.body),U(e.body)),V(f.p.pa,d),d.X(r.body,s.body,U(r.body),U(s.body)),V(f.p.pa,d),d.X(r.body,g.body,U(r.body),U(g.body)),V(f.p.pa,d),d.X(e.body,s.body,U(e.body),U(s.body)),V(f.p.pa,d),d.X(e.body,g.body,U(e.body),U(g.body)),V(f.p.pa,d),d.X(s.body,g.body,U(s.body),U(g.body)),V(f.p.pa,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,g={Lc:!0},d=new pf,a.x+=1.5,s=
Re(f.p,new B(3,0.3),new B(a.x+1.5,h),!0,{xa:g}),a.x+=6,g=Re(f.p,new B(3,0.3),new B(a.x+1.5,h),!0,{xa:g}),h=U(s.body).ja(),h.y-=3,X(f.p,new B(0.3,0.3),h),r=U(g.body).ja(),r.y-=3,X(f.p,new B(0.3,0.3),r),d.X(s.body,g.body,h,r,U(s.body),U(g.body),(c+1)/2),V(f.p.pa,d),a.x+=3.5;for(c=0;c<2;c++){var d=new Hf,t=new Ef;new xf;g={ab:0};a.x+=2;for(var e=o,v=0;v<2;v++)h=a.y-(v+1)*4,s=W(f.p,new B(0.01,0.01),new B(a.x,h),!1,{xa:g}),r=Re(f.p,new B(4,0.2),new B(a.x,h),!0,{xa:g}),t.X(s.body,r.body,U(s.body)),h=V(f.p.pa,
t),e!==o&&(d.X(h,e,v),V(f.p.pa,d)),e=h;h=a.y-12;s=W(f.p,new B(0.01,0.01),new B(a.x,h),!1,{xa:g});r=Re(f.p,new B(0.4,0.2),new B(a.x,h),!0,{xa:g});g=new xf;g.X(s.body,r.body,U(s.body),new B(Math.random(),Math.random()));g.Re=!0;g.dh=-1;g.Bh=1;h=V(f.p.pa,g);d.X(h,e,0.5);V(f.p.pa,d);a.x+=4}};a.ei=function(){for(var a={type:2,Lc:!1},c={Bc:1.5},d=new Od(0.25),e=new B(0.5,0.5),g=0;g<50;g++){var h=g*5%(b.x-10),h=new B(h+g%20/20+4.5,15+g%20);f.p.Jb(e,h,!0,d,{xa:a,oc:c})}d=new K;Jc(d,0.25,0.25);for(g=0;g<50;g++)h=
g*5%(b.x-10),h=new B(h+(g+5)%20/20+4.5,15+(g+5)%20),a.ab=g%17/17,f.p.Jb(e,h,!0,d,{xa:a,oc:c});d=new K;Ic(d,[new B(-0.5,-0.5),new B(0.5,-0.5),new B(-0.5,0.5)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new B(h+(g+10)%20/20+4.5,15+(g+10)%20),a.ab=g%22/22,f.p.Jb(e,h,!0,d,{xa:a,oc:c});d=new K;Ic(d,[new B(-Math.random()*0.5,-Math.random()*0.5),new B(Math.random()*0.5,-Math.random()*0.5),new B(Math.random()*0.5,Math.random()*0.5),new B(-Math.random()*0.5,Math.random()*0.5)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new B(h+
(g+15)%20/20+4.5,15+(g+15)%20),a.ab=g%35/35,f.p.Jb(e,h,!0,d,{xa:a,oc:c});d=new K;Ic(d,[new B(-0.5,-0.5),new B(0,-0.5),new B(0.5,0),new B(0.5,0.5),new B(0,0.3)]);for(g=0;g<50;g++)h=g*5%(b.x-10),h=new B(h+(g+15)%20/20+4.5,15+(g+15)%20),a.ab=g%35/35,f.p.Jb(e,h,!0,d,{xa:a,oc:c})};a.wf=function(a,b){qb(g,b)};a.mf=function(a,b){qb(g,b);qb(e,b)};a.lf=function(){Yb(f.viewport,U(c.body))}})(If);ca("test.init",If.Xb);var Jf={};
(function(a){var c,b=new B(5,10),d=new B(100,200),e,g,f,h;a.Xb=function(c,e,g){f=new ff(a,c,b,Y.ad.Bf,d,20,e);h=new Y(f);c=new B(2,2);a.ji();a.mc(c,g);gf(f)};a.mc=function(a,b){var d=new B(0,0),m=new B(21,47),n=new B(m.x/20,m.y/20);c=h.mc(n,a);af(f.kc,c,n,d,m);g=new ob("game");A(g,new qf(function(){f.paused=!f.paused},"Pause",!1),80,!1,!1,!1);e=new ob("player");A(e,c.Ta.rg,b?87:38,!1,!1,!1);A(e,c.Ta.Fe,b?65:37,!1,!1,!1);A(e,c.Ta.qg,b?83:40,!1,!1,!1);A(e,c.Ta.Ge,b?68:39,!1,!1,!1)};a.ji=function(){h.cb(new B(b.x,0.5),
new B(b.x/2,b.y-0.25));a.ci(new B(b.x,6),new B(0,b.y-0.25))};a.ci=function(a,b){W(f.p,new B(0.25,a.y),new B(b.x+0,b.y-a.y/2),!0,o,o);W(f.p,new B(0.25,a.y),new B(b.x+a.x-0.125,b.y-a.y/2),!0,o,o);for(var c=new Od(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var g=0;g<a.y/2;g+=0.3){var h=f.p.Jb(new B(0.3,0.3),new B(b.x+e-d++%2*0.15,b.y-g),!0,c,{oc:{pe:0.1,Bc:0.1,vb:0.1}}),r=Math.random();r<=0.25?D(h,"graphics/ball-red.png"):r<=0.5?D(h,"graphics/ball-green.png"):r<=0.75?D(h,"graphics/ball-yellow.png"):D(h,
"graphics/ball-blue.png")}};a.wf=function(a,b){qb(g,b)};a.mf=function(a,b){qb(g,b);qb(e,b)};a.lf=function(){Yb(f.viewport,U(c.body))}})(Jf);ca("pit.init",Jf.Xb);})();
