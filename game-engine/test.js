(function(){var k=void 0,o=true,q=null,r=false;function u(){return function(){}}function aa(a){return function(c){this[a]=c}}function ba(a){return function(){return this[a]}}function ca(a){return function(){return a}}var x,z=this;function da(a,c){var b=a.split("."),d=z;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==k?d[e]=c:d=d[e]?d[e]:d[e]={}}function ea(){}
function fa(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var ga="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ha=0;function B(a,c){function b(){}b.prototype=c.prototype;a.Rh=c.prototype;a.prototype=new b;a.prototype.constructor=a};function ia(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),g=Math.max(d.length,e.length),f=0;b==0&&f<g;f++){var h=d[f]||"",i=e[f]||"",j=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(h)||["","",""],n=l.exec(i)||["","",""];if(m[0].length==0&&n[0].length==0)break;b=ja(m[1].length==0?0:parseInt(m[1],10),n[1].length==0?0:parseInt(n[1],10))||ja(m[2].length==0,n[2].length==0)||ja(m[2],n[2])}while(b==
0)}return b}function ja(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ka,la,ma,na;function oa(){return z.navigator?z.navigator.userAgent:q}na=ma=la=ka=r;var pa;if(pa=oa()){var qa=z.navigator;ka=pa.indexOf("Opera")==0;la=!ka&&pa.indexOf("MSIE")!=-1;ma=!ka&&pa.indexOf("WebKit")!=-1;na=!ka&&!ma&&qa.product=="Gecko"}var ra=la,sa=na,ta=ma,ua=z.navigator,va=(ua&&ua.platform||"").indexOf("Mac")!=-1,wa;
a:{var xa="",ya;if(ka&&z.opera)var za=z.opera.version,xa=typeof za=="function"?za():za;else if(sa?ya=/rv\:([^\);]+)(\)|;)/:ra?ya=/MSIE\s+([^\);]+)(\)|;)/:ta&&(ya=/WebKit\/(\S+)/),ya)var Aa=ya.exec(oa()),xa=Aa?Aa[1]:"";if(ra){var Ba,Ca=z.document;Ba=Ca?Ca.documentMode:k;if(Ba>parseFloat(xa)){wa=String(Ba);break a}}wa=xa}var Da={},Ea={};var Fa,Ga={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var Ha=Array.prototype,Ia=Ha.indexOf?function(a,c,b){return Ha.indexOf.call(a,c,b)}:function(a,c,b){b=b==q?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Ja(a,c){Ia(a,c)>=0||a.push(c)}function Ka(a,c){var b=Ia(a,c);b>=0&&Ha.splice.call(a,b,1)};ra&&(Ea[9]||(Ea[9]=ra&&document.documentMode&&document.documentMode>=9));ra&&(Da["8"]||(Da["8"]=ia(wa,"8")>=0));function La(){}La.prototype.ph=r;La.prototype.Gd=function(){if(!this.ph)this.ph=o,this.Hd()};La.prototype.Hd=function(){this.Hi&&Ma.apply(q,this.Hi)};function Ma(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=fa(d);e=="array"||e=="object"&&typeof d.length=="number"?Ma.apply(q,d):d&&typeof d.Gd=="function"&&d.Gd()}};function Na(a,c){this.type=a;this.currentTarget=this.target=c}B(Na,La);Na.prototype.Hd=function(){delete this.type;delete this.target;delete this.currentTarget};Na.prototype.Eg=r;Na.prototype.Bj=o;function Oa(a){Oa[" "](a);return a}Oa[" "]=ea;function Pa(a,c){a&&this.vb(a,c)}B(Pa,Na);x=Pa.prototype;x.target=q;x.relatedTarget=q;x.offsetX=0;x.offsetY=0;x.clientX=0;x.clientY=0;x.screenX=0;x.screenY=0;x.button=0;x.keyCode=0;x.charCode=0;x.ctrlKey=r;x.altKey=r;x.shiftKey=r;x.metaKey=r;x.yj=r;x.qh=q;
x.vb=function(a,c){var b=this.type=a.type;Na.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(sa){var e;a:{try{Oa(d.nodeName);e=o;break a}catch(g){}e=r}e||(d=q)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.yj=va?a.metaKey:a.ctrlKey;this.state=a.state;this.qh=a;delete this.Bj;delete this.Eg};x.Hd=function(){Pa.Rh.Hd.call(this);this.relatedTarget=this.currentTarget=this.target=this.qh=q};function Qa(){}var Ra=0;x=Qa.prototype;x.key=0;x.ae=r;x.fh=r;x.vb=function(a,c,b,d,e,g){if(fa(a)=="function")this.vh=o;else if(a&&a.handleEvent&&fa(a.handleEvent)=="function")this.vh=r;else throw Error("Invalid listener argument");this.Ae=a;this.Qh=c;this.src=b;this.type=d;this.capture=!!e;this.th=g;this.fh=r;this.key=++Ra;this.ae=r};x.handleEvent=function(a){return this.vh?this.Ae.call(this.th||this.src,a):this.Ae.handleEvent.call(this.Ae,a)};var Sa,Ta=(Sa="ScriptEngine"in z&&z.ScriptEngine()=="JScript")?z.ScriptEngineMajorVersion()+"."+z.ScriptEngineMinorVersion()+"."+z.ScriptEngineBuildVersion():"0";function Ua(a,c){this.Jh=c;this.ld=[];if(a>this.Jh)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.ld.push(this.Gb())}B(Ua,La);Ua.prototype.hd=q;Ua.prototype.oh=q;function Va(a){return a.ld.length?a.ld.pop():a.Gb()}function Wa(a,c){a.ld.length<a.Jh?a.ld.push(c):Xa(a,c)}Ua.prototype.Gb=function(){return this.hd?this.hd():{}};
function Xa(a,c){if(a.oh)a.oh(c);else{var b=fa(c);if(b=="object"||b=="array"||b=="function")if(fa(c.Gd)=="function")c.Gd();else for(var d in c)delete c[d]}}Ua.prototype.Hd=function(){Ua.Rh.Hd.call(this);for(var a=this.ld;a.length;)Xa(this,a.pop());delete this.ld};var Ya,Za,$a,ab,bb,cb,db,eb,fb,gb,hb;
(function(){function a(){return{Hc:0,$d:0}}function c(){return[]}function b(){function a(b){b=f.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Qa}function e(){return new Pa}var g=Sa&&!(ia(Ta,"5.7")>=0),f;cb=function(a){f=a};if(g){Ya=function(){return Va(h)};Za=function(a){Wa(h,a)};$a=function(){return Va(i)};ab=function(a){Wa(i,a)};bb=function(){return Va(j)};db=function(){Wa(j,b())};eb=function(){return Va(l)};fb=function(a){Wa(l,a)};gb=function(){return Va(m)};hb=function(a){Wa(m,
a)};var h=new Ua(0,600);h.hd=a;var i=new Ua(0,600);i.hd=c;var j=new Ua(0,600);j.hd=b;var l=new Ua(0,600);l.hd=d;var m=new Ua(0,600);m.hd=e}else Ya=a,Za=ea,$a=c,ab=ea,bb=b,db=ea,eb=d,fb=ea,gb=e,hb=ea})();var ib={},C={},jb={},kb={};
function lb(a,c,b,d,e){if(c)if(fa(c)=="array")for(var g=0;g<c.length;g++)lb(a,c[g],b,d,e);else{var d=!!d,f=C;c in f||(f[c]=Ya());f=f[c];d in f||(f[d]=Ya(),f.Hc++);var f=f[d],h=a[ga]||(a[ga]=++ha),i;f.$d++;if(f[h]){i=f[h];for(g=0;g<i.length;g++)if(f=i[g],f.Ae==b&&f.th==e){if(f.ae)break;return}}else i=f[h]=$a(),f.Hc++;g=bb();g.src=a;f=eb();f.vb(b,g,a,c,d,e);b=f.key;g.key=b;i.push(f);ib[b]=f;jb[h]||(jb[h]=$a());jb[h].push(f);a.addEventListener?(a==z||!a.Gi)&&a.addEventListener(c,g,d):a.attachEvent(c in
kb?kb[c]:kb[c]="on"+c,g)}else throw Error("Invalid event type");}function mb(a,c,b,d){if(!d.pf&&d.Mh){for(var e=0,g=0;e<d.length;e++)if(d[e].ae){var f=d[e].Qh;f.src=q;db(f);fb(d[e])}else e!=g&&(d[g]=d[e]),g++;d.length=g;d.Mh=r;g==0&&(ab(d),delete C[a][c][b],C[a][c].Hc--,C[a][c].Hc==0&&(Za(C[a][c]),delete C[a][c],C[a].Hc--),C[a].Hc==0&&(Za(C[a]),delete C[a]))}}
function nb(a,c,b,d,e){var g=1,c=c[ga]||(c[ga]=++ha);if(a[c]){a.$d--;a=a[c];a.pf?a.pf++:a.pf=1;try{for(var f=a.length,h=0;h<f;h++){var i=a[h];i&&!i.ae&&(g&=ob(i,e)!==r)}}finally{a.pf--,mb(b,d,c,a)}}return Boolean(g)}
function ob(a,c){var b=a.handleEvent(c);if(a.fh){var d=a.key;if(ib[d]){var e=ib[d];if(!e.ae){var g=e.src,f=e.type,h=e.Qh,i=e.capture;g.removeEventListener?(g==z||!g.Gi)&&g.removeEventListener(f,h,i):g.detachEvent&&g.detachEvent(f in kb?kb[f]:kb[f]="on"+f,h);g=g[ga]||(g[ga]=++ha);h=C[f][i][g];if(jb[g]){var j=jb[g];Ka(j,e);j.length==0&&delete jb[g]}e.ae=o;h.Mh=o;mb(f,i,g,h);delete ib[d]}}}return b}
cb(function(a,c){if(!ib[a])return o;var b=ib[a],d=b.type,e=C;if(!(d in e))return o;var e=e[d],g,f;Fa===k&&(Fa=ra&&!z.addEventListener);if(Fa){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=z;g=h.shift();)if(i[g]!=q)i=i[g];else{h=q;break a}h=i}g=h;h=o in e;i=r in e;if(h){if(g.keyCode<0||g.returnValue!=k)return o;a:{var j=r;if(g.keyCode==0)try{g.keyCode=-1;break a}catch(l){j=o}if(j||g.returnValue==k)g.returnValue=o}}j=gb();j.vb(g,this);g=o;try{if(h){for(var m=$a(),n=j.currentTarget;n;n=n.parentNode)m.push(n);
f=e[o];f.$d=f.Hc;for(var p=m.length-1;!j.Eg&&p>=0&&f.$d;p--)j.currentTarget=m[p],g&=nb(f,m[p],d,o,j);if(i){f=e[r];f.$d=f.Hc;for(p=0;!j.Eg&&p<m.length&&f.$d;p++)j.currentTarget=m[p],g&=nb(f,m[p],d,r,j)}}else g=ob(b,j)}finally{if(m)m.length=0,ab(m);j.Gd();hb(j)}return g}d=new Pa(c,this);try{g=ob(b,d)}finally{d.Gd()}return g});var pb={61:187,59:186};ra||ta&&(Da["525"]||(Da["525"]=ia(wa,"525")>=0));function qb(a){this.id=rb++;this.name=a;this.controls={};this.Hg={};this.ih=[];this.Gf=this.af=q}function D(a,c){var b=0,d=sb==tb&&ub==vb&&wb==xb,e;for(e in yb){var g=d&&yb[e].Xh;b++;var f=zb(e,sb,ub,wb);a.af==q&&a.controls[f]!=q&&(!g||a.controls[f].Ji)&&a.controls[f].execute(c)}if(b==1&&a.af!=q)a.Gf!=q&&clearTimeout(a.Gf),a.Gf=setTimeout(function(){F(a,a.af,f);a.af=q;a.Gf=q},100)}
function F(a,c,b,d,e,g){var f=b;typeof b=="number"&&(f=zb(b,d,e,g));b=[];d=a.controls[f];e=a.Hg[c.name];if(d!=q)if(e!=q)a.controls[e]=d,a.Hg[d.name]=e,b.push(new Ab(e,d));else throw"The specified key is already in use for a different function.";else e!=q&&delete a.controls[e];a.controls[f]=c;a.Hg[c.name]=f;b.push(new Ab(f,c));for(c=0;c<a.ih.length;c++)f=a.ih[c],f.Sj.apply(f.Ae,b||[],Bb(a))}function Bb(a){var c=[],b;for(b in a.controls)c.push(new Ab(b,a.controls[b]));return c}
var rb=0,yb={},sb=r,tb={},ub=r,vb={},wb=r,xb={};function Cb(a){var c=a.Lj,c=sa&&a.keyCode in pb?pb[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function zb(a,c,b,d){var e=Ga[a];e==q&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}lb(document,"keydown",function(a){a=Cb(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&yb[a.keyCode]==q&&(yb[a.keyCode]={Xh:r});sb=a.ctrlKey;ub=a.altKey;wb=a.shiftKey});
lb(document,"keyup",function(a){a=Cb(a);delete yb[a.keyCode];sb=a.ctrlKey;ub=a.altKey;wb=a.shiftKey});lb(document,"blur",function(){yb={};xb=wb=vb=ub=tb=sb=r});function Ab(a,c){this.key=this.key=a;this.action=this.action=c};function G(a,c){this.x=a;this.y=c}x=G.prototype;x.N=function(){this.y=this.x=0};x.j=function(a,c){this.x=a;this.y=c};x.m=function(a){this.x=a.x;this.y=a.y};x.Bb=function(){return new G(-this.x,-this.y)};x.Sg=function(){this.x=-this.x;this.y=-this.y};x.ca=function(){return new G(this.x,this.y)};x.Ob=function(a){this.x+=a.x;this.y+=a.y};x.Wf=function(a){this.x-=a.x;this.y-=a.y};x.hc=function(a){this.x*=a;this.y*=a};function Db(a){return Math.sqrt(Eb(a))}function Eb(a){return a.x*a.x+a.y*a.y}
function Fb(a){var c=Db(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Gb={},Hb=0;function Ib(){Hb--}function Jb(a){if(a.Ig===k||a.Ig===q)a.Ig={};return a.Ig};function Kb(){this.Cf=this.rg=this.Md=this.ij=this.Pd=1;var a=this;this.nj={Ni:{clear:function(){a.oc.clearRect(0,0,a.oc.canvas.width,a.oc.canvas.height)}}};this.Ah=0}var Lb,Mb,Nb,Ob,Pb,Qb;
(function(a){a.prototype.Fc=function(a,b){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+b+")"};a.prototype.li=function(){var a=Rb;a===k&&(a=0);this.Ah=a};a.prototype.ni=aa("oc");a.prototype.ji=function(a){a===k&&(a=0);this.Pd=a};a.prototype.mi=function(){var a=1;a===k&&(a=0);this.ij=a;this.oc.ck=a};a.prototype.ki=function(){var a=0.3;a===k&&(a=0);this.rg=a};a.prototype.$h=function(a,b){var d=this.oc,e=this.Pd;d.beginPath();d.strokeStyle=this.Fc(Sb(b),this.Md);d.moveTo(a[0].x*
e,a[0].y*e);for(var g=1;g<4;g++)d.lineTo(a[g].x*e,a[g].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.bi=function(a,b,d){if(b){var e=this.oc,g=this.Pd;e.beginPath();e.strokeStyle=this.Fc(Sb(d),this.Md);e.fillStyle=this.Fc(Sb(d),this.rg);e.moveTo(a[0].x*g,a[0].y*g);for(d=1;d<b;d++)e.lineTo(a[d].x*g,a[d].y*g);e.lineTo(a[0].x*g,a[0].y*g);e.closePath();e.fill();e.stroke()}};a.prototype.ai=function(a,b,d,e){if(b){var g=this.oc,f=this.Pd,h=a.x*f,i=a.y*f;g.moveTo(0,0);g.beginPath();
g.strokeStyle=this.Fc(Sb(e),this.Md);g.fillStyle=this.Fc(Sb(e),this.rg);g.arc(h,i,b*f,0,Math.PI*2,o);g.moveTo(h,i);g.lineTo((a.x+d.x*b)*f,(a.y+d.y*b)*f);g.closePath();g.fill();g.stroke()}};a.prototype.Ec=function(a,b,d){var e=this.oc,g=this.Pd;e.strokeStyle=this.Fc(Sb(d),this.Md);e.beginPath();e.moveTo(a.x*g,a.y*g);e.lineTo(b.x*g,b.y*g);e.closePath();e.stroke()};a.prototype.ci=function(){var a=Tb,b=this.oc,d=this.Pd;b.beginPath();b.strokeStyle=this.Fc(16711680,this.Md);b.moveTo(a.position.x*d,a.position.y*
d);b.lineTo((a.position.x+this.Cf*a.d.a.x)*d,(a.position.y+this.Cf*a.d.a.y)*d);b.strokeStyle=this.Fc(65280,this.Md);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.Cf*a.d.b.x)*d,(a.position.y+this.Cf*a.d.b.y)*d);b.closePath();b.stroke()};Lb=1;Mb=2;Nb=4;Ob=8;Pb=16;Qb=32})(Kb);function Ub(a,c,b,d){if(Gb[a]==q)Hb++,Gb[a]=new Image,Gb[a].onload=Ib,Gb[a].src=a;this.url=a;this.Nh=c||new G(0,0);this.Hf=b||new G(1,1);this.Uh=d||new G(1,1);this.mb=new G(1,1)};function Vb(){this.lowerBound=new G(0,0);this.upperBound=new G(0,0)}function Wb(a){return new G((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}function Xb(a,c){var b;return b=(b=(b=(b=o&&a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}
Vb.prototype.Dd=function(a){return a.lowerBound.x-this.upperBound.x>0?r:a.lowerBound.y-this.upperBound.y>0?r:this.lowerBound.x-a.upperBound.x>0?r:this.lowerBound.y-a.upperBound.y>0?r:o};function Yb(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function Zb(a,c,b,d,e){this.jc={};this.ta=a;this.zb=d;this.zc=new G(d.x/b,d.y/b);this.scale=b;this.ya=new G(0,0);this.nf=new G(-1,-1);this.Mf=new Vb;this.Mf.upperBound=this.zc.ca();this.Mf.upperBound.hc(1.25);$b(this,new G(0,0));a=document.getElementById(c);this.jd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.zb.x+"px; height: "+this.zb.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.zb.x/2+"px; height: "+this.zb.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.jd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.jd.className="viewportContainer";this.jd.style.width=this.zb.x+"px";this.jd.style.height=this.zb.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.jd.appendChild(this.display);a.appendChild(this.jd);this.kg=document.createElement("div");this.kg=ac(this,"Loading, please wait.");bc(this.kg);this.Oh=ac(this,
"Paused");e?(this.bb=document.getElementById(c+"__DEBUG"),this.bb.width=this.ta.o.Xa.x*b,this.bb.height=this.ta.o.Xa.y*b,this.bb.style.marginRight="-"+this.bb.width+"px",this.bb.style.marginBottom="-"+this.bb.height+"px",c=new Kb,c.ni(this.bb.getContext("2d")),c.ji(b),c.ki(),c.mi(),c.li(),this.ta.o.ga.Oa=c):this.bb=q}
function ac(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+cc;b.innerHTML=c;b.style.width=a.zb.x+"px";b.style.height=a.zb.y+"px";a.jd.appendChild(b);return b}function bc(a){if(a.style.display=="none")a.style.display="table-cell"}
function dc(a){if(a.style.display!="none")a.style.display="none"}function $b(a,c){a.ya.x=c.x;a.ya.y=c.y;if(a.ya.x<a.zc.x/2)a.ya.x=a.zc.x/2;else if(a.ya.x>a.ta.o.Xa.x-a.zc.x/2)a.ya.x=a.ta.o.Xa.x-a.zc.x/2;if(a.ya.y<a.zc.y/2)a.ya.y=a.zc.y/2;else if(a.ya.y>a.ta.o.Xa.y-a.zc.y/2)a.ya.y=a.ta.o.Xa.y-a.zc.y/2}
function ec(a,c){if(a.display==q)a.display={},a.display.J=new Vb,a.Mi=function(a){var c=this.body?this.body.e.position:this.position.ca();return this.display.Ff==0?c:new G(c.x+(a.x-c.x)*this.display.Ff,c.y+(a.y-c.y)*this.display.Ff)},a.Li=function(){return this.body?this.body.Sb():this.Ya},a.display.Ff=0,a.display.Yh=0;a.display.size=c.ca()}function H(a,c,b){a.display.If=new Ub(c,b)}var cc=100,Rb=0|Nb|Mb|Lb,fc=0;var gc=function(){var a=window.bk||window.ek||window.Wj||window.Zj||window.Xj||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function hc(){this.se=1;this.Ke=65535;this.nd=0}hc.prototype.ca=function(){var a=new hc;a.se=this.se;a.Ke=this.Ke;a.nd=this.nd;return a};function ic(){this.filter=new hc;this.filter.se=1;this.filter.Ke=65535;this.filter.nd=0;this.shape=q;this.ub=0.2;this.ue=this.yc=0;this.mf=r};function jc(){this.a=new G(0,0);this.b=new G(0,0);this.$e()}function kc(a){var c=new jc;c.j(a);return c}x=jc.prototype;x.j=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.j(c,a);this.b.j(-a,c)};x.ca=function(){var a=new jc;a.Bd(this);return a};x.Bd=function(a){this.a.m(a.a);this.b.m(a.b)};x.Nf=function(a){this.a.Ob(a.a);this.b.Ob(a.b)};x.$e=function(){this.a.j(1,0);this.b.j(0,1)};x.N=function(){this.a.j(0,0);this.b.j(0,0)};x.Sb=function(){return Math.atan2(this.a.y,this.a.x)};
x.oe=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function lc(a,c){return a.x*c.x+a.y*c.y}function mc(a,c){return a.x*c.y-a.y*c.x}function nc(a){return new G(1*a.y,-1*a.x)}function oc(a,c){return new G(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function pc(a,c){return new G(lc(c,a.a),lc(c,a.b))}function I(a,c){var b=oc(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function qc(a,c){var b=K(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function K(a,c){return new G(a.x-c.x,a.y-c.y)}
function L(a,c,b){return a<c?c:a>b?b:a};function M(a){if(!a)throw"Assertion Failed";}var rc=2/180*Math.PI,sc=8/180*Math.PI,tc=0.5*Math.PI,uc=tc*tc,vc=2/180*Math.PI,wc=Number.MIN_VALUE*Number.MIN_VALUE;function xc(){}xc.prototype.j=function(a){this.La.m(a.La);this.Ab.m(a.Ab);this.Ja.m(a.Ja);this.n=a.n;this.ra=a.ra;this.sa=a.sa};function yc(){this.R=new xc;this.ea=new xc;this.gb=new xc;this.r=[this.R,this.ea,this.gb]}function zc(a){return a.z==1?0:a.z==2?Db(K(a.R.Ja,a.ea.Ja)):a.z==3?mc(K(a.ea.Ja,a.R.Ja),K(a.gb.Ja,a.R.Ja)):(M(r),0)};function Ac(a,c,b){var d=new yc,e=b.wc,g=b.Jf,f=b.xc,h=b.Kf;M(0<=c.Fd&&c.Fd<=3);var i,j;d.z=c.Fd;for(var l=d.r,m=0;m<d.z;m++){var n=l[m];n.ra=c.ra[m];n.sa=c.sa[m];i=N(e,n.ra);j=N(f,n.sa);n.La=I(g,i);n.Ab=I(h,j);n.Ja=K(n.Ab,n.La);n.n=0}if(d.z>1&&(i=c.sj,j=zc(d),j<0.5*i||2*i<j||j<Number.MIN_VALUE))d.z=0;if(d.z==0)n=l[0],n.ra=0,n.sa=0,i=N(e,0),j=N(f,0),n.La=I(g,i),n.Ab=I(h,j),n.Ja=K(n.Ab,n.La),d.z=1;(d.z<1||d.z>3)&&M(r);for(e=0;e<20;){g=[];for(f=0;f<d.z;f++)g[f]={},g[f].ra=d.r[f].ra,g[f].sa=d.r[f].sa;
if(d.z==2)f=d,h=f.R.Ja,l=f.ea.Ja,i=K(l,h),h=-(h.x*i.x+h.y*i.y),h<=0?(f.R.n=1,f.z=1):(l=l.x*i.x+l.y*i.y,l<=0?(f.ea.n=1,f.z=1,f.R.j(f.ea)):(i=1/(l+h),f.R.n=l*i,f.ea.n=h*i,f.z=2));else if(d.z==3){var f=d,p=f.R.Ja,t=f.ea.Ja,s=f.gb.Ja,v=K(t,p),h=lc(t,v),l=-lc(p,v),w=K(s,p);i=lc(s,w);j=-lc(p,w);n=K(s,t);m=lc(s,n);n=-lc(t,n);w=mc(v,w);v=w*mc(t,s);s=w*mc(s,p);p=w*mc(p,t);l<=0&&j<=0?(f.R.n=1,f.z=1):h>0&&l>0&&p<=0?(i=1/(h+l),f.R.n=h*i,f.ea.n=l*i,f.z=2):i>0&&j>0&&s<=0?(h=1/(i+j),f.R.n=i*h,f.gb.n=j*h,f.z=2,f.ea.j(f.gb)):
h<=0&&n<=0?(f.ea.n=1,f.z=1,f.R.j(f.ea)):i<=0&&m<=0?(f.gb.n=1,f.z=1,f.R.j(f.gb)):m>0&&n>0&&v<=0?(h=1/(m+n),f.ea.n=m*h,f.gb.n=n*h,f.z=2,f.R.j(f.gb)):(h=1/(v+s+p),f.R.n=v*h,f.ea.n=s*h,f.gb.n=p*h,f.z=3)}if(d.z==3)break;d.z==1?f=d.R.Ja.Bb():d.z==2?(f=K(d.ea.Ja,d.R.Ja),f=mc(f,d.R.Ja.Bb())>0?new G(-1*f.y,1*f.x):nc(f)):(M(r),f=new G(0,0));if(Eb(f)<wc)break;d.r[d.z].ra=b.wc.Ze(pc(b.Jf.d,f.Bb()));d.r[d.z].La=I(b.Jf,N(b.wc,d.r[d.z].ra));d.r[d.z].sa=b.xc.Ze(pc(b.Kf.d,f));d.r[d.z].Ab=I(b.Kf,N(b.xc,d.r[d.z].sa));
d.r[d.z].Ja=K(d.r[d.z].Ab,d.r[d.z].La);e++;h=r;for(f=0;f<g.length;f++)if(d.r[d.z].ra==g[f].ra&&d.r[d.z].sa==g[f].sa){h=o;break}if(h)break;d.z++}e=a.uc;g=a.vc;d.z==1?(e.m(d.R.La),g.m(d.R.Ab)):d.z==2?(e.x=d.R.n*d.R.La.x+d.ea.n*d.ea.La.x,e.y=d.R.n*d.R.La.y+d.ea.n*d.ea.La.y,g.x=d.R.n*d.R.Ab.x+d.ea.n*d.ea.Ab.x,g.y=d.R.n*d.R.Ab.y+d.ea.n*d.ea.Ab.y):d.z==3?(g.x=e.x=d.R.n*d.R.La.x+d.ea.n*d.ea.La.x+d.gb.n*d.gb.La.x,g.y=e.y=d.R.n*d.R.La.y+d.ea.n*d.ea.La.y+d.gb.n*d.gb.La.y):M(r);a.kd=Db(K(a.uc,a.vc));c.sj=zc(d);
c.Fd=d.z;e=d.r;for(g=0;g<d.z;g++)c.ra[g]=e[g].ra,c.sa[g]=e[g].sa;if(b.Wh)c=b.wc.Q,b=b.xc.Q,a.kd>c+b&&a.kd>Number.MIN_VALUE?(a.kd-=c+b,d=K(a.vc,a.uc),Fb(d),a.uc.x+=c*d.x,a.uc.y+=c*d.y,a.vc.x-=b*d.x,a.vc.y-=b*d.y):(b=new G(0,0),b.x=0.5*(a.uc.x+a.vc.x),b.y=0.5*(a.uc.y+a.vc.y),a.uc.x=a.vc.x=b.x,a.uc.y=a.vc.y=b.y,a.kd=0)};function Bc(){};function Cc(){this.uc=new G(0,0);this.vc=new G(0,0);this.kd=0};function Dc(){this.ra=[0,0,0];this.sa=[0,0,0]};function Ec(){}Ec.prototype.j=function(a){a.Ug(this)};Ec.prototype.Ze=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.z;d++){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};Ec.prototype.ee=function(a){return this.r[this.Ze(a)]};Ec.prototype.Qg=ba("z");function N(a,c){c===k&&(c=0);M(0<=c&&c<a.z);return a.r[c]};function Fc(){this.Q=0.005}Fc.prototype.j=function(a){this.Q=a.Q};function Gc(){this.Xc=0;this.gd=new G(0,0);this.fe=0};function Hc(a,c){this.position=new G(0,0);this.d=new jc;a&&this.position.m(a);c&&this.d.Bd(c)}Hc.prototype.V=function(a,c){this.position.m(a);this.d.Bd(c)};Hc.prototype.$e=function(){this.position.N();this.d.$e()};Hc.prototype.j=function(a){this.position.m(a.position);this.d.Bd(a.d)};Hc.prototype.Sb=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function Q(){this.Q=0.005;this.wb=new G(0,0);this.r=[];this.la=[]}B(Q,Fc);x=Q.prototype;x.Rf=ca("b2PolygonShape");x.ca=function(){var a=new Q;a.j(this);return a};x.j=function(a){Fc.prototype.j.call(this,a);if(a instanceof Q){this.wb.m(a.wb);this.ba=a.ba;Ic(this,this.ba);for(var c=0;c<this.ba;c++)this.r[c].m(a.r[c]),this.la[c].m(a.la[c])}};function Jc(a,c){Kc(a,c)}
function Kc(a,c){var b=c.length;M(2<=b);a.ba=b;Ic(a,b);for(b=b=0;b<a.ba;b++)a.r[b].m(c[b]);for(b=0;b<a.ba;++b){var d=K(a.r[b+1<a.ba?b+1:0],a.r[b]);M(Eb(d)>Number.MIN_VALUE);a.la[b].m(nc(d));Fb(a.la[b])}for(var b=a.r,d=a.ba,e=new G(0,0),g=0,f=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],l=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));g+=l;e.x+=l*f*(0+i.x+j.x);e.y+=l*f*(0+i.y+j.y)}e.x*=1/g;e.y*=1/g;a.wb=e}
function Lc(a,c,b){a.ba=4;Ic(a,4);a.r[0].j(-c,-b);a.r[1].j(c,-b);a.r[2].j(c,b);a.r[3].j(-c,b);a.la[0].j(0,-1);a.la[1].j(1,0);a.la[2].j(0,1);a.la[3].j(-1,0);a.wb.N()}
x.Xe=function(a,c){for(var b=c.d,d=this.r[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),g=c.position.y+(b.a.y*d.x+b.b.y*d.y),f=e,h=g,i=1;i<this.ba;++i)var d=this.r[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,g=g<d?g:d,f=f>j?f:j,h=h>d?h:d;a.lowerBound.x=e-this.Q;a.lowerBound.y=g-this.Q;a.upperBound.x=f+this.Q;a.upperBound.y=h+this.Q};
x.Ng=function(a,c){if(this.ba==2)a.gd.x=0.5*(this.r[0].x+this.r[1].x),a.gd.y=0.5*(this.r[0].y+this.r[1].y),a.Xc=0,a.fe=0;else{for(var b=0,d=0,e=0,g=0,f=1/3,h=0;h<this.ba;++h){var i=this.r[h],j=h+1<this.ba?this.r[h+1]:this.r[0],l=i.x-0,m=i.y-0,n=j.x-0,p=j.y-0,t=l*p-m*n,s=0.5*t;e+=s;b+=s*f*(0+i.x+j.x);d+=s*f*(0+i.y+j.y);i=l;g+=t*(f*(0.25*(i*i+n*i+n*n)+(0*i+0*n))+0+(f*(0.25*(m*m+p*m+p*p)+(0*m+0*p))+0))}a.Xc=c*e;b*=1/e;d*=1/e;a.gd.j(b,d);a.fe=c*g}};x.Ug=function(a){a.r=this.r;a.z=this.ba;a.Q=this.Q};
x.Qg=ba("ba");x.Ze=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ba;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return c};x.ee=function(a){for(var c=0,b=this.r[0].x*a.x+this.r[0].y*a.y,d=1;d<this.ba;++d){var e=this.r[d].x*a.x+this.r[d].y*a.y;e>b&&(c=d,b=e)}return this.r[c]};function Ic(a,c){a.r=[];a.la=[];for(var b=a.r.length;b<c;b++)a.r[b]=new G(0,0),a.la[b]=new G(0,0)}new jc;function Mc(){}Mc.prototype.Vb=function(a,c){var b=a.Bh.ca(),d=c.Bh.ca();return b.nd==d.nd&&b.nd!=0?b.nd>0:(b.Ke&d.se)!=0&&(b.se&d.Ke)!=0};var Nc=new Mc;function Oc(){};function R(a){this.Va=new Oc;this.Wa=new Oc;this.Ge=new G(0,0);this.He=new G(0,0);M(a.T!=a.W);this.D=a.type;this.ka=this.kb=q;this.s=a.T;this.u=a.W;this.yh=a.bg}x=R.prototype;x.Qb=ca(q);x.Rb=ca(q);x.bd=function(){return this.s.bd()&&this.u.bd()};x.Tb=u();x.Eb=u();x.Pf=u();x.Db=ca(r);function Pc(a){R.call(this,a);this.ac=new G(0,0);this.bc=new G(0,0);this.A=new G(0,0);this.B=new G(0,0);this.X=new G(0,0);this.Y=new G(0,0);this.cb=this.s.Ia.tg;this.ac.x=a.jf.x-this.cb.e.position.x;this.ac.y=a.jf.y-this.cb.e.position.y;this.bc.x=a.kf.x-this.cb.e.position.x;this.bc.y=a.kf.y-this.cb.e.position.y;this.A.m(a.Ta);this.B.m(a.Ua);this.ma=a.Yc;this.Nd=a.ig+this.ma*a.jg;this.Gh=Math.min(a.Kh,this.Nd-this.ma*Qc);this.Hh=Math.min(a.Lh,(this.Nd-Qc)/this.ma);this.rc=this.qc=this.i=0}B(Pc,R);
x=Pc.prototype;x.Qb=function(){return S(this.s,this.A)};x.Rb=function(){return S(this.u,this.B)};function Rc(a){var c=a.cb.e.position.ca();c.Ob(a.ac);return c}function Sc(a){var c=a.cb.e.position.ca();c.Ob(a.bc);return c}
x.Tb=function(a){var c=this.s,b=this.u,d;d=c.e.d;var e=this.A.x-c.c.p.x,g=this.A.y-c.c.p.y,f=d.a.x*e+d.b.x*g,g=d.a.y*e+d.b.y*g,e=f;d=b.e.d;var h=this.B.x-b.c.p.x,i=this.B.y-b.c.p.y,f=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=f;d=b.c.g.x+h;var f=b.c.g.y+i,j=this.cb.e.position.x+this.bc.x,l=this.cb.e.position.y+this.bc.y;this.X.j(c.c.g.x+e-(this.cb.e.position.x+this.ac.x),c.c.g.y+g-(this.cb.e.position.y+this.ac.y));this.Y.j(d-j,f-l);d=Db(this.X);f=Db(this.Y);d>0.005?this.X.hc(1/d):this.X.N();f>0.005?this.Y.hc(1/
f):this.Y.N();this.Nd-d-this.ma*f>0?this.i=this.yg=0:this.yg=2;d<this.Gh?this.qc=this.ug=0:this.ug=2;f<this.Hh?this.rc=this.vg=0:this.vg=2;d=e*this.X.y-g*this.X.x;f=h*this.Y.y-i*this.Y.x;this.Ee=c.l+c.v*d*d;this.Fe=b.l+b.v*f*f;this.yf=this.Ee+this.ma*this.ma*this.Fe;this.Ee=1/this.Ee;this.Fe=1/this.Fe;this.yf=1/this.yf;a.xd?(this.i*=a.ab,this.qc*=a.ab,this.rc*=a.ab,a=(-this.i-this.qc)*this.X.x,d=(-this.i-this.qc)*this.X.y,f=(-this.ma*this.i-this.rc)*this.Y.x,j=(-this.ma*this.i-this.rc)*this.Y.y,c.h.x+=
c.l*a,c.h.y+=c.l*d,c.t+=c.v*(e*d-g*a),b.h.x+=b.l*f,b.h.y+=b.l*j,b.t+=b.v*(h*j-i*f)):this.rc=this.qc=this.i=0};
x.Eb=function(){var a=this.s,c=this.u,b;b=a.e.d;var d=this.A.x-a.c.p.x,e=this.A.y-a.c.p.y,g=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=g;b=c.e.d;var f=this.B.x-c.c.p.x,h=this.B.y-c.c.p.y,g=b.a.x*f+b.b.x*h,h=b.a.y*f+b.b.y*h,f=g,i=g=b=0,j=0;b=j=b=j=i=g=b=0;if(this.yg==2)b=a.h.x+-a.t*e,g=a.h.y+a.t*d,i=c.h.x+-c.t*h,j=c.h.y+c.t*f,b=-(this.X.x*b+this.X.y*g)-this.ma*(this.Y.x*i+this.Y.y*j),j=this.yf*-b,b=this.i,this.i=Math.max(0,this.i+j),j=this.i-b,b=-j*this.X.x,g=-j*this.X.y,i=-this.ma*j*this.Y.x,j=-this.ma*
j*this.Y.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.t+=a.v*(d*g-e*b),c.h.x+=c.l*i,c.h.y+=c.l*j,c.t+=c.v*(f*j-h*i);if(this.ug==2)b=a.h.x+-a.t*e,g=a.h.y+a.t*d,b=-(this.X.x*b+this.X.y*g),j=-this.Ee*b,b=this.qc,this.qc=Math.max(0,this.qc+j),j=this.qc-b,b=-j*this.X.x,g=-j*this.X.y,a.h.x+=a.l*b,a.h.y+=a.l*g,a.t+=a.v*(d*g-e*b);if(this.vg==2)i=c.h.x+-c.t*h,j=c.h.y+c.t*f,b=-(this.Y.x*i+this.Y.y*j),j=-this.Fe*b,b=this.rc,this.rc=Math.max(0,this.rc+j),j=this.rc-b,i=-j*this.Y.x,j=-j*this.Y.y,c.h.x+=c.l*i,c.h.y+=c.l*j,c.t+=
c.v*(f*j-h*i)};
x.Db=function(){var a=this.s,c=this.u,b,d=this.cb.e.position.x+this.ac.x,e=this.cb.e.position.y+this.ac.y,g=this.cb.e.position.x+this.bc.x,f=this.cb.e.position.y+this.bc.y,h=0,i=0,j=0,l=0,m=b=0,n=0,p=0,t=m=p=b=m=b=0;if(this.yg==2)b=a.e.d,h=this.A.x-a.c.p.x,i=this.A.y-a.c.p.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=c.e.d,j=this.B.x-c.c.p.x,l=this.B.y-c.c.p.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,b=a.c.g.x+h,m=a.c.g.y+i,n=c.c.g.x+j,p=c.c.g.y+l,this.X.j(b-d,m-e),this.Y.j(n-g,p-f),b=Db(this.X),m=
Db(this.Y),b>0.005?this.X.hc(1/b):this.X.N(),m>0.005?this.Y.hc(1/m):this.Y.N(),b=this.Nd-b-this.ma*m,t=Math.max(t,-b),b=L(b+0.005,-0.2,0),p=-this.yf*b,b=-p*this.X.x,m=-p*this.X.y,n=-this.ma*p*this.Y.x,p=-this.ma*p*this.Y.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.v*(h*m-i*b),c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=c.v*(j*p-l*n),T(a),T(c);if(this.ug==2)b=a.e.d,h=this.A.x-a.c.p.x,i=this.A.y-a.c.p.y,m=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=m,b=a.c.g.x+h,m=a.c.g.y+i,this.X.j(b-d,m-e),b=Db(this.X),b>0.005?(this.X.x*=
1/b,this.X.y*=1/b):this.X.N(),b=this.Gh-b,t=Math.max(t,-b),b=L(b+0.005,-0.2,0),p=-this.Ee*b,b=-p*this.X.x,m=-p*this.X.y,a.c.g.x+=a.l*b,a.c.g.y+=a.l*m,a.c.n+=a.v*(h*m-i*b),T(a);if(this.vg==2)b=c.e.d,j=this.B.x-c.c.p.x,l=this.B.y-c.c.p.y,m=b.a.x*j+b.b.x*l,l=b.a.y*j+b.b.y*l,j=m,n=c.c.g.x+j,p=c.c.g.y+l,this.Y.j(n-g,p-f),m=Db(this.Y),m>0.005?(this.Y.x*=1/m,this.Y.y*=1/m):this.Y.N(),b=this.Hh-m,t=Math.max(t,-b),b=L(b+0.005,-0.2,0),p=-this.Fe*b,n=-p*this.Y.x,p=-p*this.Y.y,c.c.g.x+=c.l*n,c.c.g.y+=c.l*p,c.c.n+=
c.v*(j*p-l*n),T(c);return t<0.005};var Qc=1;function Tc(){this.$j=q;this.ak=0};function Uc(){this.Yf=this.Xf=this.Zf=0}function Vc(a,c){a.Zf=c;a.Gc.Sa=a.Gc.Sa&4294967040|a.Zf&255}function Wc(a,c){a.Xf=c;a.Gc.Sa=a.Gc.Sa&4294902015|a.Xf<<8&65280}function Xc(a,c){a.Yf=c;a.Gc.Sa=a.Gc.Sa&4278255615|a.Yf<<16&16711680};function Yc(){this.sb=new Uc;this.sb.Gc=this;this.Sa=0}function Zc(a,c){a.Sa=c;a.sb.Zf=a.Sa&255;a.sb.Xf=(a.Sa&65280)>>8&255;a.sb.Yf=(a.Sa&16711680)>>16&255;a.sb.$g=(a.Sa&4278190080)>>24&255}Yc.prototype.j=function(a){Zc(this,a.Sa)};Yc.prototype.ca=function(){var a=new Yc;a.j(this);return a};function $c(){this.nb=new G(0,0);this.id=new Yc}$c.prototype.j=function(a){this.nb.m(a.nb);this.id.j(a.id)};function ad(){this.I=new G(0,0);this.pc=new Yc;this.constructor===ad&&this.Uf()}ad.prototype.Uf=function(){this.I.N();this.ud=this.rd=0;Zc(this.pc,0)};ad.prototype.j=function(a){this.I.m(a.I);this.rd=a.rd;this.ud=a.ud;this.pc.j(a.pc)};function bd(){this.oa=0;this.G=[];for(var a=0;a<2;a++)this.G[a]=new ad;this.Ha=new G(0,0);this.I=new G(0,0)}bd.prototype.Uf=function(){for(var a=0;a<2;a++)this.G[a].Uf();this.Ha.N();this.I.N();this.oa=this.D=0};bd.prototype.j=function(a){this.oa=a.oa;for(var c=0;c<2;c++)this.G[c].j(a.G[c]);this.Ha.m(a.Ha);this.I.m(a.I);this.D=a.D};bd.prototype.ca=function(){var a=new bd;a.j(this);return a};function cd(a,c,b,d){var e=0,g=c[0].nb,f=c[1].nb,h=b.x*g.x+b.y*g.y-d,b=b.x*f.x+b.y*f.y-d;h<=0&&a[e++].j(c[0]);b<=0&&a[e++].j(c[1]);if(h*b<0)b=h/(h-b),d=a[e].nb,d.x=g.x+b*(f.x-g.x),d.y=g.y+b*(f.y-g.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function dd(a,c,b,d,e){b===k&&(b=0);for(var g=a.r,f=a.la,a=d.r,h=c.d.a.x*f[b].x+c.d.b.x*f[b].y,f=c.d.a.y*f[b].x+c.d.b.y*f[b].y,i=e.d.a.x*h+e.d.a.y*f,j=e.d.b.x*h+e.d.b.y*f,l=0,m=Number.MAX_VALUE,n=0;n<d.ba;++n){var p=a[n].x*i+a[n].y*j;p<m&&(m=p,l=n)}return(e.position.x+(e.d.a.x*a[l].x+e.d.b.x*a[l].y)-(c.position.x+(c.d.a.x*g[b].x+c.d.b.x*g[b].y)))*h+(e.position.y+(e.d.a.y*a[l].x+e.d.b.y*a[l].y)-(c.position.y+(c.d.a.y*g[b].x+c.d.b.y*g[b].y)))*f}
function ed(a,c,b,d,e){var g=c.la,f=e.position.x+(e.d.a.x*d.wb.x+e.d.b.x*d.wb.y),h=e.position.y+(e.d.a.y*d.wb.x+e.d.b.y*d.wb.y);f-=b.position.x+(b.d.a.x*c.wb.x+b.d.b.x*c.wb.y);h-=b.position.y+(b.d.a.y*c.wb.x+b.d.b.y*c.wb.y);for(var i=f*b.d.a.x+h*b.d.a.y,h=f*b.d.b.x+h*b.d.b.y,f=0,j=-Number.MAX_VALUE,l=0;l<c.ba;++l){var m=g[l].x*i+g[l].y*h;m>j&&(j=m,f=l)}g=dd(c,b,f,d,e);i=f-1;i<0&&(i=c.ba-1);h=dd(c,b,i,d,e);j=f+1;j>=c.ba&&(j=0);var l=dd(c,b,j,d,e),n=m=0,p=0;if(h>g&&h>l)p=-1,m=i,n=h;else if(l>g)p=1,
m=j,n=l;else return a[0]=f,g;for(;;)if(p==-1?(f=m-1,f<0&&(f=c.ba-1)):(f=m+1,f>=c.ba&&(f=0)),g=dd(c,b,f,d,e),g>n)m=f,n=g;else break;a[0]=m;return n}var fd=[new $c,new $c],gd=[new $c,new $c],hd=[new $c,new $c],id=[0],jd=[0],kd=new G(0,0),ld=new G(0,0),md=new G(0,0),nd=new G(0,0),od=new G(0,0),pd=new G(0,0),qd=new G(0,0),rd=new G(0,0);function sd(){this.I=new G(0,0);this.C=new G(0,0)}
sd.prototype.V=function(a,c,b,d,e){this.Vc=c;this.Wc=d;var g=a.Fd;M(0<g&&g<3);var f,h,i=h=f=0,j=0,d=c=0,l,m,i=0;g==1?(this.D=td,g=N(this.Vc,a.ra[0]),a=N(this.Wc,a.sa[0]),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),this.C.x=i-f,this.C.y=j-h,Fb(this.C)):(a.sa[0]==a.sa[1]?(this.D=ud,c=N(this.Vc,a.ra[0]),d=N(this.Vc,a.ra[1]),a=N(this.Wc,a.sa[0]),this.I.x=0.5*(c.x+d.x),this.I.y=0.5*
(c.y+d.y),this.C=nc(K(d,c)),Fb(this.C),m=this.C,l=b.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*m.x+l.b.y*m.y,m=this.I,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),m=a,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),i=(i-f)*c+(j-h)*d):a.ra[0]==a.ra[0]?(this.D=vd,f=N(this.Wc,a.sa[0]),h=N(this.Wc,a.sa[1]),g=N(this.Vc,a.ra[0]),this.I.x=0.5*(f.x+h.x),this.I.y=0.5*(f.y+h.y),this.C=nc(K(h,f)),Fb(this.C),m=this.C,l=e.d,c=l.a.x*m.x+l.b.x*m.y,d=l.a.y*
m.x+l.b.y*m.y,m=this.I,l=e.d,i=e.position.x+(l.a.x*m.x+l.b.x*m.y),j=e.position.y+(l.a.y*m.x+l.b.y*m.y),m=g,l=b.d,f=b.position.x+(l.a.x*m.x+l.b.x*m.y),h=b.position.y+(l.a.y*m.x+l.b.y*m.y),i=(f-i)*c+(h-j)*d):(c=N(this.Vc,a.ra[0]),d=N(this.Vc,a.ra[1]),f=N(this.Wc,a.sa[0]),h=N(this.Wc,a.sa[1]),i=oc(b.d,K(d,c)),j=oc(e.d,K(h,f)),e=i.x*i.x+i.y*i.y,b=j.x*j.x+j.y*j.y,g=K(j,i),a=i.x*g.x+i.y*g.y,g=j.x*g.x+j.y*g.y,j=i.x*j.x+i.y*j.y,l=e*b-j*j,i=0,l!=0&&(i=L((j*g-a*b)/l,0,1)),(j*i+g)/b<0&&(i=L((j-a)/e,0,1)),g=
new G(0,0),g.x=c.x+i*(d.x-c.x),g.y=c.y+i*(d.y-c.y),a=new G(0,0),a.x=f.x+i*(h.x-f.x),a.y=f.y+i*(h.y-f.y),i==0||i==1?(this.D=vd,this.C=nc(K(h,f)),Fb(this.C),this.I=a):(this.D=ud,this.C=nc(K(d,c)),this.I=g)),i<0&&this.C.Sg())};
sd.prototype.Pb=function(a,c){var b,d,e=0;switch(this.D){case td:b=pc(a.d,this.C);d=pc(c.d,this.C.Bb());b=this.Vc.ee(b);d=this.Wc.ee(d);b=I(a,b);d=I(c,d);e=(d.x-b.x)*this.C.x+(d.y-b.y)*this.C.y;break;case ud:e=oc(a.d,this.C);b=I(a,this.I);d=pc(c.d,e.Bb());d=this.Wc.ee(d);d=I(c,d);e=(d.x-b.x)*e.x+(d.y-b.y)*e.y;break;case vd:e=oc(c.d,this.C);d=I(c,this.I);b=pc(a.d,e.Bb());b=this.Vc.ee(b);b=I(a,b);e=(b.x-d.x)*e.x+(b.y-d.y)*e.y;break;default:M(r)}return e};var td=1,ud=2,vd=4;var wd=0,xd=0,yd=0,zd=0,Ad=0,Bd=new Dc,Cd=new Bc,Dd=new Hc,Ed=new Hc,Fd=new sd,Gd=new Cc;function Hd(){this.p=new G(0,0);this.Ea=new G(0,0);this.g=new G(0,0)}Hd.prototype.j=function(a){this.p.m(a.p);this.Ea.m(a.Ea);this.g.m(a.g);this.qb=a.qb;this.n=a.n;this.Ca=a.Ca};Hd.prototype.ca=function(){var a=new Hd;a.p.m(this.p);a.Ea.m(this.Ea);a.g.m(this.g);a.qb=this.qb;a.n=this.n;a.Ca=this.Ca;return a};
Hd.prototype.hb=function(a,c){c===k&&(c=0);a.position.x=(1-c)*this.Ea.x+c*this.g.x;a.position.y=(1-c)*this.Ea.y+c*this.g.y;a.d.j((1-c)*this.qb+c*this.n);var b=a.d;a.position.x-=b.a.x*this.p.x+b.b.x*this.p.y;a.position.y-=b.a.y*this.p.x+b.b.y*this.p.y};Hd.prototype.Bc=function(a){a===k&&(a=0);if(this.Ca<a&&1-this.Ca>Number.MIN_VALUE){var c=(a-this.Ca)/(1-this.Ca);this.Ea.x=(1-c)*this.Ea.x+c*this.g.x;this.Ea.y=(1-c)*this.Ea.y+c*this.g.y;this.qb=(1-c)*this.qb+c*this.n;this.Ca=a}};function Id(){};function Jd(){this.position=new G(0,0);this.Wi=new G(0,0);this.qi=this.Vi=this.ri=this.Ya=0;this.si=this.pi=o;this.wi=this.Jc=r;this.type=0;this.oi=o;this.Oi=1};function Kd(a,c){this.eb=new Id;this.fb=new Id;this.jb=new bd;this.Ie=new bd;this.wd=r;var b=a.F(),d=c.F();this.hh=b.D!=2||b.qf||d.D!=2||d.qf;this.Jg=a.gc()||c.gc();this.gf=r;this.kb=this.ka=q;this.U=a;this.Z=c;this.enabled=o}function Ld(a,c){var b=a.Z.F(),d=a.U.pa,e=a.Z.pa;c.V(a.jb,a.U.F().hb(),d.Q,b.hb(),e.Q)}Kd.prototype.gc=ba("Jg");
function Md(a,c){var b=a.Ie;a.Ie=a.jb;a.jb=b;a.enabled=o;var d=r,b=a.wd,e=a.U.F(),g=a.Z.F(),f=a.U.Mc.Dd(a.Z.Mc);if(a.Jg){if(f){var d=a.U.pa,e=e.hb(),f=a.Z.pa,h=g.hb(),g=new Bc;g.wc=new Ec;g.wc.j(d);g.xc=new Ec;g.xc.j(f);g.Jf=e;g.Kf=h;g.Wh=o;e=new Dc;e.Fd=0;d=new Cc;Ac(d,e,g);d=d.kd<10*Number.MIN_VALUE}a.jb.oa=0}else{a.hh=e.D!=2||e.qf||g.D!=2||g.qf?o:r;if(f){a.Pb();d=a.jb.oa>0;for(f=0;f<a.jb.oa;f++){h=a.jb.G[f];h.rd=0;for(var i=h.ud=0;i<a.Ie.oa;i++){var j=a.Ie.G[i];if(j.pc.Sa==h.pc.Sa){h.rd=j.rd;h.ud=
j.ud;break}}}}else a.jb.oa=0;d!=b&&(Nd(e,o),Nd(g,o))}a.wd=d;!b&&d&&c.be(a);b&&!d&&c.yd(a);a.Jg||c.le(a,a.Ie)}Kd.prototype.Pb=u();var Od=new function(){this.wc=new Ec;this.xc=new Ec;this.Sh=new Hd;this.Th=new Hd};function Pd(a,c){Kd.call(this,a,c)}B(Pd,Kd);Pd.prototype.Pb=function(){var a=this.jb,c=this.U.pa,b=this.U.F().e,d=this.Z.pa,e=this.Z.F().e;a.oa=0;var g=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-(b.position.x+(b.d.a.x*c.aa.x+b.d.b.x*c.aa.y)),b=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-(b.position.y+(b.d.a.y*c.aa.x+b.d.b.y*c.aa.y)),e=c.Q+d.Q;if(!(g*g+b*b>e*e))a.D=1,a.I.m(c.aa),a.Ha.N(),a.oa=1,a.G[0].I.m(d.aa),Zc(a.G[0].pc,0)};function Qd(a,c){Kd.call(this,a,c)}B(Qd,Kd);Qd.prototype.Pb=u();function Rd(a){this.Q=0.005;this.Q=a;this.Ih=a*a;this.aa=new G(0,0)}B(Rd,Fc);x=Rd.prototype;x.Rf=ca("b2CircleShape");x.ca=function(){var a=new Rd(this.Q);a.j(this);return a};x.j=function(a){Fc.prototype.j.call(this,a);a instanceof Rd&&this.aa.m(a.aa)};x.Xe=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.aa.x+b.b.x*this.aa.y),b=c.position.y+(b.a.y*this.aa.x+b.b.y*this.aa.y);a.lowerBound.j(d-this.Q,b-this.Q);a.upperBound.j(d+this.Q,b+this.Q)};
x.Ng=function(a,c){a.Xc=c*Math.PI*this.Ih;a.gd.m(this.aa);a.fe=a.Xc*(0.5*this.Ih+(this.aa.x*this.aa.x+this.aa.y*this.aa.y))};x.Ug=function(a){a.r=[this.aa];a.z=1;a.Q=this.Q};function Sd(a,c){M(a.pa instanceof Q);M(c.pa instanceof Rd);Kd.call(this,a,c)}B(Sd,Kd);
Sd.prototype.Pb=function(){a:{var a=this.jb,c=this.U.pa,b=this.U.F().e,d=this.Z.pa,e=this.Z.F().e;a.oa=0;for(var g=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-b.position.x,f=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-b.position.y,e=g*b.d.a.x+f*b.d.a.y,b=g*b.d.b.x+f*b.d.b.y,g=0,f=-Number.MAX_VALUE,h=c.Q+d.Q,i=0;i<c.ba;++i){var j=c.la[i].x*(e-c.r[i].x)+c.la[i].y*(b-c.r[i].y);if(j>h)break a;j>f&&(f=j,g=i)}j=g+1;j>=c.ba&&(j=0);var i=c.r[g],l=c.r[j];if(f<Number.MIN_VALUE)a.oa=1,a.D=2,a.Ha.m(c.la[g]),
a.I.x=0.5*(i.x+l.x),a.I.y=0.5*(i.y+l.y);else if((e-i.x)*(l.x-i.x)+(b-i.y)*(l.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.oa=1;a.D=2;a.Ha.x=e-i.x;a.Ha.y=b-i.y;Fb(a.Ha);a.I.m(i)}else if((e-l.x)*(i.x-l.x)+(b-l.y)*(i.y-l.y)<=0){if((e-l.x)*(e-l.x)+(b-l.y)*(b-l.y)>h*h)break a;a.oa=1;a.D=2;a.Ha.x=e-l.x;a.Ha.y=b-l.y;Fb(a.Ha);a.I.m(l)}else{j=0.5*(i.x+l.x);i=0.5*(i.y+l.y);f=(e-j)*c.la[g].x+(b-i)*c.la[g].y;if(f>h)break a;a.oa=1;a.D=2;a.Ha.x=c.la[g].x;a.Ha.y=c.la[g].y;Fb(a.Ha);a.I.j(j,i)}a.G[0].I.m(d.aa);
Zc(a.G[0].pc,0)}};function Td(a,c){M(a.pa instanceof Q);M(r);Kd.call(this,a,c)}B(Td,Kd);Td.prototype.Pb=u();function Ud(a,c){Kd.call(this,a,c)}B(Ud,Kd);
Ud.prototype.Pb=function(){var a=this.jb,c=this.U.pa,b=this.U.F().e,d=this.Z.pa,e=this.Z.F().e;a.oa=0;var g=c.Q+d.Q;id[0]=0;var f=ed(id,c,b,d,e);if(!(f>g)){jd[0]=0;var h=ed(jd,d,e,c,b);if(!(h>g)){var i=c,j=d,l=b,m=e,n=id[0],p=0;a.D=2;if(h>0.98*f+0.001)i=d,j=c,l=e,m=b,n=jd[0],a.D=4,p=1;c=n;b=m;c===k&&(c=0);for(var d=l.d.a.x*i.la[c].x+l.d.b.x*i.la[c].y,e=l.d.a.y*i.la[c].x+l.d.b.y*i.la[c].y,f=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=f,f=0,h=Number.MAX_VALUE,t=0;t<j.ba;t++){var s=d*j.la[t].x+e*j.la[t].y;
s<h&&(h=s,f=t)}d=f+1;d>=j.ba&&(d=0);fd[0].nb.x=b.position.x+(b.d.a.x*j.r[f].x+b.d.b.x*j.r[f].y);fd[0].nb.y=b.position.y+(b.d.a.y*j.r[f].x+b.d.b.y*j.r[f].y);Vc(fd[0].id.sb,c);Wc(fd[0].id.sb,f);Xc(fd[0].id.sb,0);fd[1].nb.x=b.position.x+(b.d.a.x*j.r[d].x+b.d.b.x*j.r[d].y);fd[1].nb.y=b.position.y+(b.d.a.y*j.r[d].x+b.d.b.y*j.r[d].y);Vc(fd[1].id.sb,c);Wc(fd[1].id.sb,d);Xc(fd[1].id.sb,1);c=i.r[n];i=n+1<i.ba?i.r[n+1]:i.r[0];kd.j(i.x-c.x,i.y-c.y);Fb(kd);ld.x=kd.y;ld.y=-kd.x;md.j(0.5*(c.x+i.x),0.5*(c.y+i.y));
od.x=l.d.a.x*kd.x+l.d.b.x*kd.y;od.y=l.d.a.y*kd.x+l.d.b.y*kd.y;pd.x=-od.x;pd.y=-od.y;nd.x=od.y;nd.y=-od.x;qd.x=l.position.x+(l.d.a.x*c.x+l.d.b.x*c.y);qd.y=l.position.y+(l.d.a.y*c.x+l.d.b.y*c.y);rd.x=l.position.x+(l.d.a.x*i.x+l.d.b.x*i.y);rd.y=l.position.y+(l.d.a.y*i.x+l.d.b.y*i.y);if(!(cd(gd,fd,pd,-od.x*qd.x-od.y*qd.y+g)<2)&&!(cd(hd,gd,od,od.x*rd.x+od.y*rd.y+g)<2)){a.Ha.m(ld);a.I.m(md);l=nd.x*qd.x+nd.y*qd.y;for(n=i=0;n<2;++n)if(nd.x*hd[n].nb.x+nd.y*hd[n].nb.y-l<=g)c=hd[n].nb.x-m.position.x,j=hd[n].nb.y-
m.position.y,a.G[i].I.x=c*m.d.a.x+j*m.d.a.y,a.G[i].I.y=c*m.d.b.x+j*m.d.b.y,a.G[i].pc.j(hd[n].id),c=a.G[i].pc.sb,c.$g=p,c.Gc.Sa=c.Gc.Sa&16777215|c.$g<<24&4278190080,i++;a.oa=i}}}};function Vd(){this.Nb=[];Wd(this,Pd,"b2CircleShape","b2CircleShape");Wd(this,Sd,"b2PolygonShape","b2CircleShape");Wd(this,Ud,"b2PolygonShape","b2PolygonShape");Wd(this,Qd,"b2EdgeShape","b2CircleShape");Wd(this,Td,"b2PolygonShape","b2EdgeShape")}function Wd(a,c,b,d){a.Nb[b]=a.Nb[b]||[];a.Nb[b][d]=new Tc;a.Nb[b][d].mh=c;a.Nb[b][d].Ph=o;if(b!=d)a.Nb[d]=a.Nb[d]||[],a.Nb[d][b]=new Tc,a.Nb[d][b].mh=c,a.Nb[d][b].Ph=r}
Vd.prototype.Cc=function(a,c){var b=this.Nb[a.pa.Rf()][c.pa.Rf()],d=b.mh;return d!=q?b.Ph?new d(a,c):new d(c,a):q};Vd.prototype.fc=function(a){a.jb.oa>0&&(Nd(a.U.F(),o),Nd(a.Z.F(),o))};function Xd(a,c){this.ve=a;this.we=c};function Yd(a){this.J=new Vb;this.parent=this.ic=this.Za=q;if(typeof a!="undefined")this.tb=a};function Zd(){this.dc=q;this.gj=this.Vj=0}x=Zd.prototype;x.ce=function(a,c){var b=new Yd(c);b.J.lowerBound.x=a.lowerBound.x-0.1;b.J.lowerBound.y=a.lowerBound.y-0.1;b.J.upperBound.x=a.upperBound.x+0.1;b.J.upperBound.y=a.upperBound.y+0.1;$d(this,b);return b};x.de=function(a){ae(this,a)};
x.Sf=function(a,c,b){M(a.Za===q);if(Xb(a.J,c))return r;ae(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.J.lowerBound.x=c.lowerBound.x-d;a.J.lowerBound.y=c.lowerBound.y-b;a.J.upperBound.x=c.upperBound.x+d;a.J.upperBound.y=c.upperBound.y+b;$d(this,a);return o};x.zd=function(a){return a.J};x.Tf=function(a,c){if(this.dc!==q){var b=[];for(b.push(this.dc);b.length>0;){var d=b.pop();if(d.J.Dd(c))if(d.Za===q){if(!a(d.tb))break}else b.push(d.Za),b.push(d.ic)}}};
function $d(a,c){a.gj++;if(a.dc===q)a.dc=c,a.dc.parent=q;else{var b;b=Wb(c.J);for(var d=a.dc;d.Za!==q;)var e=d.Za,d=d.ic,d=Math.abs((e.J.lowerBound.x+e.J.upperBound.x)/2-b.x)+Math.abs((e.J.lowerBound.y+e.J.upperBound.y)/2-b.y)<Math.abs((d.J.lowerBound.x+d.J.upperBound.x)/2-b.x)+Math.abs((d.J.lowerBound.y+d.J.upperBound.y)/2-b.y)?e:d;b=d;e=b.parent;d=new Yd;d.parent=e;Yb(d.J,c.J,b.J);if(e){b.parent.Za==b?e.Za=d:e.ic=d;d.Za=b;d.ic=c;b.parent=d;for(c.parent=d;e;){if(Xb(e.J,d.J))break;Yb(e.J,e.Za.J,e.ic.J);
d=e;e=e.parent}}else d.Za=b,d.ic=c,b.parent=d,c.parent=d,a.dc=d}}function ae(a,c){if(c==a.dc)a.dc=q;else{var b=c.parent,d=b.parent,e;e=b.Za==c?b.ic:b.Za;if(d){d.Za==b?d.Za=e:d.ic=e;for(e.parent=d;d;){b=d.J;e=d;var g=new Vb;Yb(g,d.Za.J,d.ic.J);e.J=g;if(Xb(b,d.J))break;d=d.parent}}else a.dc=e,e.parent=q}};function be(){this.sc=new Zd;this.Rd=[]}x=be.prototype;x.ce=function(a,c){var b=this.sc.ce(a,c);this.Rd.push(b);return b};x.de=function(a){Ka(this.Rd,a);this.sc.de(a)};x.Sf=function(a,c,b){this.sc.Sf(a,c,b)&&this.Rd.push(a)};x.Dd=function(a,c){return this.sc.zd(a).Dd(this.sc.zd(c))};x.zd=function(a){return this.sc.zd(a)};
function ce(a,c){for(var b=[],d=0;d<a.Rd.length;d++){var e=a.Rd[d];a.sc.Tf(function(a){a!=e.tb&&b.push(new Xd(e.tb,a));return o},a.sc.zd(e))}a.Rd=[];for(d=0;d<b.length;){var g=b[d];c(g.ve,g.we);for(d++;d<b.length;){var f=b[d];if(!(f.ve==g.ve&&f.we==g.we)&&!(f.ve==g.we&&f.we==g.ve))break;d++}}}x.Tf=function(a,c){this.sc.Tf(a,c)};function de(){}de.prototype.be=u();de.prototype.yd=u();de.prototype.le=u();de.prototype.je=u();var ee=new de;function fe(a){this.Ia=a;this.Ce=0;this.pg=Nc;this.Od=ee;this.zh=new Vd;this.od=new be}
function ge(a){ce(a.od,function(c,b){a:{var d=c,e=b,g=d.F(),f=e.F();if(g!=f&&f.Vb(g)&&a.pg.Vb(d,e)){for(f=f.P;f;){if(f.fa==g){var h=f.za.U,i=f.za.Z;if(h==d&&i==e)break a;if(h==e&&i==d)break a}f=f.next}h=a.zh.Cc(d,e);d=h.U;e=h.Z;g=d.F();f=e.F();h.kb=q;h.ka=a.Ia.P;if(a.Ia.P!=q)a.Ia.P.kb=h;a.Ia.P=h;h.eb.za=h;h.eb.fa=f;h.eb.na=q;h.eb.next=g.P;if(g.P!=q)g.P.na=h.eb;g.P=h.eb;h.fb.za=h;h.fb.fa=g;h.fb.na=q;h.fb.next=f.P;if(f.P!=q)f.P.na=h.fb;f.P=h.fb;a.Ce++}}})}
fe.prototype.fc=function(a){var c=a.U.F(),b=a.Z.F();a.wd&&this.Od.yd(a);if(a.kb)a.kb.ka=a.ka;if(a.ka)a.ka.kb=a.kb;if(a==this.Ia.P)this.Ia.P=a.ka;if(a.eb.na)a.eb.na.next=a.eb.next;if(a.eb.next)a.eb.next.na=a.eb.na;if(a.eb==c.P)c.P=a.eb.next;if(a.fb.na)a.fb.na.next=a.fb.next;if(a.fb.next)a.fb.next.na=a.fb.na;if(a.fb==b.P)b.P=a.fb.next;this.zh.fc(a);this.Ce--};new function(){this.position=new G(0,0);this.dk=new G(0,0);this.tc=new G(0,0);this.id=new Yc};function he(){this.Id=[]}he.prototype.xe=0;he.prototype.Qe=0;he.prototype.clear=function(){this.Qe=this.xe=this.Id.length=0};function ie(a){this.body=a;this.Ne=this.next=q}ie.prototype.me=aa("next");ie.prototype.ne=aa("Ne");ie.prototype.F=ba("body");function je(){this.bf=[];for(var a=0;a<=ke;a++)this.bf[a]=q;this.cf=[];for(a=0;a<=ke;a++)this.cf[a]=q;this.Ed={};this.$f=0}je.prototype.Da=function(a){return this.bf[a]};je.prototype.Ve=function(a){var c=a.Ad;this.Ed[c]==q&&(le(this,a,c,ke),me(this,a),a.vf.push(this),this.$f++)};function me(a,c){var b=c.D,d=c.Ad,e=c.Kb,g=c.bd();b==2?le(a,c,d,ne):oe(a,d,ne);b!=0?le(a,c,d,pe):oe(a,d,pe);b!=0&&g&&e?le(a,c,d,qe):oe(a,d,qe);e?le(a,c,d,re):oe(a,d,re);g?le(a,c,d,se):oe(a,d,se)}
function te(a,c){var b=c.Ad;if(a.Ed[b]!=q){Ka(c.vf,a);for(var d=0;d<=ke;d++)oe(a,b,d);delete a.Ed[b];a.$f--}}function oe(a,c,b){var d=a.Ed[c];if(d!=q&&(c=d[b],c!=q))d[b]=q,d=c.Ne,c=c.next,d==q?a.bf[b]=c:d.me(c),c==q?a.cf[b]=d:c.ne(d)}function le(a,c,b,d){var e=a.Ed[b];if(e==q){for(var e=[],g=0;g<=ke;g++)e[g]=q;a.Ed[b]=e}e[d]==q&&(e[d]=new ie(c),c=a.cf[d],c!=q?c.me(e[d]):a.bf[d]=e[d],e[d].ne(c),a.cf[d]=e[d])}je.prototype.Qf=ba("$f");var ne=0,pe=1,se=2,qe=3,re=4,ke=5;function ue(a,c,b){this.bh=255*L(a,0,1);this.ah=255*L(c,0,1);this.Zg=255*L(b,0,1)}ue.prototype.j=function(a,c,b){this.bh=255*L(a,0,1);this.ah=255*L(c,0,1);this.Zg=255*L(b,0,1)};function Sb(a){return a.bh<<16|a.ah<<8|a.Zg};function ve(){this.K=new G(0,0);this.G=[];for(var a=this.oa=0;a<2;a++)this.G[a]=new G(0,0)}
ve.prototype.V=function(a,c,b,d,e){if(a.oa!=0){var g=0,f,h,i=0,j=0,l=0,m=0,n=0;f=0;switch(a.D){case 1:h=c.d;f=a.I;g=c.position.x+h.a.x*f.x+h.b.x*f.y;c=c.position.y+h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.G[0].I;a=d.position.x+h.a.x*f.x+h.b.x*f.y;d=d.position.y+h.a.y*f.x+h.b.y*f.y;f=a-g;h=d-c;i=f*f+h*h;i>wc?(i=Math.sqrt(i),this.K.x=f/i,this.K.y=h/i):(this.K.x=1,this.K.y=0);f=c+b*this.K.y;d-=e*this.K.y;this.G[0].x=0.5*(g+b*this.K.x+(a-e*this.K.x));this.G[0].y=0.5*(f+d);break;case 2:h=c.d;f=a.Ha;i=h.a.x*f.x+h.b.x*
f.y;j=h.a.y*f.x+h.b.y*f.y;h=c.d;f=a.I;l=c.position.x+h.a.x*f.x+h.b.x*f.y;m=c.position.y+h.a.y*f.x+h.b.y*f.y;this.K.x=i;this.K.y=j;for(g=0;g<a.oa;g++)h=d.d,f=a.G[g].I,n=d.position.x+h.a.x*f.x+h.b.x*f.y,f=d.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(b-(n-l)*i-(f-m)*j-e)*i,this.G[g].y=f+0.5*(b-(n-l)*i-(f-m)*j-e)*j;break;case 4:h=d.d;f=a.Ha;i=h.a.x*f.x+h.b.x*f.y;j=h.a.y*f.x+h.b.y*f.y;h=d.d;f=a.I;l=d.position.x+h.a.x*f.x+h.b.x*f.y;m=d.position.y+h.a.y*f.x+h.b.y*f.y;this.K.x=-i;this.K.y=-j;for(g=
0;g<a.oa;g++)h=c.d,f=a.G[g].I,n=c.position.x+h.a.x*f.x+h.b.x*f.y,f=c.position.y+h.a.y*f.x+h.b.y*f.y,this.G[g].x=n+0.5*(e-(n-l)*i-(f-m)*j-b)*i,this.G[g].y=f+0.5*(e-(n-l)*i-(f-m)*j-b)*j}}};function we(a,c,b,d,e){this.ja=a;var g=0;a>0&&(g=1/a);this.lc=g;this.ab=c;this.Dg=b;this.Mg=d;this.xd=e};function xe(){this.Yb=new G(0,0);this.L=new G(0,0);this.M=new G(0,0)};function ye(){this.of=new G(0,0);this.Yb=new G(0,0);this.tc=new G(0,0);this.Zd=new jc;this.Cb=new jc;this.Ra=[];for(var a=0;a<2;a++)this.Ra[a]=new xe};function ze(){this.K=new G(0,0);this.Af=[];this.G=[];for(var a=0;a<2;a++)this.G[a]=new G(0,0)}
ze.prototype.V=function(a){M(a.lb>0);var c=0,b=0,d=0,e=0,g=0;switch(a.type){case 1:var f=a.T.e.d,d=a.Yb,c=a.T.e.position.x+(f.a.x*d.x+f.b.x*d.y),b=a.T.e.position.y+(f.a.y*d.x+f.b.y*d.y),f=a.W.e.d,d=a.Ra[0].Yb,e=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y),f=a.W.e.position.y+(f.a.y*d.x+f.b.y*d.y),d=e-c,g=f-b,h=d*d+g*g;h>wc?(h=Math.sqrt(h),this.K.x=d/h,this.K.y=g/h):(this.K.x=1,this.K.y=0);this.G[0].x=0.5*(c+e);this.G[0].y=0.5*(b+f);this.Af[0]=d*this.K.x+g*this.K.y-a.Gg;break;case 2:f=a.T.e.d;d=a.of;this.K.x=
f.a.x*d.x+f.b.x*d.y;this.K.y=f.a.y*d.x+f.b.y*d.y;f=a.T.e.d;d=a.Yb;e=a.T.e.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.T.e.position.y+(f.a.y*d.x+f.b.y*d.y);f=a.W.e.d;for(c=0;c<a.lb;c++)d=a.Ra[c].Yb,b=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.W.e.position.y+(f.a.y*d.x+f.b.y*d.y),this.Af[c]=(b-e)*this.K.x+(d-g)*this.K.y-a.Gg,this.G[c].x=b,this.G[c].y=d;break;case 4:f=a.W.e.d;d=a.of;this.K.x=f.a.x*d.x+f.b.x*d.y;this.K.y=f.a.y*d.x+f.b.y*d.y;f=a.W.e.d;d=a.Yb;e=a.W.e.position.x+(f.a.x*d.x+f.b.x*d.y);g=a.W.e.position.y+
(f.a.y*d.x+f.b.y*d.y);f=a.T.e.d;for(c=0;c<a.lb;c++)d=a.Ra[c].Yb,b=a.T.e.position.x+(f.a.x*d.x+f.b.x*d.y),d=a.T.e.position.y+(f.a.y*d.x+f.b.y*d.y),this.Af[c]=(b-e)*this.K.x+(d-g)*this.K.y-a.Gg,this.G[c].j(b,d);this.K.x*=-1;this.K.y*=-1}};function Ae(){this.$b=[]}x=Ae.prototype;
x.V=function(a,c,b){b===k&&(b=0);var d,a=0;for(this.Be=b;this.$b.length<this.Be;)this.$b[this.$b.length]=new ye;for(a=0;a<b;++a){d=c[a];var e=d.U,g=d.Z,f=e.pa.Q,h=g.pa.Q,i=e.F(),j=g.F(),l=d.jb,m=Math.sqrt(e.Ch*g.Ch),n=e.zf>g.zf?e.zf:g.zf,p=i.h.x,t=i.h.y,s=j.h.x,v=j.h.y,w=i.t,O=j.t;M(l.oa>0);Be.V(l,i.e,f,j.e,h);g=Be.K.x;d=Be.K.y;e=this.$b[a];e.T=i;e.W=j;e.pj=l;e.tc.x=g;e.tc.y=d;e.lb=l.oa;e.ub=m;e.yc=n;e.of.x=l.Ha.x;e.of.y=l.Ha.y;e.Yb.x=l.I.x;e.Yb.y=l.I.y;e.Gg=f+h;e.type=l.D;for(f=0;f<e.lb;++f){m=l.G[f];
h=e.Ra[f];h.Ba=m.rd;h.Ac=m.ud;h.Yb.m(m.I);var m=h.L.x=Be.G[f].x-i.c.g.x,n=h.L.y=Be.G[f].y-i.c.g.y,J=h.M.x=Be.G[f].x-j.c.g.x,P=h.M.y=Be.G[f].y-j.c.g.y,y=m*d-n*g,E=J*d-P*g;y*=y;E*=E;h.Zd=1/(i.l+j.l+i.v*y+j.v*E);var X=i.q*i.l+j.q*j.l;X+=i.q*i.v*y+j.q*j.v*E;h.Ii=1/X;E=d;X=-g;y=m*X-n*E;E=J*X-P*E;y*=y;E*=E;h.Dj=1/(i.l+j.l+i.v*y+j.v*E);h.Lf=0;m=e.tc.x*(s+-O*P-p- -w*n)+e.tc.y*(v+O*J-t-w*m);m<-1&&(h.Lf+=-e.yc*m)}if(e.lb==2)v=e.Ra[0],s=e.Ra[1],l=i.l,i=i.v,p=j.l,j=j.v,t=v.L.x*d-v.L.y*g,v=v.M.x*d-v.M.y*g,w=s.L.x*
d-s.L.y*g,s=s.M.x*d-s.M.y*g,g=l+p+i*t*t+j*v*v,d=l+p+i*w*w+j*s*s,j=l+p+i*t*w+j*v*s,g*g<100*(g*d-j*j)?(e.Cb.a.j(g,j),e.Cb.b.j(j,d),g=e.Cb,e=e.Zd,d=g.a.x*g.b.y-g.b.x*g.a.y,d!==0&&(d=1/d),e.a.x=d*g.b.y,e.b.x=-d*g.b.x,e.a.y=-d*g.a.y,e.b.y=d*g.a.x):e.lb=1}};
x.Tb=function(a){for(var c=0;c<this.Be;++c){var b=this.$b[c],d=b.T,e=b.W,g=d.l,f=d.v,h=e.l,i=e.v,j=b.tc.x,l=b.tc.y,m=l,n=-j,p=0,t=0;if(a.xd){t=b.lb;for(p=0;p<t;++p){var s=b.Ra[p];s.Ba*=a.ab;s.Ac*=a.ab;var v=s.Ba*j+s.Ac*m,w=s.Ba*l+s.Ac*n;d.t-=f*(s.L.x*w-s.L.y*v);d.h.x-=g*v;d.h.y-=g*w;e.t+=i*(s.M.x*w-s.M.y*v);e.h.x+=h*v;e.h.y+=h*w}}else{t=b.lb;for(p=0;p<t;++p)d=b.Ra[p],d.Ba=0,d.Ac=0}}};
x.Eb=function(){for(var a=0,c,b=0,d=0,e=0,g=d=d=b=b=0,f=b=b=0,h=b=e=0,i=0,j,l=0;l<this.Be;++l){var e=this.$b[l],m=e.T,n=e.W,p=m.t,t=n.t,s=m.h,v=n.h,w=m.l,O=m.v,J=n.l,P=n.v,h=e.tc.x,y=i=e.tc.y;j=-h;f=e.ub;for(a=0;a<e.lb;a++)c=e.Ra[a],b=v.x-t*c.M.y-s.x+p*c.L.y,d=v.y+t*c.M.x-s.y-p*c.L.x,b=b*y+d*j,b=c.Dj*-b,d=f*c.Ba,d=L(c.Ac+b,-d,d),b=d-c.Ac,g=b*y,b*=j,s.x-=w*g,s.y-=w*b,p-=O*(c.L.x*b-c.L.y*g),v.x+=J*g,v.y+=J*b,t+=P*(c.M.x*b-c.M.y*g),c.Ac=d;if(e.lb==1)c=e.Ra[0],b=v.x+-t*c.M.y-s.x- -p*c.L.y,d=v.y+t*c.M.x-
s.y-p*c.L.x,e=b*h+d*i,b=-c.Zd*(e-c.Lf),d=c.Ba+b,d=d>0?d:0,b=d-c.Ba,g=b*h,b*=i,s.x-=w*g,s.y-=w*b,p-=O*(c.L.x*b-c.L.y*g),v.x+=J*g,v.y+=J*b,t+=P*(c.M.x*b-c.M.y*g),c.Ba=d;else{c=e.Ra[0];var a=e.Ra[1],b=c.Ba,f=a.Ba,E=(v.x-t*c.M.y-s.x+p*c.L.y)*h+(v.y+t*c.M.x-s.y-p*c.L.x)*i,X=(v.x-t*a.M.y-s.x+p*a.L.y)*h+(v.y+t*a.M.x-s.y-p*a.L.x)*i,d=E-c.Lf,g=X-a.Lf;j=e.Cb;d-=j.a.x*b+j.b.x*f;for(g-=j.a.y*b+j.b.y*f;;){j=e.Zd;y=-(j.a.x*d+j.b.x*g);j=-(j.a.y*d+j.b.y*g);if(y>=0&&j>=0){b=y-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;s.x-=w*(e+
h);s.y-=w*(b+i);p-=O*(c.L.x*b-c.L.y*e+a.L.x*i-a.L.y*h);v.x+=J*(e+h);v.y+=J*(b+i);t+=P*(c.M.x*b-c.M.y*e+a.M.x*i-a.M.y*h);c.Ba=y;a.Ba=j;break}y=-c.Zd*d;j=0;X=e.Cb.a.y*y+g;if(y>=0&&X>=0){b=y-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;s.x-=w*(e+h);s.y-=w*(b+i);p-=O*(c.L.x*b-c.L.y*e+a.L.x*i-a.L.y*h);v.x+=J*(e+h);v.y+=J*(b+i);t+=P*(c.M.x*b-c.M.y*e+a.M.x*i-a.M.y*h);c.Ba=y;a.Ba=j;break}y=0;j=-a.Zd*g;E=e.Cb.b.x*j+d;if(j>=0&&E>=0){b=y-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;s.x-=w*(e+h);s.y-=w*(b+i);p-=O*(c.L.x*b-c.L.y*e+a.L.x*i-a.L.y*
h);v.x+=J*(e+h);v.y+=J*(b+i);t+=P*(c.M.x*b-c.M.y*e+a.M.x*i-a.M.y*h);c.Ba=y;a.Ba=j;break}j=y=0;E=d;X=g;if(E>=0&&X>=0){b=y-b;f=j-f;e=b*h;b*=i;h*=f;i*=f;s.x-=w*(e+h);s.y-=w*(b+i);p-=O*(c.L.x*b-c.L.y*e+a.L.x*i-a.L.y*h);v.x+=J*(e+h);v.y+=J*(b+i);t+=P*(c.M.x*b-c.M.y*e+a.M.x*i-a.M.y*h);c.Ba=y;a.Ba=j;break}break}}m.t=p;n.t=t}};x.Pf=function(){for(var a=0;a<this.Be;++a)for(var c=this.$b[a],b=c.pj,d=0;d<c.lb;++d){var e=b.G[d],g=c.Ra[d];e.rd=g.Ba;e.ud=g.Ac}};
x.Db=function(a){a===k&&(a=0);for(var c=0,b=0;b<this.Be;b++){var d=this.$b[b],e=d.T,g=d.W,f=e.q*e.l,h=e.q*e.v,i=g.q*g.l,j=g.q*g.v;Ce.V(d);for(var l=Ce.K,m=0;m<d.lb;m++){var n=d.Ra[m],p=Ce.G[m],t=Ce.Af[m],s=p.x-e.c.g.x,v=p.y-e.c.g.y,w=p.x-g.c.g.x,p=p.y-g.c.g.y,c=c<t?c:t,t=-n.Ii*L(a*(t+0.005),-0.2,0),n=t*l.x;t*=l.y;e.c.g.x-=f*n;e.c.g.y-=f*t;e.c.n-=h*(s*t-v*n);T(e);g.c.g.x+=i*n;g.c.g.y+=i*t;g.c.n+=j*(w*t-p*n);T(g)}}return c>-0.0075};var Be=new ve,Ce=new ze;function De(){this.xj=[];this.Cj=[]};function Ee(a,c){this.Fh=a;this.Lb=c;this.Zb=[];this.sf=[];this.Tc=[];this.Mb=[];this.Ka=[]}function Fe(a){a.Zb=[];a.sf=[];a.Tc=[];a.Mb=[];a.Ka=[]}
Ee.prototype.oe=function(a,c,b){for(var d=0;d<this.sf.length;d++){var e=this.sf[d];e.h.x+=a.ja*(c.x+e.l*e.tf.x);e.h.y+=a.ja*(c.y+e.l*e.tf.y);e.t+=a.ja*e.v*e.zg;e.h.hc(L(1-a.ja*e.jj,0,1));e.t*=L(1-a.ja*e.Zi,0,1)}this.Lb.V(a,this.Mb,this.Mb.length);this.Lb.Tb(a);for(c=0;c<this.Ka.length;c++)this.Ka[c].Tb(a);for(c=0;c<a.Mg;c++){for(d=0;d<this.Ka.length;d++)this.Ka[d].Eb(a);this.Lb.Eb()}for(c=0;c<this.Ka.length;c++)this.Ka[c].Pf();this.Lb.Pf();for(c=0;c<this.Tc.length;++c){var d=this.Tc[c],e=a.ja*d.h.x,
g=a.ja*d.h.y;e*e+g*g>4&&(Fb(d.h),d.h.x*=2*a.lc,d.h.y*=2*a.lc);e=a.ja*d.t;if(e*e>uc)d.t=d.t<0?-tc*a.lc:tc*a.lc;d.c.Ea.m(d.c.g);d.c.qb=d.c.n;d.c.g.x+=a.ja*d.h.x;d.c.g.y+=a.ja*d.h.y;d.c.n+=a.ja*d.t;T(d)}for(c=0;c<a.Dg;c++){d=this.Lb.Db(0.2);e=o;for(g=0;g<this.Ka.length;g++)var f=this.Ka[g].Db(0.2),e=e&&f;if(d&&e)break}Ge(this,this.Lb.$b);if(b){b=Number.MAX_VALUE;for(c=0;c<this.Tc.length;c++)d=this.Tc[c],!d.ng||Math.abs(d.t)>vc||lc(d.h,d.h)>1.0E-4?b=d.Bf=0:(d.Bf+=a.ja,b=Math.min(b,d.Bf));if(b>=0.5)for(a=
0;a<this.Zb.length;a++)Nd(this.Zb[a],r)}};
Ee.prototype.Vf=function(a){var c=0,b=0;this.Lb.V(a,this.Mb,this.Mb.length);for(var d=this.Lb,c=0;c<this.Ka.length;++c)this.Ka[c].Tb(a);for(c=0;c<a.Mg;++c){d.Eb();for(b=0;b<this.Ka.length;++b)this.Ka[b].Eb(a)}for(c=0;c<this.Tc.length;++c){var b=this.Tc[c],e=a.ja*b.h.x,g=a.ja*b.h.y;e*e+g*g>4&&(Fb(b.h),b.h.x*=2*a.lc,b.h.y*=2*a.lc);e=a.ja*b.t;if(e*e>uc)b.t=b.t<0?-tc*a.lc:tc*a.lc;b.c.Ea.m(b.c.g);b.c.qb=b.c.n;b.c.g.x+=a.ja*b.h.x;b.c.g.y+=a.ja*b.h.y;b.c.n+=a.ja*b.t;T(b)}for(c=0;c<a.Dg;++c){e=d.Db(0.75);
g=o;for(b=0;b<this.Ka.length;++b)var f=this.Ka[b].Db(0.2),g=g&&f;if(e&&g)break}Ge(this,d.$b)};function Ge(a,c){if(a.Fh!=q)for(var b=0;b<a.Mb.length;++b){for(var d=a.Mb[b],e=c[b],g=new De,f=0;f<e.lb;++f)g.xj[f]=e.Ra[f].Ba,g.Cj[f]=e.Ra[f].Ac;a.Fh.je(d,g)}}Ee.prototype.Ve=function(a){this.Zb.push(a);a.D!=0&&(this.Tc.push(a),a.D==2&&this.sf.push(a))};function He(a){R.call(this,a);this.A=new G(0,0);this.B=new G(0,0);this.va=new G(0,0);this.A.m(a.Ta);this.B.m(a.Ua);this.Eh=a.length;this.sg=a.sh;this.aj=a.nh;this.xh=this.qd=this.i=0}B(He,R);x=He.prototype;x.Qb=function(){return S(this.s,this.A)};x.Rb=function(){return S(this.u,this.B)};
x.Tb=function(a){var c,b=0,d=this.s,e=this.u;c=d.e.d;var g=this.A.x-d.c.p.x,f=this.A.y-d.c.p.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.e.d;var h=this.B.x-e.c.p.x,i=this.B.y-e.c.p.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.va.x=e.c.g.x+h-d.c.g.x-g;this.va.y=e.c.g.y+i-d.c.g.y-f;b=Math.sqrt(this.va.x*this.va.x+this.va.y*this.va.y);b>0.005?this.va.hc(1/b):this.va.N();c=g*this.va.y-f*this.va.x;var j=h*this.va.y-i*this.va.x;c=d.l+d.v*c*c+e.l+e.v*j*j;this.q=c!=0?1/c:0;if(this.sg>0){b-=this.Eh;var j=
2*Math.PI*this.sg,l=this.q*j*j;this.qd=a.ja*(2*this.q*this.aj*j+a.ja*l);this.qd=this.qd!=0?1/this.qd:0;this.xh=b*a.ja*l*this.qd;this.q=c+this.qd;this.q=this.q!=0?1/this.q:0}a.xd?(this.i*=a.ab,a=this.i*this.va.x,c=this.i*this.va.y,d.h.x-=d.l*a,d.h.y-=d.l*c,d.t-=d.v*(g*c-f*a),e.h.x+=e.l*a,e.h.y+=e.l*c,e.t+=e.v*(h*c-i*a)):this.i=0};
x.Eb=function(){var a=this.A.x-this.s.c.p.x,c=this.A.y-this.s.c.p.y,b=this.s.e.d.a.x*a+this.s.e.d.b.x*c,c=this.s.e.d.a.y*a+this.s.e.d.b.y*c,a=b,d=this.B.x-this.u.c.p.x,e=this.B.y-this.u.c.p.y,b=this.u.e.d.a.x*d+this.u.e.d.b.x*e,e=this.u.e.d.a.y*d+this.u.e.d.b.y*e,d=b,g=-this.q*(this.va.x*(this.u.h.x-this.u.t*e-(this.s.h.x-this.s.t*c))+this.va.y*(this.u.h.y+this.u.t*d-(this.s.h.y+this.s.t*a))+this.xh+this.qd*this.i);this.i+=g;b=g*this.va.x;g*=this.va.y;this.s.h.x-=this.s.l*b;this.s.h.y-=this.s.l*g;
this.s.t-=this.s.v*(a*g-c*b);this.u.h.x+=this.u.l*b;this.u.h.y+=this.u.l*g;this.u.t+=this.u.v*(d*g-e*b)};
x.Db=function(){if(this.sg>0)return o;var a=this.A.x-this.s.c.p.x,c=this.A.y-this.s.c.p.y,b=this.s.e.d.a.x*a+this.s.e.d.b.x*c,c=this.s.e.d.a.y*a+this.s.e.d.b.y*c,a=b,d=this.B.x-this.u.c.p.x,e=this.B.y-this.u.c.p.y,b=this.u.e.d.a.x*d+this.u.e.d.b.x*e,e=this.u.e.d.a.y*d+this.u.e.d.b.y*e,d=b,g=this.u.c.g.x+d-this.s.c.g.x-a,f=this.u.c.g.y+e-this.s.c.g.y-c,b=Math.sqrt(g*g+f*f);g/=b;f/=b;var b=L(b-this.Eh,-0.2,0.2),h=-this.q*b;this.va.j(g,f);g=h*this.va.x;f=h*this.va.y;this.s.c.g.x-=this.s.l*g;this.s.c.g.y-=
this.s.l*f;this.s.c.n-=this.s.v*(a*f-c*g);this.u.c.g.x+=this.u.l*g;this.u.c.g.y+=this.u.l*f;this.u.c.n+=this.u.v*(d*f-e*g);T(this.s);T(this.u);return Math.abs(b)<0.005};function Ie(){this.Pj=this.xi=q;this.Qj={};this.Oj=0}Ie.prototype.Da=ba("xi");function Je(a,c,b){this.Ad="Fixture"+Ke++;this.Bh=b.filter.ca();this.Mc=new Vb;this.og=a;this.pa=b.shape.ca();this.qg=b.ue;this.Ch=b.ub;this.zf=b.yc;this.hj=b.mf}x=Je.prototype;x.gc=ba("hj");x.F=ba("og");x.Pg=function(a){a||(a=new Gc);this.pa.Ng(a,this.qg);return a};x.fc=u();x.ce=function(a,c){this.pa.Xe(this.Mc,c);this.Uc=a.ce(this.Mc,this)};x.de=function(a){if(this.Uc!=q)a.de(this.Uc),this.Uc=q};
function Le(a,c,b,d){if(a.Uc){var e=new Vb,g=new Vb;a.pa.Xe(e,b);a.pa.Xe(g,d);Yb(a.Mc,e,g);c.Sf(a.Uc,a.Mc,K(d.position,b.position))}}var Ke=0;function Me(a){this.tb=a;this.Ne=this.next=q}Me.prototype.me=aa("next");Me.prototype.ne=aa("Ne");function Ne(){this.fg=this.eg=q;this.hf={};this.rh=0}Ne.prototype.Da=ba("eg");function Oe(a,c){this.Ad="Body"+Pe++;this.e=new Hc;this.e.position.m(a.position);this.e.d.j(a.Ya);this.c=new Hd;this.c.p.N();this.c.Ca=1;this.c.qb=this.c.n=a.Ya;this.c.g.x=this.e.d.a.x*this.c.p.x+this.e.d.b.x*this.c.p.y;this.c.g.y=this.e.d.a.y*this.c.p.x+this.e.d.b.y*this.c.p.y;this.c.g.x+=this.e.position.x;this.c.g.y+=this.e.position.y;this.c.Ea.m(this.c.g);this.h=a.Wi.ca();this.tf=new G(0,0);this.qf=a.wi;this.bj=a.Jc;this.ng=a.pi;this.Kb=a.si;this.mg=a.oi;this.Ia=c;this.P=this.ia=q;this.df=new Ie;
this.Uj=0;this.t=a.ri;this.jj=a.Vi;this.Zi=a.qi;this.Bf=this.zg=0;this.D=a.type;this.q=this.D==2?1:0;this.l=this.D==2?1:0;this.v=this.nc=0;this.fj=a.Oi;this.Kc=new Ne;this.vf=[]}function Qe(a,c,b){M(!a.Ia.Pc);a.e.d.j(b);a.e.position.m(c);var c=a.e.d,d=a.c.p;a.c.g.x=c.a.x*d.x+c.b.x*d.y;a.c.g.y=c.a.y*d.x+c.b.y*d.y;a.c.g.x+=a.e.position.x;a.c.g.y+=a.e.position.y;a.c.Ea.m(a.c.g);a.c.qb=a.c.n=b;b=a.Ia.Ga.od;for(c=a.Kc.Da();c;c=c.next)Le(c.tb,b,a.e,a.e);ge(a.Ia.Ga)}x=Oe.prototype;x.hb=ba("e");x.Sb=function(){return this.c.n};
function U(a){return a.c.g}function Re(a,c,b){a.D==2&&(Nd(a,o),a.h.x+=a.l*c.x,a.h.y+=a.l*c.y,a.t+=a.v*((b.x-a.c.g.x)*c.y-(b.y-a.c.g.y)*c.x))}x.Pg=function(a){a||(a=new Gc);a.Xc=this.q;a.fe=this.nc;a.gd.m(this.c.p);return a};
function Se(a){a.q=0;a.l=0;a.nc=0;a.v=0;a.c.p.N();if(!(a.D==0||a.D==1)){for(var c=new G(0,0),b=a.Kc.Da();b;b=b.next){var d=b.tb;d.qg!=0&&(d=d.Pg(),a.q+=d.Xc,c.x+=d.gd.x*d.Xc,c.y+=d.gd.y*d.Xc,a.nc+=d.fe)}a.q>0?(a.l=1/a.q,c.x*=a.l,c.y*=a.l):(a.q=1,a.l=1);a.nc>0&&!a.bj?(a.nc-=a.q*(c.x*c.x+c.y*c.y),a.nc*=a.fj,M(a.nc>0),a.v=1/a.nc):(a.nc=0,a.v=0);b=a.c.g.ca();a.c.p.m(c);a.c.Ea.m(I(a.e,a.c.p));a.c.g.m(a.c.Ea);a.h.x+=a.t*-(a.c.g.y-b.y);a.h.y+=a.t*+(a.c.g.x-b.x)}}
function S(a,c){var b=a.e.d,b=new G(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.e.position.x;b.y+=a.e.position.y;return b}function Nd(a,c){if(a.Kb!=c){a.Kb=c;a.Bf=0;if(!c)a.h.N(),a.t=0,a.tf.N(),a.zg=0;for(var b=0;b<a.vf.length;b++)me(a.vf[b],a)}}x.bd=ba("mg");function Te(a){Ue.d.j(a.c.qb);var c=Ue.d,b=a.c.p;Ue.position.x=a.c.Ea.x-(c.a.x*b.x+c.b.x*b.y);Ue.position.y=a.c.Ea.y-(c.a.y*b.x+c.b.y*b.y);c=a.Ia.Ga.od;for(b=a.Kc.Da();b;b=b.next)Le(b.tb,c,Ue,a.e)}
function T(a){a.e.d.j(a.c.n);var c=a.e.d,b=a.c.p;a.e.position.x=a.c.g.x-(c.a.x*b.x+c.b.x*b.y);a.e.position.y=a.c.g.y-(c.a.y*b.x+c.b.y*b.y)}x.Vb=function(a){if(this.D!=2&&a.D!=2)return r;for(var c=this.ia;c;c=c.next)if(c.fa==a&&c.Xb.yh==r)return r;return o};x.Bc=function(a){this.c.Bc(a);this.c.g.m(this.c.Ea);this.c.n=this.c.qb;T(this)};var Pe=0,Ue=new Hc;function Ve(a,c){this.Ga=new fe(this);this.Lb=new Ae;this.xg=this.Pc=r;this.Oa=this.rf=q;this.Fb=new je;this.ia=this.P=q;this.df=new Ie;this.uf=0;this.$i=this.oj=o;this.ng=c;this.cj=a;this.Dh=0;this.tg=We(this,new Jd)}var Xe=1-100*Number.MIN_VALUE;function We(a,c){M(!a.Pc);var b=new Oe(c,a);a.Fb.Ve(b);return b}
function V(a,c){var b=c.Cc();b.kb=q;if(b.ka=a.ia)a.ia.kb=b;a.ia=b;a.uf++;b.Va.Xb=b;b.Va.fa=b.u;b.Va.na=q;if(b.Va.next=b.s.ia)b.s.ia.na=b.Va;b.s.ia=b.Va;b.Wa.Xb=b;b.Wa.fa=b.s;b.Wa.na=q;if(b.Wa.next=b.u.ia)b.u.ia.na=b.Wa;b.u.ia=b.Wa;var d=c.T,e=c.W;if(!c.bg)for(e=e.P;e;){if(e.fa==d)e.za.gf=o;e=e.next}return b}Ve.prototype.Qf=function(){return this.Fb.Qf()};
function Ye(a,c,b,d){if(a.xg)ge(a.Ga),a.xg=r;a.Pc=o;c=new we(c,a.Dh*c,b,d,a.oj);b=a.Ga;for(d=b.Ia.P;d;){var e=d.U,g=d.Z,f=e.F(),h=g.F();if(f.Kb==r&&h.Kb==r)d=d.ka;else{if(d.gf){if(h.Vb(f)==r){e=d;d=e.ka;b.fc(e);continue}if(b.pg.Vb(e,g)==r){e=d;d=e.ka;b.fc(e);continue}d.gf=r}b.od.Dd(e.Uc,g.Uc)==r?(e=d,d=e.ka,b.fc(e)):(Md(d,b.Od),d=d.ka)}}if(c.ja>0)a.oe(c),a.$i&&a.Vf(c),a.Dh=c.lc;a.Pc=r}
Ve.prototype.oe=function(a){for(var c=this.df.Da();c;c=c.next)Ye(c.jh,a);for(var c=new Ee(this.Ga.Od,this.Lb),b=this.Fb.Da(ke);b;b=b.next)b.body.da=r;for(b=this.P;b;b=b.ka)b.da=r;for(b=this.ia;b;b=b.ka)b.da=r;for(b=this.Fb.Da(qe);b;b=b.next){var d=b.body;if(!d.da){Fe(c);var e=[];e.push(d);for(d.da=o;e.length>0;)if(d=e.pop(),c.Ve(d),d.Kb||Nd(d,o),d.D!=0){for(var g=d.P;g;g=g.next)if(!g.za.da&&!g.za.gc()&&g.za.enabled&&g.za.wd&&(c.Mb.push(g.za),g.za.da=o,!g.fa.da))e.push(g.fa),g.fa.da=o;for(d=d.ia;d;d=
d.next)if(!d.Xb.da&&d.fa.bd()&&(c.Ka.push(d.Xb),d.Xb.da=o,!d.fa.da))e.push(d.fa),d.fa.da=o}c.oe(a,this.cj,this.ng)}}for(b=this.Fb.Da(qe);b;b=b.next)Te(b.body);ge(this.Ga)};
Ve.prototype.Vf=function(a){var c,b,d=new Ee(this.Ga.Od,this.Lb);for(b=this.Fb.Da(ke);b;b=b.next){var e=b.body;e.da=r;e.c.Ca=0}for(b=this.P;b;b=b.ka)b.da=r,b.Ud=q;for(b=this.ia;b;b=b.ka)b.da=r;for(;;){c=q;b=1;for(e=this.P;e;e=e.ka){var g;if(e.gc()||!e.enabled||!e.hh)g=o;else{g=e.U.F();var f=e.Z.F();g=(g.D!=2||!g.Kb)&&(f.D!=2||!f.Kb)?o:r}if(!g){f=1;if(e.Ud!=q)f=e.Ud;else{if(e.wd)f=1;else{var h=e.U.F(),i=e.Z.F();g=h.c.Ca;if(h.c.Ca<i.c.Ca)g=i.c.Ca,h.c.Bc(g);else if(i.c.Ca<h.c.Ca)g=h.c.Ca,i.c.Bc(g);f=
e;h=h.c;i=i.c;Od.wc.j(f.U.pa);Od.xc.j(f.Z.pa);Od.Sh=h;Od.Th=i;Od.Ej=0.005;var j=Od;wd++;var f=j.wc,i=j.xc,h=j.Sh,l=j.Th;M(h.Ca==l.Ca);M(1-h.Ca>Number.MIN_VALUE);var m=f.Q+i.Q,j=j.Ej,n=0,p=0,t=0;Bd.Fd=0;for(Cd.Wh=r;;){h.hb(Dd,n);l.hb(Ed,n);Cd.wc=f;Cd.xc=i;Cd.Jf=Dd;Cd.Kf=Ed;Ac(Gd,Bd,Cd);if(Gd.kd<=0){n=1;break}Fd.V(Bd,f,Dd,i,Ed);var s=Fd.Pb(Dd,Ed);if(s<=0){n=1;break}p==0&&(t=s>m?Math.max(m-j,0.75*m):Math.max(s-j,0.02*m));if(s-t<0.5*j){if(p==0){n=1;break}break}var v=n,w=n,O=1;h.hb(Dd,O);l.hb(Ed,O);var J=
Fd.Pb(Dd,Ed);if(J>=t){n=1;break}for(var P=0;;){var y=0,y=P&1?w+(t-s)*(O-w)/(J-s):0.5*(w+O);h.hb(Dd,y);l.hb(Ed,y);var E=Fd.Pb(Dd,Ed);if(Math.abs(E-t)<0.025*j){v=y;break}E>t?(w=y,s=E):(O=y,J=E);P++;zd++;if(P==50)break}Ad=Math.max(Ad,P);if(v<(1+100*Number.MIN_VALUE)*n)break;n=v;p++;xd++;if(p==1E3)break}yd=Math.max(yd,p);f=n;M(0<=f&&f<=1);f>0&&f<1&&(f=(1-f)*g+f)}e.Ud=f}Number.MIN_VALUE<f&&f<b&&(c=e,b=f)}}if(c===q||Xe<b)break;g=c.U.F();e=c.Z.F();Ze.j(g.c);$e.j(e.c);g.Bc(b);e.Bc(b);Md(c,this.Ga.Od);c.Ud=
q;if(c.gc()||!c.enabled)g.c.j(Ze),e.c.j($e),T(g),T(e);else if(c.wd){g.D!=2&&(g=e);Fe(d);c=new he;e=g;c.Id[c.Qe++]=e;for(g.da=o;c.size>0;)if(e=c,e.xe!=e.Qe?(g=e.Id[e.xe],delete e.Id[e.xe],e.xe++,e=g):e=k,d.Ve(e),e.Kb||Nd(e,o),e.D==2){for(g=e.P;g;g=g.next){if(d.Ce==32)break;if(!g.za.da&&!g.za.gc()&&g.za.enabled&&g.za.wd&&(d.Mb.push(g.za),g.za.da=o,!g.fa.da)){if(g.fa.D!=0)g.fa.Bc(b),Nd(g.fa,o),f=g.fa,c.Id[c.Qe++]=f;g.fa.da=o}}for(e=e.ia;e;e=e.next)if(d.uf!=32&&!e.Xb.da&&e.fa.bd()&&(d.Ka.push(e.Xb),e.Xb.da=
o,!e.fa.da)){if(e.fa.D!=0)e.fa.Bc(b),Nd(e.fa,o),g=e.fa,c.Id[c.Qe++]=g;e.fa.da=o}}d.Vf(new we((1-b)*a.ja,0,a.Mg,a.Dg,r));for(b=0;b<d.Zb.length;b++)if(d.Zb[b].da=r,d.Zb[b].Kb&&d.Zb[b].D==2){Te(d.Zb[b]);for(g=d.Zb[b].P;g;g=g.next)g.za.Ud=q}for(b=0;b<d.Ce;b++)d.Mb[b].da=r,d.Mb[b].Ud=q;for(b=0;b<d.uf;b++)d.Ka[b].da=r;ge(this.Ga)}}};function af(a,c,b,d){if(c instanceof Rd)a.Oa.ai(I(b,c.aa),c.Q,b.d.a,d);else if(c instanceof Q){for(var e=0,g=c.Qg(),c=c.r,f=[],e=0;e<g;e++)f[e]=I(b,c[e]);a.Oa.bi(f,g,d)}}
var Tb=new Hc,Ze=new Hd,$e=new Hd,bf=new ue(0.5,0.8,0.8);function cf(a){this.Vg=df++;this.position=a.ca();this.Ya=0;this.Lg=[];this.pe=[];this.We=[];this.ke=[];this.body=q}var df=0;function ef(a,c,b){this.Fg=[];this.Fa=[];this.Yj=0;this.Cg={};this.ta=a;this.Xa=new G(c.x,c.y);this.ga=new Ve(b,o);this.ga.Ga.pg=this;this.ga.Ga.Od=this;this.top=W(this,new G(this.Xa.x+5,5),new G(this.Xa.x/2,-2.5),r,q,{ub:0});this.bottom=W(this,new G(this.Xa.x+5,5),new G(this.Xa.x/2,this.Xa.y+2.5),r,q,{ub:0});this.left=W(this,new G(5,this.Xa.y+5),new G(-2.5,this.Xa.y/2),r,q,{ub:0});this.right=W(this,new G(5,this.Xa.y+5),new G(this.Xa.x+2.5,this.Xa.y/2),r,q,{ub:0})}x=ef.prototype;
x.update=function(a,c){Ye(this.ga,c,ff,ff);for(var b=this.ga.Fb.Da(ne);b;b=b.next)b.body.tf.N(),b.body.zg=0;b=this.Fg;this.Fg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};x.Vb=function(a,c){if(!a.gc()&&!c.gc())for(var b=0;b<this.Fa.length;b++)if(this.Fa[b].Vb&&!this.Fa[b].Vb(a,c))return r;return Mc.prototype.Vb(a,c)};
x.be=function(a){for(var c=a.U,b=c.F(),d=b.object,e=a.Z,g=e.F(),f=g.object,h=0;h<d.pe.length;h++)d.pe[h](a,d,b,c,f,g,e);for(h=0;h<f.pe.length;h++)f.pe[h](a,f,g,e,d,b,c);for(h=0;h<this.Fa.length;h++)if(this.Fa[h].Wg&&this.Fa[h].Wg(a),a.disabled)a.enabled=r;for(h=0;h<d.We.length;h++)d.We[h](a,d,b,c,f,g,e);for(h=0;h<f.We.length;h++)f.We[h](a,f,g,e,d,b,c);for(h=0;h<this.Fa.length;h++)this.Fa[h].be&&this.Fa[h].be(a)};
x.yd=function(a){for(var c=0;c<this.Fa.length;c++)this.Fa[c].yd&&this.Fa[c].yd(a);a.disabled=r;a.enabled=o};x.le=function(a,c){if(a.disabled)a.enabled=r;for(var b=0;b<this.Fa.length;b++)this.Fa[b].le&&this.Fa[b].le(a,c)};x.je=function(a,c){for(var b=a.U,d=b.F(),e=d.object,g=a.Z,f=g.F(),h=f.object,i=0;i<e.ke.length;i++)e.ke[i](a,c,e,d,b,h,f,g);for(i=0;i<h.ke.length;i++)h.ke[i](a,c,h,f,g,e,d,b);for(i=0;i<this.Fa.length;i++)this.Fa[i].je&&this.Fa[i].je(a,c)};
function Y(a,c,b,d){d=d||0;a=gf(a,c,b,o);a.display.Yh=-10+d;return a}function W(a,c,b,d,e,g){e=e||{};e.type=0;return hf(a,c,b,d,{xa:e,kc:g})}function hf(a,c,b,d,e){var g=new Q;Lc(g,c.x/2,c.y/2);return a.Gb(c,b,d,g,e)}function jf(a,c,b){var d=new Q,e=new G(c.x/2,c.y/2);Kc(d,[new G(0,e.y),new G(-e.x+0.01,e.y-0.01),new G(-e.x,0),new G(-e.x+0.01,-e.y+0.01),new G(0,-e.y),new G(e.x-0.01,-e.y+0.01),new G(e.x,0),new G(e.x-0.01,e.y-0.01)]);return a.Gb(c,b,o,d,{xa:{Jc:o},kc:{yc:0}})}
function kf(a,c){a.ga.Pc?a.Fg.push(c):c.apply(a)}x.Gb=function(a,c,b,d,e){var g=gf(this,a,c,b);kf(this,function(){var a=e,a=a||{},b=lf(a.xa,mf),i=new Jd;i.type=b.type;i.Ya=b.Ya;i.Jc=b.Jc;i.position=c;b=We(this.ga,i);a=nf(b,d,a);g.body=b;g.tb=a;b.object=g});return g};function gf(a,c,b,d){b=new cf(b);a.Cg[b.Vg]=b;d!==r&&ec(b,c);return b}
function nf(a,c,b){var b=b||{},b=lf(b.kc,of),d=new ic;d.ue=b.ue;d.ub=b.ub;d.yc=b.yc;d.mf=b.mf;d.shape=c;M(!a.Ia.Pc);c=new Je(a,0,d);a.mg&&c.ce(a.Ia.Ga.od,a.e);b=a.Kc;d=c.Ad;if(b.hf[d]==q){var e=new Me(c),g=b.fg;g!=q?g.me(e):b.eg=e;e.ne(g);b.fg=e;b.hf[d]=e;b.rh++}c.og=a;c.qg>0&&Se(a);a.Ia.xg=o;return c}
function pf(a,c){kf(a,function(){if(c.body){var a=this.ga,d=c.body;M(!a.Pc);for(var e=d.ia;e;){var g=e,e=e.next;a.rf&&a.rf.Nj(g.Xb);var f=a,h=g.Xb,i=h.yh;if(h.kb)h.kb.ka=h.ka;if(h.ka)h.ka.kb=h.kb;if(h==f.ia)f.ia=h.ka;var g=h.s,j=h.u;Nd(g,o);Nd(j,o);if(h.Va.na)h.Va.na.next=h.Va.next;if(h.Va.next)h.Va.next.na=h.Va.na;if(h.Va==g.ia)g.ia=h.Va.next;h.Va.na=q;h.Va.next=q;if(h.Wa.na)h.Wa.na.next=h.Wa.next;if(h.Wa.next)h.Wa.next.na=h.Wa.na;if(h.Wa==j.ia)j.ia=h.Wa.next;h.Wa.na=q;h.Wa.next=q;f.uf--;if(!i)for(f=
j.P;f;){if(f.fa==g)f.za.gf=o;f=f.next}}for(e=d.df.Da();e;e=e.next)te(e.jh,d);for(e=d.P;e;)f=e,e=e.next,a.Ga.fc(f.za);d.P=q;for(e=d.Kc.Da();e;e=e.next){a.rf&&a.rf.Mj(e.tb);f=d;g=e.tb;M(!f.Ia.Pc);var h=f.Kc,i=g.Ad,l=h.hf[i];if(l!=q)j=l.Ne,l=l.next,j==q?h.eg=l:j.me(l),l==q?h.fg=j:l.ne(j),delete h.hf[i],h.rh--;for(h=f.P;h;)i=h.za,h=h.next,j=i.Z,(g==i.U||g==j)&&f.Ia.Ga.fc(i);f.mg&&g.de(f.Ia.Ga.od);g.fc();g.og=q;Se(f)}te(a.Fb,d)}delete this.Cg[c.Vg]})}
function qf(a,c,b){kf(a,function(){if(c.body){var a=c.body;Qe(a,b,a.Sb())}else c.position=b.ca()})}var ff=10,of={ue:0.1,ub:0.6,yc:0.01,mf:r},mf={Jc:r,Ya:0,type:2};function lf(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===k||a[d]===q?c[d]:a[d];return b};function rf(a){this.ta=a}function sf(a,c,b,d,e){var g=new G(4,4);ec(c.body,b);H(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.If=new Ub("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,g,e);c.display.Wb={};c.display.Wb.Tj=e;c.display.Wb.Ki=4;c.display.Wb.Lc=0;c.display.Wb.ib={n:tf,x:tf,y:uf};a=a.ta.eh;c.Lg.push(vf);Ja(a.Kg,c)}var tf=0,uf=2;
function vf(a,c){var b=this.display.Wb;b.Lc+=c;var d=new G(1,1),e=this.body.h,g=Math.abs(e.x),f=Math.abs(e.y);if(f<0.01||g>=f){if(e.x>0.01){if(b.ib.x=tf,b.ib.n!=tf)b.ib.n=tf,b.Lc=0}else if(e.x<-0.01){if(b.ib.x=1,b.ib.n!=1)b.ib.n=1,b.Lc=0}else b.Lc=0;d.y=b.ib.x==1?4:2}else if(e.y>0.01){b.ib.y=3;if(b.ib.n!=3)b.ib.n=3,b.Lc=0;d.y=3}else{b.ib.y=uf;if(b.ib.n!=uf)b.ib.n=uf,b.Lc=0;d.y=1}d.x=b.Lc==0?1:Math.floor(b.Lc*b.Ki);b=this.display.If;b.mb=d.ca();b.mb.x%=b.Hf.x;b.mb.y%=b.Hf.y;if(b.mb.x===0)b.mb.x=b.Hf.x;
if(b.mb.y===0)b.mb.y=b.Hf.y};function wf(){this.Kg=[]};function xf(a,c,b,d,e,g,f){this.$c=a;this.paused=r;this.Te=0;this.eh=new wf;this.Wb=new rf(this);this.o=new ef(this,b,d);this.viewport=new Zb(this,c,g,e,f)}function yf(a){if(a.uh===q)a.uh=new Date;var c=new Date-a.uh>=5E3;Hb>0&&!c?setTimeout(function(){yf(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
xf.prototype.update=function(a,c){if(this.paused)this.Te=0,bc(this.viewport.Oh),this.$c.Ue&&this.$c.Ue(a,c);else{this.$c.Me&&this.$c.Me(a,c);for(var b=this.eh,d=0;d<b.Kg.length;d++)for(var e=b.Kg[d],g=0;g<e.Lg.length;g++)e.Lg[g].apply(e,[a,c]);this.Te+=c;for(b=a-this.Te;this.Te>=0.015;)this.Te-=0.015,b+=0.015,this.$c.zj&&this.$c.zj(b,0.015),this.o.update(b,0.015);this.$c.Le&&this.$c.Le(a,c);dc(this.viewport.Oh);b=this.viewport;b.display.style.visibility="hidden";if(b.nf.x!=b.ya.x||b.nf.y!=b.ya.y){b.nf.x=
b.ya.x;b.nf.y=b.ya.y;if(b.bb!==q)b.bb.style.left="-"+(b.ya.x*b.scale-b.zb.x/2)+"px",b.bb.style.top="-"+(b.ya.y*b.scale-b.zb.y/2)+"px";b.display.style.left="-"+(b.ya.x*b.scale-b.zb.x/2)+"px";b.display.style.top="-"+(b.ya.y*b.scale-b.zb.y/2)+"px";d=b.Mf;e=b.ya;g=Wb(d);d.lowerBound.Wf(g);d.upperBound.Wf(g);d.lowerBound.Ob(e);d.upperBound.Ob(e)}var d=[],f;for(f in b.jc)d[f]=b.jc[f];f=b.Mf;var e=b.ta.o.Cg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,l=i.Mi(b.ya),m=j.size;j.J.lowerBound.j(l.x-
m.x,l.y-m.y);j.J.upperBound.j(l.x+m.x,l.y+m.y);if(f.Dd(j.J)){if(j.ad==q)j.ad=fc++;delete d[j.ad];if(b.jc[j.ad]==q)b.jc[j.ad]=document.createElement("span"),b.jc[j.ad].className="gameObject",b.jc[j.ad].style.zIndex=100+(j.Yh||0),b.display.appendChild(b.jc[j.ad]);var g=b.jc[j.ad],n=Jb(g),p=b.scale!=n.scale;n.scale=b.scale;var t=l.x-m.x/2;if(p||n.left!=t)n.left=t,g.style.left=t*b.scale+"px";l=l.y-m.y/2;if(p||n.top!=l)n.top=l,g.style.top=l*b.scale+"px";l=m.x;if(p||n.width!=l)n.width=l,g.style.width=l*
b.scale+"px";m=m.y;if(p||n.height!=m)n.height=m,g.style.height=m*b.scale+"px";i=i.Li();if(n.rotation!=i)n.rotation=i,g.style.webkitTransform="rotate("+i+"rad)";if(j.If!=q){j=j.If;n=r;i=Jb(g);if(i.ti!=j.url)i.ti=j.url,g.style.backgroundImage="url("+j.url+")",g.style.backgroundColor="transparent",n=o;else if(i.ui!=j.mb.x||i.vi!=j.mb.y)n=o;if(n)i.ui=j.mb.x,i.vi=j.mb.y,g.style.backgroundPosition=(j.Nh.x+(j.mb.x-1)*j.Uh.x)*-1+"px "+(j.Nh.y+(j.mb.y-1)*j.Uh.y)*-1+"px"}}}}for(var s in d)b.display.removeChild(d[s]),
delete b.jc[s];if(b.bb!==q){b.bb.style.visibility="hidden";h=b.ta.o.ga;if(h.Oa!==q){h.Oa.nj.Ni.clear();s=h.Oa.Ah;if(s&Lb){g=new ue(0.5,0.5,0.3);j=new ue(0.5,0.9,0.5);n=new ue(0.5,0.5,0.9);i=new ue(0.6,0.6,0.6);p=new ue(0.9,0.7,0.7);for(d=h.Fb.Da(ke);d;d=d.next){e=d.body;for(f=e.Kc.Da();f;f=f.next)m=f.tb,m=m.pa,e.bd()?e.D==0?af(h,m,e.e,j):e.D==1?af(h,m,e.e,n):e.Kb?af(h,m,e.e,p):af(h,m,e.e,i):af(h,m,e.e,g)}}if(s&Mb)for(d=h.ia;d;d=d.ka)f=h,e=d,e instanceof He?f.Oa.Ec(e.Qb(),e.Rb(),bf):e instanceof Pc?
(f.Oa.Ec(Rc(e),e.Qb(),bf),f.Oa.Ec(Sc(e),e.Rb(),bf),f.Oa.Ec(Rc(e),Sc(e),bf)):(e.s!=f.tg&&f.Oa.Ec(e.s.e.position,e.Qb(),bf),f.Oa.Ec(e.Qb(),e.Rb(),bf),e.u!=f.tg&&f.Oa.Ec(e.u.e.position,e.Rb(),bf));if(s&Qb)for(d=h.df.Da();d;d=d.next)d.jh.Jj(h.Oa);if(s&Ob){d=new ue(0.3,0.9,0.9);for(f=h.Ga.P;f;f=f.ka)h.Oa.Ec(Wb(f.U.Mc),Wb(f.Z.Mc),d)}if(s&Nb){g=new ue(0,0,0.8);for(d=h.Fb.Da(se);d;d=d.next){e=d.body;for(f=e.Kc.Da();f;f=f.next)m=f.tb,e=h.Ga.od.zd(m.Uc),h.Oa.$h([new G(e.lowerBound.x,e.lowerBound.y),new G(e.upperBound.x,
e.lowerBound.y),new G(e.upperBound.x,e.upperBound.y),new G(e.lowerBound.x,e.upperBound.y)],g)}}if(s&Pb)for(d=h.Fb.Da(ke);d;d=d.next)e=d.body,Tb.d=e.e.d,Tb.position=U(e),h.Oa.ci()}b.bb.style.visibility=""}b.display.style.visibility=""}};xf.prototype.start=function(){dc(this.viewport.kg);Ja(zf,this);Af||(Bf=document.getElementById("fps"),Af=o,Cf())};var Af=r,zf=[],Df=60,Ef=q,Bf=q;
function Cf(a){a==q&&(a=(new Date).getTime());var c=0;Ef!==q?c=(a-Ef)/1E3:Ef=a;if(c>0){c>0.2&&(c=0.2);if(Bf){for(var b=0,d=0,e=0;e<zf.length;e++)b+=zf[e].o.ga.Qf(),d+=zf[e].o.ga.Ga.Ce;e=1/c;Df=Df*0.99+e*0.01;Bf.innerHTML=Math.round(e)+" FPS<br>"+Math.round(Df)+" Rolling FPS<br>"+b+" World Objects<br>"+d+" Active Contacts"}Ef=a;for(e=0;e<zf.length;e++)zf[e].update(a,c);for(var g in yb)yb[g].Xh=o;tb=sb;vb=ub;xb=wb}gc(Cf,document.body)};function Ff(){this.type=0;this.W=this.T=q;this.bg=r};function Gf(){Ff.call(this);this.jf=new G(0,0);this.kf=new G(0,0);this.Ta=new G(0,0);this.Ua=new G(0,0);this.type=4;this.jf.j(-1,1);this.kf.j(1,1);this.Ta.j(-1,0);this.Ua.j(1,0);this.Lh=this.jg=this.Kh=this.ig=0;this.Yc=1;this.bg=o}B(Gf,Ff);
Gf.prototype.V=function(a,c,b,d,e,g,f){f===k&&(f=0);this.T=a;this.W=c;this.jf.m(b);this.kf.m(d);this.Ta=qc(this.T.e,e);this.Ua=qc(this.W.e,g);a=e.x-b.x;b=e.y-b.y;this.ig=Math.sqrt(a*a+b*b);b=g.x-d.x;d=g.y-d.y;this.jg=Math.sqrt(b*b+d*d);this.Yc=f;f=this.ig+this.Yc*this.jg;this.Kh=f-this.Yc*Qc;this.Lh=(f-Qc)/this.Yc};Gf.prototype.Cc=function(){return new Pc(this)};function Z(a,c,b){this.x=a;this.y=c;this.k=b}x=Z.prototype;x.N=function(){this.k=this.y=this.x=0};x.j=function(a,c,b){this.x=a;this.y=c;this.k=b};x.m=function(a){this.x=a.x;this.y=a.y;this.k=a.k};x.Bb=function(){return new Z(-this.x,-this.y,-this.k)};x.Sg=function(){this.x=-this.x;this.y=-this.y;this.k=-this.k};x.ca=function(){return new Z(this.x,this.y,this.k)};x.Ob=function(a){this.x+=a.x;this.y+=a.y;this.k+=a.k};x.Wf=function(a){this.x-=a.x;this.y-=a.y;this.k-=a.k};
x.hc=function(a){this.x*=a;this.y*=a;this.k*=a};function Hf(a,c,b){this.a=new Z(0,0,0);this.b=new Z(0,0,0);this.H=new Z(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.H.m(b)}x=Hf.prototype;x.ca=function(){return new Hf(this.a,this.b,this.H)};x.Bd=function(a){this.a.m(a.a);this.b.m(a.b);this.H.m(a.H)};x.Nf=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.k+=a.a.k;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.k+=a.b.k;this.H.x+=a.H.x;this.H.y+=a.H.y;this.H.k+=a.H.k};x.$e=function(){this.a.j(1,0,0);this.b.j(0,1,0);this.H.j(0,0,1)};
x.N=function(){this.a.j(0,0,0);this.b.j(0,0,0);this.H.j(0,0,0)};function If(a,c,b,d){var e=a.a.x,g=a.b.x,f=a.a.y,a=a.b.y,h=e*a-g*f;h!=0&&(h=1/h);c.x=h*(a*b-g*d);c.y=h*(e*d-f*b);return c}function Jf(a,c,b,d,e){var g=a.a.x,f=a.a.y,h=a.a.k,i=a.b.x,j=a.b.y,l=a.b.k,m=a.H.x,n=a.H.y,a=a.H.k,p=g*(j*a-l*n)+f*(l*m-i*a)+h*(i*n-j*m);p!=0&&(p=1/p);c.x=p*(b*(j*a-l*n)+d*(l*m-i*a)+e*(i*n-j*m));c.y=p*(g*(d*a-e*n)+f*(e*m-b*a)+h*(b*n-d*m));c.k=p*(g*(j*e-l*d)+f*(l*b-i*e)+h*(i*d-j*b));return c};function Kf(a){R.call(this,a);this.A=new G(0,0);this.B=new G(0,0);this.Sc=new G(0,0);this.wf=new G(0,0);this.C=new G(0,0);this.qa=new G(0,0);this.O=new Hf;this.i=new Z(0,0,0);this.A.m(a.Ta);this.B.m(a.Ua);this.Sc.m(a.lg);this.wf.x=-this.Sc.y;this.wf.y=this.Sc.x;this.mj=a.Zc;this.i.N();this.ua=this.cc=0;this.Qd=a.wh;this.Vd=a.Vh;this.kj=a.qj;this.wg=a.Bg;this.pd=a.ff;this.De=a.dg;this.$=0;this.C.N();this.qa.N()}B(Kf,R);x=Kf.prototype;x.Qb=function(){return S(this.s,this.A)};
x.Rb=function(){return S(this.u,this.B)};function Lf(a){var c=a.s,b=a.u,d=S(c,a.A),b=S(b,a.B),a=oc(c.e.d,a.Sc);return a.x*(b.x-d.x)+a.y*(b.y-d.y)}
x.Tb=function(a){var c=this.s,b=this.u,d,e=0;this.Ge.m(c.c.p);this.He.m(b.c.p);var g=c.hb();b.hb();d=c.e.d;var f=this.A.x-this.Ge.x,h=this.A.y-this.Ge.y,e=d.a.x*f+d.b.x*h,h=d.a.y*f+d.b.y*h,f=e;d=b.e.d;var i=this.B.x-this.He.x,j=this.B.y-this.He.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.g.x+i-c.c.g.x-f;e=b.c.g.y+j-c.c.g.y-h;this.xb=c.l;this.yb=b.l;this.Nc=c.v;this.Oc=b.v;this.C.m(oc(g.d,this.Sc));this.Ma=(d+f)*this.C.y-(e+h)*this.C.x;this.Na=i*this.C.y-j*this.C.x;this.cc=this.xb+this.yb+this.Nc*
this.Ma*this.Ma+this.Oc*this.Na*this.Na;if(this.cc>Number.MIN_VALUE)this.cc=1/this.cc;this.qa.m(oc(g.d,this.wf));this.Pa=(d+f)*this.qa.y-(e+h)*this.qa.x;this.Qa=i*this.qa.y-j*this.qa.x;g=this.xb;f=this.yb;h=this.Nc;i=this.Oc;this.O.a.x=g+f+h*this.Pa*this.Pa+i*this.Qa*this.Qa;this.O.a.y=h*this.Pa+i*this.Qa;this.O.a.k=h*this.Pa*this.Ma+i*this.Qa*this.Na;this.O.b.x=this.O.a.y;this.O.b.y=h+i;this.O.b.k=h*this.Ma+i*this.Na;this.O.H.x=this.O.a.k;this.O.H.y=this.O.b.k;this.O.H.k=g+f+h*this.Ma*this.Ma+i*
this.Na*this.Na;if(this.pd)if(d=this.C.x*d+this.C.y*e,Math.abs(this.Vd-this.Qd)<0.01)this.$=3;else if(d<=this.Qd){if(this.$!=1)this.$=1,this.i.k=0}else if(d>=this.Vd){if(this.$!=2)this.$=2,this.i.k=0}else this.$=0,this.i.k=0;else this.$=0;if(this.De==r)this.ua=0;a.xd?(this.i.x*=a.ab,this.i.y*=a.ab,this.ua*=a.ab,a=this.i.x*this.qa.x+(this.ua+this.i.k)*this.C.x,d=this.i.x*this.qa.y+(this.ua+this.i.k)*this.C.y,e=this.i.x*this.Pa+this.i.y+(this.ua+this.i.k)*this.Ma,g=this.i.x*this.Qa+this.i.y+(this.ua+
this.i.k)*this.Na,c.h.x-=this.xb*a,c.h.y-=this.xb*d,c.t-=this.Nc*e,b.h.x+=this.yb*a,b.h.y+=this.yb*d,b.t+=this.Oc*g):(this.i.N(),this.ua=0)};
x.Eb=function(a){var c=this.s,b=this.u,d=c.h,e=c.t,g=b.h,f=b.t,h=0,i=0,j=0,l=0;if(this.De&&this.$!=3)l=this.cc*(this.wg-(this.C.x*(g.x-d.x)+this.C.y*(g.y-d.y)+this.Na*f-this.Ma*e)),h=this.ua,i=a.ja*this.kj,this.ua=L(this.ua+l,-i,i),l=this.ua-h,h=l*this.C.x,i=l*this.C.y,j=l*this.Ma,l*=this.Na,d.x-=this.xb*h,d.y-=this.xb*i,e-=this.Nc*j,g.x+=this.yb*h,g.y+=this.yb*i,f+=this.Oc*l;i=this.qa.x*(g.x-d.x)+this.qa.y*(g.y-d.y)+this.Qa*f-this.Pa*e;j=f-e;if(this.pd&&this.$!=0){a=this.C.x*(g.x-d.x)+this.C.y*(g.y-
d.y)+this.Na*f-this.Ma*e;h=this.i.ca();a=Jf(this.O,new Z(0,0,0),-i,-j,-a);this.i.Ob(a);if(this.$==1)this.i.k=Math.max(this.i.k,0);else if(this.$==2)this.i.k=Math.min(this.i.k,0);i=If(this.O,new G(0,0),-i-(this.i.k-h.k)*this.O.H.x,-j-(this.i.k-h.k)*this.O.H.y);i.x+=h.x;i.y+=h.y;this.i.x=i.x;this.i.y=i.y;a.x=this.i.x-h.x;a.y=this.i.y-h.y;a.k=this.i.k-h.k;h=a.x*this.qa.x+a.k*this.C.x;i=a.x*this.qa.y+a.k*this.C.y;j=a.x*this.Pa+a.y+a.k*this.Ma;l=a.x*this.Qa+a.y+a.k*this.Na}else a=If(this.O,new G(0,0),
-i,-j),this.i.x+=a.x,this.i.y+=a.y,h=a.x*this.qa.x,i=a.x*this.qa.y,j=a.x*this.Pa+a.y,l=a.x*this.Qa+a.y;d.x-=this.xb*h;d.y-=this.xb*i;e-=this.Nc*j;g.x+=this.yb*h;g.y+=this.yb*i;f+=this.Oc*l;c.h.m(d);c.t=e;b.h.m(g);b.t=f};
x.Db=function(){var a=this.s,c=this.u,b=a.c.g,d=a.c.n,e=c.c.g,g=c.c.n,f,h=0,i=0,j=0,l=h=f=0,m=0,i=r,n=0,p=kc(d),t=kc(g);f=p;var m=this.A.x-this.Ge.x,s=this.A.y-this.Ge.y,h=f.a.x*m+f.b.x*s,s=f.a.y*m+f.b.y*s,m=h;f=t;t=this.B.x-this.He.x;j=this.B.y-this.He.y;h=f.a.x*t+f.b.x*j;j=f.a.y*t+f.b.y*j;t=h;f=e.x+t-b.x-m;h=e.y+j-b.y-s;if(this.pd){this.C=oc(p,this.Sc);this.Ma=(f+m)*this.C.y-(h+s)*this.C.x;this.Na=t*this.C.y-j*this.C.x;var v=this.C.x*f+this.C.y*h;Math.abs(this.Vd-this.Qd)<0.01?(n=L(v,-0.2,0.2),
l=Math.abs(v),i=o):v<=this.Qd?(n=L(v-this.Qd+0.005,-0.2,0),l=this.Qd-v,i=o):v>=this.Vd&&(n=L(v-this.Vd+0.005,0,0.2),l=v-this.Vd,i=o)}this.qa=oc(p,this.wf);this.Pa=(f+m)*this.qa.y-(h+s)*this.qa.x;this.Qa=t*this.qa.y-j*this.qa.x;p=new Z(0,0,0);s=this.qa.x*f+this.qa.y*h;t=g-d-this.mj;l=Math.max(l,Math.abs(s));m=Math.abs(t);i?(i=this.xb,j=this.yb,f=this.Nc,h=this.Oc,this.O.a.x=i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,this.O.a.y=f*this.Pa+h*this.Qa,this.O.a.k=f*this.Pa*this.Ma+h*this.Qa*this.Na,this.O.b.x=
this.O.a.y,this.O.b.y=f+h,this.O.b.k=f*this.Ma+h*this.Na,this.O.H.x=this.O.a.k,this.O.H.y=this.O.b.k,this.O.H.k=i+j+f*this.Ma*this.Ma+h*this.Na*this.Na,Jf(this.O,p,-s,-t,-n)):(i=this.xb,j=this.yb,f=this.Nc,h=this.Oc,n=f*this.Pa+h*this.Qa,v=f+h,this.O.a.j(i+j+f*this.Pa*this.Pa+h*this.Qa*this.Qa,n,0),this.O.b.j(n,v,0),n=If(this.O,new G(0,0),-s,-t),p.x=n.x,p.y=n.y,p.k=0);n=p.x*this.qa.x+p.k*this.C.x;i=p.x*this.qa.y+p.k*this.C.y;s=p.x*this.Pa+p.y+p.k*this.Ma;p=p.x*this.Qa+p.y+p.k*this.Na;b.x-=this.xb*
n;b.y-=this.xb*i;d-=this.Nc*s;e.x+=this.yb*n;e.y+=this.yb*i;g+=this.Oc*p;a.c.n=d;c.c.n=g;T(a);T(c);return l<=0.005&&m<=rc};function Mf(){Ff.call(this);this.Ta=new G(0,0);this.Ua=new G(0,0);this.lg=new G(0,0);this.type=2;this.lg.j(1,0);this.Zc=0;this.ff=r;this.Vh=this.wh=0;this.dg=r;this.Bg=this.qj=0}B(Mf,Ff);Mf.prototype.V=function(a,c,b,d){this.T=a;this.W=c;this.Ta=qc(this.T.e,b);this.Ua=qc(this.W.e,b);this.lg=pc(this.T.e.d,d);this.Zc=this.W.Sb()-this.T.Sb()};Mf.prototype.Cc=function(){return new Kf(this)};function Nf(a,c,b){this.execute=a;this.name=c;this.Ji=b};function $(a){this.ta=a;this.ta.o.Fa.push(this)}
$.prototype.rb=function(a,c){var b=jf(this.ta.o,a,c);$.Ri(b);$.Ti(b);$.Si(b);var d=new Q,e=new G(a.x/2,a.y/2);Jc(d,[new G(-e.x+0.01,e.y-0.01),new G(-e.x-0.01,0),new G(-e.x+0.01,-e.y+0.01),new G(e.x-0.01,-e.y+0.01),new G(e.x+0.01,0),new G(e.x-0.01,e.y-0.01)]);b.Rj=nf(b.body,d,{kc:{ub:0}});b.wa={};b.wa.Ef=new Nf(function(){b.f.mc.Ui()},"Move Up",o);b.wa.Df=new Nf(u(),"Move Down",o);b.wa.Wd=new Nf(function(){b.f.Yd.Wd()},"Move Left",o);b.wa.Xd=new Nf(function(){b.f.Yd.Xd()},"Move Right",o);return b};
(function(a){a.pb=0.1;a.Ij=new G(0,9.8);a.Dc={Ye:new G(0,9.8),ei:1.5,Tg:8,ii:1};a.Ub={Zh:1,di:2,gi:4,Hj:8,Og:16,Rg:32,Of:64};a.fi={hi:1,Gj:2,Kj:4};a.S={Cd:1,cd:2,ob:4,dd:8};a.hg=function(c,b){c.f=c.f||{};c.f.type|=a.Ub.Zh;c.f.ef={wj:b&a.S.Cd,tj:b&a.S.ob,uj:b&a.S.cd,vj:b&a.S.dd};c.pe.push(function(b,c,g,f,h,i,j){if(!b.disabled)if(b.disabled=o,g=new ve,Ld(b,g),g=g.K,b.U==j&&(g=g.Bb()),!c.f.ef.wj&&g.y<-a.pb)b.disabled=r;else if(!c.f.ef.tj&&g.y>a.pb)b.disabled=r;else if(!c.f.ef.vj&&g.x>a.pb)b.disabled=
r;else if(!c.f.ef.uj&&g.x<-a.pb)b.disabled=r})};a.Ri=function(c){var b=$.Dc.Tg;c.f=c.f||{};c.f.type|=a.Ub.di;c.f.mc={md:[],speed:b,Ui:function(){var b=c.f.mc.md;if(b.length>0){var e=c.body.q*c.f.mc.speed*a.Dc.ei,g=U(c.body),f=c.body.h;f.y=0;var h=c.body;h.D!=0&&h.h.m(f);Re(c.body,new G(0,-e),g);for(f=0;f<b.length;f++)Re(b[f].F(),new G(0,e/b.length),g)}}};c.ke.push(function(a,b,c,f,h,i,j,l){if(!a.disabled)if(b=new ve,Ld(a,b),b=b.K,a.U==l&&(b=b.Bb()),b.y>0.5){if(!(Ia(c.f.mc.md,l)>=0))Ja(c.f.mc.md,l),
a.vd=a.vd||[],Ja(a.vd,c)}else Ia(c.f.mc.md,l)>=0&&(Ka(c.f.mc.md,l),Ka(a.vd,c))})};a.Ti=function(c){var b=$.Dc.Tg,d=$.Dc.ii;c.f=c.f||{};c.f.type|=a.Ub.gi;c.f.Yd={dh:d,speed:b,Xd:function(){var a=c.body.h,a=Math.min(a.x+c.f.Yd.dh,c.f.Yd.speed)-a.x;a>0&&Re(c.body,new G(c.body.q*a,0),U(c.body))},Wd:function(){var a=c.body.h,a=Math.max(a.x-c.f.Yd.dh,-c.f.Yd.speed)-a.x;a<0&&Re(c.body,new G(c.body.q*a,0),U(c.body))}}};a.Jd=function(c,b,d,e){c.f=c.f||{};c.f.type|=a.Ub.Of;c.f.w=c.f.w||{};if(d&a.S.Cd)c.f.w.gg=
o,c.f.w.Re=c.f.w.Re||[],c.f.w.Re.push(b);if(d&a.S.ob)c.f.w.gg=o,c.f.w.qe=c.f.w.qe||[],c.f.w.qe.push(b);if(d&a.S.cd)c.f.w.gg=o,c.f.w.ye=c.f.w.ye||[],c.f.w.ye.push(b);if(d&a.S.dd)c.f.w.gg=o,c.f.w.Oe=c.f.w.Oe||[],c.f.w.Oe.push(b);if(e&a.S.Cd)c.f.w.lf=o,c.f.w.Se=c.f.w.Se||[],c.f.w.Se.push(b);if(e&a.S.ob)c.f.w.lf=o,c.f.w.re=c.f.w.re||[],c.f.w.re.push(b);if(e&a.S.cd)c.f.w.lf=o,c.f.w.ze=c.f.w.ze||[],c.f.w.ze.push(b);if(e&a.S.dd)c.f.w.lf=o,c.f.w.Pe=c.f.w.Pe||[],c.f.w.Pe.push(b)};a.Qi=function(c,b){c.f=c.f||
{};c.f.type|=a.Ub.Og;c.f.cg={Aj:b,filter:0}};a.Si=function(c){var b=$.fi.hi;c.f=c.f||{};c.f.type|=a.Ub.Rg;c.f.Xi={filter:b}};a.prototype.Vb=q;a.prototype.Wg=q;a.prototype.be=function(a){if(!a.disabled){var b=a.U,d=b.F().object,e=a.Z,g=e.F().object;d&&g&&(d.f&&this.Xg(a,d,g,e),g.f&&this.Xg(a,g,d,b))}};a.prototype.Xg=function(c,b,d,e){if(b.f.type&a.Ub.Of){var g=new ve;Ld(c,g);g=g.K;c.U==e&&(g=g.Bb());if(g.y<-a.pb&&b.f.w.Re)for(e=0;e<b.f.w.Re.length;e++)b.f.w.Re[e](c);else if(g.y>a.pb&&b.f.w.qe)for(e=
0;e<b.f.w.qe.length;e++)b.f.w.qe[e](c);if(g.x>a.pb&&b.f.w.ye)for(e=0;e<b.f.w.ye.length;e++)b.f.w.ye[e](c);else if(g.x<-a.pb&&b.f.w.Oe)for(e=0;e<b.f.w.Oe.length;e++)b.f.w.Oe[e](c)}b.f.type&a.Ub.Og&&d.f&&d.f.type&a.Ub.Rg&&(b.f.cg.filter==0||b.f.cg.filter&d.f.Xi.filter)&&qf(this.ta.o,d,b.f.cg.Aj)};a.prototype.yd=function(a){if(a.vd){for(var b=0;b<a.vd.length;b++){var d=a.vd[b];Ka(d.f.mc.md,a.U);Ka(d.f.mc.md,a.Z)}a.vd=q}if(!a.disabled){var b=a.U,d=b.F().object,e=a.Z,g=e.F().object;d&&g&&(d.f&&this.Yg(a,
d,e),g.f&&this.Yg(a,g,b))}};a.prototype.Yg=function(c,b,d){if(b.f.type&a.Ub.Of&&b.f.w.lf){var e=new ve;Ld(c,e);e=e.K;c.U==d&&(e=e.Bb());if(e.y<-a.pb&&b.f.w.Se)for(d=0;d<b.f.w.Se.length;d++)b.f.w.Se[d](c);else if(e.y>a.pb&&b.f.w.re)for(d=0;d<b.f.w.re.length;d++)b.f.w.re[d](c);if(e.x>a.pb&&b.f.w.ze)for(d=0;d<b.f.w.ze.length;d++)b.f.w.ze[d](c);else if(e.x<-a.pb&&b.f.w.Pe)for(d=0;d<b.f.w.Pe.length;d++)b.f.w.Pe[d](c)}};a.prototype.le=q;a.prototype.je=q;a.prototype.$a=function(a,b){return W(this.ta.o,a,
b,o)};a.prototype.Ic=function(c,b,d){c=W(this.ta.o,c,b,o,q,q);if(d===k||d===q)d=a.S.ob|a.S.cd|a.S.dd;a.hg(c,d);return c};a.prototype.Pi=function(c,b){var d=this;a.Jd(c,function(){pf(d.ta.o,c)},b,q)};a.prototype.te=function(c,b){var d,e=W(this.ta.o,c,b,o,q,q);if(d===k||d===q)d=a.S.ob;this.Pi(e,d);return e};a.prototype.zi=function(c,b,d){c=W(this.ta.o,c,b,o,q,q);a.Qi(c,d);return c}})($);function Of(){Ff.call(this);this.Ta=new G(0,0);this.Ua=new G(0,0);this.type=3;this.length=1;this.nh=this.sh=0}B(Of,Ff);Of.prototype.V=function(a,c,b,d){this.T=a;this.W=c;this.Ta.m(qc(this.T.e,b));this.Ua.m(qc(this.W.e,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.nh=this.sh=0};Of.prototype.Cc=function(){return new He(this)};function Pf(a){R.call(this,a);this.Qc=new G(0,0);this.Rc=new G(0,0);this.i=new Z(0,0,0);this.q=new Hf;this.Qc.m(a.Ta);this.Rc.m(a.Ua);this.Je=a.Zc}B(Pf,R);x=Pf.prototype;x.Qb=function(){return S(this.s,this.Qc)};x.Rb=function(){return S(this.u,this.Rc)};
x.Tb=function(a){var c,b=0,d=this.s,e=this.u;c=d.e.d;var g=this.Qc.x-d.c.p.x,f=this.Qc.y-d.c.p.y,b=c.a.x*g+c.b.x*f,f=c.a.y*g+c.b.y*f,g=b;c=e.e.d;var h=this.Rc.x-e.c.p.x,i=this.Rc.y-e.c.p.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.l;var b=e.l,j=d.v,l=e.v;this.q.a.x=c+b+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=c+b+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;a.xd?(this.i.x*=a.ab,this.i.y*=a.ab,this.i.k*=
a.ab,d.h.x-=c*this.i.x,d.h.y-=c*this.i.y,d.t-=j*(g*this.i.y-f*this.i.x+this.i.k),e.h.x+=b*this.i.x,e.h.y+=b*this.i.y,e.t+=l*(h*this.i.y-i*this.i.x+this.i.k)):this.i.N()};
x.Eb=function(){var a,c=0,b=this.s,d=this.u,e=b.h,g=b.t,f=d.h,h=d.t,i=b.l,j=d.l,l=b.v,m=d.v;a=b.e.d;var n=this.Qc.x-b.c.p.x,p=this.Qc.y-b.c.p.y,c=a.a.x*n+a.b.x*p,p=a.a.y*n+a.b.y*p,n=c;a=d.e.d;var t=this.Rc.x-d.c.p.x,s=this.Rc.y-d.c.p.y,c=a.a.x*t+a.b.x*s,s=a.a.y*t+a.b.y*s,t=c;a=new Z(0,0,0);Jf(this.q,a,-(f.x-h*s-e.x+g*p),-(f.y+h*t-e.y-g*n),-(h-g));this.i.Ob(a);e.x-=i*a.x;e.y-=i*a.y;g-=l*(n*a.y-p*a.x+a.k);f.x+=j*a.x;f.y+=j*a.y;h+=m*(t*a.y-s*a.x+a.k);b.t=g;d.t=h};
x.Db=function(){var a,c=0,b=this.s,d=this.u;a=b.e.d;var e=this.Qc.x-b.c.p.x,g=this.Qc.y-b.c.p.y,c=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=c;a=d.e.d;var f=this.Rc.x-d.c.p.x,h=this.Rc.y-d.c.p.y,c=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=c;a=b.l;var c=d.l,i=b.v,j=d.v,l=d.c.g.x+f-b.c.g.x-e,m=d.c.g.y+h-b.c.g.y-g,n=d.c.n-b.c.n-this.Je,p=Math.sqrt(l*l+m*m),t=Math.abs(n);p>0.05&&(i*=1,j*=1);this.q.a.x=a+c+g*g*i+h*h*j;this.q.b.x=-g*e*i-h*f*j;this.q.H.x=-g*i-h*j;this.q.a.y=this.q.b.x;this.q.b.y=a+c+e*e*i+f*f*j;this.q.H.y=
e*i+f*j;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=i+j;var s=new Z(0,0,0);Jf(this.q,s,-l,-m,-n);b.c.g.x-=a*s.x;b.c.g.y-=a*s.y;b.c.n-=i*(e*s.y-g*s.x+s.k);d.c.g.x+=c*s.x;d.c.g.y+=c*s.y;d.c.n+=j*(f*s.y-h*s.x+s.k);T(b);T(d);return p<=0.005&&t<=rc};function Qf(){Ff.call(this);this.Ta=new G(0,0);this.Ua=new G(0,0);this.type=8;this.Zc=0}B(Qf,Ff);Qf.prototype.V=function(a,c,b){this.T=a;this.W=c;this.Ta.m(qc(this.T.e,b));this.Ua.m(qc(this.W.e,b));this.Zc=this.W.Sb()-this.T.Sb()};Qf.prototype.Cc=function(){return new Pf(this)};function Rf(a){R.call(this,a);this.Cb=new jc;this.ge=new jc;this.he=new jc;this.ie=new jc;this.Aa=new Z(0,0,0);this.Hb=new G(0,0);this.ec=new G(0,0);this.A=new G(0,0);this.B=new G(0,0);this.i=new Z(0,0,0);this.q=new Hf;this.A.m(a.Ta);this.B.m(a.Ua);this.Je=a.Zc;this.i.N();this.ua=0;this.xf=a.Yi;this.Ag=a.Fj;this.lj=a.rj;this.wg=a.Bg;this.pd=a.ff;this.De=a.dg;this.$=0}B(Rf,R);x=Rf.prototype;x.Qb=function(){return S(this.s,this.A)};x.Rb=function(){return S(this.u,this.B)};
function Sf(a){return a.u.c.n-a.s.c.n-a.Je}
x.Tb=function(a){var c=this.s,b=this.u,d,e=0;d=c.e.d;var g=this.A.x-c.c.p.x,f=this.A.y-c.c.p.y,e=d.a.x*g+d.b.x*f,f=d.a.y*g+d.b.y*f,g=e;d=b.e.d;var h=this.B.x-b.c.p.x,i=this.B.y-b.c.p.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.l;var e=b.l,j=c.v,l=b.v;this.q.a.x=d+e+f*f*j+i*i*l;this.q.b.x=-f*g*j-i*h*l;this.q.H.x=-f*j-i*l;this.q.a.y=this.q.b.x;this.q.b.y=d+e+g*g*j+h*h*l;this.q.H.y=g*j+h*l;this.q.a.k=this.q.H.x;this.q.b.k=this.q.H.y;this.q.H.k=j+l;this.cc=1/(j+l);if(!this.De)this.ua=0;if(this.pd){var m=
b.c.n-c.c.n-this.Je;if(Math.abs(this.Ag-this.xf)<2*rc)this.$=3;else if(m<=this.xf){if(this.$!=1)this.i.k=0;this.$=1}else if(m>=this.Ag){if(this.$!=2)this.i.k=0;this.$=2}else this.$=0,this.i.k=0}else this.$=0;a.xd?(this.i.x*=a.ab,this.i.y*=a.ab,this.ua*=a.ab,a=this.i.x,m=this.i.y,c.h.x-=d*a,c.h.y-=d*m,c.t-=j*(g*m-f*a+this.ua+this.i.k),b.h.x+=e*a,b.h.y+=e*m,b.t+=l*(h*m-i*a+this.ua+this.i.k)):(this.i.N(),this.ua=0)};
x.Eb=function(a){var c=this.s,b=this.u,d=0,e=d=0,g=0,f=0,h=0,i=c.h,j=c.t,l=b.h,m=b.t,n=c.l,p=b.l,t=c.v,s=b.v;if(this.De&&this.$!=3)e=this.cc*-(m-j-this.wg),g=this.ua,f=a.ja*this.lj,this.ua=L(this.ua+e,-f,f),e=this.ua-g,j-=t*e,m+=s*e;if(this.pd&&this.$!=0){var a=c.e.d,e=this.A.x-c.c.p.x,g=this.A.y-c.c.p.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.e.d,f=this.B.x-b.c.p.x,h=this.B.y-b.c.p.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,a=l.x+-m*h-i.x- -j*g,v=l.y+m*f-i.y-j*e;Jf(this.q,this.Aa,-a,-v,-(m-j));
if(this.$==3)this.i.Ob(this.Aa);else if(this.$==1){if(d=this.i.k+this.Aa.k,d<0)If(this.q,this.ec,-a,-v),this.Aa.x=this.ec.x,this.Aa.y=this.ec.y,this.Aa.k=-this.i.k,this.i.x+=this.ec.x,this.i.y+=this.ec.y,this.i.k=0}else if(this.$==2&&(d=this.i.k+this.Aa.k,d>0))If(this.q,this.ec,-a,-v),this.Aa.x=this.ec.x,this.Aa.y=this.ec.y,this.Aa.k=-this.i.k,this.i.x+=this.ec.x,this.i.y+=this.ec.y,this.i.k=0;i.x-=n*this.Aa.x;i.y-=n*this.Aa.y;j-=t*(e*this.Aa.y-g*this.Aa.x+this.Aa.k);l.x+=p*this.Aa.x;l.y+=p*this.Aa.y;
m+=s*(f*this.Aa.y-h*this.Aa.x+this.Aa.k)}else a=c.e.d,e=this.A.x-c.c.p.x,g=this.A.y-c.c.p.y,d=a.a.x*e+a.b.x*g,g=a.a.y*e+a.b.y*g,e=d,a=b.e.d,f=this.B.x-b.c.p.x,h=this.B.y-b.c.p.y,d=a.a.x*f+a.b.x*h,h=a.a.y*f+a.b.y*h,f=d,If(this.q,this.Hb,-(l.x+-m*h-i.x- -j*g),-(l.y+m*f-i.y-j*e)),this.i.x+=this.Hb.x,this.i.y+=this.Hb.y,i.x-=n*this.Hb.x,i.y-=n*this.Hb.y,j-=t*(e*this.Hb.y-g*this.Hb.x),l.x+=p*this.Hb.x,l.y+=p*this.Hb.y,m+=s*(f*this.Hb.y-h*this.Hb.x);c.h.m(i);c.t=j;b.h.m(l);b.t=m};
x.Db=function(){var a=0,c,b=this.s,d=this.u,e=0,g=c=0,f=0,h=0;if(this.pd&&this.$!=0){var a=d.c.n-b.c.n-this.Je,i=0;this.$==3?(a=L(a-this.xf,-sc,sc),i=-this.cc*a,e=Math.abs(a)):this.$==1?(a-=this.xf,e=-a,a=L(a+rc,-sc,0),i=-this.cc*a):this.$==2&&(a-=this.Ag,e=a,a=L(a-rc,0,sc),i=-this.cc*a);b.c.n-=b.v*i;d.c.n+=d.v*i;T(b);T(d)}c=b.e.d;i=this.A.x-b.c.p.x;a=this.A.y-b.c.p.y;g=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=g;c=d.e.d;var j=this.B.x-d.c.p.x,l=this.B.y-d.c.p.y,g=c.a.x*j+c.b.x*l,l=c.a.y*j+c.b.y*l,j=g,
f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a,m=f*f+h*h;c=Math.sqrt(m);var g=b.l,n=d.l,p=b.v,t=d.v;m>0.05*0.05&&(m=1/(g+n),f=m*-f,h=m*-h,b.c.g.x-=0.5*g*f,b.c.g.y-=0.5*g*h,d.c.g.x+=0.5*n*f,d.c.g.y+=0.5*n*h,f=d.c.g.x+j-b.c.g.x-i,h=d.c.g.y+l-b.c.g.y-a);this.ge.a.x=g+n;this.ge.b.x=0;this.ge.a.y=0;this.ge.b.y=g+n;this.he.a.x=p*a*a;this.he.b.x=-p*i*a;this.he.a.y=-p*i*a;this.he.b.y=p*i*i;this.ie.a.x=t*l*l;this.ie.b.x=-t*j*l;this.ie.a.y=-t*j*l;this.ie.b.y=t*j*j;this.Cb.Bd(this.ge);this.Cb.Nf(this.he);this.Cb.Nf(this.ie);
this.Cb.oe(Tf,-f,-h);f=Tf.x;h=Tf.y;b.c.g.x-=b.l*f;b.c.g.y-=b.l*h;b.c.n-=b.v*(i*h-a*f);d.c.g.x+=d.l*f;d.c.g.y+=d.l*h;d.c.n+=d.v*(j*h-l*f);T(b);T(d);return c<=0.005&&e<=rc};var Tf=new G(0,0);function Uf(){Ff.call(this);this.Ta=new G(0,0);this.Ua=new G(0,0);this.type=1;this.Ta.N();this.Ua.N();this.Bg=this.rj=this.Fj=this.Yi=this.Zc=0;this.dg=this.ff=r}B(Uf,Ff);Uf.prototype.V=function(a,c,b){this.T=a;this.W=c;this.Ta=qc(this.T.e,b);this.Ua=qc(this.W.e,b);this.Zc=this.W.Sb()-this.T.Sb()};Uf.prototype.Cc=function(){return new Rf(this)};function Vf(){this.Ib=new G(0,0);this.Jb=new G(0,0)}Vf.prototype.N=function(){this.Ib.N();this.ed=0;this.Jb.N();this.fd=0};Vf.prototype.j=function(a,c,b,d){c===k&&(c=0);d===k&&(d=0);this.Ib.m(a);this.ed=c;this.Jb.m(b);this.fd=d};function Wf(a){R.call(this,a);this.ac=new G(0,0);this.bc=new G(0,0);this.A=new G(0,0);this.B=new G(0,0);this.ha=new Vf;var c=a.Kd.D,b=a.Ld.D;this.Td=this.td=this.Sd=this.sd=q;var d=0,e=0;this.dj=a.Kd.s;this.s=a.Kd.u;c==1?(this.sd=a.Kd,this.ac.m(this.sd.A),this.A.m(this.sd.B),d=Sf(this.sd)):(this.Sd=a.Kd,this.ac.m(this.Sd.A),this.A.m(this.Sd.B),d=Lf(this.Sd));this.ej=a.Ld.s;this.u=a.Ld.u;b==1?(this.td=a.Ld,this.bc.m(this.td.A),this.B.m(this.td.B),e=Sf(this.td)):(this.Td=a.Ld,this.bc.m(this.Td.A),this.B.m(this.Td.B),
e=Lf(this.Td));this.ma=a.Yc;this.Nd=d+this.ma*e;this.i=0}B(Wf,R);x=Wf.prototype;x.Qb=function(){return S(this.s,this.A)};x.Rb=function(){return S(this.u,this.B)};
x.Tb=function(a){var c=this.dj,b=this.ej,d=this.s,e=this.u,g=0,f=0,h=0,i=0,j=h=0,l=0;this.ha.N();this.sd?(this.ha.ed=-1,l+=d.v):(c=c.e.d,f=this.Sd.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=d.e.d,h=this.A.x-d.c.p.x,i=this.A.y-d.c.p.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ha.Ib.j(-g,-f),this.ha.ed=-h,l+=d.l+d.v*h*h);this.td?(this.ha.fd=-this.ma,l+=this.ma*this.ma*e.v):(c=b.e.d,f=this.Td.Sc,g=c.a.x*f.x+c.b.x*f.y,f=c.a.y*f.x+c.b.y*f.y,c=e.e.d,h=this.B.x-e.c.p.x,i=this.B.y-e.c.p.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*f-i*g,this.ha.Jb.j(-this.ma*g,-this.ma*f),this.ha.fd=-this.ma*h,l+=this.ma*this.ma*(e.l+e.v*h*h));this.q=l>0?1/l:0;a.xd?(d.h.x+=d.l*this.i*this.ha.Ib.x,d.h.y+=d.l*this.i*this.ha.Ib.y,d.t+=d.v*this.i*this.ha.ed,e.h.x+=e.l*this.i*this.ha.Jb.x,e.h.y+=e.l*this.i*this.ha.Jb.y,e.t+=e.v*this.i*this.ha.fd):this.i=0};
x.Eb=function(){var a=this.s,c=this.u,b=this.ha,d=a.h,e=a.t,g=c.h,f=c.t;e===k&&(e=0);f===k&&(f=0);b=-this.q*(b.Ib.x*d.x+b.Ib.y*d.y+b.ed*e+(b.Jb.x*g.x+b.Jb.y*g.y)+b.fd*f);this.i+=b;a.h.x+=a.l*b*this.ha.Ib.x;a.h.y+=a.l*b*this.ha.Ib.y;a.t+=a.v*b*this.ha.ed;c.h.x+=c.l*b*this.ha.Jb.x;c.h.y+=c.l*b*this.ha.Jb.y;c.t+=c.v*b*this.ha.fd};
x.Db=function(){var a=this.s,c=this.u,b=0,d=0,b=this.sd?Sf(this.sd):Lf(this.Sd),d=this.td?Sf(this.td):Lf(this.Td),b=-this.q*(this.Nd-(b+this.ma*d));a.c.g.x+=a.l*b*this.ha.Ib.x;a.c.g.y+=a.l*b*this.ha.Ib.y;a.c.n+=a.v*b*this.ha.ed;c.c.g.x+=c.l*b*this.ha.Jb.x;c.c.g.y+=c.l*b*this.ha.Jb.y;c.c.n+=c.v*b*this.ha.fd;T(a);T(c);return o};function Xf(){Ff.call(this);this.type=6;this.Ld=this.Kd=q;this.Yc=1}B(Xf,Ff);Xf.prototype.V=function(a,c,b){this.Kd=a;this.T=a.s;this.Ld=c;this.W=c.s;this.Yc=b};Xf.prototype.Cc=function(){return new Wf(this)};var Yf={};
(function(a){var c,b=new G(350,30),d=new G(1E3,300),e,g,f,h;a.vb=function(c,e,g){f=new xf(a,c,b,$.Dc.Ye,d,20,e);h=new $(f);a.rb(new G(5,b.y-15),g);a.kh(f,new G(5,b.y));yf(f)};a.rb=function(a,b){var d=new G(0,0),m=new G(21,47),n=new G(m.x/20,m.y/20);c=h.rb(n,a);sf(f.Wb,c,n,d,m);g=new qb("game");F(g,new Nf(function(){f.paused=!f.paused},"Pause",r),80,r,r,r);e=new qb("player");F(e,c.wa.Ef,b?87:38,r,r,r);F(e,c.wa.Wd,b?65:37,r,r,r);F(e,c.wa.Df,b?83:40,r,r,r);F(e,c.wa.Xd,b?68:39,r,r,r)};a.kh=function(a,
b){var c=b.ca();c.y-=10;for(var d=new G(2.5,0.1),e=q,f=0;f<30;f++){c.x+=d.x/2;var g;g=f!=0&&f!=29?hf(a.o,d,c,o):W(a.o,d,c,o);if(e!=q){var h=new Uf,v=new G(U(e.body).x+U(g.body).x,U(e.body).y+U(g.body).y);v.hc(0.5);h.V(e.body,g.body,v);V(a.o.ga,h)}e=g;c.x+=d.x/2;c.x+=0.5}};a.Ue=function(a,b){D(g,b)};a.Me=function(a,b){D(g,b);D(e,b)};a.Le=function(){$b(f.viewport,U(c.body))}})(Yf);da("bridge.init",Yf.vb);var Zf={};
(function(a){var c,b=new G(350,30),d=new G(600,300),e,g,f,h,i=new G(0,454),j=new G(178,326),l=new G(2,124),m=new G(354,54),n=new G(0,58),p=new G(290,54),t=new G(178,326),s=new G(0,0),v=new G(32,84),w=new G(354,54),O=new G(0,90),J=new G(0,0),P=new G(2,158),y=new G(158,388),E=new G(190,388),X=new G(158,356),bg=new G(190,356),cg=new G(158,356),dg=new G(190,356),eg=new G(55,380),fg=new G(10,396),gg=new G(466,168),hg=new G(452,136),ig=new G(466,104),jg=new G(300,424),kg=new G(300,352),lg=new G(364,424),
mg=new G(364,384),ng=new G(332,352),og=new G(332,320),pg=new G(396,352),qg=new G(396,320),rg=new G(364,352),sg=new G(362,264),tg=new G(160,64);a.vb=function(c,e,g){f=new xf(a,c,b,$.Dc.Ye,d,20,e);h=new $(f);c=new G(5,b.y-7);a.rb(c,g);a.lh(f,h,new G(0,b.y),c);g=Y(f.o,new G(d.x/20,d.y/20),new G(0,0),-1);H(g,"graphics/sky.png");g.display.Ff=1;yf(f)};a.rb=function(a,b){var d=new G(0,0),i=new G(21,47),j=new G(i.x/20,i.y/20);c=h.rb(j,a);sf(f.Wb,c,j,d,i);g=new qb("game");F(g,new Nf(function(){f.paused=!f.paused},
"Pause",r),80,r,r,r);e=new qb("player");F(e,c.wa.Ef,b?87:38,r,r,r);F(e,c.wa.Wd,b?65:37,r,r,r);F(e,c.wa.Df,b?83:40,r,r,r);F(e,c.wa.Xd,b?68:39,r,r,r)};a.lh=function(b,c,d,e){for(var f=new G(1.6,1.6),g=new G(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new G(g.x,g.y-f.y*(d.length-1)),h=0;h<d.length;h++)for(var i=0;i<d[h].length;i++)a.Bi(b,c,d[h][i],new G(i,h),g,f,e)};a.Bi=function(a,b,c,d,e,f,g){var h=q,A=q;switch(c){case " ":break;case "-":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=i;break;case "=":h=b.$a(f,new G(e.x+d.x*
f.x,e.y+d.y*f.y));A=l;break;case "O":h=b.te(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));$.Jd(h,function(){var c=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.o,f,new G(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",n)},$.S.ob);A=m;break;case "@":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));h.gh=8;h.ag=0;$.Jd(h,function(){h.ag++;var c=Y(a.o,f,new G(e.x+d.x*f.x,e.y+(d.y-h.ag/h.gh)*f.y));H(c,"graphics/smbsheet.gif",n);h.ag==h.gh&&(pf(a.o,h),c=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*
f.y)),H(c,"graphics/smbsheet.gif",p))},$.S.ob);A=t;break;case "#":h=b.te(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=j;break;case "1":h=b.te(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));$.hg(h,$.S.Cd|$.S.cd|$.S.dd);$.Jd(h,function(){var c=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.o,f,new G(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",P)},$.S.ob);A=J;break;case "*":h=b.te(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));$.hg(h,$.S.Cd|$.S.cd|$.S.dd);$.Jd(h,function(){var c=b.$a(f,new G(e.x+
d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.o,f,new G(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",v)},$.S.ob);A=s;break;case "M":h=b.te(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));$.Jd(h,function(){var c=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.o,f,new G(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",O)},$.S.ob);A=w;break;case "[":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=y;break;case "]":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=
E;break;case "<":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=X;break;case ">":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=bg;break;case "{":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=cg;break;case "}":h=b.$a(f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=dg;break;case "T":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=eg;break;case "G":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=fg;break;case "|":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=gg;break;case "F":h=Y(a.o,f,new G(e.x+d.x*f.x+f.x/2,e.y+d.y*f.y),1);A=hg;
break;case "o":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=ig;break;case "+":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=jg;break;case "^":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=kg;break;case "8":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=lg;break;case "u":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=mg;break;case "R":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=og;break;case "r":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=ng;break;case "L":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=qg;break;
case "l":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=pg;break;case "&":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y));A=rg;break;case "$":h=Y(a.o,f,new G(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));A=sg;break;case "x":h=b.zi(f,new G(e.x+d.x*f.x,e.y+d.y*f.y),g);A=tg;break;default:throw"Invalid type: "+c;}h!==q&&"graphics/smbsheet.gif"!==q&&A!==q&&H(h,"graphics/smbsheet.gif",A)};a.Ue=function(a,b){D(g,b)};a.Me=function(a,b){D(g,b);D(e,b)};a.Le=function(){$b(f.viewport,U(c.body))}})(Zf);da("mario.init",Zf.vb);var $f={};
(function(a){var c,b=new G(3500,100),d=new G(1024,600),e,g,f,h;a.vb=function(c,e,g){f=new xf(a,c,b,$.Dc.Ye,d,20,e);h=new $(f);c=new G(5,b.y-7-24);a.rb(c,g);Zf.lh(f,h,new G(0,b.y),c);g=0;g++;Yf.kh(f,new G(15,b.y-(3.2+g*24)));a.Ci(++g);a.Ei(++g);a.Di(g);a.Ai();yf(f)};a.rb=function(a,b){var d=new G(0,0),m=new G(21,47),n=new G(m.x/20,m.y/20);c=h.rb(n,a);sf(f.Wb,c,n,d,m);g=new qb("game");F(g,new Nf(function(){f.paused=!f.paused},"Pause",r),80,r,r,r);e=new qb("player");F(e,c.wa.Ef,b?87:38,r,r,r);F(e,c.wa.Wd,
b?65:37,r,r,r);F(e,c.wa.Df,b?83:40,r,r,r);F(e,c.wa.Xd,b?68:39,r,r,r)};a.Di=function(a){for(var c=new G(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Ic(c,new G(4,b.y-f-e)),h.Ic(c,new G(10,b.y-f-e));h.Ic(new G(b.x-15,0.25),new G((b.x-15)/2+15,b.y-e-24))}h.Ic(new G(1,1),new G(12,b.y-3.2-3.5),$.S.cd);h.Ic(new G(1,1),new G(15,b.y-3.2-3.5),$.S.dd);h.Ic(new G(1,1),new G(18,b.y-3.2-3.5),$.S.Cd);h.Ic(new G(1,1),new G(21,b.y-3.2-3.5),$.S.ob);a=h.Ic(new G(1,1),new G(24,b.y-3.2-3.5),$.S.ob).body;
Qe(a,a.e.position,Math.PI/2)};a.Ei=function(a){for(var a=new G(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,W(f.o,new G(3,0.3),new G(a.x,a.y-1.5),o,{Ya:c},q),a.x+=3.5};a.Ci=function(a){for(var a=new G(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new Uf,e=new Qf;a.x+=5;var g={Ya:Math.random()*Math.PI},h=a.y-7.5,t=W(f.o,new G(0.01,0.01),new G(a.x,h),r,{xa:g}),s=hf(f.o,new G(10,1),new G(a.x,h),o,{xa:g});H(s,"graphics/spinner.png");g.Ya+=Math.PI/2;g=hf(f.o,new G(10,1),new G(a.x,h),o,{xa:g});
H(g,"graphics/spinner.png");d.V(t.body,s.body,U(t.body));V(f.o.ga,d);d.V(t.body,g.body,U(t.body));V(f.o.ga,d);e.V(s.body,g.body,U(s.body));V(f.o.ga,e);a.x+=7}for(c=0;c<1;c++)g={Jc:o},d=new Of,a.x+=2,h=a.y-6,s=hf(f.o,new G(3,0.2),new G(a.x+0.1,h+2),o,{xa:g}),e=hf(f.o,new G(3,0.2),new G(a.x+0.1,h-2),o,{xa:g}),t=hf(f.o,new G(0.2,3),new G(a.x-2,h+0.1),o,{xa:g}),g=hf(f.o,new G(0.2,3),new G(a.x+2,h+0.1),o,{xa:g}),d.V(s.body,e.body,U(s.body),U(e.body)),V(f.o.ga,d),d.V(s.body,t.body,U(s.body),U(t.body)),
V(f.o.ga,d),d.V(s.body,g.body,U(s.body),U(g.body)),V(f.o.ga,d),d.V(e.body,t.body,U(e.body),U(t.body)),V(f.o.ga,d),d.V(e.body,g.body,U(e.body),U(g.body)),V(f.o.ga,d),d.V(t.body,g.body,U(t.body),U(g.body)),V(f.o.ga,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,g={Jc:o},d=new Gf,a.x+=1.5,t=hf(f.o,new G(3,0.3),new G(a.x+1.5,h),o,{xa:g}),a.x+=6,g=hf(f.o,new G(3,0.3),new G(a.x+1.5,h),o,{xa:g}),h=U(t.body).ca(),h.y-=3,Y(f.o,new G(0.3,0.3),h),s=U(g.body).ca(),s.y-=3,Y(f.o,new G(0.3,0.3),s),d.V(t.body,g.body,h,s,U(t.body),
U(g.body),(c+1)/2),V(f.o.ga,d),a.x+=3.5;for(c=0;c<2;c++){var d=new Xf,v=new Uf;new Mf;g={Ya:0};a.x+=2;for(var e=q,w=0;w<2;w++)h=a.y-(w+1)*4,t=W(f.o,new G(0.01,0.01),new G(a.x,h),r,{xa:g}),s=hf(f.o,new G(4,0.2),new G(a.x,h),o,{xa:g}),v.V(t.body,s.body,U(t.body)),h=V(f.o.ga,v),e!==q&&(d.V(h,e,w),V(f.o.ga,d)),e=h;h=a.y-12;t=W(f.o,new G(0.01,0.01),new G(a.x,h),r,{xa:g});s=hf(f.o,new G(0.4,0.2),new G(a.x,h),o,{xa:g});g=new Mf;g.V(t.body,s.body,U(t.body),new G(Math.random(),Math.random()));g.ff=o;g.wh=
-1;g.Vh=1;h=V(f.o.ga,g);d.V(h,e,0.5);V(f.o.ga,d);a.x+=4}};a.Ai=function(){for(var a={type:2,Jc:r},c={yc:1.25},d=new Rd(0.25),e=new G(0.5,0.5),g=0;g<5;g++){var h=g*5%(b.x-10),h=new G(h+g%20/20+4.5,15+g%20);f.o.Gb(e,h,o,d,{xa:a,kc:c})}d=new Q;Lc(d,0.25,0.25);for(g=0;g<5;g++)h=g*5%(b.x-10),h=new G(h+(g+5)%20/20+4.5,15+(g+5)%20),a.Ya=g%17/17,f.o.Gb(e,h,o,d,{xa:a,kc:c});d=new Q;Kc(d,[new G(-0.5,-0.5),new G(0.5,-0.5),new G(-0.5,0.5)]);for(g=0;g<5;g++)h=g*5%(b.x-10),h=new G(h+(g+10)%20/20+4.5,15+(g+10)%
20),a.Ya=g%22/22,f.o.Gb(e,h,o,d,{xa:a,kc:c});d=new Q;Kc(d,[new G(-Math.random()*0.5,-Math.random()*0.5),new G(Math.random()*0.5,-Math.random()*0.5),new G(Math.random()*0.5,Math.random()*0.5),new G(-Math.random()*0.5,Math.random()*0.5)]);for(g=0;g<5;g++)h=g*5%(b.x-10),h=new G(h+(g+15)%20/20+4.5,15+(g+15)%20),a.Ya=g%35/35,f.o.Gb(e,h,o,d,{xa:a,kc:c});d=new Q;Kc(d,[new G(-0.5,-0.5),new G(0,-0.5),new G(0.5,0),new G(0.5,0.5),new G(0,0.3)]);for(g=0;g<5;g++)h=g*5%(b.x-10),h=new G(h+(g+15)%20/20+4.5,15+(g+
15)%20),a.Ya=g%35/35,f.o.Gb(e,h,o,d,{xa:a,kc:c})};a.Ue=function(a,b){D(g,b)};a.Me=function(a,b){D(g,b);D(e,b)};a.Le=function(){$b(f.viewport,U(c.body))}})($f);da("test.init",$f.vb);var ag={};
(function(a){var c,b=new G(5,10),d=new G(100,200),e,g,f,h;a.vb=function(c,e,g){f=new xf(a,c,b,$.Dc.Ye,d,20,e);h=new $(f);c=new G(2,2);a.Fi();a.rb(c,g);yf(f)};a.rb=function(a,b){var d=new G(0,0),m=new G(21,47),n=new G(m.x/20,m.y/20);c=h.rb(n,a);sf(f.Wb,c,n,d,m);g=new qb("game");F(g,new Nf(function(){f.paused=!f.paused},"Pause",r),80,r,r,r);e=new qb("player");F(e,c.wa.Ef,b?87:38,r,r,r);F(e,c.wa.Wd,b?65:37,r,r,r);F(e,c.wa.Df,b?83:40,r,r,r);F(e,c.wa.Xd,b?68:39,r,r,r)};a.Fi=function(){h.$a(new G(b.x,0.5),
new G(b.x/2,b.y-0.25));a.yi(new G(b.x,6),new G(0,b.y-0.25))};a.yi=function(a,b){W(f.o,new G(0.25,a.y),new G(b.x+0,b.y-a.y/2),o,q,q);W(f.o,new G(0.25,a.y),new G(b.x+a.x-0.125,b.y-a.y/2),o,q,q);for(var c=new Rd(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var g=0;g<a.y/2;g+=0.3){var h=f.o.Gb(new G(0.3,0.3),new G(b.x+e-d++%2*0.15,b.y-g),o,c,{kc:{ue:0.1,yc:0.1,ub:0.1}}),s=Math.random();s<=0.25?H(h,"graphics/ball-red.png"):s<=0.5?H(h,"graphics/ball-green.png"):s<=0.75?H(h,"graphics/ball-yellow.png"):H(h,"graphics/ball-blue.png")}};
a.Ue=function(a,b){D(g,b)};a.Me=function(a,b){D(g,b);D(e,b)};a.Le=function(){$b(f.viewport,U(c.body))}})(ag);da("pit.init",ag.vb);})();
