(function(){var m=void 0,n=true,p=null,q=false;function aa(){return function(){}}function ba(a){return function(c){this[a]=c}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var u,w=this;function da(a,c){var b=a.split("."),d=w;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==m?d[e]=c:d=d[e]?d[e]:d[e]={}}function fa(){}
function ga(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0;function y(a,c){function b(){}b.prototype=c.prototype;a.oi=c.prototype;a.prototype=new b};function ja(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],r=k.exec(i)||["","",""];if(l[0].length==0&&r[0].length==0)break;b=ka(l[1].length==0?0:parseInt(l[1],10),r[1].length==0?0:parseInt(r[1],10))||ka(l[2].length==0,r[2].length==0)||ka(l[2],r[2])}while(b==
0)}return b}function ka(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ma,na,oa,pa;function qa(){return w.navigator?w.navigator.userAgent:p}pa=oa=na=ma=q;var ra;if(ra=qa()){var sa=w.navigator;ma=ra.indexOf("Opera")==0;na=!ma&&ra.indexOf("MSIE")!=-1;oa=!ma&&ra.indexOf("WebKit")!=-1;pa=!ma&&!oa&&sa.product=="Gecko"}var ta=na,ua=pa,va=oa,ya=w.navigator,za=(ya&&ya.platform||"").indexOf("Mac")!=-1,Aa;
a:{var Ba="",Ca;if(ma&&w.opera)var Da=w.opera.version,Ba=typeof Da=="function"?Da():Da;else if(ua?Ca=/rv\:([^\);]+)(\)|;)/:ta?Ca=/MSIE\s+([^\);]+)(\)|;)/:va&&(Ca=/WebKit\/(\S+)/),Ca)var Ea=Ca.exec(qa()),Ba=Ea?Ea[1]:"";if(ta){var Fa,Ga=w.document;Fa=Ga?Ga.documentMode:m;if(Fa>parseFloat(Ba)){Aa=String(Fa);break a}}Aa=Ba}var Ha={},Ia={};var Ja,Ka={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var La=Array.prototype,Ma=La.indexOf?function(a,c,b){return La.indexOf.call(a,c,b)}:function(a,c,b){b=b==p?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Na(a,c){Ma(a,c)>=0||a.push(c)}function Oa(a,c){var b=Ma(a,c);b>=0&&La.splice.call(a,b,1)};ta&&(Ia[9]||(Ia[9]=ta&&document.documentMode&&document.documentMode>=9));ta&&(Ha["8"]||(Ha["8"]=ja(Aa,"8")>=0));function Pa(){}Pa.prototype.Hh=q;Pa.prototype.Pd=function(){if(!this.Hh)this.Hh=n,this.Qd()};Pa.prototype.Qd=function(){this.hj&&Qa.apply(p,this.hj)};function Qa(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=ga(d);e=="array"||e=="object"&&typeof d.length=="number"?Qa.apply(p,d):d&&typeof d.Pd=="function"&&d.Pd()}};function Ra(a,c){this.type=a;this.currentTarget=this.target=c}y(Ra,Pa);Ra.prototype.Qd=function(){delete this.type;delete this.target;delete this.currentTarget};Ra.prototype.Vg=q;Ra.prototype.bk=n;function Sa(a){Sa[" "](a);return a}Sa[" "]=fa;function Ta(a,c){a&&this.yb(a,c)}y(Ta,Ra);u=Ta.prototype;u.target=p;u.relatedTarget=p;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=q;u.altKey=q;u.shiftKey=q;u.metaKey=q;u.Zj=q;u.Ih=p;
u.yb=function(a,c){var b=this.type=a.type;Ra.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(ua){var e;a:{try{Sa(d.nodeName);e=n;break a}catch(f){}e=q}e||(d=p)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==m?a.offsetX:a.layerX;this.offsetY=a.offsetY!==m?a.offsetY:a.layerY;this.clientX=a.clientX!==m?a.clientX:a.pageX;this.clientY=a.clientY!==m?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Zj=za?a.metaKey:a.ctrlKey;this.state=a.state;this.Ih=a;delete this.bk;delete this.Vg};u.Qd=function(){Ta.oi.Qd.call(this);this.relatedTarget=this.currentTarget=this.target=this.Ih=p};function Ua(){}var Va=0;u=Ua.prototype;u.key=0;u.ke=q;u.xh=q;u.yb=function(a,c,b,d,e,f){if(ga(a)=="function")this.Qh=n;else if(a&&a.handleEvent&&ga(a.handleEvent)=="function")this.Qh=q;else throw Error("Invalid listener argument");this.Je=a;this.ni=c;this.src=b;this.type=d;this.capture=!!e;this.Oh=f;this.xh=q;this.key=++Va;this.ke=q};u.handleEvent=function(a){return this.Qh?this.Je.call(this.Oh||this.src,a):this.Je.handleEvent.call(this.Je,a)};var Wa,Xa=(Wa="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";function Ya(a,c){this.fi=c;this.ud=[];if(a>this.fi)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.ud.push(this.Hb())}y(Ya,Pa);Ya.prototype.rd=p;Ya.prototype.Gh=p;function Za(a){return a.ud.length?a.ud.pop():a.Hb()}function $a(a,c){a.ud.length<a.fi?a.ud.push(c):ab(a,c)}Ya.prototype.Hb=function(){return this.rd?this.rd():{}};
function ab(a,c){if(a.Gh)a.Gh(c);else{var b=ga(c);if(b=="object"||b=="array"||b=="function")if(ga(c.Pd)=="function")c.Pd();else for(var d in c)delete c[d]}}Ya.prototype.Qd=function(){Ya.oi.Qd.call(this);for(var a=this.ud;a.length;)ab(this,a.pop());delete this.ud};var bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb;
(function(){function a(){return{Qc:0,je:0}}function c(){return[]}function b(){function a(b){b=g.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Ua}function e(){return new Ta}var f=Wa&&!(ja(Xa,"5.7")>=0),g;gb=function(a){g=a};if(f){bb=function(){return Za(h)};cb=function(a){$a(h,a)};db=function(){return Za(i)};eb=function(a){$a(i,a)};fb=function(){return Za(j)};hb=function(){$a(j,b())};ib=function(){return Za(k)};jb=function(a){$a(k,a)};kb=function(){return Za(l)};lb=function(a){$a(l,
a)};var h=new Ya(0,600);h.rd=a;var i=new Ya(0,600);i.rd=c;var j=new Ya(0,600);j.rd=b;var k=new Ya(0,600);k.rd=d;var l=new Ya(0,600);l.rd=e}else bb=a,cb=fa,db=c,eb=fa,fb=b,hb=fa,ib=d,jb=fa,kb=e,lb=fa})();var mb={},nb={},ob={},pb={};
function qb(a,c,b,d,e){if(c)if(ga(c)=="array")for(var f=0;f<c.length;f++)qb(a,c[f],b,d,e);else{var d=!!d,g=nb;c in g||(g[c]=bb());g=g[c];d in g||(g[d]=bb(),g.Qc++);var g=g[d],h=a[ha]||(a[ha]=++ia),i;g.je++;if(g[h]){i=g[h];for(f=0;f<i.length;f++)if(g=i[f],g.Je==b&&g.Oh==e){if(g.ke)break;return}}else i=g[h]=db(),g.Qc++;f=fb();f.src=a;g=ib();g.yb(b,f,a,c,d,e);b=g.key;f.key=b;i.push(g);mb[b]=g;ob[h]||(ob[h]=db());ob[h].push(g);a.addEventListener?(a==w||!a.gj)&&a.addEventListener(c,f,d):a.attachEvent(c in
pb?pb[c]:pb[c]="on"+c,f)}else throw Error("Invalid event type");}function rb(a,c,b,d){if(!d.Df&&d.ii){for(var e=0,f=0;e<d.length;e++)if(d[e].ke){var g=d[e].ni;g.src=p;hb(g);jb(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.ii=q;f==0&&(eb(d),delete nb[a][c][b],nb[a][c].Qc--,nb[a][c].Qc==0&&(cb(nb[a][c]),delete nb[a][c],nb[a].Qc--),nb[a].Qc==0&&(cb(nb[a]),delete nb[a]))}}
function sb(a,c,b,d,e){var f=1,c=c[ha]||(c[ha]=++ia);if(a[c]){a.je--;a=a[c];a.Df?a.Df++:a.Df=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];i&&!i.ke&&(f&=tb(i,e)!==q)}}finally{a.Df--,rb(b,d,c,a)}}return Boolean(f)}
function tb(a,c){var b=a.handleEvent(c);if(a.xh){var d=a.key;if(mb[d]){var e=mb[d];if(!e.ke){var f=e.src,g=e.type,h=e.ni,i=e.capture;f.removeEventListener?(f==w||!f.gj)&&f.removeEventListener(g,h,i):f.detachEvent&&f.detachEvent(g in pb?pb[g]:pb[g]="on"+g,h);f=f[ha]||(f[ha]=++ia);h=nb[g][i][f];if(ob[f]){var j=ob[f];Oa(j,e);j.length==0&&delete ob[f]}e.ke=n;h.ii=n;rb(g,i,f,h);delete mb[d]}}}return b}
gb(function(a,c){if(!mb[a])return n;var b=mb[a],d=b.type,e=nb;if(!(d in e))return n;var e=e[d],f,g;Ja===m&&(Ja=ta&&!w.addEventListener);if(Ja){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=w;f=h.shift();)if(i[f]!=p)i=i[f];else{h=p;break a}h=i}f=h;h=n in e;i=q in e;if(h){if(f.keyCode<0||f.returnValue!=m)return n;a:{var j=q;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(k){j=n}if(j||f.returnValue==m)f.returnValue=n}}j=kb();j.yb(f,this);f=n;try{if(h){for(var l=db(),r=j.currentTarget;r;r=r.parentNode)l.push(r);
g=e[n];g.je=g.Qc;for(var o=l.length-1;!j.Vg&&o>=0&&g.je;o--)j.currentTarget=l[o],f&=sb(g,l[o],d,n,j);if(i){g=e[q];g.je=g.Qc;for(o=0;!j.Vg&&o<l.length&&g.je;o++)j.currentTarget=l[o],f&=sb(g,l[o],d,q,j)}}else f=tb(b,j)}finally{if(l)l.length=0,eb(l);j.Pd();lb(j)}return f}d=new Ta(c,this);try{f=tb(b,d)}finally{d.Pd()}return f});var ub={61:187,59:186};ta||va&&(Ha["525"]||(Ha["525"]=ja(Aa,"525")>=0));function vb(a){this.id=wb++;this.name=a;this.controls={};this.Yg={};this.zh=[];this.Sf=this.mf=p}function xb(a,c){var b=0,d=yb==zb&&Ab==Bb&&Cb==Db,e;for(e in Eb){var f=d&&Eb[e].ui;b++;var g=Fb(e,yb,Ab,Cb);a.mf==p&&a.controls[g]!=p&&(!f||a.controls[g].jj)&&a.controls[g].execute(c)}if(b==1&&a.mf!=p)a.Sf!=p&&clearTimeout(a.Sf),a.Sf=setTimeout(function(){A(a,a.mf,g);a.mf=p;a.Sf=p},100)}
function A(a,c,b,d,e,f){var g=b;typeof b=="number"&&(g=Fb(b,d,e,f));b=[];d=a.controls[g];e=a.Yg[c.name];if(d!=p)if(e!=p)a.controls[e]=d,a.Yg[d.name]=e,b.push(new Gb(e,d));else throw"The specified key is already in use for a different function.";else e!=p&&delete a.controls[e];a.controls[g]=c;a.Yg[c.name]=g;b.push(new Gb(g,c));for(c=0;c<a.zh.length;c++)g=a.zh[c],g.qk.apply(g.Je,b||[],Hb(a))}function Hb(a){var c=[],b;for(b in a.controls)c.push(new Gb(b,a.controls[b]));return c}
var wb=0,Eb={},yb=q,zb={},Ab=q,Bb={},Cb=q,Db={};function Ib(a){var c=a.keyCode,c=ua&&a.keyCode in ub?ub[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function Fb(a,c,b,d){var e=Ka[a];e==p&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}qb(document,"keydown",function(a){a=Ib(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&Eb[a.keyCode]==p&&(Eb[a.keyCode]={ui:q});yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});
qb(document,"keyup",function(a){a=Ib(a);delete Eb[a.keyCode];yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});qb(document,"blur",function(){Eb={};Db=Cb=Bb=Ab=zb=yb=q});function Gb(a,c){this.key=this.key=a;this.action=this.action=c};function Jb(a){this.rg=q;this.id=a;this.lj=this.Mh=this.Zi=0;this.Dh={};this.Nh={};this.Kh={};this.Wi=[];Kb.push(this);Lb[a]=this}var Kb=[],Lb={};function B(a){var c=Lb[a];c==p&&(c=new Jb(a));return c}function C(a){a.Zi++;a.rg&&Mb(a,a.Dh,Nb(a))}function Ob(a){a.Mh++;a.rg&&Mb(a,a.Nh,Nb(a))}function Pb(a){a.lj++;a.rg&&Mb(a,a.Kh,Nb(a))}function Mb(a,c,b){for(var d=0;d<b.length;d++){var e=b[d];c[e]==p&&(a.Nh[e]=0,a.Kh[e]=0,a.Dh[e]=0,a.Wi.push(e));c[e]++}}
function Nb(a){var c=["unknown"];try{a.vk()}catch(b){a=b.stack.match(/[A-Za-z0-9]+\.js:\d+:\d+/g).splice(3),a.length!=0&&(c=a)}return c};function E(a,c){C(B("Box2D.Common.Math.b2Vec2"));this.x=a;this.y=c}var Qb=[];function F(a,c){Ob(B("Box2D.Common.Math.b2Vec2"));if(Qb.length>0){var b=Qb.pop();b.i(a,c);return b}return new E(a,c)}function G(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Vec2")),Qb.push(a))}u=E.prototype;u.I=function(){this.y=this.x=0};u.i=function(a,c){this.x=a;this.y=c};u.m=function(a){this.x=a.x;this.y=a.y};u.Db=function(){return F(-this.x,-this.y)};u.kf=function(){this.x=-this.x;this.y=-this.y};
u.ca=function(){return F(this.x,this.y)};u.Ob=function(a){this.x+=a.x;this.y+=a.y};u.hg=function(a){this.x-=a.x;this.y-=a.y};u.oc=function(a){this.x*=a;this.y*=a};function Rb(a){return Math.sqrt(Sb(a))}function Sb(a){return a.x*a.x+a.y*a.y}function Tb(a){var c=Rb(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Ub={},Vb=0;function Wb(){Vb--}function Xb(a){if(a.Zg===m||a.Zg===p)a.Zg={};return a.Zg};function Yb(){this.Of=this.Gg=this.Wd=this.Lj=this.Zd=1;var a=this;this.Qj={oj:{clear:function(){a.uc.clearRect(0,0,a.uc.canvas.width,a.uc.canvas.height)}}};this.Yh=0}var Zb,$b,ac,bc,cc,dc;
(function(a){a.prototype.Oc=function(a,b){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+b+")"};a.prototype.Ki=function(){var a=ec;a===m&&(a=0);this.Yh=a};a.prototype.Mi=ba("uc");a.prototype.Ii=function(a){a===m&&(a=0);this.Zd=a};a.prototype.Li=function(){var a=1;a===m&&(a=0);this.Lj=a;this.uc.zk=a};a.prototype.Ji=function(){var a=0.3;a===m&&(a=0);this.Gg=a};a.prototype.xi=function(a){var b=fc,d=this.uc,e=this.Zd;d.beginPath();d.strokeStyle=this.Oc(gc(b),this.Wd);d.moveTo(a[0].x*
e,a[0].y*e);for(b=1;b<4;b++)d.lineTo(a[b].x*e,a[b].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.zi=function(a,b,d){if(b){var e=this.uc,f=this.Zd;e.beginPath();e.strokeStyle=this.Oc(gc(d),this.Wd);e.fillStyle=this.Oc(gc(d),this.Gg);e.moveTo(a[0].x*f,a[0].y*f);for(d=1;d<b;d++)e.lineTo(a[d].x*f,a[d].y*f);e.lineTo(a[0].x*f,a[0].y*f);e.closePath();e.fill();e.stroke()}};a.prototype.yi=function(a,b,d,e){if(b){var f=this.uc,g=this.Zd,h=a.x*g,i=a.y*g;f.moveTo(0,0);f.beginPath();f.strokeStyle=
this.Oc(gc(e),this.Wd);f.fillStyle=this.Oc(gc(e),this.Gg);f.arc(h,i,b*g,0,Math.PI*2,n);f.moveTo(h,i);f.lineTo((a.x+d.x*b)*g,(a.y+d.y*b)*g);f.closePath();f.fill();f.stroke()}};a.prototype.Lc=function(a,b,d){var e=this.uc,f=this.Zd;e.strokeStyle=this.Oc(gc(d),this.Wd);e.beginPath();e.moveTo(a.x*f,a.y*f);e.lineTo(b.x*f,b.y*f);e.closePath();e.stroke()};a.prototype.Ai=function(){var a=hc,b=this.uc,d=this.Zd;b.beginPath();b.strokeStyle=this.Oc(16711680,this.Wd);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+
this.Of*a.d.a.x)*d,(a.position.y+this.Of*a.d.a.y)*d);b.strokeStyle=this.Oc(65280,this.Wd);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.Of*a.d.b.x)*d,(a.position.y+this.Of*a.d.b.y)*d);b.closePath();b.stroke()};Zb=1;$b=2;ac=4;bc=8;cc=16;dc=32})(Yb);function ic(a,c,b,d){if(Ub[a]==p)Vb++,Ub[a]=new Image,Ub[a].onload=Wb,Ub[a].src=a;this.url=a;this.ki=c||new E(0,0);this.Vf=b||new E(1,1);this.si=d||new E(1,1);this.rb=new E(1,1)};function jc(){C(B("Box2D.Collision.b2AABB"));this.lowerBound=F(0,0);this.upperBound=F(0,0)}var kc=[];function lc(){Ob(B("Box2D.Collision.b2AABB"));if(kc.length>0){var a=kc.pop();a.I();return a}return new jc}jc.prototype.I=function(){this.lowerBound.i(0,0);this.upperBound.i(0,0)};function mc(a){return F((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}
function nc(a,c){var b;return b=(b=(b=(b=n&&a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}jc.prototype.Md=function(a){return a.lowerBound.x-this.upperBound.x>0?q:a.lowerBound.y-this.upperBound.y>0?q:this.lowerBound.x-a.upperBound.x>0?q:this.lowerBound.y-a.upperBound.y>0?q:n};
function oc(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function pc(a,c,b,d,e){this.pc={};this.ya=a;this.Cb=d;this.Gc=new E(d.x/b,d.y/b);this.scale=b;this.Ea=new E(0,0);this.Cf=new E(-1,-1);this.Yf=new jc;this.Yf.upperBound=this.Gc.ca();this.Yf.upperBound.oc(1.25);qc(this,new E(0,0));a=document.getElementById(c);this.sd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.Cb.x+"px; height: "+this.Cb.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.Cb.x/2+"px; height: "+this.Cb.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.sd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.sd.className="viewportContainer";this.sd.style.width=this.Cb.x+"px";this.sd.style.height=this.Cb.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.sd.appendChild(this.display);a.appendChild(this.sd);this.zg=document.createElement("div");this.zg=rc(this,"Loading, please wait.");sc(this.zg);this.li=rc(this,
"Paused");e?(this.gb=document.getElementById(c+"__DEBUG"),this.gb.width=this.ya.q.Ya.x*b,this.gb.height=this.ya.q.Ya.y*b,this.gb.style.marginRight="-"+this.gb.width+"px",this.gb.style.marginBottom="-"+this.gb.height+"px",c=new Yb,c.Mi(this.gb.getContext("2d")),c.Ii(b),c.Ji(),c.Li(),c.Ki(),this.ya.q.ga.Pa=c):this.gb=p}
function rc(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+tc;b.innerHTML=c;b.style.width=a.Cb.x+"px";b.style.height=a.Cb.y+"px";a.sd.appendChild(b);return b}function sc(a){if(a.style.display=="none")a.style.display="table-cell"}
function uc(a){if(a.style.display!="none")a.style.display="none"}function qc(a,c){a.Ea.x=c.x;a.Ea.y=c.y;if(a.Ea.x<a.Gc.x/2)a.Ea.x=a.Gc.x/2;else if(a.Ea.x>a.ya.q.Ya.x-a.Gc.x/2)a.Ea.x=a.ya.q.Ya.x-a.Gc.x/2;if(a.Ea.y<a.Gc.y/2)a.Ea.y=a.Gc.y/2;else if(a.Ea.y>a.ya.q.Ya.y-a.Gc.y/2)a.Ea.y=a.ya.q.Ya.y-a.Gc.y/2}
function vc(a,c){if(a.display==p)a.display={},a.display.K=new jc,a.nj=function(a){var c=this.body?this.body.e.position:this.position.ca();return this.display.Rf==0?c:new E(c.x+(a.x-c.x)*this.display.Rf,c.y+(a.y-c.y)*this.display.Rf)},a.mj=function(){return this.body?this.body.Rb():this.Za},a.display.Rf=0,a.display.vi=0;a.display.size=c.ca()}function H(a,c,b){a.display.Wf=new ic(c,b)}var tc=100,ec=0|ac|$b|Zb,wc=0;var xc=function(){var a=window.yk||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function yc(){this.Be=1;this.Ue=65535;this.wd=0}yc.prototype.ca=function(){var a=new yc;a.Be=this.Be;a.Ue=this.Ue;a.wd=this.wd;return a};function zc(){this.filter=new yc;this.filter.Be=1;this.filter.Ue=65535;this.filter.wd=0;this.shape=p;this.xb=0.2;this.De=this.Fc=0;this.Bf=q};function Ac(){C(B("Box2D.Common.Math.b2Mat22"));this.a=F(0,0);this.b=F(0,0);this.lf()}var Bc=[];function Cc(){Ob(B("Box2D.Common.Math.b2Mat22"));if(Bc.length>0){var a=Bc.pop();a.I();return a}return new Ac}function Dc(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Mat22")),Bc.push(a))}function Ec(a){var c=Cc();c.i(a);return c}u=Ac.prototype;u.i=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.i(c,a);this.b.i(-a,c)};u.ca=function(){var a=Cc();a.Kd(this);return a};u.Kd=function(a){this.a.m(a.a);this.b.m(a.b)};
u.$f=function(a){this.a.Ob(a.a);this.b.Ob(a.b)};u.lf=function(){this.a.i(1,0);this.b.i(0,1)};u.I=function(){this.a.i(0,0);this.b.i(0,0)};u.Rb=function(){return Math.atan2(this.a.y,this.a.x)};u.xe=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function Fc(a,c){return a.x*c.x+a.y*c.y}function Gc(a,c){return a.x*c.y-a.y*c.x}function Hc(a){return F(1*a.y,-1*a.x)}function Ic(a,c){return F(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function Jc(a,c){return F(Fc(c,a.a),Fc(c,a.b))}function I(a,c){var b=Ic(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function Kc(a,c){var b=J(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function J(a,c){return F(a.x-c.x,a.y-c.y)}function K(a,c,b){return a<c?c:a>b?b:a};function L(a){if(!a)throw"Assertion Failed";}var Lc=2/180*Math.PI,Mc=8/180*Math.PI,Nc=0.5*Math.PI,Oc=Nc*Nc,Pc=2/180*Math.PI,Qc=Number.MIN_VALUE*Number.MIN_VALUE;function Rc(){C(B("Box2D.Collision.b2DistanceProxy"));this.T=this.C=0;this.n=[]}Rc.prototype.i=function(a){a.lh(this)};Rc.prototype.jf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.C;d++){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};Rc.prototype.pe=function(a){return this.n[this.jf(a)]};Rc.prototype.ih=t("C");function N(a,c){c===m&&(c=0);L(0<=c&&c<a.C);return a.n[c]};function Sc(){C(B("Box2D.Collision.b2DistanceOutput"));this.gc=F(0,0);this.hc=F(0,0);this.td=0};function Tc(){C(B("Box2D.Collision.b2SimplexVertex"));this.sa=F(0,0);this.La=F(0,0);this.na=F(0,0);this.pa=this.oa=this.o=0}Tc.prototype.i=function(a){this.sa.m(a.sa);this.La.m(a.La);this.na.m(a.na);this.o=a.o;this.oa=a.oa;this.pa=a.pa};function Uc(){C(B("Box2D.Collision.b2Simplex"));this.R=new Tc;this.fa=new Tc;this.jb=new Tc;this.n=[this.R,this.fa,this.jb]}var Vc=[];function Wc(a){if(a.C==1)return 0;else if(a.C==2){var c=J(a.R.na,a.fa.na),a=Rb(c);G(c);return a}else if(a.C==3){var c=J(a.fa.na,a.R.na),b=J(a.jb.na,a.R.na),a=Gc(c,b);G(c);G(b);return a}else return L(q),0};function Xc(a,c,b){var d;if(Vc.length>0){d=Vc.pop();for(var e=0;e<d.n.length;e++){var f=d.n[e];f.sa!=p&&f.sa.i(0,0);f.La!=p&&f.La.i(0,0);f.na!=p&&f.na.i(0,0);f.oa=0;f.pa=0;f.o=0}}else d=new Uc;var e=d,f=b.ic,g=b.af,h=b.jc,i=b.bf;L(0<=c.Od&&c.Od<=3);var j,k;e.C=c.Od;for(var l=e.n,r=0;r<e.C;r++){var o=l[r];o.oa=c.oa[r];o.pa=c.pa[r];j=N(f,o.oa);k=N(h,o.pa);G(o.sa);G(o.La);G(o.na);o.sa=I(g,j);o.La=I(i,k);o.na=J(o.La,o.sa);o.o=0}if(e.C>1&&(j=c.Uj,k=Wc(e),k<0.5*j||2*j<k||k<Number.MIN_VALUE))e.C=0;if(e.C==
0)o=l[0],o.oa=0,o.pa=0,j=N(f,0),k=N(h,0),G(o.sa),G(o.La),G(o.na),o.sa=I(g,j),o.La=I(i,k),o.na=J(o.La,o.sa),e.C=1;(d.C<1||d.C>3)&&L(q);for(e=0;e<20;){f=[];for(g=0;g<d.C;g++)f[g]={},f[g].oa=d.n[g].oa,f[g].pa=d.n[g].pa;if(d.C==2)g=d,i=g.R.na,l=g.fa.na,h=J(l,i),i=-(i.x*h.x+i.y*h.y),i<=0?(G(h),g.R.o=1,g.C=1):(l=l.x*h.x+l.y*h.y,G(h),l<=0?(g.fa.o=1,g.C=1,g.R.i(g.fa)):(h=1/(l+i),g.R.o=l*h,g.fa.o=i*h,g.C=2));else if(d.C==3){g=d;j=g.R.na;k=g.fa.na;var o=g.jb.na,v=J(k,j),h=Fc(k,v),i=-Fc(j,v),s=J(o,j),x=Fc(j,
s),l=Fc(o,s),r=Gc(v,s);G(v);G(s);var v=-x,x=J(o,k),z=Fc(k,x),s=Fc(o,x);G(x);x=-z;z=r*Gc(k,o);o=r*Gc(o,j);j=r*Gc(j,k);i<=0&&v<=0?(g.R.o=1,g.C=1):h>0&&i>0&&j<=0?(l=1/(h+i),g.R.o=h*l,g.fa.o=i*l,g.C=2):l>0&&v>0&&o<=0?(h=1/(l+v),g.R.o=l*h,g.jb.o=v*h,g.C=2,g.fa.i(g.jb)):h<=0&&x<=0?(g.fa.o=1,g.C=1,g.R.i(g.fa)):l<=0&&s<=0?(g.jb.o=1,g.C=1,g.R.i(g.jb)):s>0&&x>0&&z<=0?(h=1/(s+x),g.fa.o=s*h,g.jb.o=x*h,g.C=2,g.R.i(g.jb)):(h=1/(z+o+j),g.R.o=z*h,g.fa.o=o*h,g.jb.o=j*h,g.C=3)}if(d.C==3)break;h=d;h.C==1?g=h.R.na.Db():
h.C==2?(g=J(h.fa.na,h.R.na),i=h.R.na.Db(),h=Gc(g,i),G(i),i=p,i=h>0?F(-1*g.y,1*g.x):Hc(g),G(g),g=i):(L(q),g=F(0,0));if(Sb(g)<Qc){G(g);break}G(d.n[d.C].sa);G(d.n[d.C].La);G(d.n[d.C].na);h=g.Db();i=Jc(b.af.d,h);G(h);d.n[d.C].oa=b.ic.jf(i);G(i);d.n[d.C].sa=I(b.af,N(b.ic,d.n[d.C].oa));h=Jc(b.bf.d,g);G(g);d.n[d.C].pa=b.jc.jf(h);G(h);d.n[d.C].La=I(b.bf,N(b.jc,d.n[d.C].pa));d.n[d.C].na=J(d.n[d.C].La,d.n[d.C].sa);e++;h=q;for(g=0;g<f.length;g++)if(d.n[d.C].oa==f[g].oa&&d.n[d.C].pa==f[g].pa){h=n;break}if(h)break;
d.C++}e=d;f=a.gc;g=a.hc;e.C==1?(f.m(e.R.sa),g.m(e.R.La)):e.C==2?(f.x=e.R.o*e.R.sa.x+e.fa.o*e.fa.sa.x,f.y=e.R.o*e.R.sa.y+e.fa.o*e.fa.sa.y,g.x=e.R.o*e.R.La.x+e.fa.o*e.fa.La.x,g.y=e.R.o*e.R.La.y+e.fa.o*e.fa.La.y):e.C==3?(g.x=f.x=e.R.o*e.R.sa.x+e.fa.o*e.fa.sa.x+e.jb.o*e.jb.sa.x,g.y=f.y=e.R.o*e.R.sa.y+e.fa.o*e.fa.sa.y+e.jb.o*e.jb.sa.y):L(q);e=J(a.gc,a.hc);a.td=Rb(e);G(e);e=d;c.Uj=Wc(e);c.Od=e.C;f=e.n;for(g=0;g<e.C;g++)c.oa[g]=f[g].oa,c.pa[g]=f[g].pa;d!=p&&Vc.push(d);if(b.dh)c=b.ic.T,b=b.jc.T,a.td>c+b&&
a.td>Number.MIN_VALUE?(a.td-=c+b,d=J(a.hc,a.gc),Tb(d),a.gc.x+=c*d.x,a.gc.y+=c*d.y,a.hc.x-=b*d.x,a.hc.y-=b*d.y,G(d)):(b=F(0,0),b.x=0.5*(a.gc.x+a.hc.x),b.y=0.5*(a.gc.y+a.hc.y),a.gc.x=a.hc.x=b.x,a.gc.y=a.hc.y=b.y,a.td=0,G(b))};function Yc(){C(B("Box2D.Collision.b2SimplexCache"));this.oa=[0,0,0];this.pa=[0,0,0]};function Zc(){C(B("Box2D.Collision.b2DistanceInput"));this.dh=q;this.bf=this.af=this.jc=this.ic=p};function $c(){C(B("Box2D.Collision.Shapes.b2Shape"));this.T=0.005}$c.prototype.i=function(a){this.T=a.T};function ad(){C(B("Box2D.Collision.Shapes.b2MassData"));this.ed=0;this.Pc=F(0,0);this.Jd=0}var bd=[];function cd(){Ob(B("Box2D.Collision.Shapes.b2MassData"));if(bd.length>0){var a=bd.pop();a.ed=0;a.Pc.I();a.Jd=0;return a}return new ad}ad.prototype.m=function(a,c,b){this.ed=a;this.Pc.m(c);this.Jd=b};ad.prototype.i=function(a,c,b,d){this.ed=a;this.Pc.i(c,b);this.Jd=d};function dd(a,c){C(B("Box2D.Common.Math.b2Transform"));this.position=F(0,0);this.d=new Ac;a&&this.position.m(a);c&&this.d.Kd(c)}dd.prototype.U=function(a,c){this.position.m(a);this.d.Kd(c)};dd.prototype.lf=function(){this.position.I();this.d.lf()};dd.prototype.i=function(a){this.position.m(a.position);this.d.Kd(a.d)};dd.prototype.Rb=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function O(){C(B("Box2D.Collision.Shapes.b2PolygonShape"));$c.call(this);this.zb=F(0,0);this.n=[];this.W=[]}y(O,$c);u=O.prototype;u.qe=ca("b2PolygonShape");u.ca=function(){var a=new O;a.i(this);return a};u.i=function(a){$c.prototype.i.call(this,a);if(a instanceof O){this.zb.m(a.zb);this.ba=a.ba;ed(this,this.ba);for(var c=0;c<this.ba;c++)this.n[c].m(a.n[c]),this.W[c].m(a.W[c])}};function fd(a,c){gd(a,c)}
function gd(a,c){var b=c.length;L(2<=b);a.ba=b;ed(a,b);for(b=b=0;b<a.ba;b++)a.n[b].m(c[b]);for(b=0;b<a.ba;++b){var d=J(a.n[b+1<a.ba?b+1:0],a.n[b]);L(Sb(d)>Number.MIN_VALUE);var e=Hc(d);G(d);a.W[b].m(e);G(e);Tb(a.W[b])}for(var b=a.n,d=a.ba,e=F(0,0),f=0,g=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],k=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));f+=k;e.x+=k*g*(0+i.x+j.x);e.y+=k*g*(0+i.y+j.y)}e.x*=1/f;e.y*=1/f;a.zb=e}
function hd(a,c,b){a.ba=4;ed(a,4);a.n[0].i(-c,-b);a.n[1].i(c,-b);a.n[2].i(c,b);a.n[3].i(-c,b);a.W[0].i(0,-1);a.W[1].i(1,0);a.W[2].i(0,1);a.W[3].i(-1,0);a.zb.I()}
u.gf=function(a,c){for(var b=c.d,d=this.n[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),f=c.position.y+(b.a.y*d.x+b.b.y*d.y),g=e,h=f,i=1;i<this.ba;++i)var d=this.n[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,f=f<d?f:d,g=g>j?g:j,h=h>d?h:d;a.lowerBound.x=e-this.T;a.lowerBound.y=f-this.T;a.upperBound.x=g+this.T;a.upperBound.y=h+this.T};
u.fh=function(a,c){if(this.ba==2)a.Pc.x=0.5*(this.n[0].x+this.n[1].x),a.Pc.y=0.5*(this.n[0].y+this.n[1].y),a.ed=0,a.Jd=0;else{for(var b=0,d=0,e=0,f=0,g=1/3,h=0;h<this.ba;++h){var i=this.n[h],j=h+1<this.ba?this.n[h+1]:this.n[0],k=i.x-0,l=i.y-0,r=j.x-0,o=j.y-0,v=k*o-l*r,s=0.5*v;e+=s;b+=s*g*(0+i.x+j.x);d+=s*g*(0+i.y+j.y);i=k;f+=v*(g*(0.25*(i*i+r*i+r*r)+(0*i+0*r))+0+(g*(0.25*(l*l+o*l+o*o)+(0*l+0*o))+0))}b*=1/e;d*=1/e;a.i(c*e,b,d,c*f)}};u.lh=function(a){var c=this.T,b=this.n;a.C=this.ba;a.T=c;a.n=b};
u.ih=t("ba");u.jf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ba;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};u.pe=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ba;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return this.n[c]};function ed(a,c){for(var b=0;b<a.n.length;b++)G(a.n[b]),G(a.W[b]);a.n=[];a.W=[];for(b=0;b<c;b++)a.n[b]=F(0,0),a.W[b]=F(0,0)}new Ac;function id(){}id.prototype.Vb=function(a,c){var b=a.Zh.ca(),d=c.Zh.ca();return b.wd==d.wd&&b.wd!=0?b.wd>0:(b.Ue&d.Be)!=0&&(b.Be&d.Ue)!=0};var jd=new id;function kd(){};function P(a){this.Wa=new kd;this.Xa=new kd;this.Pe=F(0,0);this.Qe=F(0,0);L(a.s!=a.u);this.D=a.type;this.zc=this.be=p;this.w=a.s;this.z=a.u;this.Wh=a.ng}u=P.prototype;u.lc=ca(p);u.mc=ca(p);u.ld=function(){return this.w.ld()&&this.z.ld()};u.Sb=aa();u.Fb=aa();u.bg=aa();u.Eb=ca(q);function ld(a){P.call(this,a);this.cc=F(0,0);this.dc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.Y=F(0,0);this.Z=F(0,0);this.hb=this.w.bb.Ig;this.cc.x=a.xf.x-this.hb.e.position.x;this.cc.y=a.xf.y-this.hb.e.position.y;this.dc.x=a.yf.x-this.hb.e.position.x;this.dc.y=a.yf.y-this.hb.e.position.y;this.F.m(a.Ua);this.G.m(a.Va);this.ka=a.gd;this.Yd=a.xg+this.ka*a.yg;this.ci=Math.min(a.gi,this.Yd-this.ka*md);this.di=Math.min(a.hi,(this.Yd-md)/this.ka);this.yc=this.xc=this.j=0}y(ld,P);u=ld.prototype;
u.lc=function(){return Q(this.w,this.F)};u.mc=function(){return Q(this.z,this.G)};
u.Sb=function(a){var c=this.w,b=this.z,d;d=c.e.d;var e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,g=d.a.x*e+d.b.x*f,f=d.a.y*e+d.b.y*f,e=g;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,g=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=g;d=b.c.h.x+h;var g=b.c.h.y+i,j=this.hb.e.position.x+this.dc.x,k=this.hb.e.position.y+this.dc.y;this.Y.i(c.c.h.x+e-(this.hb.e.position.x+this.cc.x),c.c.h.y+f-(this.hb.e.position.y+this.cc.y));this.Z.i(d-j,g-k);d=Rb(this.Y);g=Rb(this.Z);d>0.005?this.Y.oc(1/d):this.Y.I();g>0.005?this.Z.oc(1/
g):this.Z.I();this.Yd-d-this.ka*g>0?this.j=this.Og=0:this.Og=2;d<this.ci?this.xc=this.Jg=0:this.Jg=2;g<this.di?this.yc=this.Kg=0:this.Kg=2;d=e*this.Y.y-f*this.Y.x;g=h*this.Z.y-i*this.Z.x;this.Ne=c.k+c.v*d*d;this.Oe=b.k+b.v*g*g;this.Kf=this.Ne+this.ka*this.ka*this.Oe;this.Ne=1/this.Ne;this.Oe=1/this.Oe;this.Kf=1/this.Kf;a.Fd?(this.j*=a.ab,this.xc*=a.ab,this.yc*=a.ab,a=(-this.j-this.xc)*this.Y.x,d=(-this.j-this.xc)*this.Y.y,g=(-this.ka*this.j-this.yc)*this.Z.x,j=(-this.ka*this.j-this.yc)*this.Z.y,c.f.x+=
c.k*a,c.f.y+=c.k*d,c.p+=c.v*(e*d-f*a),b.f.x+=b.k*g,b.f.y+=b.k*j,b.p+=b.v*(h*j-i*g)):this.yc=this.xc=this.j=0};
u.Fb=function(){var a=this.w,c=this.z,b;b=a.e.d;var d=this.F.x-a.c.r.x,e=this.F.y-a.c.r.y,f=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=f;b=c.e.d;var g=this.G.x-c.c.r.x,h=this.G.y-c.c.r.y,f=b.a.x*g+b.b.x*h,h=b.a.y*g+b.b.y*h,g=f,i=f=b=0,j=0;b=j=b=j=i=f=b=0;if(this.Og==2)b=a.f.x+-a.p*e,f=a.f.y+a.p*d,i=c.f.x+-c.p*h,j=c.f.y+c.p*g,b=-(this.Y.x*b+this.Y.y*f)-this.ka*(this.Z.x*i+this.Z.y*j),j=this.Kf*-b,b=this.j,this.j=Math.max(0,this.j+j),j=this.j-b,b=-j*this.Y.x,f=-j*this.Y.y,i=-this.ka*j*this.Z.x,j=-this.ka*
j*this.Z.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.p+=a.v*(d*f-e*b),c.f.x+=c.k*i,c.f.y+=c.k*j,c.p+=c.v*(g*j-h*i);if(this.Jg==2)b=a.f.x+-a.p*e,f=a.f.y+a.p*d,b=-(this.Y.x*b+this.Y.y*f),j=-this.Ne*b,b=this.xc,this.xc=Math.max(0,this.xc+j),j=this.xc-b,b=-j*this.Y.x,f=-j*this.Y.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.p+=a.v*(d*f-e*b);if(this.Kg==2)i=c.f.x+-c.p*h,j=c.f.y+c.p*g,b=-(this.Z.x*i+this.Z.y*j),j=-this.Oe*b,b=this.yc,this.yc=Math.max(0,this.yc+j),j=this.yc-b,i=-j*this.Z.x,j=-j*this.Z.y,c.f.x+=c.k*i,c.f.y+=c.k*j,c.p+=
c.v*(g*j-h*i)};
u.Eb=function(){var a=this.w,c=this.z,b,d=this.hb.e.position.x+this.cc.x,e=this.hb.e.position.y+this.cc.y,f=this.hb.e.position.x+this.dc.x,g=this.hb.e.position.y+this.dc.y,h=0,i=0,j=0,k=0,l=b=0,r=0,o=0,v=l=o=b=l=b=0;if(this.Og==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,b=a.c.h.x+h,l=a.c.h.y+i,r=c.c.h.x+j,o=c.c.h.y+k,this.Y.i(b-d,l-e),this.Z.i(r-f,o-g),b=Rb(this.Y),l=
Rb(this.Z),b>0.005?this.Y.oc(1/b):this.Y.I(),l>0.005?this.Z.oc(1/l):this.Z.I(),b=this.Yd-b-this.ka*l,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Kf*b,b=-o*this.Y.x,l=-o*this.Y.y,r=-this.ka*o*this.Z.x,o=-this.ka*o*this.Z.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.o+=a.v*(h*l-i*b),c.c.h.x+=c.k*r,c.c.h.y+=c.k*o,c.c.o+=c.v*(j*o-k*r),R(a),R(c);if(this.Jg==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=a.c.h.x+h,l=a.c.h.y+i,this.Y.i(b-d,l-e),b=Rb(this.Y),b>0.005?(this.Y.x*=
1/b,this.Y.y*=1/b):this.Y.I(),b=this.ci-b,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Ne*b,b=-o*this.Y.x,l=-o*this.Y.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.o+=a.v*(h*l-i*b),R(a);if(this.Kg==2)b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,r=c.c.h.x+j,o=c.c.h.y+k,this.Z.i(r-f,o-g),l=Rb(this.Z),l>0.005?(this.Z.x*=1/l,this.Z.y*=1/l):this.Z.I(),b=this.di-l,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Oe*b,r=-o*this.Z.x,o=-o*this.Z.y,c.c.h.x+=c.k*r,c.c.h.y+=c.k*o,c.c.o+=
c.v*(j*o-k*r),R(c);return v<0.005};var md=1;function nd(){this.wk=p;this.xk=0};function od(){C(B("Box2D.Collision.b2ContactID"));this.jg=this.ig=this.kg=this.Sa=0}function pd(a,c){a.Sa=c;a.kg=a.Sa&255;a.ig=(a.Sa&65280)>>8&255;a.jg=(a.Sa&16711680)>>16&255;a.rh=(a.Sa&4278190080)>>24&255}od.prototype.i=function(a){pd(this,a.Sa)};function qd(a,c){a.kg=c;a.Sa=a.Sa&4294967040|a.kg&255}function rd(a,c){a.ig=c;a.Sa=a.Sa&4294902015|a.ig<<8&65280}function sd(a,c){a.jg=c;a.Sa=a.Sa&4278255615|a.jg<<16&16711680}od.prototype.ca=function(){var a=new od;a.i(this);return a};function td(){C(B("Box2D.Collision.ClipVertex"));this.sb=F(0,0);this.id=new od}td.prototype.i=function(a){this.sb.m(a.sb);this.id.i(a.id)};function ud(){C(B("Box2D.Collision.b2ManifoldPoint"));this.M=F(0,0);this.wc=new od;this.dd=this.bd=0}ud.prototype.da=function(){this.M.I();this.dd=this.bd=0;pd(this.wc,0)};ud.prototype.i=function(a){this.M.m(a.M);this.bd=a.bd;this.dd=a.dd;this.wc.i(a.wc)};function vd(){C(B("Box2D.Collision.b2Manifold"));this.D=this.ra=0;this.J=[];for(var a=0;a<2;a++)this.J[a]=new ud;this.Ia=F(0,0);this.M=F(0,0)}vd.prototype.da=function(){for(var a=0;a<2;a++)this.J[a].da();this.Ia.I();this.M.I();this.ra=this.D=0};vd.prototype.i=function(a){this.ra=a.ra;for(var c=0;c<2;c++)this.J[c].i(a.J[c]);this.Ia.m(a.Ia);this.M.m(a.M);this.D=a.D};vd.prototype.ca=function(){var a=new vd;a.i(this);return a};function wd(a,c,b,d){var e=0,f=c[0].sb,g=c[1].sb,h=b.x*f.x+b.y*f.y-d,b=b.x*g.x+b.y*g.y-d;h<=0&&a[e++].i(c[0]);b<=0&&a[e++].i(c[1]);if(h*b<0)b=h/(h-b),d=a[e].sb,d.x=f.x+b*(g.x-f.x),d.y=f.y+b*(g.y-f.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function xd(a,c,b,d,e){for(var f=c.d.a.x*a.W[b].x+c.d.b.x*a.W[b].y,g=c.d.a.y*a.W[b].x+c.d.b.y*a.W[b].y,h=e.d.a.x*f+e.d.a.y*g,i=e.d.b.x*f+e.d.b.y*g,j=0,k=Number.MAX_VALUE,l=0;l<d.ba;l++){var r=d.n[l].x*h+d.n[l].y*i;r<k&&(k=r,j=l)}return(e.position.x+(e.d.a.x*d.n[j].x+e.d.b.x*d.n[j].y)-(c.position.x+(c.d.a.x*a.n[b].x+c.d.b.x*a.n[b].y)))*f+(e.position.y+(e.d.a.y*d.n[j].x+e.d.b.y*d.n[j].y)-(c.position.y+(c.d.a.y*a.n[b].x+c.d.b.y*a.n[b].y)))*g}
function yd(a,c,b,d){var e=d.position.x+(d.d.a.x*b.zb.x+d.d.b.x*b.zb.y),f=d.position.y+(d.d.a.y*b.zb.x+d.d.b.y*b.zb.y);e-=c.position.x+(c.d.a.x*a.zb.x+c.d.b.x*a.zb.y);f-=c.position.y+(c.d.a.y*a.zb.x+c.d.b.y*a.zb.y);for(var g=e*c.d.a.x+f*c.d.a.y,f=e*c.d.b.x+f*c.d.b.y,e=0,h=-Number.MAX_VALUE,i=0;i<a.ba;++i){var j=a.W[i].x*g+a.W[i].y*f;j>h&&(h=j,e=i)}g=xd(a,c,e,b,d);f=e-1;f<0&&(f=a.ba-1);h=xd(a,c,f,b,d);i=e+1;i>=a.ba&&(i=0);var j=xd(a,c,i,b,d),k=0,l=0;if(h>g&&h>j){k=f;for(l=h;;)if(e=k-1,e<0&&(e=a.ba-
1),g=xd(a,c,e,b,d),g>l)k=e,l=g;else break}else if(j>g){k=i;for(l=j;;)if(e=k+1,e>=a.ba&&(e=0),g=xd(a,c,e,b,d),g>l)k=e,l=g;else break}else k=e,l=g;return{wh:k,Uf:l}}var zd=[new td,new td],Ad=[new td,new td],Bd=[new td,new td],Cd=F(0,0),Dd=F(0,0),Ed=F(0,0),Fd=F(0,0),Gd=F(0,0),Hd=F(0,0),Id=F(0,0),Jd=F(0,0);function Kd(){C(B("Box2D.Collision.b2SeparationFunction"));this.M=F(0,0);this.B=F(0,0);this.Bc=this.Ac=p}
Kd.prototype.U=function(a,c,b,d,e){this.Ac=c;this.Bc=d;var f=a.Od;L(0<f&&f<3);var g,h,i=h=g=0,j=0,d=c=0,k,l,i=0;f==1?(this.D=1,f=N(this.Ac,a.oa[0]),a=N(this.Bc,a.pa[0]),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),this.B.x=i-g,this.B.y=j-h,Tb(this.B)):a.pa[0]==a.pa[1]?(this.D=2,c=N(this.Ac,a.oa[0]),d=N(this.Ac,a.oa[1]),a=N(this.Bc,a.pa[0]),this.M.x=0.5*(c.x+d.x),this.M.y=0.5*
(c.y+d.y),j=J(d,c),G(this.B),this.B=Hc(j),G(j),Tb(this.B),l=this.B,k=b.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),(i-g)*c+(j-h)*d<0&&this.B.kf()):a.oa[0]==a.oa[0]?(this.D=4,g=N(this.Bc,a.pa[0]),h=N(this.Bc,a.pa[1]),f=N(this.Ac,a.oa[0]),this.M.x=0.5*(g.x+h.x),this.M.y=0.5*(g.y+h.y),j=J(h,g),G(this.B),this.B=Hc(j),G(j),Tb(this.B),
l=this.B,k=e.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),(g-i)*c+(h-j)*d<0&&this.B.kf()):(c=N(this.Ac,a.oa[0]),d=N(this.Ac,a.oa[1]),g=N(this.Bc,a.pa[0]),h=N(this.Bc,a.pa[1]),j=J(d,c),i=Ic(b.d,j),G(j),j=J(h,g),k=Ic(e.d,j),G(j),e=i.x*i.x+i.y*i.y,b=k.x*k.x+k.y*k.y,j=J(k,i),a=i.x*j.x+i.y*j.y,f=k.x*j.x+k.y*j.y,G(j),j=i.x*k.x+i.y*
k.y,k=e*b-j*j,i=0,k!=0&&(i=K((j*f-a*b)/k,0,1)),(j*i+f)/b<0&&(i=K((j-a)/e,0,1)),f=F(0,0),f.x=c.x+i*(d.x-c.x),f.y=c.y+i*(d.y-c.y),a=F(0,0),a.x=g.x+i*(h.x-g.x),a.y=g.y+i*(h.y-g.y),i==0||i==1?(this.D=4,j=J(h,g),G(this.B),this.B=Hc(j),G(j),Tb(this.B),this.M=a):(this.D=2,j=J(d,c),G(this.B),this.B=Hc(j),G(j),this.M=f),i<0&&this.B.kf(),G(f),G(a))};
Kd.prototype.Qb=function(a,c){var b=0;switch(this.D){case 1:var b=Jc(a.d,this.B),d=this.B.Db(),e=Jc(c.d,d);G(d);var f=this.Ac.pe(b);G(b);b=this.Bc.pe(e);G(e);e=I(a,f);f=I(c,b);b=(f.x-e.x)*this.B.x+(f.y-e.y)*this.B.y;G(e);G(f);break;case 2:d=Ic(a.d,this.B);f=d.Db();e=Jc(c.d,f);G(f);b=this.Bc.pe(e);G(e);e=I(a,this.M);f=I(c,b);b=(f.x-e.x)*d.x+(f.y-e.y)*d.y;G(d);G(e);G(f);break;case 4:d=Ic(c.d,this.B);f=d.Db();b=Jc(a.d,f);G(f);f=this.Ac.pe(b);G(b);e=I(a,f);f=I(c,this.M);b=(e.x-f.x)*d.x+(e.y-f.y)*d.y;
G(d);G(e);G(f);break;default:L(q)}return b};var Ld=0,Md=0,Nd=0,Od=0,Pd=0,Qd=new Yc,Rd=new Zc,Sd=new dd,Td=new dd,Ud=new Kd,Vd=new Sc;function Wd(){C(B("Box2D.Common.Math.b2Sweep"));this.r=F(0,0);this.Ga=F(0,0);this.h=F(0,0);this.Ba=this.o=this.lb=p}Wd.prototype.i=function(a){this.r.m(a.r);this.Ga.m(a.Ga);this.h.m(a.h);this.lb=a.lb;this.o=a.o;this.Ba=a.Ba};Wd.prototype.ca=function(){var a=new Wd;a.r.m(this.r);a.Ga.m(this.Ga);a.h.m(this.h);a.lb=this.lb;a.o=this.o;a.Ba=this.Ba;return a};
Wd.prototype.ub=function(a,c){c===m&&(c=0);a.position.x=(1-c)*this.Ga.x+c*this.h.x;a.position.y=(1-c)*this.Ga.y+c*this.h.y;a.d.i((1-c)*this.lb+c*this.o);var b=a.d;a.position.x-=b.a.x*this.r.x+b.b.x*this.r.y;a.position.y-=b.a.y*this.r.x+b.b.y*this.r.y};Wd.prototype.Ic=function(a){a===m&&(a=0);if(this.Ba<a&&1-this.Ba>Number.MIN_VALUE){var c=(a-this.Ba)/(1-this.Ba);this.Ga.x=(1-c)*this.Ga.x+c*this.h.x;this.Ga.y=(1-c)*this.Ga.y+c*this.h.y;this.lb=(1-c)*this.lb+c*this.o;this.Ba=a}};function Xd(){this.position=F(0,0);this.xj=F(0,0);this.Pi=this.wj=this.Qi=this.Za=0;this.Ri=this.Oi=n;this.Vi=this.Sc=q;this.type=0;this.Ni=n;this.pj=1};function S(a,c){C(B("Box2D.Dynamics.Contacts.b2Contact"));this.kb="Contact"+Yd++;this.ib=new vd;this.ae=new vd;this.Ed=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Xd||d.D!=2||d.Xd;this.Tf=a.nc()||c.nc();this.Ee=q;this.Q=a;this.V=c;this.enabled=n;this.nf=b.xa;this.of=d.xa;this.Zf=d.bb.xa;Zd(this)}
S.prototype.da=function(a,c){this.ib.da();this.ae.da();this.Ed=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Xd||d.D!=2||d.Xd;this.Tf=a.nc()||c.nc();this.Ee=q;this.Q=a;this.V=c;this.enabled=n;this.nf=b.xa;this.of=d.xa;this.Zf=d.bb.xa;Zd(this)};function Zd(a){a.nf.Gd(a);a.of.Gd(a);a.Zf.Gd(a);$d(a)}function $d(a){var c=q,b=q;!a.nc()&&a.enabled&&(a.Ed&&(c=n),a.pg&&(b=n));ae(a.nf,a,c,b);ae(a.of,a,c,b);ae(a.Zf,a,c,b)}function be(a,c){var b=a.V.H(),d=a.Q.X,e=a.V.X;c.U(a.ib,a.Q.H().ub(),d.T,b.ub(),e.T)}
S.prototype.nc=t("Tf");function ce(a,c){var b=a.Q.H();return b!=c?b:a.V.H()}
function de(a,c){var b=a.ae;a.ae=a.ib;a.ib=b;a.enabled=n;var d=q,b=a.Ed,e=a.Q.H(),f=a.V.H(),g=a.Q.Lb.Md(a.V.Lb);if(a.Tf){if(g){var d=a.Q.X,e=e.ub(),g=a.V.X,h=f.ub(),f=new Zc;f.ic=new Rc;f.ic.i(d);f.jc=new Rc;f.jc.i(g);f.af=e;f.bf=h;f.dh=n;e=new Yc;e.Od=0;d=new Sc;Xc(d,e,f);G(d.gc);G(d.hc);d=d.td<10*Number.MIN_VALUE}a.ib.ra=0}else{a.pg=e.D!=2||e.Xd||f.D!=2||f.Xd?n:q;if(g){a.Qb();d=a.ib.ra>0;for(g=0;g<a.ib.ra;g++){h=a.ib.J[g];h.bd=0;for(var i=h.dd=0;i<a.ae.ra;i++){var j=a.ae.J[i];if(j.wc.Sa==h.wc.Sa){h.bd=
j.bd;h.dd=j.dd;break}}}}else a.ib.ra=0;d!=b&&(ee(e,n),ee(f,n))}a.Ed=d;d!=b&&$d(a);!b&&d&&c.me(a);b&&!d&&c.Hd(a);a.Tf||c.we(a,a.ae)}S.prototype.Qb=aa();var fe=new function(){C(B("Box2D.Collision.b2TOIInput"));this.ic=new Rc;this.jc=new Rc;this.pi=new Wd;this.qi=new Wd},Yd=0;function ge(a,c){S.call(this,a,c)}y(ge,S);ge.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};ge.prototype.Qb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;var f=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-(b.position.x+(b.d.a.x*c.aa.x+b.d.b.x*c.aa.y)),b=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-(b.position.y+(b.d.a.y*c.aa.x+b.d.b.y*c.aa.y)),e=c.T+d.T;if(!(f*f+b*b>e*e))a.D=1,a.M.m(c.aa),a.Ia.I(),a.ra=1,a.J[0].M.m(d.aa),pd(a.J[0].wc,0)};function he(a,c){S.call(this,a,c)}y(he,S);he.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};he.prototype.Qb=aa();function ie(a){C(B("Box2D.Collision.Shapes.b2CircleShape"));$c.call(this);this.T=a;this.ei=a*a;this.aa=F(0,0);this.n=[this.aa]}y(ie,$c);u=ie.prototype;u.qe=ca("b2CircleShape");u.ca=function(){var a=new ie(this.T);a.i(this);return a};u.i=function(a){$c.prototype.i.call(this,a);a instanceof ie&&this.aa.m(a.aa)};u.gf=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.aa.x+b.b.x*this.aa.y),b=c.position.y+(b.a.y*this.aa.x+b.b.y*this.aa.y);a.lowerBound.i(d-this.T,b-this.T);a.upperBound.i(d+this.T,b+this.T)};
u.fh=function(a,c){var b=c*Math.PI*this.ei;a.m(b,this.aa,b*(0.5*this.ei+(this.aa.x*this.aa.x+this.aa.y*this.aa.y)))};u.lh=function(a){var c=this.T,b=this.n;a.C=1;a.T=c;a.n=b};function je(a,c){L(a.X instanceof O);L(c.X instanceof ie);S.call(this,a,c)}y(je,S);je.prototype.da=function(a,c){L(a.X instanceof O);L(c.X instanceof ie);S.prototype.da.call(this,a,c)};
je.prototype.Qb=function(){a:{var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;for(var f=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-b.position.x,g=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-b.position.y,e=f*b.d.a.x+g*b.d.a.y,b=f*b.d.b.x+g*b.d.b.y,f=0,g=-Number.MAX_VALUE,h=c.T+d.T,i=0;i<c.ba;++i){var j=c.W[i].x*(e-c.n[i].x)+c.W[i].y*(b-c.n[i].y);if(j>h)break a;j>g&&(g=j,f=i)}j=f+1;j>=c.ba&&(j=0);var i=c.n[f],k=c.n[j];if(g<Number.MIN_VALUE)a.ra=1,a.D=2,a.Ia.m(c.W[f]),a.M.x=
0.5*(i.x+k.x),a.M.y=0.5*(i.y+k.y);else if((e-i.x)*(k.x-i.x)+(b-i.y)*(k.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.ra=1;a.D=2;a.Ia.x=e-i.x;a.Ia.y=b-i.y;Tb(a.Ia);a.M.m(i)}else if((e-k.x)*(i.x-k.x)+(b-k.y)*(i.y-k.y)<=0){if((e-k.x)*(e-k.x)+(b-k.y)*(b-k.y)>h*h)break a;a.ra=1;a.D=2;a.Ia.x=e-k.x;a.Ia.y=b-k.y;Tb(a.Ia);a.M.m(k)}else{j=0.5*(i.x+k.x);i=0.5*(i.y+k.y);g=(e-j)*c.W[f].x+(b-i)*c.W[f].y;if(g>h)break a;a.ra=1;a.D=2;a.Ia.x=c.W[f].x;a.Ia.y=c.W[f].y;Tb(a.Ia);a.M.i(j,i)}a.J[0].M.m(d.aa);
pd(a.J[0].wc,0)}};function ke(a,c){L(a.X instanceof O);L(q);S.call(this,a,c)}y(ke,S);ke.prototype.da=function(a,c){L(a.X instanceof O);L(q);S.prototype.da.call(this,a,c)};ke.prototype.Qb=aa();function le(a,c){S.call(this,a,c)}y(le,S);le.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};
le.prototype.Qb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;var f=c.T+d.T,g=yd(c,b,d,e);if(!(g.Uf>f)){var h=yd(d,e,c,b);if(!(h.Uf>f)){var i=c,j=d,k=b,l=e,r=0,o=g.wh;a.D=2;if(h.Uf>0.98*g.Uf+0.001)i=d,j=c,k=e,l=b,o=h.wh,a.D=4,r=1;for(var c=o,b=l,d=k.d.a.x*i.W[c].x+k.d.b.x*i.W[c].y,e=k.d.a.y*i.W[c].x+k.d.b.y*i.W[c].y,g=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=g,g=0,h=Number.MAX_VALUE,v=0;v<j.ba;v++){var s=d*j.W[v].x+e*j.W[v].y;s<h&&(h=s,g=v)}d=g+1;d>=j.ba&&
(d=0);zd[0].sb.x=b.position.x+(b.d.a.x*j.n[g].x+b.d.b.x*j.n[g].y);zd[0].sb.y=b.position.y+(b.d.a.y*j.n[g].x+b.d.b.y*j.n[g].y);qd(zd[0].id,c);rd(zd[0].id,g);sd(zd[0].id,0);zd[1].sb.x=b.position.x+(b.d.a.x*j.n[d].x+b.d.b.x*j.n[d].y);zd[1].sb.y=b.position.y+(b.d.a.y*j.n[d].x+b.d.b.y*j.n[d].y);qd(zd[1].id,c);rd(zd[1].id,d);sd(zd[1].id,1);c=i.n[o];i=o+1<i.ba?i.n[o+1]:i.n[0];Cd.i(i.x-c.x,i.y-c.y);Tb(Cd);Dd.x=Cd.y;Dd.y=-Cd.x;Ed.i(0.5*(c.x+i.x),0.5*(c.y+i.y));Gd.x=k.d.a.x*Cd.x+k.d.b.x*Cd.y;Gd.y=k.d.a.y*Cd.x+
k.d.b.y*Cd.y;Hd.x=-Gd.x;Hd.y=-Gd.y;Fd.x=Gd.y;Fd.y=-Gd.x;Id.x=k.position.x+(k.d.a.x*c.x+k.d.b.x*c.y);Id.y=k.position.y+(k.d.a.y*c.x+k.d.b.y*c.y);Jd.x=k.position.x+(k.d.a.x*i.x+k.d.b.x*i.y);Jd.y=k.position.y+(k.d.a.y*i.x+k.d.b.y*i.y);if(!(wd(Ad,zd,Hd,-Gd.x*Id.x-Gd.y*Id.y+f)<2)&&!(wd(Bd,Ad,Gd,Gd.x*Jd.x+Gd.y*Jd.y+f)<2)){a.Ia.m(Dd);a.M.m(Ed);k=Fd.x*Id.x+Fd.y*Id.y;for(o=i=0;o<2;++o)if(Fd.x*Bd[o].sb.x+Fd.y*Bd[o].sb.y-k<=f)c=Bd[o].sb.x-l.position.x,j=Bd[o].sb.y-l.position.y,a.J[i].M.x=c*l.d.a.x+j*l.d.a.y,
a.J[i].M.y=c*l.d.b.x+j*l.d.b.y,a.J[i].wc.i(Bd[o].id),c=a.J[i].wc,c.rh=r,c.Sa=c.Sa&16777215|c.rh<<24&4278190080,i++;a.ra=i}}}};function me(){this.Nb={};this.vc={};ne(this,ge,"b2CircleShape","b2CircleShape");ne(this,je,"b2PolygonShape","b2CircleShape");ne(this,le,"b2PolygonShape","b2PolygonShape");ne(this,he,"b2EdgeShape","b2CircleShape");ne(this,ke,"b2PolygonShape","b2EdgeShape")}function ne(a,c,b,d){a.vc[b]=a.vc[b]||{};a.vc[b][d]=a.vc[b][d]||[];a.Nb[b]=a.Nb[b]||{};a.Nb[b][d]=new nd;a.Nb[b][d].Eh=c;a.Nb[b][d].mi=n;if(b!=d)a.Nb[d]=a.Nb[d]||{},a.Nb[d][b]=new nd,a.Nb[d][b].Eh=c,a.Nb[d][b].mi=q}
me.prototype.Jc=function(a,c){Ob(B("Box2D.Dynamics.Contacts.b2Contact"));var b=a.X.qe(),d=c.X.qe(),e=this.Nb[b][d],f=e.Eh;return f!=p?e.mi?this.vc[b][d].length>0?(b=this.vc[b][d].pop(),b.da(a,c),b):new f(a,c):this.vc[d][b].length>0?(b=this.vc[d][b].pop(),b.da(c,a),b):new f(c,a):p};me.prototype.eb=function(a){Pb(B("Box2D.Dynamics.Contacts.b2Contact"));this.vc[a.Q.X.qe()][a.V.X.qe()].push(a)};function oe(a){C(B("Box2D.Collision.b2DynamicTreeNode"));this.K=lc();this.parent=this.Xb=this.Ta=p;this.Ma=a}var pe=[];function qe(a){typeof a=="undefined"&&(a=p);if(pe.length>0){var c=pe.pop();c.Ma=a;c.K.I();return c}return new oe(a)}oe.prototype.eb=function(){this.Ma=this.parent=this.Xb=this.Ta=p;pe.push(this)};function re(){C(B("Box2D.Collision.b2DynamicTree"));this.fc=p;this.Jj=this.tk=0}u=re.prototype;u.ne=function(a,c){var b=qe(c);b.K.lowerBound.x=a.lowerBound.x-0.1;b.K.lowerBound.y=a.lowerBound.y-0.1;b.K.upperBound.x=a.upperBound.x+0.1;b.K.upperBound.y=a.upperBound.y+0.1;se(this,b);return b};u.oe=function(a){te(this,a);a.eb()};
u.eg=function(a,c,b){L(a.Ta===p);if(nc(a.K,c))return q;te(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.K.lowerBound.x=c.lowerBound.x-d;a.K.lowerBound.y=c.lowerBound.y-b;a.K.upperBound.x=c.upperBound.x+d;a.K.upperBound.y=c.upperBound.y+b;se(this,a);return n};u.Id=function(a){return a.K};u.fg=function(a,c,b){if(this.fc!==p){var d=[];for(d.push(this.fc);d.length>0;){var e=d.pop();if(e.K.Md(c))if(e.Ta===p){if(!a.call(b,e.Ma))break}else d.push(e.Ta),d.push(e.Xb)}}};
function se(a,c){a.Jj++;if(a.fc===p)a.fc=c,a.fc.parent=p;else{var b;b=mc(c.K);for(var d=a.fc;d.Ta!==p;)var e=d.Ta,d=d.Xb,d=Math.abs((e.K.lowerBound.x+e.K.upperBound.x)/2-b.x)+Math.abs((e.K.lowerBound.y+e.K.upperBound.y)/2-b.y)<Math.abs((d.K.lowerBound.x+d.K.upperBound.x)/2-b.x)+Math.abs((d.K.lowerBound.y+d.K.upperBound.y)/2-b.y)?e:d;G(b);b=d;e=b.parent;d=qe();d.parent=e;oc(d.K,c.K,b.K);if(e){b.parent.Ta==b?e.Ta=d:e.Xb=d;d.Ta=b;d.Xb=c;b.parent=d;for(c.parent=d;e;){if(nc(e.K,d.K))break;oc(e.K,e.Ta.K,
e.Xb.K);d=e;e=e.parent}}else d.Ta=b,d.Xb=c,b.parent=d,c.parent=d,a.fc=d}}function te(a,c){if(c==a.fc)a.fc=p;else{var b=c.parent,d=b.parent,e;e=b.Ta==c?b.Xb:b.Ta;if(d){d.Ta==b?d.Ta=e:d.Xb=e;for(e.parent=d;d;){e=d.K;oc(d.K,d.Ta.K,d.Xb.K);if(nc(e,d.K))break;d=d.parent}}else a.fc=e,e.parent=p;b.eb()}};function ue(){C(B("Box2D.Collision.b2DynamicTreeBroadPhase"));this.Cc=new re;this.Re=[];this.fd=this.bh=this.Ge=this.Fe=p}u=ue.prototype;u.ne=function(a,c){var b=this.Cc.ne(a,c);this.Re.push(b);return b};u.oe=function(a){Oa(this.Re,a);this.Cc.oe(a)};u.eg=function(a,c,b){this.Cc.eg(a,c,b)&&this.Re.push(a)};u.Md=function(a,c){return this.Cc.Id(a).Md(this.Cc.Id(c))};u.Id=function(a){return this.Cc.Id(a)};
function ve(a,c){a.Fe=p;a.Ge=p;for(a.bh=c;a.Re.length>0;)a.fd=a.Re.pop(),a.Cc.fg(a.Hi,a.Cc.Id(a.fd),a);a.Fe=p;a.Ge=p;a.bh=p;a.fd=p}u.Hi=function(a){if(a!=this.fd.Ma&&!(this.fd.Ma==this.Fe&&a==this.Ge)&&!(this.fd.Ma==this.Ge&&a==this.Fe))this.bh(this.fd.Ma,a),this.Fe=this.fd.Ma,this.Ge=a;return n};u.fg=function(a,c){this.Cc.fg(a,c)};function we(){}we.prototype.me=aa();we.prototype.Hd=aa();we.prototype.we=aa();we.prototype.ue=aa();var xe=new we;function ye(a){this.bb=a;this.Eg=jd;this.yd=xe;this.Xh=new me;this.xd=new ue}function ze(a){ve(a.xd,function(c,b){a:{var d=c.H(),e=b.H();if(d!=e&&e.Vb(d)&&a.Eg.Vb(c,b)){for(d=e.xa.O(T);d;d=d.next)if(e=d.va.Q,e==c){if(e=d.va.V,e==b)break a}else if(e==b&&(e=d.va.V,e==c))break a;a.Xh.Jc(c,b)}}})}ye.prototype.eb=function(a){var c=a.Q.H(),b=a.V.H();a.Ed&&this.yd.Hd(a);a.ib.ra>0&&(ee(c,n),ee(b,n));Ae(a.nf,a);Ae(a.of,a);Ae(a.Zf,a);this.Xh.eb(a)};
new function(){C(B("Box2D.Collision.b2ContactPoint"));this.position=F(0,0);this.Ak=F(0,0);this.cb=F(0,0);this.id=new od};function Be(a){this.va=a;this.Ec=this.next=p}var Ce=[];Be.prototype.Mc=ba("next");Be.prototype.Nc=ba("Ec");function De(){this.rf=[];for(var a=0;a<=T;a++)this.rf[a]=p;this.sf=[];for(a=0;a<=T;a++)this.sf[a]=p;this.qd={};this.og=0}u=De.prototype;u.O=function(a){return this.rf[a]};u.Gd=function(a){var c=a.kb;if(this.qd[c]==p){this.qd[c]=[];for(var b=0;b<=T;b++)this.qd[c][b]=p;this.Pb(a,c,T);this.og++}};function ae(a,c,b,d){b?a.Pb(c,c.kb,Ee):a.Ub(c.kb,Ee);d?a.Pb(c,c.kb,Fe):a.Ub(c.kb,Fe)}function Ae(a,c){var b=c.kb;if(a.qd[b]!=p){for(var d=0;d<=T;d++)a.Ub(b,d);delete a.qd[b];a.og--}}
u.Ub=function(a,c){var b=this.qd[a];if(b!=p){var d=b[c];if(d!=p){b[c]=p;var b=d.Ec,e=d.next;b==p?this.rf[c]=e:b.Mc(e);e==p?this.sf[c]=b:e.Nc(b);Ce.push(d)}}};u.Pb=function(a,c,b){c=this.qd[c];if(c[b]==p){if(Ce.length>0){var d=Ce.pop();d.next=p;d.Ec=p;d.va=a;a=d}else a=new Be(a);c[b]=a;a=this.sf[b];a!=p?(a.Mc(c[b]),c[b].Nc(a)):this.rf[b]=c[b];this.sf[b]=c[b]}};u.dg=t("og");var Ee=0,Fe=1,T=2;function Ge(){this.Rd=[]}Ge.prototype.Sd=0;Ge.prototype.le=0;Ge.prototype.Mh=function(){return this.le-this.Sd};Ge.prototype.clear=function(){this.le=this.Sd=this.Rd.length=0};function He(a){this.body=a;this.Ec=this.next=p}He.prototype.Mc=ba("next");He.prototype.Nc=ba("Ec");He.prototype.H=t("body");function Ie(){this.pf=[];for(var a=0;a<=Je;a++)this.pf[a]=p;this.qf=[];for(a=0;a<=Je;a++)this.qf[a]=p;this.Nd={};this.lg=0}u=Ie.prototype;u.O=function(a){return this.pf[a]};u.ef=function(a){var c=a.kb;this.Nd[c]==p&&(this.Pb(a,c,Je),Ke(this,a),a.Hf.push(this),this.lg++)};function Ke(a,c){var b=c.D,d=c.kb,e=c.Mb,f=c.ld();b==2?a.Pb(c,d,Le):a.Ub(d,Le);b!=0?a.Pb(c,d,Me):a.Ub(d,Me);b!=0&&f&&e?a.Pb(c,d,Ne):a.Ub(d,Ne);e?a.Pb(c,d,Oe):a.Ub(d,Oe);f?a.Pb(c,d,Pe):a.Ub(d,Pe)}
function Qe(a,c){var b=c.kb;if(a.Nd[b]!=p){Oa(c.Hf,a);for(var d=0;d<=Je;d++)a.Ub(b,d);delete a.Nd[b];a.lg--}}u.Ub=function(a,c){var b=this.Nd[a];if(b!=p){var d=b[c];if(d!=p)b[c]=p,b=d.Ec,d=d.next,b==p?this.pf[c]=d:b.Mc(d),d==p?this.qf[c]=b:d.Nc(b)}};u.Pb=function(a,c,b){var d=this.Nd[c];if(d==p){for(var d=[],e=0;e<=Je;e++)d[e]=p;this.Nd[c]=d}d[b]==p&&(d[b]=new He(a),a=this.qf[b],a!=p?a.Mc(d[b]):this.pf[b]=d[b],d[b].Nc(a),this.qf[b]=d[b])};u.cg=t("lg");var Le=0,Me=1,Pe=2,Ne=3,Oe=4,Je=5;function Re(a,c,b){C(B("Box2D.Common.b2Color"));this.th=255*K(a,0,1);this.sh=255*K(c,0,1);this.qh=255*K(b,0,1)}Re.prototype.i=function(a,c,b){this.th=255*K(a,0,1);this.sh=255*K(c,0,1);this.qh=255*K(b,0,1)};function gc(a){return a.th<<16|a.sh<<8|a.qh};function Se(){C(B("Box2D.Collision.b2WorldManifold"));this.N=F(0,0);this.J=[];for(var a=this.ra=0;a<2;a++)this.J[a]=F(0,0)}
Se.prototype.U=function(a,c,b,d,e){if(a.ra!=0){var f=0,g,h,i=0,j=0,k=0,l=0,r=0;g=0;switch(a.D){case 1:h=c.d;g=a.M;f=c.position.x+h.a.x*g.x+h.b.x*g.y;c=c.position.y+h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.J[0].M;a=d.position.x+h.a.x*g.x+h.b.x*g.y;d=d.position.y+h.a.y*g.x+h.b.y*g.y;g=a-f;h=d-c;i=g*g+h*h;i>Qc?(i=Math.sqrt(i),this.N.x=g/i,this.N.y=h/i):(this.N.x=1,this.N.y=0);g=c+b*this.N.y;d-=e*this.N.y;this.J[0].x=0.5*(f+b*this.N.x+(a-e*this.N.x));this.J[0].y=0.5*(g+d);break;case 2:h=c.d;g=a.Ia;i=h.a.x*g.x+h.b.x*
g.y;j=h.a.y*g.x+h.b.y*g.y;h=c.d;g=a.M;k=c.position.x+h.a.x*g.x+h.b.x*g.y;l=c.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=i;this.N.y=j;for(f=0;f<a.ra;f++)h=d.d,g=a.J[f].M,r=d.position.x+h.a.x*g.x+h.b.x*g.y,g=d.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(b-(r-k)*i-(g-l)*j-e)*i,this.J[f].y=g+0.5*(b-(r-k)*i-(g-l)*j-e)*j;break;case 4:h=d.d;g=a.Ia;i=h.a.x*g.x+h.b.x*g.y;j=h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.M;k=d.position.x+h.a.x*g.x+h.b.x*g.y;l=d.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=-i;this.N.y=-j;for(f=
0;f<a.ra;f++)h=c.d,g=a.J[f].M,r=c.position.x+h.a.x*g.x+h.b.x*g.y,g=c.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(e-(r-k)*i-(g-l)*j-b)*i,this.J[f].y=g+0.5*(e-(r-k)*i-(g-l)*j-b)*j}}};function Te(a,c,b,d,e){C(B("Box2D.Dynamics.b2TimeStep"));this.da(a,c,b,d,e)}Te.prototype.da=function(a,c,b,d,e){this.ja=a;var f=0;a>0&&(f=1/a);this.rc=f;this.ab=c;this.Ug=b;this.eh=d;this.Fd=e};function Ue(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraintPoint"));this.ta=F(0,0);this.la=F(0,0);this.ma=F(0,0)}Ue.prototype.da=function(){this.ta.i(0,0);this.la.i(0,0);this.ma.i(0,0)};function Ve(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraint"));this.Zb=F(0,0);this.ta=F(0,0);this.cb=F(0,0);this.Dc=new Ac;this.fb=new Ac;this.ua=[];for(var a=0;a<2;a++)this.ua[a]=new Ue};function We(){this.N=F(0,0);this.Mf=[];this.J=[];for(var a=0;a<2;a++)this.J[a]=F(0,0)}
We.prototype.U=function(a){L(a.pb>0);switch(a.type){case 1:var c=a.s.e.d,b=a.ta,d=a.s.e.position.x+(c.a.x*b.x+c.b.x*b.y),e=a.s.e.position.y+(c.a.y*b.x+c.b.y*b.y),c=a.u.e.d,b=a.ua[0].ta,f=a.u.e.position.x+(c.a.x*b.x+c.b.x*b.y),c=a.u.e.position.y+(c.a.y*b.x+c.b.y*b.y),b=f-d,g=c-e,h=b*b+g*g;h>Qc?(h=Math.sqrt(h),this.N.x=b/h,this.N.y=g/h):(this.N.x=1,this.N.y=0);this.J[0].x=0.5*(d+f);this.J[0].y=0.5*(e+c);this.Mf[0]=b*this.N.x+g*this.N.y-a.Xg;break;case 2:this.N.x=a.s.e.d.a.x*a.Zb.x+a.s.e.d.b.x*a.Zb.y;
this.N.y=a.s.e.d.a.y*a.Zb.x+a.s.e.d.b.y*a.Zb.y;d=a.s.e.position.x+(a.s.e.d.a.x*a.ta.x+a.s.e.d.b.x*a.ta.y);e=a.s.e.position.y+(a.s.e.d.a.y*a.ta.x+a.s.e.d.b.y*a.ta.y);for(f=0;f<a.pb;f++)c=a.u.e.position.x+(a.u.e.d.a.x*a.ua[f].ta.x+a.u.e.d.b.x*a.ua[f].ta.y),b=a.u.e.position.y+(a.u.e.d.a.y*a.ua[f].ta.x+a.u.e.d.b.y*a.ua[f].ta.y),this.Mf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Xg,this.J[f].x=c,this.J[f].y=b;break;case 4:this.N.x=a.u.e.d.a.x*a.Zb.x+a.u.e.d.b.x*a.Zb.y;this.N.y=a.u.e.d.a.y*a.Zb.x+a.u.e.d.b.y*a.Zb.y;
d=a.u.e.position.x+(a.u.e.d.a.x*a.ta.x+a.u.e.d.b.x*a.ta.y);e=a.u.e.position.y+(a.u.e.d.a.y*a.ta.x+a.u.e.d.b.y*a.ta.y);for(f=0;f<a.pb;f++)c=a.s.e.position.x+(a.s.e.d.a.x*a.ua[f].ta.x+a.s.e.d.b.x*a.ua[f].ta.y),b=a.s.e.position.y+(a.s.e.d.a.y*a.ua[f].ta.x+a.s.e.d.b.y*a.ua[f].ta.y),this.Mf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Xg,this.J[f].i(c,b);this.N.x*=-1;this.N.y*=-1}};function Xe(){this.ac=[]}u=Xe.prototype;
u.U=function(a,c,b){for(this.Ke=b;this.ac.length<this.Ke;)this.ac[this.ac.length]=new Ve;for(a=0;a<b;a++){var d=c[a],e=d.Q,f=d.V,g=e.X.T,h=f.X.T,i=e.H(),j=f.H(),k=d.ib,l=Math.sqrt(e.$h*f.$h),r=e.Lf>f.Lf?e.Lf:f.Lf,o=i.f.x,v=i.f.y,s=j.f.x,x=j.f.y,z=i.p,wa=j.p;L(k.ra>0);Ye.U(k,i.e,g,j.e,h);f=Ye.N.x;d=Ye.N.y;e=this.ac[a];e.s=i;e.u=j;e.Rj=k;e.cb.x=f;e.cb.y=d;e.pb=k.ra;e.xb=l;e.Fc=r;e.Zb.x=k.Ia.x;e.Zb.y=k.Ia.y;e.ta.x=k.M.x;e.ta.y=k.M.y;e.Xg=g+h;e.type=k.D;for(g=0;g<e.pb;++g){l=k.J[g];h=e.ua[g];h.wa=l.bd;
h.Hc=l.dd;h.ta.m(l.M);var l=h.la.x=Ye.J[g].x-i.c.h.x,r=h.la.y=Ye.J[g].y-i.c.h.y,la=h.ma.x=Ye.J[g].x-j.c.h.x,xa=h.ma.y=Ye.J[g].y-j.c.h.y,U=l*d-r*f,M=la*d-xa*f;U*=U;M*=M;h.Dc=1/(i.k+j.k+i.v*U+j.v*M);var ea=i.t*i.k+j.t*j.k;ea+=i.t*i.v*U+j.t*j.v*M;h.ij=1/ea;M=d;ea=-f;U=l*ea-r*M;M=la*ea-xa*M;U*=U;M*=M;h.ck=1/(i.k+j.k+i.v*U+j.v*M);h.Xf=0;l=e.cb.x*(s+-wa*xa-o- -z*r)+e.cb.y*(x+wa*la-v-z*l);l<-1&&(h.Xf+=-e.Fc*l)}if(e.pb==2)x=e.ua[0],s=e.ua[1],k=i.k,i=i.v,o=j.k,j=j.v,v=x.la.x*d-x.la.y*f,x=x.ma.x*d-x.ma.y*f,
z=s.la.x*d-s.la.y*f,s=s.ma.x*d-s.ma.y*f,f=k+o+i*v*v+j*x*x,d=k+o+i*z*z+j*s*s,j=k+o+i*v*z+j*x*s,f*f<100*(f*d-j*j)?(e.fb.a.i(f,j),e.fb.b.i(j,d),f=e.fb,e=e.Dc,d=f.a.x*f.b.y-f.b.x*f.a.y,d!==0&&(d=1/d),e.a.x=d*f.b.y,e.b.x=-d*f.b.x,e.a.y=-d*f.a.y,e.b.y=d*f.a.x):e.pb=1}};
u.Sb=function(a){for(var c=0;c<this.Ke;++c){var b=this.ac[c],d=b.s,e=b.u,f=d.k,g=d.v,h=e.k,i=e.v,j=b.cb.x,k=b.cb.y,l=k,r=-j,o=0,v=0;if(a.Fd){v=b.pb;for(o=0;o<v;++o){var s=b.ua[o];s.wa*=a.ab;s.Hc*=a.ab;var x=s.wa*j+s.Hc*l,z=s.wa*k+s.Hc*r;d.p-=g*(s.la.x*z-s.la.y*x);d.f.x-=f*x;d.f.y-=f*z;e.p+=i*(s.ma.x*z-s.ma.y*x);e.f.x+=h*x;e.f.y+=h*z}}else{v=b.pb;for(o=0;o<v;++o)d=b.ua[o],d.wa=0,d.Hc=0}}};
u.Fb=function(){for(var a=0;a<this.Ke;a++){for(var c=this.ac[a],b=c.cb.x,d=c.cb.y,e=0;e<c.pb;e++){var f=c,g=c.ua[e],h=f.cb.y,i=-f.cb.x,j=f.xb*g.wa,j=K(g.Hc-g.ck*((f.u.f.x-f.u.p*g.ma.y-f.s.f.x+f.s.p*g.la.y)*h+(f.u.f.y+f.u.p*g.ma.x-f.s.f.y-f.s.p*g.la.x)*i),-j,j),k=j-g.Hc;h*=k;i*=k;f.s.f.x-=f.s.k*h;f.s.f.y-=f.s.k*i;f.s.p-=f.s.v*(g.la.x*i-g.la.y*h);f.u.f.x+=f.u.k*h;f.u.f.y+=f.u.k*i;f.u.p+=f.u.v*(g.ma.x*i-g.ma.y*h);g.Hc=j}if(c.pb==1)e=c.ua[0],f=e.wa-e.Dc*((c.u.f.x-c.u.p*e.ma.y-c.s.f.x+c.s.p*e.la.y)*b+
(c.u.f.y+c.u.p*e.ma.x-c.s.f.y-c.s.p*e.la.x)*d-e.Xf),f=f>0?f:0,g=f-e.wa,b*=g,d*=g,c.s.f.x-=c.s.k*b,c.s.f.y-=c.s.k*d,c.s.p-=c.s.v*(e.la.x*d-e.la.y*b),c.u.f.x+=c.u.k*b,c.u.f.y+=c.u.k*d,c.u.p+=c.u.v*(e.ma.x*d-e.ma.y*b),e.wa=f;else{e=c.ua[0];f=c.ua[1];g=e.wa;i=f.wa;j=(c.u.f.x-c.u.p*e.ma.y-c.s.f.x+c.s.p*e.la.y)*b+(c.u.f.y+c.u.p*e.ma.x-c.s.f.y-c.s.p*e.la.x)*d-e.Xf;d=(c.u.f.x-c.u.p*f.ma.y-c.s.f.x+c.s.p*f.la.y)*b+(c.u.f.y+c.u.p*f.ma.x-c.s.f.y-c.s.p*f.la.x)*d-f.Xf;j-=c.fb.a.x*g+c.fb.b.x*i;for(d-=c.fb.a.y*g+
c.fb.b.y*i;;){b=-(c.Dc.a.x*j+c.Dc.b.x*d);if(b>=0&&(h=-(c.Dc.a.y*j+c.Dc.b.y*d),h>=0)){Ze(c,e,f,b-g,h-i);e.wa=b;f.wa=h;break}b=-e.Dc*j;if(b>=0&&c.fb.a.y*b+d>=0){Ze(c,e,f,b-g,-i);e.wa=b;f.wa=0;break}b=-f.Dc*d;if(b>=0&&c.fb.b.x*b+j>=0){Ze(c,e,f,-g,b-i);e.wa=0;f.wa=b;break}if(j>=0&&d>=0){Ze(c,e,f,-g,-i);e.wa=0;f.wa=0;break}break}}}};
function Ze(a,c,b,d,e){var f=d*a.cb.x;d*=a.cb.y;var g=e*a.cb.x;e*=a.cb.y;a.s.f.x-=a.s.k*(f+g);a.s.f.y-=a.s.k*(d+e);a.s.p-=a.s.v*(c.la.x*d-c.la.y*f+b.la.x*e-b.la.y*g);a.u.f.x+=a.u.k*(f+g);a.u.f.y+=a.u.k*(d+e);a.u.p+=a.u.v*(c.ma.x*d-c.ma.y*f+b.ma.x*e-b.ma.y*g);c.wa=0;b.wa=0}u.bg=function(){for(var a=0;a<this.Ke;++a)for(var c=this.ac[a],b=c.Rj,d=0;d<c.pb;++d){var e=b.J[d],f=c.ua[d];e.bd=f.wa;e.dd=f.Hc}};
u.Eb=function(a){a===m&&(a=0);for(var c=0,b=0;b<this.Ke;b++){var d=this.ac[b],e=d.s,f=d.u,g=e.t*e.k,h=e.t*e.v,i=f.t*f.k,j=f.t*f.v;$e.U(d);for(var k=$e.N,l=0;l<d.pb;l++){var r=d.ua[l],o=$e.J[l],v=$e.Mf[l],s=o.x-e.c.h.x,x=o.y-e.c.h.y,z=o.x-f.c.h.x,o=o.y-f.c.h.y,c=c<v?c:v,v=-r.ij*K(a*(v+0.005),-0.2,0),r=v*k.x;v*=k.y;e.c.h.x-=g*r;e.c.h.y-=g*v;e.c.o-=h*(s*v-x*r);R(e);f.c.h.x+=i*r;f.c.h.y+=i*v;f.c.o+=j*(z*v-o*r);R(f)}}return c>-0.0075};var Ye=new Se,$e=new We;function af(){C(B("Box2D.Dynamics.b2ContactImpulse"));this.ji=[];this.ri=[]}af.prototype.da=function(){this.ji=[];this.ri=[]};function bf(a,c){C(B("Box2D.Dynamics.b2Island"));this.Lg=a;this.nb=c;this.$b=[];this.Ff=[];this.ad=[];this.bc=[];this.Ka=[];this.Af=new af}u=bf.prototype;u.da=function(a,c){this.Lg=a;this.nb=c};function cf(a){a.$b=[];a.Ff=[];a.ad=[];a.bc=[];a.Ka=[]}
u.xe=function(a,c,b){for(var d=0;d<this.Ff.length;d++){var e=this.Ff[d];e.f.x+=a.ja*(c.x+e.k*e.Me.x);e.f.y+=a.ja*(c.y+e.k*e.Me.y);e.p+=a.ja*e.v*e.Pg;e.f.oc(K(1-a.ja*e.Mj,0,1));e.p*=K(1-a.ja*e.Aj,0,1)}this.nb.U(a,this.bc,this.bc.length);this.nb.Sb(a);for(c=0;c<this.Ka.length;c++)this.Ka[c].Sb(a);for(c=0;c<a.eh;c++){for(d=0;d<this.Ka.length;d++)this.Ka[d].Fb(a);this.nb.Fb()}for(c=0;c<this.Ka.length;c++)this.Ka[c].bg();this.nb.bg();for(c=0;c<this.ad.length;++c){var d=this.ad[c],e=a.ja*d.f.x,f=a.ja*d.f.y;
e*e+f*f>4&&(Tb(d.f),d.f.x*=2*a.rc,d.f.y*=2*a.rc);e=a.ja*d.p;if(e*e>Oc)d.p=d.p<0?-Nc*a.rc:Nc*a.rc;d.c.Ga.m(d.c.h);d.c.lb=d.c.o;d.c.h.x+=a.ja*d.f.x;d.c.h.y+=a.ja*d.f.y;d.c.o+=a.ja*d.p;R(d)}for(c=0;c<a.Ug;c++){d=this.nb.Eb(0.2);e=n;for(f=0;f<this.Ka.length;f++)var g=this.Ka[f].Eb(0.2),e=e&&g;if(d&&e)break}df(this,this.nb.ac);if(b){b=Number.MAX_VALUE;for(c=0;c<this.ad.length;c++)d=this.ad[c],!d.Cg||Math.abs(d.p)>Pc||Fc(d.f,d.f)>1.0E-4?b=d.Nf=0:(d.Nf+=a.ja,b=Math.min(b,d.Nf));if(b>=0.5)for(a=0;a<this.$b.length;a++)ee(this.$b[a],
q)}};
u.gg=function(a){var c=0,b=0;this.nb.U(a,this.bc,this.bc.length);for(var d=this.nb,c=0;c<this.Ka.length;++c)this.Ka[c].Sb(a);for(c=0;c<a.eh;++c){d.Fb();for(b=0;b<this.Ka.length;++b)this.Ka[b].Fb(a)}for(c=0;c<this.ad.length;++c){var b=this.ad[c],e=a.ja*b.f.x,f=a.ja*b.f.y;e*e+f*f>4&&(Tb(b.f),b.f.x*=2*a.rc,b.f.y*=2*a.rc);e=a.ja*b.p;if(e*e>Oc)b.p=b.p<0?-Nc*a.rc:Nc*a.rc;b.c.Ga.m(b.c.h);b.c.lb=b.c.o;b.c.h.x+=a.ja*b.f.x;b.c.h.y+=a.ja*b.f.y;b.c.o+=a.ja*b.p;R(b)}for(c=0;c<a.Ug;++c){e=d.Eb(0.75);f=n;for(b=0;b<
this.Ka.length;++b)var g=this.Ka[b].Eb(0.2),f=f&&g;if(e&&f)break}df(this,d.ac)};function df(a,c){if(a.Lg!=p)for(var b=0;b<a.bc.length;++b){var d=a.bc[b],e=c[b];a.Af.da();for(var f=0;f<e.pb;++f)a.Af.ji[f]=e.ua[f].wa,a.Af.ri[f]=e.ua[f].Hc;a.Lg.ue(d,a.Af)}}u.ef=function(a){this.$b.push(a);a.D!=0&&(this.ad.push(a),a.D==2&&this.Ff.push(a))};u.Gd=function(a){this.bc.push(a)};function ef(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.Aa=F(0,0);this.F.m(a.Ua);this.G.m(a.Va);this.bi=a.length;this.Hg=a.Lh;this.Dj=a.Fh;this.Vh=this.Ad=this.j=0}y(ef,P);u=ef.prototype;u.lc=function(){return Q(this.w,this.F)};u.mc=function(){return Q(this.z,this.G)};
u.Sb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.F.x-d.c.r.x,g=this.F.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.Aa.x=e.c.h.x+h-d.c.h.x-f;this.Aa.y=e.c.h.y+i-d.c.h.y-g;b=Math.sqrt(this.Aa.x*this.Aa.x+this.Aa.y*this.Aa.y);b>0.005?this.Aa.oc(1/b):this.Aa.I();c=f*this.Aa.y-g*this.Aa.x;var j=h*this.Aa.y-i*this.Aa.x;c=d.k+d.v*c*c+e.k+e.v*j*j;this.t=c!=0?1/c:0;if(this.Hg>0){b-=this.bi;var j=
2*Math.PI*this.Hg,k=this.t*j*j;this.Ad=a.ja*(2*this.t*this.Dj*j+a.ja*k);this.Ad=this.Ad!=0?1/this.Ad:0;this.Vh=b*a.ja*k*this.Ad;this.t=c+this.Ad;this.t=this.t!=0?1/this.t:0}a.Fd?(this.j*=a.ab,a=this.j*this.Aa.x,c=this.j*this.Aa.y,d.f.x-=d.k*a,d.f.y-=d.k*c,d.p-=d.v*(f*c-g*a),e.f.x+=e.k*a,e.f.y+=e.k*c,e.p+=e.v*(h*c-i*a)):this.j=0};
u.Fb=function(){var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=-this.t*(this.Aa.x*(this.z.f.x-this.z.p*e-(this.w.f.x-this.w.p*c))+this.Aa.y*(this.z.f.y+this.z.p*d-(this.w.f.y+this.w.p*a))+this.Vh+this.Ad*this.j);this.j+=f;b=f*this.Aa.x;f*=this.Aa.y;this.w.f.x-=this.w.k*b;this.w.f.y-=this.w.k*f;
this.w.p-=this.w.v*(a*f-c*b);this.z.f.x+=this.z.k*b;this.z.f.y+=this.z.k*f;this.z.p+=this.z.v*(d*f-e*b)};
u.Eb=function(){if(this.Hg>0)return n;var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=this.z.c.h.x+d-this.w.c.h.x-a,g=this.z.c.h.y+e-this.w.c.h.y-c,b=Math.sqrt(f*f+g*g);f/=b;g/=b;var b=K(b-this.bi,-0.2,0.2),h=-this.t*b;this.Aa.i(f,g);f=h*this.Aa.x;g=h*this.Aa.y;this.w.c.h.x-=this.w.k*f;this.w.c.h.y-=
this.w.k*g;this.w.c.o-=this.w.v*(a*g-c*f);this.z.c.h.x+=this.z.k*f;this.z.c.h.y+=this.z.k*g;this.z.c.o+=this.z.v*(d*g-e*f);R(this.w);R(this.z);return Math.abs(b)<0.005};function ff(){this.nk=this.Xi=p;this.ok={};this.mk=0}ff.prototype.O=t("Xi");function gf(a,c,b){this.kb="Fixture"+hf++;this.Zh=b.filter.ca();this.Lb=lc();this.Uh=lc();this.Dg=a;this.X=b.shape.ca();this.Fg=b.De;this.$h=b.xb;this.Lf=b.Fc;this.Kj=b.Bf}u=gf.prototype;u.nc=t("Kj");u.H=t("Dg");u.hh=function(a){a||(a=cd());this.X.fh(a,this.Fg);return a};u.eb=function(){var a=this.Lb;a!=p&&(Pb(B("Box2D.Collision.b2AABB")),kc.push(a))};u.ne=function(a,c){this.X.gf(this.Lb,c);this.cd=a.ne(this.Lb,this)};u.oe=function(a){if(this.cd!=p)a.oe(this.cd),this.cd=p};
function jf(a,c,b,d){a.cd&&(a.X.gf(a.Lb,b),a.X.gf(a.Uh,d),oc(a.Lb,a.Lb,a.Uh),b=J(d.position,b.position),c.eg(a.cd,a.Lb,b),G(b))}var hf=0;function kf(a){this.Ma=a;this.Ec=this.next=p}kf.prototype.Mc=ba("next");kf.prototype.Nc=ba("Ec");function lf(){this.ug=this.tg=p;this.wf={};this.Jh=0}lf.prototype.O=t("tg");function mf(a,c){this.kb="Body"+nf++;this.e=new dd;this.e.position.m(a.position);this.e.d.i(a.Za);this.c=new Wd;this.c.r.I();this.c.Ba=1;this.c.lb=this.c.o=a.Za;this.c.h.x=this.e.d.a.x*this.c.r.x+this.e.d.b.x*this.c.r.y;this.c.h.y=this.e.d.a.y*this.c.r.x+this.e.d.b.y*this.c.r.y;this.c.h.x+=this.e.position.x;this.c.h.y+=this.e.position.y;this.c.Ga.m(this.c.h);this.f=a.xj.ca();this.Me=F(0,0);this.Xd=a.Vi;this.Ej=a.Sc;this.Cg=a.Oi;this.Mb=a.Ri;this.Bg=a.Ni;this.bb=c;this.ia=p;this.xa=new De;this.tf=
new ff;this.sk=0;this.p=a.Qi;this.Mj=a.wj;this.Aj=a.Pi;this.Nf=this.Pg=0;this.D=a.type;this.t=this.D==2?1:0;this.k=this.D==2?1:0;this.v=this.tc=0;this.Ij=a.pj;this.Tc=new lf;this.Hf=[]}u=mf.prototype;u.eb=function(){G(this.f);G(this.Me)};
function of(a,c,b){L(!a.bb.Xc);a.e.d.i(b);a.e.position.m(c);var c=a.e.d,d=a.c.r;a.c.h.x=c.a.x*d.x+c.b.x*d.y;a.c.h.y=c.a.y*d.x+c.b.y*d.y;a.c.h.x+=a.e.position.x;a.c.h.y+=a.e.position.y;a.c.Ga.m(a.c.h);a.c.lb=a.c.o=b;b=a.bb.Ja.xd;for(c=a.Tc.O();c;c=c.next)jf(c.Ma,b,a.e,a.e);ze(a.bb.Ja)}u.ub=t("e");u.Rb=function(){return this.c.o};function V(a){return a.c.h}function pf(a,c,b){a.D==2&&(ee(a,n),a.f.x+=a.k*c.x,a.f.y+=a.k*c.y,a.p+=a.v*((b.x-a.c.h.x)*c.y-(b.y-a.c.h.y)*c.x))}
u.hh=function(a){a||(a=cd());a.ed=this.t;a.Jd=this.tc;a.Pc.m(this.c.r);return a};
function qf(a){a.t=0;a.k=0;a.tc=0;a.v=0;a.c.r.I();if(!(a.D==0||a.D==1)){for(var c=F(0,0),b=a.Tc.O();b;b=b.next){var d=b.Ma;d.Fg!=0&&(d=d.hh(),a.t+=d.ed,c.x+=d.Pc.x*d.ed,c.y+=d.Pc.y*d.ed,a.tc+=d.Jd)}a.t>0?(a.k=1/a.t,c.x*=a.k,c.y*=a.k):(a.t=1,a.k=1);a.tc>0&&!a.Ej?(a.tc-=a.t*(c.x*c.x+c.y*c.y),a.tc*=a.Ij,L(a.tc>0),a.v=1/a.tc):(a.tc=0,a.v=0);b=a.c.h.ca();a.c.r.m(c);a.c.Ga.m(I(a.e,a.c.r));a.c.h.m(a.c.Ga);a.f.x+=a.p*-(a.c.h.y-b.y);a.f.y+=a.p*+(a.c.h.x-b.x);G(c);G(b)}}
function Q(a,c){var b=a.e.d,b=F(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.e.position.x;b.y+=a.e.position.y;return b}function ee(a,c){if(a.Mb!=c){a.Mb=c;a.Nf=0;if(!c)a.f.I(),a.p=0,a.Me.I(),a.Pg=0;for(var b=0;b<a.Hf.length;b++)Ke(a.Hf[b],a)}}u.ld=t("Bg");function rf(a){sf.d.i(a.c.lb);var c=sf.d,b=a.c.r;sf.position.x=a.c.Ga.x-(c.a.x*b.x+c.b.x*b.y);sf.position.y=a.c.Ga.y-(c.a.y*b.x+c.b.y*b.y);c=a.bb.Ja.xd;for(b=a.Tc.O();b;b=b.next)jf(b.Ma,c,sf,a.e)}
function R(a){a.e.d.i(a.c.o);var c=a.e.d,b=a.c.r;a.e.position.x=a.c.h.x-(c.a.x*b.x+c.b.x*b.y);a.e.position.y=a.c.h.y-(c.a.y*b.x+c.b.y*b.y)}u.Vb=function(a){if(this.D!=2&&a.D!=2)return q;for(var c=this.ia;c;c=c.next)if(c.ob==a&&c.Yb.Wh==q)return q;return n};u.Ic=function(a){this.c.Ic(a);this.c.h.m(this.c.Ga);this.c.o=this.c.lb;R(this)};var nf=0,sf=new dd;function tf(a,c){this.Ja=new ye(this);this.nb=new Xe;this.Ng=this.Xc=q;this.Pa=this.Ef=p;this.Gb=new Ie;this.xa=new De;this.ia=p;this.tf=new ff;this.Gf=0;this.Cj=this.Rg=n;this.Cg=c;this.Fj=a;this.ai=0;this.Ig=uf(this,new Xd);this.Te=new Te(0,0,0,0,this.Rg);this.Sh=new Te(0,0,0,0,this.Rg);this.Rh=new bf(this.Ja.yd,this.nb)}var vf=1-100*Number.MIN_VALUE;function uf(a,c){L(!a.Xc);var b=new mf(c,a);a.Gb.ef(b);return b}
function W(a,c){var b=c.Jc();b.be=p;if(b.zc=a.ia)a.ia.be=b;a.ia=b;a.Gf++;b.Wa.Yb=b;b.Wa.ob=b.z;b.Wa.qb=p;if(b.Wa.next=b.w.ia)b.w.ia.qb=b.Wa;b.w.ia=b.Wa;b.Xa.Yb=b;b.Xa.ob=b.w;b.Xa.qb=p;if(b.Xa.next=b.z.ia)b.z.ia.qb=b.Xa;b.z.ia=b.Xa;var d=c.s,e=c.u;if(!c.ng)for(var f=e.xa.O(T);f;f=f.next)if(ce(f.va,e)==d)f.va.Ee=n;return b}tf.prototype.cg=function(){return this.Gb.cg()};tf.prototype.dg=function(){return this.xa.dg()};
function wf(a,c,b,d){if(a.Ng)ze(a.Ja),a.Ng=q;a.Xc=n;a.Te.da(c,a.ai*c,b,d,a.Rg);c=a.Ja;for(b=c.bb.xa.O(T);b;b=b.next){var d=b.va,e=d.Q,f=d.V,g=e.H(),h=f.H();if(!(g.Mb==q&&h.Mb==q)){if(d.Ee){if(h.Vb(g)==q){c.eb(d);continue}if(c.Eg.Vb(e,f)==q){c.eb(d);continue}d.Ee=q}c.xd.Md(e.cd,f.cd)==q?c.eb(d):de(d,c.yd)}}if(a.Te.ja>0)a.xe(a.Te),a.Cj&&a.gg(a.Te),a.ai=a.Te.rc;a.Xc=q}
tf.prototype.xe=function(a){for(var c=this.tf.O();c;c=c.next)wf(c.Ah,a);c=this.Rh;c.da(this.Ja.yd,this.nb);for(var b=this.Gb.O(Je);b;b=b.next)b.body.ea=q;for(var d=this.xa.O(T);d;d=d.next)d.va.ea=q;for(b=this.ia;b;b=b.zc)b.ea=q;for(b=this.Gb.O(Ne);b;b=b.next)if(d=b.body,!d.ea){cf(c);var e=[];e.push(d);for(d.ea=n;e.length>0;){var f=e.pop();c.ef(f);f.Mb||ee(f,n);if(f.D!=0){for(d=f.xa.O(Ee);d;d=d.next){var g=d.va;if(!g.ea&&(c.Gd(g),g.ea=n,g=ce(g,f),!g.ea))e.push(g),g.ea=n}for(d=f.ia;d;d=d.next)if(!d.Yb.ea&&
d.ob.ld()&&(c.Ka.push(d.Yb),d.Yb.ea=n,!d.ob.ea))e.push(d.ob),d.ob.ea=n}}c.xe(a,this.Fj,this.Cg)}for(b=this.Gb.O(Ne);b;b=b.next)rf(b.body);ze(this.Ja)};
tf.prototype.gg=function(a){var c,b,d=this.Rh;d.da(this.Ja.yd,this.nb);for(b=this.Gb.O(Je);b;b=b.next){var e=b.body;e.ea=q;e.c.Ba=0}for(var f=this.xa.O(T);f;f=f.next)f.va.ea=q,f.va.ee=p;for(b=this.ia;b;b=b.zc)b.ea=q;for(;;){c=p;b=1;for(e=this.xa.O(Fe);e;e=e.next){var f=e.va,g=f.Q.H(),h=f.V.H();if(g.D==2&&g.Mb||h.D==2&&h.Mb){h=1;if(f.ee!=p)h=f.ee;else{if(f.Ed)h=1;else{var i=f.Q.H(),j=f.V.H(),g=i.c.Ba;if(i.c.Ba<j.c.Ba)g=j.c.Ba,i.c.Ic(g);else if(j.c.Ba<i.c.Ba)g=i.c.Ba,j.c.Ic(g);h=f;i=i.c;j=j.c;fe.ic.i(h.Q.X);
fe.jc.i(h.V.X);fe.pi=i;fe.qi=j;fe.dk=0.005;var k=fe;Ld++;var h=k.ic,j=k.jc,i=k.pi,l=k.qi;L(i.Ba==l.Ba);L(1-i.Ba>Number.MIN_VALUE);var r=h.T+j.T,k=k.dk,o=0,v=0,s=0;Qd.Od=0;for(Rd.dh=q;;){i.ub(Sd,o);l.ub(Td,o);Rd.ic=h;Rd.jc=j;Rd.af=Sd;Rd.bf=Td;Xc(Vd,Qd,Rd);if(Vd.td<=0){o=1;break}Ud.U(Qd,h,Sd,j,Td);var x=Ud.Qb(Sd,Td);if(x<=0){o=1;break}v==0&&(s=x>r?Math.max(r-k,0.75*r):Math.max(x-k,0.02*r));if(x-s<0.5*k){if(v==0){o=1;break}break}var z=o,wa=o,la=1;i.ub(Sd,la);l.ub(Td,la);var xa=Ud.Qb(Sd,Td);if(xa>=s){o=
1;break}for(var U=0;;){var M=0,M=U&1?wa+(s-x)*(la-wa)/(xa-x):0.5*(wa+la);i.ub(Sd,M);l.ub(Td,M);var ea=Ud.Qb(Sd,Td);if(Math.abs(ea-s)<0.025*k){z=M;break}ea>s?(wa=M,x=ea):(la=M,xa=ea);U++;Od++;if(U==50)break}Pd=Math.max(Pd,U);if(z<(1+100*Number.MIN_VALUE)*o)break;o=z;v++;Md++;if(v==1E3)break}Nd=Math.max(Nd,v);h=o;L(0<=h&&h<=1);h>0&&h<1&&(h=(1-h)*g+h)}f.ee=h}Number.MIN_VALUE<h&&h<b&&(c=f,b=h)}}if(c===p||vf<b)break;f=c.Q.H();e=c.V.H();xf.i(f.c);yf.i(e.c);f.Ic(b);e.Ic(b);de(c,this.Ja.yd);c.ee=p;if(c.nc()||
!c.enabled)f.c.i(xf),e.c.i(yf),R(f),R(e);else if(c.Ed){f.D!=2&&(f=e);cf(d);c=new Ge;e=f;c.Rd[c.le++]=e;for(f.ea=n;c.size>0;)if(e=c,e.Sd!=e.le?(f=e.Rd[e.Sd],delete e.Rd[e.Sd],e.Sd++,e=f):e=m,d.ef(e),e.Mb||ee(e,n),e.D==2){for(f=e.xa.O(Ee);f;f=f.next){if(d.Bj==32)break;g=f.va;if(!g.ea&&(d.Gd(g),g.ea=n,g=ce(g,e),!g.ea))g.D!=0&&(g.Ic(b),ee(g,n),h=g,c.Rd[c.le++]=h),g.ea=n}for(e=e.ia;e;e=e.next)if(d.Gf!=32&&!e.Yb.ea&&e.ob.ld()&&(d.Ka.push(e.Yb),e.Yb.ea=n,!e.ob.ea)){if(e.ob.D!=0)e.ob.Ic(b),ee(e.ob,n),f=e.ob,
c.Rd[c.le++]=f;e.ob.ea=n}}this.Sh.da((1-b)*a.ja,0,a.eh,a.Ug,q);d.gg(this.Sh);for(b=0;b<d.$b.length;b++)if(d.$b[b].ea=q,d.$b[b].Mb&&d.$b[b].D==2){rf(d.$b[b]);for(f=d.$b[b].xa.O(T);f;f=f.next)f.va.ee=p}for(b=0;b<d.Bj;b++)d.bc[b].ea=q,d.bc[b].ee=p;for(b=0;b<d.Gf;b++)d.Ka[b].ea=q;ze(this.Ja)}}};function zf(a,c,b,d){if(c instanceof ie){var e=I(b,c.aa);a.Pa.yi(e,c.T,b.d.a,d);G(e)}else if(c instanceof O){for(var e=0,f=c.ih(),c=c.n,g=[],e=0;e<f;e++)g[e]=I(b,c[e]);a.Pa.zi(g,f,d);for(e=0;e<f;e++)G(g[e])}}
var hc=new dd,xf=new Wd,yf=new Wd,Af=new Re(0.5,0.8,0.8),Bf=new Re(0.5,0.5,0.3),Cf=new Re(0.5,0.9,0.5),Df=new Re(0.5,0.5,0.9),Ef=new Re(0.6,0.6,0.6),Ff=new Re(0.9,0.7,0.7),Gf=new Re(0.3,0.9,0.9),fc=new Re(0,0,0.8);function Hf(a){this.mh=If++;this.position=a.ca();this.Za=0;this.ah=[];this.ye=[];this.ff=[];this.ve=[];this.body=p}var If=0;function Jf(a,c,b){this.Wg=[];this.Ha=[];this.uk=0;this.Tg={};this.ya=a;this.Ya=new E(c.x,c.y);this.ga=new tf(b,n);this.ga.Ja.Eg=this;this.ga.Ja.yd=this;this.top=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,-2.5),q,p,{xb:0});this.bottom=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,this.Ya.y+2.5),q,p,{xb:0});this.left=X(this,new E(5,this.Ya.y+5),new E(-2.5,this.Ya.y/2),q,p,{xb:0});this.right=X(this,new E(5,this.Ya.y+5),new E(this.Ya.x+2.5,this.Ya.y/2),q,p,{xb:0})}u=Jf.prototype;
u.update=function(a,c){wf(this.ga,c,Kf,Kf);for(var b=this.ga.Gb.O(Le);b;b=b.next)b.body.Me.I(),b.body.Pg=0;b=this.Wg;this.Wg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};u.Vb=function(a,c){if(!a.nc()&&!c.nc())for(var b=0;b<this.Ha.length;b++)if(this.Ha[b].Vb&&!this.Ha[b].Vb(a,c))return q;return id.prototype.Vb(a,c)};
u.me=function(a){for(var c=a.Q,b=c.H(),d=b.object,e=a.V,f=e.H(),g=f.object,h=0;h<d.ye.length;h++)d.ye[h](a,d,b,c,g,f,e);for(h=0;h<g.ye.length;h++)g.ye[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)if(this.Ha[h].nh&&this.Ha[h].nh(a),a.disabled){var i=a;i.enabled=q;$d(i)}for(h=0;h<d.ff.length;h++)d.ff[h](a,d,b,c,g,f,e);for(h=0;h<g.ff.length;h++)g.ff[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)this.Ha[h].me&&this.Ha[h].me(a)};
u.Hd=function(a){for(var c=0;c<this.Ha.length;c++)this.Ha[c].Hd&&this.Ha[c].Hd(a);a.disabled=q;a.enabled=n;$d(a)};u.we=function(a,c){if(a.disabled)a.enabled=q,$d(a);for(var b=0;b<this.Ha.length;b++)this.Ha[b].we&&this.Ha[b].we(a,c)};u.ue=function(a,c){for(var b=a.Q,d=b.H(),e=d.object,f=a.V,g=f.H(),h=g.object,i=0;i<e.ve.length;i++)e.ve[i](a,c,e,d,b,h,g,f);for(i=0;i<h.ve.length;i++)h.ve[i](a,c,h,g,f,e,d,b);for(i=0;i<this.Ha.length;i++)this.Ha[i].ue&&this.Ha[i].ue(a,c)};
function Y(a,c,b,d){d=d||0;a=Lf(a,c,b,n);a.display.vi=-10+d;return a}function X(a,c,b,d,e,f){e=e||{};e.type=0;return Mf(a,c,b,d,{Da:e,qc:f})}function Mf(a,c,b,d,e){var f=new O;hd(f,c.x/2,c.y/2);return a.Hb(c,b,d,f,e)}function Nf(a,c,b){var d=new O,e=new E(c.x/2,c.y/2),e=[new E(0,e.y),new E(-e.x+0.01,e.y-0.01),new E(-e.x,0),new E(-e.x+0.01,-e.y+0.01),new E(0,-e.y),new E(e.x-0.01,-e.y+0.01),new E(e.x,0),new E(e.x-0.01,e.y-0.01)];gd(d,e);return a.Hb(c,b,n,d,{Da:{Sc:n},qc:{Fc:0}})}
function Of(a,c){a.ga.Xc?a.Wg.push(c):c.apply(a)}u.Hb=function(a,c,b,d,e){var f=Lf(this,a,c,b);Of(this,function(){var a=e,a=a||{},b=Pf(a.Da,Qf),i=new Xd;i.type=b.type;i.Za=b.Za;i.Sc=b.Sc;i.position=c;b=uf(this.ga,i);a=Rf(b,d,a);f.body=b;f.Ma=a;b.object=f});return f};function Lf(a,c,b,d){b=new Hf(b);a.Tg[b.mh]=b;d!==q&&vc(b,c);return b}
function Rf(a,c,b){var b=b||{},b=Pf(b.qc,Sf),d=new zc;d.De=b.De;d.xb=b.xb;d.Fc=b.Fc;d.Bf=b.Bf;d.shape=c;L(!a.bb.Xc);c=new gf(a,0,d);a.Bg&&c.ne(a.bb.Ja.xd,a.e);b=a.Tc;d=c.kb;if(b.wf[d]==p){var e=new kf(c),f=b.ug;f!=p?f.Mc(e):b.tg=e;e.Nc(f);b.ug=e;b.wf[d]=e;b.Jh++}c.Dg=a;c.Fg>0&&qf(a);a.bb.Ng=n;return c}
function Tf(a,c){Of(a,function(){if(c.body){var a=this.ga,d=c.body;L(!a.Xc);for(var e=d.ia;e;){var f=e,e=e.next;a.Ef&&a.Ef.lk(f.Yb);var g=a,h=f.Yb,i=h.Wh;if(h.be)h.be.zc=h.zc;if(h.zc)h.zc.be=h.be;if(h==g.ia)g.ia=h.zc;var f=h.w,j=h.z;ee(f,n);ee(j,n);if(h.Wa.qb)h.Wa.qb.next=h.Wa.next;if(h.Wa.next)h.Wa.next.qb=h.Wa.qb;if(h.Wa==f.ia)f.ia=h.Wa.next;h.Wa.qb=p;h.Wa.next=p;if(h.Xa.qb)h.Xa.qb.next=h.Xa.next;if(h.Xa.next)h.Xa.next.qb=h.Xa.qb;if(h.Xa==j.ia)j.ia=h.Xa.next;h.Xa.qb=p;h.Xa.next=p;g.Gf--;if(!i)for(g=
j.xa.O(T);g;g=g.next)if(ce(g.va,j)==f)g.va.Ee=n}for(e=d.tf.O();e;e=e.next)Qe(e.Ah,d);for(e=d.xa.O(T);e;e=e.next)a.Ja.eb(e.va);for(e=d.Tc.O();e;e=e.next){a.Ef&&a.Ef.kk(e.Ma);g=d;f=e.Ma;L(!g.bb.Xc);var j=g.Tc,h=f.kb,k=j.wf[h];if(k!=p)i=k.Ec,k=k.next,i==p?j.tg=k:i.Mc(k),k==p?j.ug=i:k.Nc(i),delete j.wf[h],j.Jh--;for(j=g.xa.O(T);j;j=j.next)(f==j.va.Q||f==j.va.V)&&g.bb.Ja.eb(j.va);g.Bg&&f.oe(g.bb.Ja.xd);f.eb();f.Dg=p;qf(g)}d.eb();Qe(a.Gb,d)}delete this.Tg[c.mh]})}
function Uf(a,c,b){Of(a,function(){if(c.body){var a=c.body;of(a,b,a.Rb())}else c.position=b.ca()})}var Kf=10,Sf={De:0.1,xb:0.6,Fc:0.01,Bf:q},Qf={Sc:q,Za:0,type:2};function Pf(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===m||a[d]===p?c[d]:a[d];return b};function Vf(a){this.ya=a}function Wf(a,c,b,d,e){var f=new E(4,4);vc(c.body,b);H(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.Wf=new ic("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,f,e);c.display.Wb={};c.display.Wb.rk=e;c.display.Wb.kj=4;c.display.Wb.Uc=0;c.display.Wb.mb={o:Xf,x:Xf,y:Yf};a=a.ya.vh;c.ah.push(Zf);Na(a.$g,c)}var Xf=0,Yf=2;
function Zf(a,c){var b=this.display.Wb;b.Uc+=c;var d=new E(1,1),e=this.body.f,f=Math.abs(e.x),g=Math.abs(e.y);if(g<0.01||f>=g){if(e.x>0.01){if(b.mb.x=Xf,b.mb.o!=Xf)b.mb.o=Xf,b.Uc=0}else if(e.x<-0.01){if(b.mb.x=1,b.mb.o!=1)b.mb.o=1,b.Uc=0}else b.Uc=0;d.y=b.mb.x==1?4:2}else if(e.y>0.01){b.mb.y=3;if(b.mb.o!=3)b.mb.o=3,b.Uc=0;d.y=3}else{b.mb.y=Yf;if(b.mb.o!=Yf)b.mb.o=Yf,b.Uc=0;d.y=1}d.x=b.Uc==0?1:Math.floor(b.Uc*b.kj);b=this.display.Wf;b.rb=d.ca();b.rb.x%=b.Vf.x;b.rb.y%=b.Vf.y;if(b.rb.x===0)b.rb.x=b.Vf.x;
if(b.rb.y===0)b.rb.y=b.Vf.y};function $f(){this.$g=[]};function ag(a,c,b,d,e,f,g){this.jd=a;this.paused=q;this.cf=0;this.vh=new $f;this.Wb=new Vf(this);this.q=new Jf(this,b,d);this.viewport=new pc(this,c,f,e,g)}function bg(a){if(a.Ph===p)a.Ph=new Date;var c=new Date-a.Ph>=5E3;Vb>0&&!c?setTimeout(function(){bg(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
ag.prototype.update=function(a,c){if(this.paused)this.cf=0,sc(this.viewport.li),this.jd.df&&this.jd.df(a,c);else{this.jd.We&&this.jd.We(a,c);for(var b=this.vh,d=0;d<b.$g.length;d++)for(var e=b.$g[d],f=0;f<e.ah.length;f++)e.ah[f].apply(e,[a,c]);this.cf+=c;for(b=a-this.cf;this.cf>=0.015;)this.cf-=0.015,b+=0.015,this.jd.$j&&this.jd.$j(b,0.015),this.q.update(b,0.015);this.jd.Ve&&this.jd.Ve(a,c);uc(this.viewport.li);b=this.viewport;b.display.style.visibility="hidden";if(b.Cf.x!=b.Ea.x||b.Cf.y!=b.Ea.y){b.Cf.x=
b.Ea.x;b.Cf.y=b.Ea.y;if(b.gb!==p)b.gb.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px",b.gb.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";b.display.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px";b.display.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";d=b.Yf;e=b.Ea;f=mc(d);d.lowerBound.hg(f);d.upperBound.hg(f);d.lowerBound.Ob(e);d.upperBound.Ob(e);G(f)}var d=[],g;for(g in b.pc)d[g]=b.pc[g];g=b.Yf;var e=b.ya.q.Tg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,k=i.nj(b.Ea),l=j.size;j.K.lowerBound.i(k.x-
l.x,k.y-l.y);j.K.upperBound.i(k.x+l.x,k.y+l.y);if(g.Md(j.K)){if(j.kd==p)j.kd=wc++;delete d[j.kd];if(b.pc[j.kd]==p)b.pc[j.kd]=document.createElement("span"),b.pc[j.kd].className="gameObject",b.pc[j.kd].style.zIndex=100+(j.vi||0),b.display.appendChild(b.pc[j.kd]);var f=b.pc[j.kd],r=Xb(f),o=b.scale!=r.scale;r.scale=b.scale;var v=k.x-l.x/2;if(o||r.left!=v)r.left=v,f.style.left=v*b.scale+"px";k=k.y-l.y/2;if(o||r.top!=k)r.top=k,f.style.top=k*b.scale+"px";k=l.x;if(o||r.width!=k)r.width=k,f.style.width=k*
b.scale+"px";l=l.y;if(o||r.height!=l)r.height=l,f.style.height=l*b.scale+"px";i=i.mj();if(r.rotation!=i)r.rotation=i,f.style.webkitTransform="rotate("+i+"rad)";if(j.Wf!=p){j=j.Wf;r=q;i=Xb(f);if(i.Si!=j.url)i.Si=j.url,f.style.backgroundImage="url("+j.url+")",f.style.backgroundColor="transparent",r=n;else if(i.Ti!=j.rb.x||i.Ui!=j.rb.y)r=n;if(r)i.Ti=j.rb.x,i.Ui=j.rb.y,f.style.backgroundPosition=(j.ki.x+(j.rb.x-1)*j.si.x)*-1+"px "+(j.ki.y+(j.rb.y-1)*j.si.y)*-1+"px"}}}}for(var s in d)b.display.removeChild(d[s]),
delete b.pc[s];if(b.gb!==p){b.gb.style.visibility="hidden";h=b.ya.q.ga;if(h.Pa!==p){h.Pa.Qj.oj.clear();s=h.Pa.Yh;if(s&Zb)for(d=h.Gb.O(Je);d;d=d.next){e=d.body;for(g=e.Tc.O();g;g=g.next)f=g.Ma,f=f.X,e.ld()?e.D==0?zf(h,f,e.e,Cf):e.D==1?zf(h,f,e.e,Df):e.Mb?zf(h,f,e.e,Ff):zf(h,f,e.e,Ef):zf(h,f,e.e,Bf)}if(s&$b)for(d=h.ia;d;d=d.zc)g=h,e=d,e instanceof ef?(f=e.lc(),j=e.mc(),g.Pa.Lc(f,j,Af),G(f),G(j)):e instanceof ld?(f=e.lc(),j=e.mc(),r=e.hb.e.position.ca(),r.Ob(e.cc),i=e.hb.e.position.ca(),i.Ob(e.dc),g.Pa.Lc(r,
f,Af),g.Pa.Lc(i,j,Af),g.Pa.Lc(r,i,Af),G(f),G(j),G(r),G(i)):(f=e.lc(),j=e.mc(),e.w!=g.Ig&&g.Pa.Lc(e.w.e.position,f,Af),g.Pa.Lc(f,j,Af),e.z!=g.Ig&&g.Pa.Lc(e.z.e.position,j,Af),G(f),G(j));if(s&dc)for(d=h.tf.O();d;d=d.next)d.Ah.ik(h.Pa);if(s&bc)for(d=h.xa.O(T);d;d=d.next)e=d.va.V,g=mc(d.va.Q.Lb),e=mc(e.Lb),h.Pa.Lc(g,e,Gf),G(g),G(e);if(s&ac)for(d=h.Gb.O(Pe);d;d=d.next){e=d.body;for(g=e.Tc.O();g;g=g.next)f=g.Ma,e=h.Ja.xd.Id(f.cd),e=[F(e.lowerBound.x,e.lowerBound.y),F(e.upperBound.x,e.lowerBound.y),F(e.upperBound.x,
e.upperBound.y),F(e.lowerBound.x,e.upperBound.y)],h.Pa.xi(e),G(e[0]),G(e[1]),G(e[2]),G(e[3])}if(s&cc)for(d=h.Gb.O(Je);d;d=d.next)e=d.body,hc.d=e.e.d,hc.position=V(e),h.Pa.Ai()}b.gb.style.visibility=""}b.display.style.visibility=""}};ag.prototype.start=function(){uc(this.viewport.zg);Na(cg,this);dg||(eg=document.getElementById("fps"),dg=n,fg())};var dg=q,cg=[],gg=60,hg=p,eg=p;
function fg(a){a==p&&(a=(new Date).getTime());var c=0;hg!==p?c=(a-hg)/1E3:hg=a;if(c>0){c>0.2&&(c=0.2);if(eg){for(var b=0,d=0,e=0;e<cg.length;e++)b+=cg[e].q.ga.cg(),d+=cg[e].q.ga.dg();e=1/c;gg=gg*0.99+e*0.01;eg.innerHTML=Math.round(e)+" FPS<br>"+Math.round(gg)+" Rolling FPS<br>"+b+" World Objects<br>"+d+" Active Contacts"}hg=a;for(e=0;e<cg.length;e++)cg[e].update(a,c);for(var f in Eb)Eb[f].ui=n;zb=yb;Bb=Ab;Db=Cb}xc(fg,document.body)};function ig(){this.type=0;this.u=this.s=p;this.ng=q};function jg(){ig.call(this);this.xf=F(0,0);this.yf=F(0,0);this.Ua=F(0,0);this.Va=F(0,0);this.type=4;this.xf.i(-1,1);this.yf.i(1,1);this.Ua.i(-1,0);this.Va.i(1,0);this.hi=this.yg=this.gi=this.xg=0;this.gd=1;this.ng=n}y(jg,ig);
jg.prototype.U=function(a,c,b,d,e,f,g){g===m&&(g=0);this.s=a;this.u=c;this.xf.m(b);this.yf.m(d);this.Ua=Kc(this.s.e,e);this.Va=Kc(this.u.e,f);a=e.x-b.x;b=e.y-b.y;this.xg=Math.sqrt(a*a+b*b);b=f.x-d.x;d=f.y-d.y;this.yg=Math.sqrt(b*b+d*d);this.gd=g;g=this.xg+this.gd*this.yg;this.gi=g-this.gd*md;this.hi=(g-md)/this.gd};jg.prototype.Jc=function(){return new ld(this)};function kg(a,c,b){C(B("Box2D.Common.Math.b2Vec3"));this.x=a;this.y=c;this.l=b}var lg=[];function Z(a,c,b){Ob(B("Box2D.Common.Math.b2Vec3"));if(lg.length>0){var d=lg.pop();d.i(a,c,b);return d}return new kg(a,c,b)}function mg(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Vec3")),lg.push(a))}u=kg.prototype;u.I=function(){this.l=this.y=this.x=0};u.i=function(a,c,b){this.x=a;this.y=c;this.l=b};u.m=function(a){this.x=a.x;this.y=a.y;this.l=a.l};u.Db=function(){return Z(-this.x,-this.y,-this.l)};
u.kf=function(){this.x=-this.x;this.y=-this.y;this.l=-this.l};u.ca=function(){return Z(this.x,this.y,this.l)};u.Ob=function(a){this.x+=a.x;this.y+=a.y;this.l+=a.l};u.hg=function(a){this.x-=a.x;this.y-=a.y;this.l-=a.l};u.oc=function(a){this.x*=a;this.y*=a;this.l*=a};function ng(a,c,b){C(B("Box2D.Common.Math.b2Mat33"));this.a=Z(0,0,0);this.b=Z(0,0,0);this.L=Z(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.L.m(b)}u=ng.prototype;u.ca=function(){return new ng(this.a,this.b,this.L)};u.Kd=function(a){this.a.m(a.a);this.b.m(a.b);this.L.m(a.L)};u.$f=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.l+=a.a.l;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.l+=a.b.l;this.L.x+=a.L.x;this.L.y+=a.L.y;this.L.l+=a.L.l};u.lf=function(){this.a.i(1,0,0);this.b.i(0,1,0);this.L.i(0,0,1)};
u.I=function(){this.a.i(0,0,0);this.b.i(0,0,0);this.L.i(0,0,0)};function og(a,c,b,d){var e=a.a.x,f=a.b.x,g=a.a.y,a=a.b.y,h=e*a-f*g;h!=0&&(h=1/h);c.x=h*(a*b-f*d);c.y=h*(e*d-g*b)}function pg(a,c,b,d,e){var f=a.a.x,g=a.a.y,h=a.a.l,i=a.b.x,j=a.b.y,k=a.b.l,l=a.L.x,r=a.L.y,a=a.L.l,o=f*(j*a-k*r)+g*(k*l-i*a)+h*(i*r-j*l);o!=0&&(o=1/o);c.x=o*(b*(j*a-k*r)+d*(k*l-i*a)+e*(i*r-j*l));c.y=o*(f*(d*a-e*r)+g*(e*l-b*a)+h*(b*r-d*l));c.l=o*(f*(j*e-k*d)+g*(k*b-i*e)+h*(i*d-j*b))};function qg(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.$c=F(0,0);this.If=F(0,0);this.B=F(0,0);this.qa=F(0,0);this.P=new ng;this.j=Z(0,0,0);this.F.m(a.Ua);this.G.m(a.Va);this.$c.m(a.Ag);this.If.x=-this.$c.y;this.If.y=this.$c.x;this.Pj=a.hd;this.j.I();this.za=this.ec=0;this.$d=a.Th;this.fe=a.ti;this.Nj=a.Sj;this.Mg=a.Sg;this.zd=a.vf;this.Le=a.sg;this.$=0;this.B.I();this.qa.I()}y(qg,P);u=qg.prototype;u.lc=function(){return Q(this.w,this.F)};u.mc=function(){return Q(this.z,this.G)};
function rg(a){var c=a.w,b=a.z,d=Q(c,a.F),e=Q(b,a.G),b=e.x-d.x,f=e.y-d.y;G(d);G(e);a=Ic(c.e.d,a.$c);c=a.x*b+a.y*f;G(a);return c}
u.Sb=function(a){var c=this.w,b=this.z,d,e=0;this.Pe.m(c.c.r);this.Qe.m(b.c.r);var f=c.ub();d=c.e.d;var g=this.F.x-this.Pe.x,h=this.F.y-this.Pe.y,e=d.a.x*g+d.b.x*h,h=d.a.y*g+d.b.y*h,g=e;d=b.e.d;var i=this.G.x-this.Qe.x,j=this.G.y-this.Qe.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.h.x+i-c.c.h.x-g;e=b.c.h.y+j-c.c.h.y-h;this.Ab=c.k;this.Bb=b.k;this.Vc=c.v;this.Wc=b.v;var k=Ic(f.d,this.$c);this.B.m(k);G(k);this.Na=(d+g)*this.B.y-(e+h)*this.B.x;this.Oa=i*this.B.y-j*this.B.x;this.ec=this.Ab+this.Bb+
this.Vc*this.Na*this.Na+this.Wc*this.Oa*this.Oa;if(this.ec>Number.MIN_VALUE)this.ec=1/this.ec;f=Ic(f.d,this.If);this.qa.m(f);G(f);this.Qa=(d+g)*this.qa.y-(e+h)*this.qa.x;this.Ra=i*this.qa.y-j*this.qa.x;g=this.Ab;h=this.Bb;i=this.Vc;j=this.Wc;this.P.a.x=g+h+i*this.Qa*this.Qa+j*this.Ra*this.Ra;this.P.a.y=i*this.Qa+j*this.Ra;this.P.a.l=i*this.Qa*this.Na+j*this.Ra*this.Oa;this.P.b.x=this.P.a.y;this.P.b.y=i+j;this.P.b.l=i*this.Na+j*this.Oa;this.P.L.x=this.P.a.l;this.P.L.y=this.P.b.l;this.P.L.l=g+h+i*this.Na*
this.Na+j*this.Oa*this.Oa;if(this.zd)if(d=this.B.x*d+this.B.y*e,Math.abs(this.fe-this.$d)<0.01)this.$=3;else if(d<=this.$d){if(this.$!=1)this.$=1,this.j.l=0}else if(d>=this.fe){if(this.$!=2)this.$=2,this.j.l=0}else this.$=0,this.j.l=0;else this.$=0;if(this.Le==q)this.za=0;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x*this.qa.x+(this.za+this.j.l)*this.B.x,d=this.j.x*this.qa.y+(this.za+this.j.l)*this.B.y,e=this.j.x*this.Qa+this.j.y+(this.za+this.j.l)*this.Na,g=this.j.x*this.Ra+this.j.y+
(this.za+this.j.l)*this.Oa,c.f.x-=this.Ab*a,c.f.y-=this.Ab*d,c.p-=this.Vc*e,b.f.x+=this.Bb*a,b.f.y+=this.Bb*d,b.p+=this.Wc*g):(this.j.I(),this.za=0)};
u.Fb=function(a){var c=this.w,b=this.z,d=c.f,e=c.p,f=b.f,g=b.p,h=0,i=0,j=0,k=0;if(this.Le&&this.$!=3)k=this.ec*(this.Mg-(this.B.x*(f.x-d.x)+this.B.y*(f.y-d.y)+this.Oa*g-this.Na*e)),h=this.za,a=a.ja*this.Nj,this.za=K(this.za+k,-a,a),k=this.za-h,h=k*this.B.x,i=k*this.B.y,j=k*this.Na,k*=this.Oa,d.x-=this.Ab*h,d.y-=this.Ab*i,e-=this.Vc*j,f.x+=this.Bb*h,f.y+=this.Bb*i,g+=this.Wc*k;j=this.qa.x*(f.x-d.x)+this.qa.y*(f.y-d.y)+this.Ra*g-this.Qa*e;i=g-e;if(this.zd&&this.$!=0){k=this.B.x*(f.x-d.x)+this.B.y*(f.y-
d.y)+this.Oa*g-this.Na*e;h=this.j.ca();a=Z(0,0,0);pg(this.P,a,-j,-i,-k);this.j.Ob(a);if(this.$==1)this.j.l=Math.max(this.j.l,0);else if(this.$==2)this.j.l=Math.min(this.j.l,0);j=-j-(this.j.l-h.l)*this.P.L.x;i=-i-(this.j.l-h.l)*this.P.L.y;k=F(0,0);og(this.P,k,j,i);k.x+=h.x;k.y+=h.y;this.j.x=k.x;this.j.y=k.y;G(k);a.x=this.j.x-h.x;a.y=this.j.y-h.y;a.l=this.j.l-h.l;h=a.x*this.qa.x+a.l*this.B.x;i=a.x*this.qa.y+a.l*this.B.y;j=a.x*this.Qa+a.y+a.l*this.Na;k=a.x*this.Ra+a.y+a.l*this.Oa;mg(a)}else a=F(0,0),
og(this.P,a,-j,-i),this.j.x+=a.x,this.j.y+=a.y,h=a.x*this.qa.x,i=a.x*this.qa.y,j=a.x*this.Qa+a.y,k=a.x*this.Ra+a.y,G(a);d.x-=this.Ab*h;d.y-=this.Ab*i;e-=this.Vc*j;f.x+=this.Bb*h;f.y+=this.Bb*i;g+=this.Wc*k;c.f.m(d);c.p=e;b.f.m(f);b.p=g};
u.Eb=function(){var a=this.w,c=this.z,b=a.c.h,d=a.c.o,e=c.c.h,f=c.c.o,g=0,h=0,i=0,j=g=0,k=0,l=0,h=q,r=0,o=Ec(d),l=this.F.x-this.Pe.x,v=this.F.y-this.Pe.y,g=o.a.x*l+o.b.x*v,v=o.a.y*l+o.b.y*v;Dc(o);var l=g,j=Ec(f),s=this.G.x-this.Qe.x,i=this.G.y-this.Qe.y,g=j.a.x*s+j.b.x*i,i=j.a.y*s+j.b.y*i;Dc(j);s=g;g=e.x+s-b.x-l;j=e.y+i-b.y-v;if(this.zd){G(this.B);this.B=Ic(o,this.$c);this.Na=(g+l)*this.B.y-(j+v)*this.B.x;this.Oa=s*this.B.y-i*this.B.x;var x=this.B.x*g+this.B.y*j;Math.abs(this.fe-this.$d)<0.01?(r=
K(x,-0.2,0.2),k=Math.abs(x),h=n):x<=this.$d?(r=K(x-this.$d+0.005,-0.2,0),k=this.$d-x,h=n):x>=this.fe&&(r=K(x-this.fe+0.005,0,0.2),k=x-this.fe,h=n)}G(this.qa);this.qa=Ic(o,this.If);this.Qa=(g+l)*this.qa.y-(j+v)*this.qa.x;this.Ra=s*this.qa.y-i*this.qa.x;o=Z(0,0,0);v=this.qa.x*g+this.qa.y*j;s=f-d-this.Pj;k=Math.max(k,Math.abs(v));l=Math.abs(s);h?(h=this.Ab,i=this.Bb,g=this.Vc,j=this.Wc,this.P.a.x=h+i+g*this.Qa*this.Qa+j*this.Ra*this.Ra,this.P.a.y=g*this.Qa+j*this.Ra,this.P.a.l=g*this.Qa*this.Na+j*this.Ra*
this.Oa,this.P.b.x=this.P.a.y,this.P.b.y=g+j,this.P.b.l=g*this.Na+j*this.Oa,this.P.L.x=this.P.a.l,this.P.L.y=this.P.b.l,this.P.L.l=h+i+g*this.Na*this.Na+j*this.Oa*this.Oa,pg(this.P,o,-v,-s,-r)):(h=this.Ab,i=this.Bb,g=this.Vc,j=this.Wc,r=g*this.Qa+j*this.Ra,x=g+j,this.P.a.i(h+i+g*this.Qa*this.Qa+j*this.Ra*this.Ra,r,0),this.P.b.i(r,x,0),r=F(0,0),og(this.P,r,-v,-s),o.x=r.x,o.y=r.y,G(r),o.l=0);r=o.x*this.qa.x+o.l*this.B.x;h=o.x*this.qa.y+o.l*this.B.y;v=o.x*this.Qa+o.y+o.l*this.Na;s=o.x*this.Ra+o.y+o.l*
this.Oa;mg(o);b.x-=this.Ab*r;b.y-=this.Ab*h;d-=this.Vc*v;e.x+=this.Bb*r;e.y+=this.Bb*h;f+=this.Wc*s;a.c.o=d;c.c.o=f;R(a);R(c);return k<=0.005&&l<=Lc};function sg(){ig.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.Ag=F(0,0);this.type=2;this.Ag.i(1,0);this.hd=0;this.vf=q;this.ti=this.Th=0;this.sg=q;this.Sg=this.Sj=0}y(sg,ig);sg.prototype.U=function(a,c,b,d){this.s=a;this.u=c;this.Ua=Kc(this.s.e,b);this.Va=Kc(this.u.e,b);this.Ag=Jc(this.s.e.d,d);this.hd=this.u.Rb()-this.s.Rb()};sg.prototype.Jc=function(){return new qg(this)};function tg(a,c,b){this.execute=a;this.name=c;this.jj=b};function $(a){this.ya=a;this.ya.q.Ha.push(this)}
$.prototype.wb=function(a,c){var b=Nf(this.ya.q,a,c);$.sj(b);$.uj(b);$.tj(b);var d=new O,e=new E(a.x/2,a.y/2);fd(d,[new E(-e.x+0.01,e.y-0.01),new E(-e.x-0.01,0),new E(-e.x+0.01,-e.y+0.01),new E(e.x-0.01,-e.y+0.01),new E(e.x+0.01,0),new E(e.x-0.01,e.y-0.01)]);b.pk=Rf(b.body,d,{qc:{xb:0}});b.Ca={};b.Ca.Qf=new tg(function(){b.g.sc.vj()},"Move Up",n);b.Ca.Pf=new tg(aa(),"Move Down",n);b.Ca.ge=new tg(function(){b.g.ie.ge()},"Move Left",n);b.Ca.he=new tg(function(){b.g.ie.he()},"Move Right",n);return b};
(function(a){a.vb=0.1;a.hk=new E(0,9.8);a.Kc={hf:new E(0,9.8),Ci:1.5,kh:8,Gi:1};a.Tb={wi:1,Bi:2,Ei:4,gk:8,gh:16,jh:32,ag:64};a.Di={Fi:1,fk:2,jk:4};a.S={Ld:1,md:2,tb:4,nd:8};a.wg=function(c,b){c.g=c.g||{};c.g.type|=a.Tb.wi;c.g.uf={Yj:b&a.S.Ld,Vj:b&a.S.tb,Wj:b&a.S.md,Xj:b&a.S.nd};c.ye.push(function(b,c,f,g,h,i,j){if(!b.disabled)if(b.disabled=n,f=new Se,be(b,f),f=f.N,b.Q==j&&(f=f.Db()),!c.g.uf.Yj&&f.y<-a.vb)b.disabled=q;else if(!c.g.uf.Vj&&f.y>a.vb)b.disabled=q;else if(!c.g.uf.Xj&&f.x>a.vb)b.disabled=
q;else if(!c.g.uf.Wj&&f.x<-a.vb)b.disabled=q})};a.sj=function(c){var b=$.Kc.kh;c.g=c.g||{};c.g.type|=a.Tb.Bi;c.g.sc={vd:[],speed:b,vj:function(){var b=c.g.sc.vd;if(b.length>0){var e=c.body.t*c.g.sc.speed*a.Kc.Ci,f=V(c.body),g=c.body.f;g.y=0;var h=c.body;h.D!=0&&h.f.m(g);pf(c.body,new E(0,-e),f);for(g=0;g<b.length;g++)pf(b[g].H(),new E(0,e/b.length),f)}}};c.ve.push(function(a,b,c,g,h,i,j,k){if(!a.disabled)if(b=new Se,be(a,b),b=b.N,a.Q==k&&(b=b.Db()),b.y>0.5){if(!(Ma(c.g.sc.vd,k)>=0))Na(c.g.sc.vd,k),
a.Dd=a.Dd||[],Na(a.Dd,c)}else Ma(c.g.sc.vd,k)>=0&&(Oa(c.g.sc.vd,k),Oa(a.Dd,c))})};a.uj=function(c){var b=$.Kc.kh,d=$.Kc.Gi;c.g=c.g||{};c.g.type|=a.Tb.Ei;c.g.ie={uh:d,speed:b,he:function(){var a=c.body.f,a=Math.min(a.x+c.g.ie.uh,c.g.ie.speed)-a.x;a>0&&pf(c.body,new E(c.body.t*a,0),V(c.body))},ge:function(){var a=c.body.f,a=Math.max(a.x-c.g.ie.uh,-c.g.ie.speed)-a.x;a<0&&pf(c.body,new E(c.body.t*a,0),V(c.body))}}};a.Td=function(c,b,d,e){c.g=c.g||{};c.g.type|=a.Tb.ag;c.g.A=c.g.A||{};if(d&a.S.Ld)c.g.A.vg=
n,c.g.A.Ze=c.g.A.Ze||[],c.g.A.Ze.push(b);if(d&a.S.tb)c.g.A.vg=n,c.g.A.ze=c.g.A.ze||[],c.g.A.ze.push(b);if(d&a.S.md)c.g.A.vg=n,c.g.A.He=c.g.A.He||[],c.g.A.He.push(b);if(d&a.S.nd)c.g.A.vg=n,c.g.A.Xe=c.g.A.Xe||[],c.g.A.Xe.push(b);if(e&a.S.Ld)c.g.A.zf=n,c.g.A.$e=c.g.A.$e||[],c.g.A.$e.push(b);if(e&a.S.tb)c.g.A.zf=n,c.g.A.Ae=c.g.A.Ae||[],c.g.A.Ae.push(b);if(e&a.S.md)c.g.A.zf=n,c.g.A.Ie=c.g.A.Ie||[],c.g.A.Ie.push(b);if(e&a.S.nd)c.g.A.zf=n,c.g.A.Ye=c.g.A.Ye||[],c.g.A.Ye.push(b)};a.rj=function(c,b){c.g=c.g||
{};c.g.type|=a.Tb.gh;c.g.qg={ak:b,filter:0}};a.tj=function(c){var b=$.Di.Fi;c.g=c.g||{};c.g.type|=a.Tb.jh;c.g.yj={filter:b}};a.prototype.Vb=p;a.prototype.nh=p;a.prototype.me=function(a){if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.oh(a,d,f,e),f.g&&this.oh(a,f,d,b))}};a.prototype.oh=function(c,b,d,e){if(b.g.type&a.Tb.ag){var f=new Se;be(c,f);f=f.N;c.Q==e&&(f=f.Db());if(f.y<-a.vb&&b.g.A.Ze)for(e=0;e<b.g.A.Ze.length;e++)b.g.A.Ze[e](c);else if(f.y>a.vb&&b.g.A.ze)for(e=
0;e<b.g.A.ze.length;e++)b.g.A.ze[e](c);if(f.x>a.vb&&b.g.A.He)for(e=0;e<b.g.A.He.length;e++)b.g.A.He[e](c);else if(f.x<-a.vb&&b.g.A.Xe)for(e=0;e<b.g.A.Xe.length;e++)b.g.A.Xe[e](c)}b.g.type&a.Tb.gh&&d.g&&d.g.type&a.Tb.jh&&(b.g.qg.filter==0||b.g.qg.filter&d.g.yj.filter)&&Uf(this.ya.q,d,b.g.qg.ak)};a.prototype.Hd=function(a){if(a.Dd){for(var b=0;b<a.Dd.length;b++){var d=a.Dd[b];Oa(d.g.sc.vd,a.Q);Oa(d.g.sc.vd,a.V)}a.Dd=p}if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.ph(a,
d,e),f.g&&this.ph(a,f,b))}};a.prototype.ph=function(c,b,d){if(b.g.type&a.Tb.ag&&b.g.A.zf){var e=new Se;be(c,e);e=e.N;c.Q==d&&(e=e.Db());if(e.y<-a.vb&&b.g.A.$e)for(d=0;d<b.g.A.$e.length;d++)b.g.A.$e[d](c);else if(e.y>a.vb&&b.g.A.Ae)for(d=0;d<b.g.A.Ae.length;d++)b.g.A.Ae[d](c);if(e.x>a.vb&&b.g.A.Ie)for(d=0;d<b.g.A.Ie.length;d++)b.g.A.Ie[d](c);else if(e.x<-a.vb&&b.g.A.Ye)for(d=0;d<b.g.A.Ye.length;d++)b.g.A.Ye[d](c)}};a.prototype.we=p;a.prototype.ue=p;a.prototype.$a=function(a,b){return X(this.ya.q,a,
b,n)};a.prototype.Rc=function(c,b,d){c=X(this.ya.q,c,b,n,p,p);if(d===m||d===p)d=a.S.tb|a.S.md|a.S.nd;a.wg(c,d);return c};a.prototype.qj=function(c,b){var d=this;a.Td(c,function(){Tf(d.ya.q,c)},b,p)};a.prototype.Ce=function(c,b){var d,e=X(this.ya.q,c,b,n,p,p);if(d===m||d===p)d=a.S.tb;this.qj(e,d);return e};a.prototype.$i=function(c,b,d){c=X(this.ya.q,c,b,n,p,p);a.rj(c,d);return c}})($);function ug(){ig.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=3;this.length=1;this.Fh=this.Lh=0}y(ug,ig);ug.prototype.U=function(a,c,b,d){this.s=a;this.u=c;this.Ua.m(Kc(this.s.e,b));this.Va.m(Kc(this.u.e,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.Fh=this.Lh=0};ug.prototype.Jc=function(){return new ef(this)};function vg(a){P.call(this,a);this.Yc=F(0,0);this.Zc=F(0,0);this.j=Z(0,0,0);this.t=new ng;this.Yc.m(a.Ua);this.Zc.m(a.Va);this.Se=a.hd}y(vg,P);u=vg.prototype;u.lc=function(){return Q(this.w,this.Yc)};u.mc=function(){return Q(this.z,this.Zc)};
u.Sb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.Yc.x-d.c.r.x,g=this.Yc.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.Zc.x-e.c.r.x,i=this.Zc.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.k;var b=e.k,j=d.v,k=e.v;this.t.a.x=c+b+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=c+b+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.j.l*=
a.ab,d.f.x-=c*this.j.x,d.f.y-=c*this.j.y,d.p-=j*(f*this.j.y-g*this.j.x+this.j.l),e.f.x+=b*this.j.x,e.f.y+=b*this.j.y,e.p+=k*(h*this.j.y-i*this.j.x+this.j.l)):this.j.I()};
u.Fb=function(){var a,c=0,b=this.w,d=this.z,e=b.f,f=b.p,g=d.f,h=d.p,i=b.k,j=d.k,k=b.v,l=d.v;a=b.e.d;var r=this.Yc.x-b.c.r.x,o=this.Yc.y-b.c.r.y,c=a.a.x*r+a.b.x*o,o=a.a.y*r+a.b.y*o,r=c;a=d.e.d;var v=this.Zc.x-d.c.r.x,s=this.Zc.y-d.c.r.y,c=a.a.x*v+a.b.x*s,s=a.a.y*v+a.b.y*s,v=c;a=g.x-h*s-e.x+f*o;var c=g.y+h*v-e.y-f*r,x=h-f,z=Z(0,0,0);pg(this.t,z,-a,-c,-x);this.j.Ob(z);e.x-=i*z.x;e.y-=i*z.y;f-=k*(r*z.y-o*z.x+z.l);g.x+=j*z.x;g.y+=j*z.y;h+=l*(v*z.y-s*z.x+z.l);mg(z);b.p=f;d.p=h};
u.Eb=function(){var a,c=0,b=this.w,d=this.z;a=b.e.d;var e=this.Yc.x-b.c.r.x,f=this.Yc.y-b.c.r.y,c=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=c;a=d.e.d;var g=this.Zc.x-d.c.r.x,h=this.Zc.y-d.c.r.y,c=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=c;a=b.k;var c=d.k,i=b.v,j=d.v,k=d.c.h.x+g-b.c.h.x-e,l=d.c.h.y+h-b.c.h.y-f,r=d.c.o-b.c.o-this.Se,o=Math.sqrt(k*k+l*l),v=Math.abs(r);o>0.05&&(i*=1,j*=1);this.t.a.x=a+c+f*f*i+h*h*j;this.t.b.x=-f*e*i-h*g*j;this.t.L.x=-f*i-h*j;this.t.a.y=this.t.b.x;this.t.b.y=a+c+e*e*i+g*g*j;this.t.L.y=
e*i+g*j;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=i+j;var s=Z(0,0,0);pg(this.t,s,-k,-l,-r);b.c.h.x-=a*s.x;b.c.h.y-=a*s.y;b.c.o-=i*(e*s.y-f*s.x+s.l);d.c.h.x+=c*s.x;d.c.h.y+=c*s.y;d.c.o+=j*(g*s.y-h*s.x+s.l);mg(s);R(b);R(d);return o<=0.005&&v<=Lc};function wg(){ig.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=8;this.hd=0}y(wg,ig);wg.prototype.U=function(a,c,b){this.s=a;this.u=c;this.Ua.m(Kc(this.s.e,b));this.Va.m(Kc(this.u.e,b));this.hd=this.u.Rb()-this.s.Rb()};wg.prototype.Jc=function(){return new vg(this)};function xg(a){P.call(this,a);this.fb=new Ac;this.re=new Ac;this.se=new Ac;this.te=new Ac;this.Fa=Z(0,0,0);this.Ib=F(0,0);this.kc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.j=Z(0,0,0);this.t=new ng;this.F.m(a.Ua);this.G.m(a.Va);this.Se=a.hd;this.j.I();this.za=0;this.Jf=a.zj;this.Qg=a.ek;this.Oj=a.Tj;this.Mg=a.Sg;this.zd=a.vf;this.Le=a.sg;this.$=0}y(xg,P);u=xg.prototype;u.lc=function(){return Q(this.w,this.F)};u.mc=function(){return Q(this.z,this.G)};function yg(a){return a.z.c.o-a.w.c.o-a.Se}
u.Sb=function(a){var c=this.w,b=this.z,d,e=0;d=c.e.d;var f=this.F.x-c.c.r.x,g=this.F.y-c.c.r.y,e=d.a.x*f+d.b.x*g,g=d.a.y*f+d.b.y*g,f=e;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.k;var e=b.k,j=c.v,k=b.v;this.t.a.x=d+e+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=d+e+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;this.ec=1/(j+k);if(!this.Le)this.za=0;if(this.zd){var l=
b.c.o-c.c.o-this.Se;if(Math.abs(this.Qg-this.Jf)<2*Lc)this.$=3;else if(l<=this.Jf){if(this.$!=1)this.j.l=0;this.$=1}else if(l>=this.Qg){if(this.$!=2)this.j.l=0;this.$=2}else this.$=0,this.j.l=0}else this.$=0;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x,l=this.j.y,c.f.x-=d*a,c.f.y-=d*l,c.p-=j*(f*l-g*a+this.za+this.j.l),b.f.x+=e*a,b.f.y+=e*l,b.p+=k*(h*l-i*a+this.za+this.j.l)):(this.j.I(),this.za=0)};
u.Fb=function(a){var c=this.w,b=this.z,d=0,e=d=0,f=0,g=0,h=0,i=c.f,j=c.p,k=b.f,l=b.p,r=c.k,o=b.k,v=c.v,s=b.v;if(this.Le&&this.$!=3)e=this.ec*-(l-j-this.Mg),f=this.za,g=a.ja*this.Oj,this.za=K(this.za+e,-g,g),e=this.za-f,j-=v*e,l+=s*e;if(this.zd&&this.$!=0){var a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,a=k.x+-l*h-i.x- -j*f,x=k.y+l*g-i.y-j*e;pg(this.t,this.Fa,-a,-x,-(l-j));
if(this.$==3)this.j.Ob(this.Fa);else if(this.$==1){if(d=this.j.l+this.Fa.l,d<0)og(this.t,this.kc,-a,-x),this.Fa.x=this.kc.x,this.Fa.y=this.kc.y,this.Fa.l=-this.j.l,this.j.x+=this.kc.x,this.j.y+=this.kc.y,this.j.l=0}else if(this.$==2&&(d=this.j.l+this.Fa.l,d>0))og(this.t,this.kc,-a,-x),this.Fa.x=this.kc.x,this.Fa.y=this.kc.y,this.Fa.l=-this.j.l,this.j.x+=this.kc.x,this.j.y+=this.kc.y,this.j.l=0;i.x-=r*this.Fa.x;i.y-=r*this.Fa.y;j-=v*(e*this.Fa.y-f*this.Fa.x+this.Fa.l);k.x+=o*this.Fa.x;k.y+=o*this.Fa.y;
l+=s*(g*this.Fa.y-h*this.Fa.x+this.Fa.l)}else a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,og(this.t,this.Ib,-(k.x+-l*h-i.x- -j*f),-(k.y+l*g-i.y-j*e)),this.j.x+=this.Ib.x,this.j.y+=this.Ib.y,i.x-=r*this.Ib.x,i.y-=r*this.Ib.y,j-=v*(e*this.Ib.y-f*this.Ib.x),k.x+=o*this.Ib.x,k.y+=o*this.Ib.y,l+=s*(g*this.Ib.y-h*this.Ib.x);c.f.m(i);c.p=j;b.f.m(k);b.p=l};
u.Eb=function(){var a=0,c,b=this.w,d=this.z,e=0,f=c=0,g=0,h=0;if(this.zd&&this.$!=0){var a=d.c.o-b.c.o-this.Se,i=0;this.$==3?(a=K(a-this.Jf,-Mc,Mc),i=-this.ec*a,e=Math.abs(a)):this.$==1?(a-=this.Jf,e=-a,a=K(a+Lc,-Mc,0),i=-this.ec*a):this.$==2&&(a-=this.Qg,e=a,a=K(a-Lc,0,Mc),i=-this.ec*a);b.c.o-=b.v*i;d.c.o+=d.v*i;R(b);R(d)}c=b.e.d;i=this.F.x-b.c.r.x;a=this.F.y-b.c.r.y;f=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=f;c=d.e.d;var j=this.G.x-d.c.r.x,k=this.G.y-d.c.r.y,f=c.a.x*j+c.b.x*k,k=c.a.y*j+c.b.y*k,j=f,
g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a,l=g*g+h*h;c=Math.sqrt(l);var f=b.k,r=d.k,o=b.v,v=d.v;l>0.05*0.05&&(l=1/(f+r),g=l*-g,h=l*-h,b.c.h.x-=0.5*f*g,b.c.h.y-=0.5*f*h,d.c.h.x+=0.5*r*g,d.c.h.y+=0.5*r*h,g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a);this.re.a.x=f+r;this.re.b.x=0;this.re.a.y=0;this.re.b.y=f+r;this.se.a.x=o*a*a;this.se.b.x=-o*i*a;this.se.a.y=-o*i*a;this.se.b.y=o*i*i;this.te.a.x=v*k*k;this.te.b.x=-v*j*k;this.te.a.y=-v*j*k;this.te.b.y=v*j*j;this.fb.Kd(this.re);this.fb.$f(this.se);this.fb.$f(this.te);
this.fb.xe(zg,-g,-h);g=zg.x;h=zg.y;b.c.h.x-=b.k*g;b.c.h.y-=b.k*h;b.c.o-=b.v*(i*h-a*g);d.c.h.x+=d.k*g;d.c.h.y+=d.k*h;d.c.o+=d.v*(j*h-k*g);R(b);R(d);return c<=0.005&&e<=Lc};var zg=F(0,0);function Ag(){ig.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=1;this.Ua.I();this.Va.I();this.Sg=this.Tj=this.ek=this.zj=this.hd=0;this.sg=this.vf=q}y(Ag,ig);Ag.prototype.U=function(a,c,b){this.s=a;this.u=c;this.Ua=Kc(this.s.e,b);this.Va=Kc(this.u.e,b);this.hd=this.u.Rb()-this.s.Rb()};Ag.prototype.Jc=function(){return new xg(this)};function Bg(){this.Jb=F(0,0);this.Kb=F(0,0)}Bg.prototype.I=function(){this.Jb.I();this.od=0;this.Kb.I();this.pd=0};Bg.prototype.i=function(a,c,b,d){c===m&&(c=0);d===m&&(d=0);this.Jb.m(a);this.od=c;this.Kb.m(b);this.pd=d};function Cg(a){P.call(this,a);this.cc=F(0,0);this.dc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.ha=new Bg;var c=a.Ud.D,b=a.Vd.D;this.de=this.Cd=this.ce=this.Bd=p;var d=0,e=0;this.Gj=a.Ud.w;this.w=a.Ud.z;c==1?(this.Bd=a.Ud,this.cc.m(this.Bd.F),this.F.m(this.Bd.G),d=yg(this.Bd)):(this.ce=a.Ud,this.cc.m(this.ce.F),this.F.m(this.ce.G),d=rg(this.ce));this.Hj=a.Vd.w;this.z=a.Vd.z;b==1?(this.Cd=a.Vd,this.dc.m(this.Cd.F),this.G.m(this.Cd.G),e=yg(this.Cd)):(this.de=a.Vd,this.dc.m(this.de.F),this.G.m(this.de.G),
e=rg(this.de));this.ka=a.gd;this.Yd=d+this.ka*e;this.j=0}y(Cg,P);u=Cg.prototype;u.lc=function(){return Q(this.w,this.F)};u.mc=function(){return Q(this.z,this.G)};
u.Sb=function(a){var c=this.Gj,b=this.Hj,d=this.w,e=this.z,f=0,g=0,h=0,i=0,j=h=0,k=0;this.ha.I();this.Bd?(this.ha.od=-1,k+=d.v):(c=c.e.d,g=this.ce.$c,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=d.e.d,h=this.F.x-d.c.r.x,i=this.F.y-d.c.r.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Jb.i(-f,-g),this.ha.od=-h,k+=d.k+d.v*h*h);this.Cd?(this.ha.pd=-this.ka,k+=this.ka*this.ka*e.v):(c=b.e.d,g=this.de.$c,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=e.e.d,h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Kb.i(-this.ka*f,-this.ka*g),this.ha.pd=-this.ka*h,k+=this.ka*this.ka*(e.k+e.v*h*h));this.t=k>0?1/k:0;a.Fd?(d.f.x+=d.k*this.j*this.ha.Jb.x,d.f.y+=d.k*this.j*this.ha.Jb.y,d.p+=d.v*this.j*this.ha.od,e.f.x+=e.k*this.j*this.ha.Kb.x,e.f.y+=e.k*this.j*this.ha.Kb.y,e.p+=e.v*this.j*this.ha.pd):this.j=0};
u.Fb=function(){var a=this.w,c=this.z,b=this.ha,d=a.f,e=a.p,f=c.f,g=c.p;e===m&&(e=0);g===m&&(g=0);b=-this.t*(b.Jb.x*d.x+b.Jb.y*d.y+b.od*e+(b.Kb.x*f.x+b.Kb.y*f.y)+b.pd*g);this.j+=b;a.f.x+=a.k*b*this.ha.Jb.x;a.f.y+=a.k*b*this.ha.Jb.y;a.p+=a.v*b*this.ha.od;c.f.x+=c.k*b*this.ha.Kb.x;c.f.y+=c.k*b*this.ha.Kb.y;c.p+=c.v*b*this.ha.pd};
u.Eb=function(){var a=this.w,c=this.z,b=0,d=0,b=this.Bd?yg(this.Bd):rg(this.ce),d=this.Cd?yg(this.Cd):rg(this.de),b=-this.t*(this.Yd-(b+this.ka*d));a.c.h.x+=a.k*b*this.ha.Jb.x;a.c.h.y+=a.k*b*this.ha.Jb.y;a.c.o+=a.v*b*this.ha.od;c.c.h.x+=c.k*b*this.ha.Kb.x;c.c.h.y+=c.k*b*this.ha.Kb.y;c.c.o+=c.v*b*this.ha.pd;R(a);R(c);return n};function Dg(){ig.call(this);this.type=6;this.Vd=this.Ud=p;this.gd=1}y(Dg,ig);Dg.prototype.U=function(a,c,b){this.Ud=a;this.s=a.w;this.Vd=c;this.u=c.w;this.gd=b};Dg.prototype.Jc=function(){return new Cg(this)};var Eg={};
(function(a){var c,b=new E(350,30),d=new E(1E3,300),e,f,g,h;a.yb=function(c,e,f){g=new ag(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-15);a.wb(c,f);a.Bh(g,new E(5,b.y));bg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Wf(g.Wb,c,r,d,l);f=new vb("game");A(f,new tg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Qf,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Pf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.Bh=function(a,
b){var c=b.ca();c.y-=10;for(var d=new E(2.5,0.1),e=p,f=0;f<30;f++){c.x+=d.x/2;var g;g=f!=0&&f!=29?Mf(a.q,d,c,n):X(a.q,d,c,n);if(e!=p){var h=new Ag,x=F(V(e.body).x+V(g.body).x,V(e.body).y+V(g.body).y);x.oc(0.5);h.U(e.body,g.body,x);W(a.q.ga,h)}e=g;c.x+=d.x/2;c.x+=0.5}};a.df=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Eg);da("bridge.init",Eg.yb);var Fg={};
(function(a){var c,b=new E(350,30),d=new E(600,300),e,f,g,h,i=new E(0,454),j=new E(178,326),k=new E(2,124),l=new E(354,54),r=new E(0,58),o=new E(290,54),v=new E(178,326),s=new E(0,0),x=new E(32,84),z=new E(354,54),wa=new E(0,90),la=new E(0,0),xa=new E(2,158),U=new E(158,388),M=new E(190,388),ea=new E(158,356),Ig=new E(190,356),Jg=new E(158,356),Kg=new E(190,356),Lg=new E(55,380),Mg=new E(10,396),Ng=new E(466,168),Og=new E(452,136),Pg=new E(466,104),Qg=new E(300,424),Rg=new E(300,352),Sg=new E(364,
424),Tg=new E(364,384),Ug=new E(332,352),Vg=new E(332,320),Wg=new E(396,352),Xg=new E(396,320),Yg=new E(364,352),Zg=new E(362,264),$g=new E(160,64);a.yb=function(c,e,f){g=new ag(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-7);a.wb(c,f);a.Ch(g,h,new E(0,b.y),c);f=new E(d.x/20,d.y/20);f=Y(g.q,f,new E(0,0),-1);H(f,"graphics/sky.png");f.display.Rf=1;bg(g)};a.wb=function(a,b){var d=new E(0,0),i=new E(21,47),j=new E(i.x/20,i.y/20);c=h.wb(j,a);Wf(g.Wb,c,j,d,i);f=new vb("game");A(f,new tg(function(){g.paused=
!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Qf,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Pf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.Ch=function(b,c,d,e){for(var f=new E(1.6,1.6),g=new E(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new E(g.x,g.y-f.y*(d.length-1)),h=0;h<d.length;h++)for(var i=0;i<d[h].length;i++)a.bj(b,c,d[h][i],new E(i,h),g,f,e)};a.bj=function(a,b,c,d,e,f,g){var h=p,D=p;switch(c){case " ":break;case "-":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=i;break;case "=":h=b.$a(f,new E(e.x+d.x*
f.x,e.y+d.y*f.y));D=k;break;case "O":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",r)},$.S.tb);D=l;break;case "@":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));h.yh=8;h.mg=0;$.Td(h,function(){h.mg++;var c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-h.mg/h.yh)*f.y));H(c,"graphics/smbsheet.gif",r);h.mg==h.yh&&(Tf(a.q,h),c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*
f.y)),H(c,"graphics/smbsheet.gif",o))},$.S.tb);D=v;break;case "#":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=j;break;case "1":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Ld|$.S.md|$.S.nd);$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",xa)},$.S.tb);D=la;break;case "*":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Ld|$.S.md|$.S.nd);$.Td(h,function(){var c=b.$a(f,new E(e.x+
d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",x)},$.S.tb);D=s;break;case "M":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",wa)},$.S.tb);D=z;break;case "[":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=U;break;case "]":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=
M;break;case "<":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=ea;break;case ">":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ig;break;case "{":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Jg;break;case "}":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Kg;break;case "T":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Lg;break;case "G":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Mg;break;case "|":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ng;break;case "F":h=Y(a.q,f,new E(e.x+d.x*f.x+f.x/2,e.y+d.y*f.y),1);D=Og;
break;case "o":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Pg;break;case "+":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Qg;break;case "^":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Rg;break;case "8":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Sg;break;case "u":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Tg;break;case "R":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Vg;break;case "r":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ug;break;case "L":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Xg;break;
case "l":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Wg;break;case "&":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Yg;break;case "$":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));D=Zg;break;case "x":h=b.$i(f,new E(e.x+d.x*f.x,e.y+d.y*f.y),g);D=$g;break;default:throw"Invalid type: "+c;}h!==p&&"graphics/smbsheet.gif"!==p&&D!==p&&H(h,"graphics/smbsheet.gif",D)};a.df=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Fg);da("mario.init",Fg.yb);var Gg={};
(function(a){var c,b=new E(3500,100),d=new E(1024,600),e,f,g,h;a.yb=function(c,e,f){g=new ag(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-7-24);a.wb(c,f);Fg.Ch(g,h,new E(0,b.y),c);f=0;f++;Eg.Bh(g,new E(15,b.y-(3.2+f*24)));a.cj(++f);a.ej(++f);a.dj(f);a.aj();bg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Wf(g.Wb,c,r,d,l);f=new vb("game");A(f,new tg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Qf,b?87:38,q,q,q);A(e,c.Ca.ge,
b?65:37,q,q,q);A(e,c.Ca.Pf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.dj=function(a){for(var c=new E(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Rc(c,new E(4,b.y-f-e)),h.Rc(c,new E(10,b.y-f-e));h.Rc(new E(b.x-15,0.25),new E((b.x-15)/2+15,b.y-e-24))}h.Rc(new E(1,1),new E(12,b.y-3.2-3.5),$.S.md);h.Rc(new E(1,1),new E(15,b.y-3.2-3.5),$.S.nd);h.Rc(new E(1,1),new E(18,b.y-3.2-3.5),$.S.Ld);h.Rc(new E(1,1),new E(21,b.y-3.2-3.5),$.S.tb);a=h.Rc(new E(1,1),new E(24,b.y-3.2-3.5),$.S.tb).body;
of(a,a.e.position,Math.PI/2)};a.ej=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,X(g.q,new E(3,0.3),new E(a.x,a.y-1.5),n,{Za:c},p),a.x+=3.5};a.cj=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new Ag,e=new wg;a.x+=5;var f={Za:Math.random()*Math.PI},h=a.y-7.5,v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Mf(g.q,new E(10,1),new E(a.x,h),n,{Da:f});H(s,"graphics/spinner.png");f.Za+=Math.PI/2;f=Mf(g.q,new E(10,1),new E(a.x,h),n,{Da:f});
H(f,"graphics/spinner.png");d.U(v.body,s.body,V(v.body));W(g.q.ga,d);d.U(v.body,f.body,V(v.body));W(g.q.ga,d);e.U(s.body,f.body,V(s.body));W(g.q.ga,e);a.x+=7}for(c=0;c<1;c++)f={Sc:n},d=new ug,a.x+=2,h=a.y-6,s=Mf(g.q,new E(3,0.2),new E(a.x+0.1,h+2),n,{Da:f}),e=Mf(g.q,new E(3,0.2),new E(a.x+0.1,h-2),n,{Da:f}),v=Mf(g.q,new E(0.2,3),new E(a.x-2,h+0.1),n,{Da:f}),f=Mf(g.q,new E(0.2,3),new E(a.x+2,h+0.1),n,{Da:f}),d.U(s.body,e.body,V(s.body),V(e.body)),W(g.q.ga,d),d.U(s.body,v.body,V(s.body),V(v.body)),
W(g.q.ga,d),d.U(s.body,f.body,V(s.body),V(f.body)),W(g.q.ga,d),d.U(e.body,v.body,V(e.body),V(v.body)),W(g.q.ga,d),d.U(e.body,f.body,V(e.body),V(f.body)),W(g.q.ga,d),d.U(v.body,f.body,V(v.body),V(f.body)),W(g.q.ga,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,f={Sc:n},d=new jg,a.x+=1.5,v=Mf(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),a.x+=6,f=Mf(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),h=V(v.body).ca(),h.y-=3,Y(g.q,new E(0.3,0.3),h),s=V(f.body).ca(),s.y-=3,Y(g.q,new E(0.3,0.3),s),d.U(v.body,f.body,h,s,V(v.body),
V(f.body),(c+1)/2),W(g.q.ga,d),a.x+=3.5;for(c=0;c<2;c++){var d=new Dg,x=new Ag;new sg;f={Za:0};a.x+=2;for(var e=p,z=0;z<2;z++)h=a.y-(z+1)*4,v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Mf(g.q,new E(4,0.2),new E(a.x,h),n,{Da:f}),x.U(v.body,s.body,V(v.body)),h=W(g.q.ga,x),e!==p&&(d.U(h,e,z),W(g.q.ga,d)),e=h;h=a.y-12;v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f});s=Mf(g.q,new E(0.4,0.2),new E(a.x,h),n,{Da:f});f=new sg;f.U(v.body,s.body,V(v.body),new E(Math.random(),Math.random()));f.vf=n;f.Th=
-1;f.ti=1;h=W(g.q.ga,f);d.U(h,e,0.5);W(g.q.ga,d);a.x+=4}};a.aj=function(){for(var a={type:2,Sc:q},c={Fc:1.25},d=new ie(0.25),e=new E(0.5,0.5),f=0;f<5;f++){var h=f*5%(b.x-10),h=new E(h+f%20/20+4.5,15+f%20);g.q.Hb(e,h,n,d,{Da:a,qc:c})}d=new O;hd(d,0.25,0.25);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+5)%20/20+4.5,15+(f+5)%20),a.Za=f%17/17,g.q.Hb(e,h,n,d,{Da:a,qc:c});d=new O;f=[new E(-0.5,-0.5),new E(0.5,-0.5),new E(-0.5,0.5)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+10)%20/20+4.5,15+(f+
10)%20),a.Za=f%22/22,g.q.Hb(e,h,n,d,{Da:a,qc:c});d=new O;f=[new E(-Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,Math.random()*0.5),new E(-Math.random()*0.5,Math.random()*0.5)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,qc:c});d=new O;f=[new E(-0.5,-0.5),new E(0,-0.5),new E(0.5,0),new E(0.5,0.5),new E(0,0.3)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/
20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,qc:c})};a.df=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Gg);da("test.init",Gg.yb);var Hg={};
(function(a){var c,b=new E(5,10),d=new E(100,200),e,f,g,h;a.yb=function(c,e,f){g=new ag(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(2,2);a.fj();a.wb(c,f);bg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Wf(g.Wb,c,r,d,l);f=new vb("game");A(f,new tg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Qf,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Pf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.fj=function(){new E(3,0.25);h.$a(new E(b.x,
0.5),new E(b.x/2,b.y-0.25));a.Yi(new E(b.x,6),new E(0,b.y-0.25))};a.Yi=function(a,b){X(g.q,new E(0.25,a.y),new E(b.x+0,b.y-a.y/2),n,p,p);X(g.q,new E(0.25,a.y),new E(b.x+a.x-0.125,b.y-a.y/2),n,p,p);for(var c=new ie(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var f=0;f<a.y/2;f+=0.3){var h=g.q.Hb(new E(0.3,0.3),new E(b.x+e-d++%2*0.15,b.y-f),n,c,{qc:{De:0.1,Fc:0.1,xb:0.1}}),s=Math.random();s<=0.25?H(h,"graphics/ball-red.png"):s<=0.5?H(h,"graphics/ball-green.png"):s<=0.75?H(h,"graphics/ball-yellow.png"):H(h,
"graphics/ball-blue.png")}};a.df=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Hg);da("pit.init",Hg.yb);})();
