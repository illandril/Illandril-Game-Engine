(function(){var m=void 0,n=true,p=null,q=false;function aa(){return function(){}}function ba(a){return function(c){this[a]=c}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var u,w=this;function da(a,c){var b=a.split("."),d=w;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==m?d[e]=c:d=d[e]?d[e]:d[e]={}}function fa(){}
function ga(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0;function y(a,c){function b(){}b.prototype=c.prototype;a.oi=c.prototype;a.prototype=new b};function ja(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],r=k.exec(i)||["","",""];if(l[0].length==0&&r[0].length==0)break;b=ka(l[1].length==0?0:parseInt(l[1],10),r[1].length==0?0:parseInt(r[1],10))||ka(l[2].length==0,r[2].length==0)||ka(l[2],r[2])}while(b==
0)}return b}function ka(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ma,na,oa,pa;function qa(){return w.navigator?w.navigator.userAgent:p}pa=oa=na=ma=q;var ra;if(ra=qa()){var sa=w.navigator;ma=ra.indexOf("Opera")==0;na=!ma&&ra.indexOf("MSIE")!=-1;oa=!ma&&ra.indexOf("WebKit")!=-1;pa=!ma&&!oa&&sa.product=="Gecko"}var ta=na,ua=pa,va=oa,ya=w.navigator,za=(ya&&ya.platform||"").indexOf("Mac")!=-1,Aa;
a:{var Ba="",Ca;if(ma&&w.opera)var Da=w.opera.version,Ba=typeof Da=="function"?Da():Da;else if(ua?Ca=/rv\:([^\);]+)(\)|;)/:ta?Ca=/MSIE\s+([^\);]+)(\)|;)/:va&&(Ca=/WebKit\/(\S+)/),Ca)var Ea=Ca.exec(qa()),Ba=Ea?Ea[1]:"";if(ta){var Fa,Ga=w.document;Fa=Ga?Ga.documentMode:m;if(Fa>parseFloat(Ba)){Aa=String(Fa);break a}}Aa=Ba}var Ha={},Ia={};var Ja,Ka={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var La=Array.prototype,Ma=La.indexOf?function(a,c,b){return La.indexOf.call(a,c,b)}:function(a,c,b){b=b==p?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Na(a,c){Ma(a,c)>=0||a.push(c)}function Oa(a,c){var b=Ma(a,c);b>=0&&La.splice.call(a,b,1)};ta&&(Ia[9]||(Ia[9]=ta&&document.documentMode&&document.documentMode>=9));ta&&(Ha["8"]||(Ha["8"]=ja(Aa,"8")>=0));function Pa(){}Pa.prototype.Gh=q;Pa.prototype.Od=function(){if(!this.Gh)this.Gh=n,this.Pd()};Pa.prototype.Pd=function(){this.cj&&Qa.apply(p,this.cj)};function Qa(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=ga(d);e=="array"||e=="object"&&typeof d.length=="number"?Qa.apply(p,d):d&&typeof d.Od=="function"&&d.Od()}};function Ra(a,c){this.type=a;this.currentTarget=this.target=c}y(Ra,Pa);Ra.prototype.Pd=function(){delete this.type;delete this.target;delete this.currentTarget};Ra.prototype.Ug=q;Ra.prototype.Vj=n;function Sa(a){Sa[" "](a);return a}Sa[" "]=fa;function Ta(a,c){a&&this.yb(a,c)}y(Ta,Ra);u=Ta.prototype;u.target=p;u.relatedTarget=p;u.offsetX=0;u.offsetY=0;u.clientX=0;u.clientY=0;u.screenX=0;u.screenY=0;u.button=0;u.keyCode=0;u.charCode=0;u.ctrlKey=q;u.altKey=q;u.shiftKey=q;u.metaKey=q;u.Sj=q;u.Hh=p;
u.yb=function(a,c){var b=this.type=a.type;Ra.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(ua){var e;a:{try{Sa(d.nodeName);e=n;break a}catch(f){}e=q}e||(d=p)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==m?a.offsetX:a.layerX;this.offsetY=a.offsetY!==m?a.offsetY:a.layerY;this.clientX=a.clientX!==m?a.clientX:a.pageX;this.clientY=a.clientY!==m?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Sj=za?a.metaKey:a.ctrlKey;this.state=a.state;this.Hh=a;delete this.Vj;delete this.Ug};u.Pd=function(){Ta.oi.Pd.call(this);this.relatedTarget=this.currentTarget=this.target=this.Hh=p};function Ua(){}var Va=0;u=Ua.prototype;u.key=0;u.he=q;u.wh=q;u.yb=function(a,c,b,d,e,f){if(ga(a)=="function")this.Ph=n;else if(a&&a.handleEvent&&ga(a.handleEvent)=="function")this.Ph=q;else throw Error("Invalid listener argument");this.He=a;this.ni=c;this.src=b;this.type=d;this.capture=!!e;this.Nh=f;this.wh=q;this.key=++Va;this.he=q};u.handleEvent=function(a){return this.Ph?this.He.call(this.Nh||this.src,a):this.He.handleEvent.call(this.He,a)};var Wa,Xa=(Wa="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";function Ya(a,c){this.fi=c;this.td=[];if(a>this.fi)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.td.push(this.Hb())}y(Ya,Pa);Ya.prototype.qd=p;Ya.prototype.Fh=p;function Za(a){return a.td.length?a.td.pop():a.Hb()}function $a(a,c){a.td.length<a.fi?a.td.push(c):ab(a,c)}Ya.prototype.Hb=function(){return this.qd?this.qd():{}};
function ab(a,c){if(a.Fh)a.Fh(c);else{var b=ga(c);if(b=="object"||b=="array"||b=="function")if(ga(c.Od)=="function")c.Od();else for(var d in c)delete c[d]}}Ya.prototype.Pd=function(){Ya.oi.Pd.call(this);for(var a=this.td;a.length;)ab(this,a.pop());delete this.td};var bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb;
(function(){function a(){return{Pc:0,ge:0}}function c(){return[]}function b(){function a(b){b=g.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Ua}function e(){return new Ta}var f=Wa&&!(ja(Xa,"5.7")>=0),g;gb=function(a){g=a};if(f){bb=function(){return Za(h)};cb=function(a){$a(h,a)};db=function(){return Za(i)};eb=function(a){$a(i,a)};fb=function(){return Za(j)};hb=function(){$a(j,b())};ib=function(){return Za(k)};jb=function(a){$a(k,a)};kb=function(){return Za(l)};lb=function(a){$a(l,
a)};var h=new Ya(0,600);h.qd=a;var i=new Ya(0,600);i.qd=c;var j=new Ya(0,600);j.qd=b;var k=new Ya(0,600);k.qd=d;var l=new Ya(0,600);l.qd=e}else bb=a,cb=fa,db=c,eb=fa,fb=b,hb=fa,ib=d,jb=fa,kb=e,lb=fa})();var mb={},nb={},ob={},pb={};
function qb(a,c,b,d,e){if(c)if(ga(c)=="array")for(var f=0;f<c.length;f++)qb(a,c[f],b,d,e);else{var d=!!d,g=nb;c in g||(g[c]=bb());g=g[c];d in g||(g[d]=bb(),g.Pc++);var g=g[d],h=a[ha]||(a[ha]=++ia),i;g.ge++;if(g[h]){i=g[h];for(f=0;f<i.length;f++)if(g=i[f],g.He==b&&g.Nh==e){if(g.he)break;return}}else i=g[h]=db(),g.Pc++;f=fb();f.src=a;g=ib();g.yb(b,f,a,c,d,e);b=g.key;f.key=b;i.push(g);mb[b]=g;ob[h]||(ob[h]=db());ob[h].push(g);a.addEventListener?(a==w||!a.bj)&&a.addEventListener(c,f,d):a.attachEvent(c in
pb?pb[c]:pb[c]="on"+c,f)}else throw Error("Invalid event type");}function rb(a,c,b,d){if(!d.Df&&d.ii){for(var e=0,f=0;e<d.length;e++)if(d[e].he){var g=d[e].ni;g.src=p;hb(g);jb(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.ii=q;f==0&&(eb(d),delete nb[a][c][b],nb[a][c].Pc--,nb[a][c].Pc==0&&(cb(nb[a][c]),delete nb[a][c],nb[a].Pc--),nb[a].Pc==0&&(cb(nb[a]),delete nb[a]))}}
function sb(a,c,b,d,e){var f=1,c=c[ha]||(c[ha]=++ia);if(a[c]){a.ge--;a=a[c];a.Df?a.Df++:a.Df=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];i&&!i.he&&(f&=tb(i,e)!==q)}}finally{a.Df--,rb(b,d,c,a)}}return Boolean(f)}
function tb(a,c){var b=a.handleEvent(c);if(a.wh){var d=a.key;if(mb[d]){var e=mb[d];if(!e.he){var f=e.src,g=e.type,h=e.ni,i=e.capture;f.removeEventListener?(f==w||!f.bj)&&f.removeEventListener(g,h,i):f.detachEvent&&f.detachEvent(g in pb?pb[g]:pb[g]="on"+g,h);f=f[ha]||(f[ha]=++ia);h=nb[g][i][f];if(ob[f]){var j=ob[f];Oa(j,e);j.length==0&&delete ob[f]}e.he=n;h.ii=n;rb(g,i,f,h);delete mb[d]}}}return b}
gb(function(a,c){if(!mb[a])return n;var b=mb[a],d=b.type,e=nb;if(!(d in e))return n;var e=e[d],f,g;Ja===m&&(Ja=ta&&!w.addEventListener);if(Ja){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=w;f=h.shift();)if(i[f]!=p)i=i[f];else{h=p;break a}h=i}f=h;h=n in e;i=q in e;if(h){if(f.keyCode<0||f.returnValue!=m)return n;a:{var j=q;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(k){j=n}if(j||f.returnValue==m)f.returnValue=n}}j=kb();j.yb(f,this);f=n;try{if(h){for(var l=db(),r=j.currentTarget;r;r=r.parentNode)l.push(r);
g=e[n];g.ge=g.Pc;for(var o=l.length-1;!j.Ug&&o>=0&&g.ge;o--)j.currentTarget=l[o],f&=sb(g,l[o],d,n,j);if(i){g=e[q];g.ge=g.Pc;for(o=0;!j.Ug&&o<l.length&&g.ge;o++)j.currentTarget=l[o],f&=sb(g,l[o],d,q,j)}}else f=tb(b,j)}finally{if(l)l.length=0,eb(l);j.Od();lb(j)}return f}d=new Ta(c,this);try{f=tb(b,d)}finally{d.Od()}return f});var ub={61:187,59:186};ta||va&&(Ha["525"]||(Ha["525"]=ja(Aa,"525")>=0));function vb(a){this.id=wb++;this.name=a;this.controls={};this.Xg={};this.yh=[];this.Sf=this.mf=p}function xb(a,c){var b=0,d=yb==zb&&Ab==Bb&&Cb==Db,e;for(e in Eb){var f=d&&Eb[e].ui;b++;var g=Fb(e,yb,Ab,Cb);a.mf==p&&a.controls[g]!=p&&(!f||a.controls[g].ej)&&a.controls[g].execute(c)}if(b==1&&a.mf!=p)a.Sf!=p&&clearTimeout(a.Sf),a.Sf=setTimeout(function(){z(a,a.mf,g);a.mf=p;a.Sf=p},100)}
function z(a,c,b,d,e,f){var g=b;typeof b=="number"&&(g=Fb(b,d,e,f));b=[];d=a.controls[g];e=a.Xg[c.name];if(d!=p)if(e!=p)a.controls[e]=d,a.Xg[d.name]=e,b.push(new Gb(e,d));else throw"The specified key is already in use for a different function.";else e!=p&&delete a.controls[e];a.controls[g]=c;a.Xg[c.name]=g;b.push(new Gb(g,c));for(c=0;c<a.yh.length;c++)g=a.yh[c],g.jk.apply(g.He,b||[],Hb(a))}function Hb(a){var c=[],b;for(b in a.controls)c.push(new Gb(b,a.controls[b]));return c}
var wb=0,Eb={},yb=q,zb={},Ab=q,Bb={},Cb=q,Db={};function Ib(a){var c=a.keyCode,c=ua&&a.keyCode in ub?ub[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function Fb(a,c,b,d){var e=Ka[a];e==p&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}qb(document,"keydown",function(a){a=Ib(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&Eb[a.keyCode]==p&&(Eb[a.keyCode]={ui:q});yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});
qb(document,"keyup",function(a){a=Ib(a);delete Eb[a.keyCode];yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});qb(document,"blur",function(){Eb={};Db=Cb=Bb=Ab=zb=yb=q});function Gb(a,c){this.key=this.key=a;this.action=this.action=c};function Jb(a){this.rg=q;this.id=a;this.gj=this.Lh=this.Ui=0;this.Ch={};this.Mh={};this.Jh={};this.Ri=[];Kb.push(this);Lb[a]=this}var Kb=[],Lb={};function B(a){var c=Lb[a];c==p&&(c=new Jb(a));return c}function C(a){a.Ui++;a.rg&&Mb(a,a.Ch,Nb(a))}function Ob(a){a.Lh++;a.rg&&Mb(a,a.Mh,Nb(a))}function Pb(a){a.gj++;a.rg&&Mb(a,a.Jh,Nb(a))}function Mb(a,c,b){for(var d=0;d<b.length;d++){var e=b[d];c[e]==p&&(a.Mh[e]=0,a.Jh[e]=0,a.Ch[e]=0,a.Ri.push(e));c[e]++}}
function Nb(a){var c=["unknown"];try{a.ok()}catch(b){a=b.stack.match(/[A-Za-z0-9]+\.js:\d+:\d+/g).splice(3),a.length!=0&&(c=a)}return c};function E(a,c){C(B("Box2D.Common.Math.b2Vec2"));this.x=a;this.y=c}var Qb=[];function F(a,c){Ob(B("Box2D.Common.Math.b2Vec2"));if(Qb.length>0){var b=Qb.pop();b.i(a,c);return b}return new E(a,c)}function G(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Vec2")),Qb.push(a))}u=E.prototype;u.I=function(){this.y=this.x=0};u.i=function(a,c){this.x=a;this.y=c};u.m=function(a){this.x=a.x;this.y=a.y};u.Db=function(){return F(-this.x,-this.y)};u.kf=function(){this.x=-this.x;this.y=-this.y};
u.ca=function(){return F(this.x,this.y)};u.Pb=function(a){this.x+=a.x;this.y+=a.y};u.hg=function(a){this.x-=a.x;this.y-=a.y};u.qc=function(a){this.x*=a;this.y*=a};function Rb(a){return Math.sqrt(Sb(a))}function Sb(a){return a.x*a.x+a.y*a.y}function Tb(a){var c=Rb(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Ub={},Vb=0;function Wb(){Vb--}function Xb(a){if(a.Yg===m||a.Yg===p)a.Yg={};return a.Yg};function Yb(){C(B("Box2D.Dynamics.b2DebugDraw"));this.Of=this.Fg=this.Td=this.Fj=this.Wd=1;this.Yh=0;this.dc=p}Yb.prototype.ff=function(){this.dc.clearRect(0,0,this.dc.canvas.width,this.dc.canvas.height)};function Zb(a,c){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+c+")"}
(function(a){a.prototype.xi=function(a){var b=$b,d=this.dc,e=this.Wd;d.beginPath();d.strokeStyle=Zb(ac(b),this.Td);d.moveTo(a[0].x*e,a[0].y*e);for(b=1;b<4;b++)d.lineTo(a[b].x*e,a[b].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.zi=function(a,b,d){if(b){var e=this.dc,f=this.Wd;e.beginPath();e.strokeStyle=Zb(ac(d),this.Td);e.fillStyle=Zb(ac(d),this.Fg);e.moveTo(a[0].x*f,a[0].y*f);for(d=1;d<b;d++)e.lineTo(a[d].x*f,a[d].y*f);e.lineTo(a[0].x*f,a[0].y*f);e.closePath();e.fill();
e.stroke()}};a.prototype.yi=function(a,b,d,e){if(b){var f=this.dc,g=this.Wd,h=a.x*g,i=a.y*g;f.moveTo(0,0);f.beginPath();f.strokeStyle=Zb(ac(e),this.Td);f.fillStyle=Zb(ac(e),this.Fg);f.arc(h,i,b*g,0,Math.PI*2,n);f.moveTo(h,i);f.lineTo((a.x+d.x*b)*g,(a.y+d.y*b)*g);f.closePath();f.fill();f.stroke()}};a.prototype.Lc=function(a,b,d){var e=this.dc,f=this.Wd;e.strokeStyle=Zb(ac(d),this.Td);e.beginPath();e.moveTo(a.x*f,a.y*f);e.lineTo(b.x*f,b.y*f);e.closePath();e.stroke()};a.prototype.Ai=function(){var a=
bc,b=this.dc,d=this.Wd;b.beginPath();b.strokeStyle=Zb(16711680,this.Td);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.Of*a.d.a.x)*d,(a.position.y+this.Of*a.d.a.y)*d);b.strokeStyle=Zb(65280,this.Td);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.Of*a.d.b.x)*d,(a.position.y+this.Of*a.d.b.y)*d);b.closePath();b.stroke()}})(Yb);function cc(a,c,b,d){if(Ub[a]==p)Vb++,Ub[a]=new Image,Ub[a].onload=Wb,Ub[a].src=a;this.url=a;this.ki=c||new E(0,0);this.Vf=b||new E(1,1);this.si=d||new E(1,1);this.rb=new E(1,1)};function dc(){C(B("Box2D.Collision.b2AABB"));this.lowerBound=F(0,0);this.upperBound=F(0,0)}var ec=[];function fc(){Ob(B("Box2D.Collision.b2AABB"));if(ec.length>0){var a=ec.pop();a.I();return a}return new dc}dc.prototype.I=function(){this.lowerBound.i(0,0);this.upperBound.i(0,0)};function gc(a){return F((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}
function hc(a,c){var b;return b=(b=(b=(b=n&&a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}dc.prototype.Ld=function(a){return a.lowerBound.x-this.upperBound.x>0?q:a.lowerBound.y-this.upperBound.y>0?q:this.lowerBound.x-a.upperBound.x>0?q:this.lowerBound.y-a.upperBound.y>0?q:n};
function ic(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function jc(a,c,b,d,e){this.rc={};this.ya=a;this.Cb=d;this.Hc=new E(d.x/b,d.y/b);this.scale=b;this.Ea=new E(0,0);this.Cf=new E(-1,-1);this.Yf=new dc;this.Yf.upperBound=this.Hc.ca();this.Yf.upperBound.qc(1.25);kc(this,new E(0,0));a=document.getElementById(c);this.rd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.Cb.x+"px; height: "+this.Cb.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.Cb.x/2+"px; height: "+this.Cb.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.rd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.rd.className="viewportContainer";this.rd.style.width=this.Cb.x+"px";this.rd.style.height=this.Cb.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.rd.appendChild(this.display);a.appendChild(this.rd);this.zg=document.createElement("div");this.zg=lc(this,"Loading, please wait.");mc(this.zg);this.li=lc(this,
"Paused");e?(this.gb=document.getElementById(c+"__DEBUG"),this.gb.width=this.ya.q.Ya.x*b,this.gb.height=this.ya.q.Ya.y*b,this.gb.style.marginRight="-"+this.gb.width+"px",this.gb.style.marginBottom="-"+this.gb.height+"px",c=new Yb,e=this.gb.getContext("2d"),c.dc=e,c.Wd=b,c.Fg=0.3,c.Fj=1,c.dc.sk=1,c.Yh=7,this.ya.q.ga.Pa=c):this.gb=p}
function lc(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+nc;b.innerHTML=c;b.style.width=a.Cb.x+"px";b.style.height=a.Cb.y+"px";a.rd.appendChild(b);return b}function mc(a){if(a.style.display=="none")a.style.display="table-cell"}
function oc(a){if(a.style.display!="none")a.style.display="none"}function kc(a,c){a.Ea.x=c.x;a.Ea.y=c.y;if(a.Ea.x<a.Hc.x/2)a.Ea.x=a.Hc.x/2;else if(a.Ea.x>a.ya.q.Ya.x-a.Hc.x/2)a.Ea.x=a.ya.q.Ya.x-a.Hc.x/2;if(a.Ea.y<a.Hc.y/2)a.Ea.y=a.Hc.y/2;else if(a.Ea.y>a.ya.q.Ya.y-a.Hc.y/2)a.Ea.y=a.ya.q.Ya.y-a.Hc.y/2}
function pc(a,c){if(a.display==p)a.display={},a.display.K=new dc,a.ij=function(a){var c=this.body?this.body.e.position:this.position.ca();return this.display.Rf==0?c:new E(c.x+(a.x-c.x)*this.display.Rf,c.y+(a.y-c.y)*this.display.Rf)},a.hj=function(){return this.body?this.body.Sb():this.Za},a.display.Rf=0,a.display.vi=0;a.display.size=c.ca()}function H(a,c,b){a.display.Wf=new cc(c,b)}var nc=100,qc=0;var rc=function(){var a=window.rk||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function sc(){C(B("Box2D.Dynamics.b2FilterData"));this.xe=1;this.Se=65535;this.vd=0}sc.prototype.ca=function(){var a=new sc;a.xe=this.xe;a.Se=this.Se;a.vd=this.vd;return a};function tc(){C(B("Box2D.Dynamics.b2FixtureDef"));this.filter=new sc;this.filter.xe=1;this.filter.Se=65535;this.filter.vd=0;this.shape=p;this.xb=0.2;this.ze=this.Gc=0;this.Bf=q};function uc(){C(B("Box2D.Common.Math.b2Mat22"));this.a=F(0,0);this.b=F(0,0);this.lf()}var vc=[];function wc(){Ob(B("Box2D.Common.Math.b2Mat22"));if(vc.length>0){var a=vc.pop();a.I();return a}return new uc}function xc(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Mat22")),vc.push(a))}function yc(a){var c=wc();c.i(a);return c}u=uc.prototype;u.i=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.i(c,a);this.b.i(-a,c)};u.ca=function(){var a=wc();a.Jd(this);return a};u.Jd=function(a){this.a.m(a.a);this.b.m(a.b)};
u.$f=function(a){this.a.Pb(a.a);this.b.Pb(a.b)};u.lf=function(){this.a.i(1,0);this.b.i(0,1)};u.I=function(){this.a.i(0,0);this.b.i(0,0)};u.Sb=function(){return Math.atan2(this.a.y,this.a.x)};u.te=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function zc(a,c){return a.x*c.x+a.y*c.y}function Ac(a,c){return a.x*c.y-a.y*c.x}function Bc(a){return F(1*a.y,-1*a.x)}function Cc(a,c){return F(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function Dc(a,c){return F(zc(c,a.a),zc(c,a.b))}function I(a,c){var b=Cc(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function Ec(a,c){var b=J(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function J(a,c){return F(a.x-c.x,a.y-c.y)}function K(a,c,b){return a<c?c:a>b?b:a};function L(a){if(!a)throw"Assertion Failed";}var Fc=2/180*Math.PI,Gc=8/180*Math.PI,Hc=0.5*Math.PI,Ic=Hc*Hc,Jc=2/180*Math.PI,Kc=Number.MIN_VALUE*Number.MIN_VALUE;function Lc(){C(B("Box2D.Collision.b2DistanceProxy"));this.T=this.C=0;this.n=[]}Lc.prototype.i=function(a){a.kh(this)};Lc.prototype.jf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.C;d++){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};Lc.prototype.le=function(a){return this.n[this.jf(a)]};Lc.prototype.hh=t("C");function N(a,c){c===m&&(c=0);L(0<=c&&c<a.C);return a.n[c]};function Mc(){C(B("Box2D.Collision.b2DistanceOutput"));this.ic=F(0,0);this.jc=F(0,0);this.sd=0};function Nc(){C(B("Box2D.Collision.b2SimplexVertex"));this.ta=F(0,0);this.La=F(0,0);this.na=F(0,0);this.pa=this.oa=this.o=0}Nc.prototype.i=function(a){this.ta.m(a.ta);this.La.m(a.La);this.na.m(a.na);this.o=a.o;this.oa=a.oa;this.pa=a.pa};function Oc(){C(B("Box2D.Collision.b2Simplex"));this.R=new Nc;this.fa=new Nc;this.jb=new Nc;this.n=[this.R,this.fa,this.jb]}var Pc=[];function Qc(a){if(a.C==1)return 0;else if(a.C==2){var c=J(a.R.na,a.fa.na),a=Rb(c);G(c);return a}else if(a.C==3){var c=J(a.fa.na,a.R.na),b=J(a.jb.na,a.R.na),a=Ac(c,b);G(c);G(b);return a}else return L(q),0};function Rc(a,c,b){var d;if(Pc.length>0){d=Pc.pop();for(var e=0;e<d.n.length;e++){var f=d.n[e];f.ta!=p&&f.ta.i(0,0);f.La!=p&&f.La.i(0,0);f.na!=p&&f.na.i(0,0);f.oa=0;f.pa=0;f.o=0}}else d=new Oc;var e=d,f=b.kc,g=b.$e,h=b.lc,i=b.af;L(0<=c.Nd&&c.Nd<=3);var j,k;e.C=c.Nd;for(var l=e.n,r=0;r<e.C;r++){var o=l[r];o.oa=c.oa[r];o.pa=c.pa[r];j=N(f,o.oa);k=N(h,o.pa);G(o.ta);G(o.La);G(o.na);o.ta=I(g,j);o.La=I(i,k);o.na=J(o.La,o.ta);o.o=0}if(e.C>1&&(j=c.Nj,k=Qc(e),k<0.5*j||2*j<k||k<Number.MIN_VALUE))e.C=0;if(e.C==
0)o=l[0],o.oa=0,o.pa=0,j=N(f,0),k=N(h,0),G(o.ta),G(o.La),G(o.na),o.ta=I(g,j),o.La=I(i,k),o.na=J(o.La,o.ta),e.C=1;(d.C<1||d.C>3)&&L(q);for(e=0;e<20;){f=[];for(g=0;g<d.C;g++)f[g]={},f[g].oa=d.n[g].oa,f[g].pa=d.n[g].pa;if(d.C==2)g=d,i=g.R.na,l=g.fa.na,h=J(l,i),i=-(i.x*h.x+i.y*h.y),i<=0?(G(h),g.R.o=1,g.C=1):(l=l.x*h.x+l.y*h.y,G(h),l<=0?(g.fa.o=1,g.C=1,g.R.i(g.fa)):(h=1/(l+i),g.R.o=l*h,g.fa.o=i*h,g.C=2));else if(d.C==3){g=d;j=g.R.na;k=g.fa.na;var o=g.jb.na,v=J(k,j),h=zc(k,v),i=-zc(j,v),s=J(o,j),x=zc(j,
s),l=zc(o,s),r=Ac(v,s);G(v);G(s);var v=-x,x=J(o,k),A=zc(k,x),s=zc(o,x);G(x);x=-A;A=r*Ac(k,o);o=r*Ac(o,j);j=r*Ac(j,k);i<=0&&v<=0?(g.R.o=1,g.C=1):h>0&&i>0&&j<=0?(l=1/(h+i),g.R.o=h*l,g.fa.o=i*l,g.C=2):l>0&&v>0&&o<=0?(h=1/(l+v),g.R.o=l*h,g.jb.o=v*h,g.C=2,g.fa.i(g.jb)):h<=0&&x<=0?(g.fa.o=1,g.C=1,g.R.i(g.fa)):l<=0&&s<=0?(g.jb.o=1,g.C=1,g.R.i(g.jb)):s>0&&x>0&&A<=0?(h=1/(s+x),g.fa.o=s*h,g.jb.o=x*h,g.C=2,g.R.i(g.jb)):(h=1/(A+o+j),g.R.o=A*h,g.fa.o=o*h,g.jb.o=j*h,g.C=3)}if(d.C==3)break;h=d;h.C==1?g=h.R.na.Db():
h.C==2?(g=J(h.fa.na,h.R.na),i=h.R.na.Db(),h=Ac(g,i),G(i),i=p,i=h>0?F(-1*g.y,1*g.x):Bc(g),G(g),g=i):(L(q),g=F(0,0));if(Sb(g)<Kc){G(g);break}G(d.n[d.C].ta);G(d.n[d.C].La);G(d.n[d.C].na);h=g.Db();i=Dc(b.$e.d,h);G(h);d.n[d.C].oa=b.kc.jf(i);G(i);d.n[d.C].ta=I(b.$e,N(b.kc,d.n[d.C].oa));h=Dc(b.af.d,g);G(g);d.n[d.C].pa=b.lc.jf(h);G(h);d.n[d.C].La=I(b.af,N(b.lc,d.n[d.C].pa));d.n[d.C].na=J(d.n[d.C].La,d.n[d.C].ta);e++;h=q;for(g=0;g<f.length;g++)if(d.n[d.C].oa==f[g].oa&&d.n[d.C].pa==f[g].pa){h=n;break}if(h)break;
d.C++}e=d;f=a.ic;g=a.jc;e.C==1?(f.m(e.R.ta),g.m(e.R.La)):e.C==2?(f.x=e.R.o*e.R.ta.x+e.fa.o*e.fa.ta.x,f.y=e.R.o*e.R.ta.y+e.fa.o*e.fa.ta.y,g.x=e.R.o*e.R.La.x+e.fa.o*e.fa.La.x,g.y=e.R.o*e.R.La.y+e.fa.o*e.fa.La.y):e.C==3?(g.x=f.x=e.R.o*e.R.ta.x+e.fa.o*e.fa.ta.x+e.jb.o*e.jb.ta.x,g.y=f.y=e.R.o*e.R.ta.y+e.fa.o*e.fa.ta.y+e.jb.o*e.jb.ta.y):L(q);e=J(a.ic,a.jc);a.sd=Rb(e);G(e);e=d;c.Nj=Qc(e);c.Nd=e.C;f=e.n;for(g=0;g<e.C;g++)c.oa[g]=f[g].oa,c.pa[g]=f[g].pa;d!=p&&Pc.push(d);if(b.bh)c=b.kc.T,b=b.lc.T,a.sd>c+b&&
a.sd>Number.MIN_VALUE?(a.sd-=c+b,d=J(a.jc,a.ic),Tb(d),a.ic.x+=c*d.x,a.ic.y+=c*d.y,a.jc.x-=b*d.x,a.jc.y-=b*d.y,G(d)):(b=F(0,0),b.x=0.5*(a.ic.x+a.jc.x),b.y=0.5*(a.ic.y+a.jc.y),a.ic.x=a.jc.x=b.x,a.ic.y=a.jc.y=b.y,a.sd=0,G(b))};function Sc(){C(B("Box2D.Collision.b2SimplexCache"));this.oa=[0,0,0];this.pa=[0,0,0]};function Tc(){C(B("Box2D.Collision.b2DistanceInput"));this.bh=q;this.af=this.$e=this.lc=this.kc=p};function Uc(){C(B("Box2D.Collision.Shapes.b2Shape"));this.T=0.005}Uc.prototype.i=function(a){this.T=a.T};function Vc(){C(B("Box2D.Collision.Shapes.b2MassData"));this.dd=0;this.Oc=F(0,0);this.Id=0}var Wc=[];function Xc(){Ob(B("Box2D.Collision.Shapes.b2MassData"));if(Wc.length>0){var a=Wc.pop();a.dd=0;a.Oc.I();a.Id=0;return a}return new Vc}Vc.prototype.m=function(a,c,b){this.dd=a;this.Oc.m(c);this.Id=b};Vc.prototype.i=function(a,c,b,d){this.dd=a;this.Oc.i(c,b);this.Id=d};function Yc(a,c){C(B("Box2D.Common.Math.b2Transform"));this.position=F(0,0);this.d=new uc;a&&this.position.m(a);c&&this.d.Jd(c)}Yc.prototype.U=function(a,c){this.position.m(a);this.d.Jd(c)};Yc.prototype.lf=function(){this.position.I();this.d.lf()};Yc.prototype.i=function(a){this.position.m(a.position);this.d.Jd(a.d)};Yc.prototype.Sb=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function O(){C(B("Box2D.Collision.Shapes.b2PolygonShape"));Uc.call(this);this.zb=F(0,0);this.n=[];this.W=[]}y(O,Uc);u=O.prototype;u.me=ca("b2PolygonShape");u.ca=function(){var a=new O;a.i(this);return a};u.i=function(a){Uc.prototype.i.call(this,a);if(a instanceof O){this.zb.m(a.zb);this.ba=a.ba;Zc(this,this.ba);for(var c=0;c<this.ba;c++)this.n[c].m(a.n[c]),this.W[c].m(a.W[c])}};function $c(a,c){ad(a,c)}
function ad(a,c){var b=c.length;L(2<=b);a.ba=b;Zc(a,b);for(b=b=0;b<a.ba;b++)a.n[b].m(c[b]);for(b=0;b<a.ba;++b){var d=J(a.n[b+1<a.ba?b+1:0],a.n[b]);L(Sb(d)>Number.MIN_VALUE);var e=Bc(d);G(d);a.W[b].m(e);G(e);Tb(a.W[b])}for(var b=a.n,d=a.ba,e=F(0,0),f=0,g=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],k=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));f+=k;e.x+=k*g*(0+i.x+j.x);e.y+=k*g*(0+i.y+j.y)}e.x*=1/f;e.y*=1/f;a.zb=e}
function bd(a,c,b){a.ba=4;Zc(a,4);a.n[0].i(-c,-b);a.n[1].i(c,-b);a.n[2].i(c,b);a.n[3].i(-c,b);a.W[0].i(0,-1);a.W[1].i(1,0);a.W[2].i(0,1);a.W[3].i(-1,0);a.zb.I()}
u.gf=function(a,c){for(var b=c.d,d=this.n[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),f=c.position.y+(b.a.y*d.x+b.b.y*d.y),g=e,h=f,i=1;i<this.ba;++i)var d=this.n[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,f=f<d?f:d,g=g>j?g:j,h=h>d?h:d;a.lowerBound.x=e-this.T;a.lowerBound.y=f-this.T;a.upperBound.x=g+this.T;a.upperBound.y=h+this.T};
u.eh=function(a,c){if(this.ba==2)a.Oc.x=0.5*(this.n[0].x+this.n[1].x),a.Oc.y=0.5*(this.n[0].y+this.n[1].y),a.dd=0,a.Id=0;else{for(var b=0,d=0,e=0,f=0,g=1/3,h=0;h<this.ba;++h){var i=this.n[h],j=h+1<this.ba?this.n[h+1]:this.n[0],k=i.x-0,l=i.y-0,r=j.x-0,o=j.y-0,v=k*o-l*r,s=0.5*v;e+=s;b+=s*g*(0+i.x+j.x);d+=s*g*(0+i.y+j.y);i=k;f+=v*(g*(0.25*(i*i+r*i+r*r)+(0*i+0*r))+0+(g*(0.25*(l*l+o*l+o*o)+(0*l+0*o))+0))}b*=1/e;d*=1/e;a.i(c*e,b,d,c*f)}};u.kh=function(a){var c=this.T,b=this.n;a.C=this.ba;a.T=c;a.n=b};
u.hh=t("ba");u.jf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ba;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};u.le=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ba;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return this.n[c]};function Zc(a,c){for(var b=0;b<a.n.length;b++)G(a.n[b]),G(a.W[b]);a.n=[];a.W=[];for(b=0;b<c;b++)a.n[b]=F(0,0),a.W[b]=F(0,0)}new uc;function cd(){C(B("Box2D.Dynamics.b2ContactFilter"))}cd.prototype.Wb=function(a,c){var b=a.Zh.ca(),d=c.Zh.ca();return b.vd==d.vd&&b.vd!=0?b.vd>0:(b.Se&d.xe)!=0&&(b.xe&d.Se)!=0};var dd=new cd;function ed(){};function P(a){this.Wa=new ed;this.Xa=new ed;this.Ne=F(0,0);this.Oe=F(0,0);L(a.s!=a.u);this.D=a.type;this.Ac=this.Zd=p;this.w=a.s;this.z=a.u;this.Wh=a.ng}u=P.prototype;u.nc=ca(p);u.oc=ca(p);u.kd=function(){return this.w.kd()&&this.z.kd()};u.Tb=aa();u.Fb=aa();u.bg=aa();u.Eb=ca(q);function fd(a){P.call(this,a);this.ec=F(0,0);this.fc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.Y=F(0,0);this.Z=F(0,0);this.hb=this.w.bb.Hg;this.ec.x=a.xf.x-this.hb.e.position.x;this.ec.y=a.xf.y-this.hb.e.position.y;this.fc.x=a.yf.x-this.hb.e.position.x;this.fc.y=a.yf.y-this.hb.e.position.y;this.F.m(a.Ua);this.G.m(a.Va);this.ka=a.fd;this.Vd=a.xg+this.ka*a.yg;this.ci=Math.min(a.gi,this.Vd-this.ka*gd);this.di=Math.min(a.hi,(this.Vd-gd)/this.ka);this.zc=this.yc=this.j=0}y(fd,P);u=fd.prototype;
u.nc=function(){return Q(this.w,this.F)};u.oc=function(){return Q(this.z,this.G)};
u.Tb=function(a){var c=this.w,b=this.z,d;d=c.e.d;var e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,g=d.a.x*e+d.b.x*f,f=d.a.y*e+d.b.y*f,e=g;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,g=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=g;d=b.c.h.x+h;var g=b.c.h.y+i,j=this.hb.e.position.x+this.fc.x,k=this.hb.e.position.y+this.fc.y;this.Y.i(c.c.h.x+e-(this.hb.e.position.x+this.ec.x),c.c.h.y+f-(this.hb.e.position.y+this.ec.y));this.Z.i(d-j,g-k);d=Rb(this.Y);g=Rb(this.Z);d>0.005?this.Y.qc(1/d):this.Y.I();g>0.005?this.Z.qc(1/
g):this.Z.I();this.Vd-d-this.ka*g>0?this.j=this.Ng=0:this.Ng=2;d<this.ci?this.yc=this.Ig=0:this.Ig=2;g<this.di?this.zc=this.Jg=0:this.Jg=2;d=e*this.Y.y-f*this.Y.x;g=h*this.Z.y-i*this.Z.x;this.Le=c.k+c.v*d*d;this.Me=b.k+b.v*g*g;this.Kf=this.Le+this.ka*this.ka*this.Me;this.Le=1/this.Le;this.Me=1/this.Me;this.Kf=1/this.Kf;a.Ed?(this.j*=a.ab,this.yc*=a.ab,this.zc*=a.ab,a=(-this.j-this.yc)*this.Y.x,d=(-this.j-this.yc)*this.Y.y,g=(-this.ka*this.j-this.zc)*this.Z.x,j=(-this.ka*this.j-this.zc)*this.Z.y,c.f.x+=
c.k*a,c.f.y+=c.k*d,c.p+=c.v*(e*d-f*a),b.f.x+=b.k*g,b.f.y+=b.k*j,b.p+=b.v*(h*j-i*g)):this.zc=this.yc=this.j=0};
u.Fb=function(){var a=this.w,c=this.z,b;b=a.e.d;var d=this.F.x-a.c.r.x,e=this.F.y-a.c.r.y,f=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=f;b=c.e.d;var g=this.G.x-c.c.r.x,h=this.G.y-c.c.r.y,f=b.a.x*g+b.b.x*h,h=b.a.y*g+b.b.y*h,g=f,i=f=b=0,j=0;b=j=b=j=i=f=b=0;if(this.Ng==2)b=a.f.x+-a.p*e,f=a.f.y+a.p*d,i=c.f.x+-c.p*h,j=c.f.y+c.p*g,b=-(this.Y.x*b+this.Y.y*f)-this.ka*(this.Z.x*i+this.Z.y*j),j=this.Kf*-b,b=this.j,this.j=Math.max(0,this.j+j),j=this.j-b,b=-j*this.Y.x,f=-j*this.Y.y,i=-this.ka*j*this.Z.x,j=-this.ka*
j*this.Z.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.p+=a.v*(d*f-e*b),c.f.x+=c.k*i,c.f.y+=c.k*j,c.p+=c.v*(g*j-h*i);if(this.Ig==2)b=a.f.x+-a.p*e,f=a.f.y+a.p*d,b=-(this.Y.x*b+this.Y.y*f),j=-this.Le*b,b=this.yc,this.yc=Math.max(0,this.yc+j),j=this.yc-b,b=-j*this.Y.x,f=-j*this.Y.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.p+=a.v*(d*f-e*b);if(this.Jg==2)i=c.f.x+-c.p*h,j=c.f.y+c.p*g,b=-(this.Z.x*i+this.Z.y*j),j=-this.Me*b,b=this.zc,this.zc=Math.max(0,this.zc+j),j=this.zc-b,i=-j*this.Z.x,j=-j*this.Z.y,c.f.x+=c.k*i,c.f.y+=c.k*j,c.p+=
c.v*(g*j-h*i)};
u.Eb=function(){var a=this.w,c=this.z,b,d=this.hb.e.position.x+this.ec.x,e=this.hb.e.position.y+this.ec.y,f=this.hb.e.position.x+this.fc.x,g=this.hb.e.position.y+this.fc.y,h=0,i=0,j=0,k=0,l=b=0,r=0,o=0,v=l=o=b=l=b=0;if(this.Ng==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,b=a.c.h.x+h,l=a.c.h.y+i,r=c.c.h.x+j,o=c.c.h.y+k,this.Y.i(b-d,l-e),this.Z.i(r-f,o-g),b=Rb(this.Y),l=
Rb(this.Z),b>0.005?this.Y.qc(1/b):this.Y.I(),l>0.005?this.Z.qc(1/l):this.Z.I(),b=this.Vd-b-this.ka*l,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Kf*b,b=-o*this.Y.x,l=-o*this.Y.y,r=-this.ka*o*this.Z.x,o=-this.ka*o*this.Z.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.o+=a.v*(h*l-i*b),c.c.h.x+=c.k*r,c.c.h.y+=c.k*o,c.c.o+=c.v*(j*o-k*r),R(a),R(c);if(this.Ig==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=a.c.h.x+h,l=a.c.h.y+i,this.Y.i(b-d,l-e),b=Rb(this.Y),b>0.005?(this.Y.x*=
1/b,this.Y.y*=1/b):this.Y.I(),b=this.ci-b,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Le*b,b=-o*this.Y.x,l=-o*this.Y.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.o+=a.v*(h*l-i*b),R(a);if(this.Jg==2)b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,r=c.c.h.x+j,o=c.c.h.y+k,this.Z.i(r-f,o-g),l=Rb(this.Z),l>0.005?(this.Z.x*=1/l,this.Z.y*=1/l):this.Z.I(),b=this.di-l,v=Math.max(v,-b),b=K(b+0.005,-0.2,0),o=-this.Me*b,r=-o*this.Z.x,o=-o*this.Z.y,c.c.h.x+=c.k*r,c.c.h.y+=c.k*o,c.c.o+=
c.v*(j*o-k*r),R(c);return v<0.005};var gd=1;function hd(){this.pk=p;this.qk=0};function id(){C(B("Box2D.Collision.b2ContactID"));this.jg=this.ig=this.kg=this.Sa=0}function jd(a,c){a.Sa=c;a.kg=a.Sa&255;a.ig=(a.Sa&65280)>>8&255;a.jg=(a.Sa&16711680)>>16&255;a.qh=(a.Sa&4278190080)>>24&255}id.prototype.i=function(a){jd(this,a.Sa)};function kd(a,c){a.kg=c;a.Sa=a.Sa&4294967040|a.kg&255}function ld(a,c){a.ig=c;a.Sa=a.Sa&4294902015|a.ig<<8&65280}function md(a,c){a.jg=c;a.Sa=a.Sa&4278255615|a.jg<<16&16711680}id.prototype.ca=function(){var a=new id;a.i(this);return a};function nd(){C(B("Box2D.Collision.ClipVertex"));this.sb=F(0,0);this.id=new id}nd.prototype.i=function(a){this.sb.m(a.sb);this.id.i(a.id)};function od(){C(B("Box2D.Collision.b2ManifoldPoint"));this.M=F(0,0);this.xc=new id;this.cd=this.ad=0}od.prototype.da=function(){this.M.I();this.cd=this.ad=0;jd(this.xc,0)};od.prototype.i=function(a){this.M.m(a.M);this.ad=a.ad;this.cd=a.cd;this.xc.i(a.xc)};function pd(){C(B("Box2D.Collision.b2Manifold"));this.D=this.ra=0;this.J=[];for(var a=0;a<2;a++)this.J[a]=new od;this.Ia=F(0,0);this.M=F(0,0)}pd.prototype.da=function(){for(var a=0;a<2;a++)this.J[a].da();this.Ia.I();this.M.I();this.ra=this.D=0};pd.prototype.i=function(a){this.ra=a.ra;for(var c=0;c<2;c++)this.J[c].i(a.J[c]);this.Ia.m(a.Ia);this.M.m(a.M);this.D=a.D};pd.prototype.ca=function(){var a=new pd;a.i(this);return a};function qd(a,c,b,d){var e=0,f=c[0].sb,g=c[1].sb,h=b.x*f.x+b.y*f.y-d,b=b.x*g.x+b.y*g.y-d;h<=0&&a[e++].i(c[0]);b<=0&&a[e++].i(c[1]);if(h*b<0)b=h/(h-b),d=a[e].sb,d.x=f.x+b*(g.x-f.x),d.y=f.y+b*(g.y-f.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function rd(a,c,b,d,e){for(var f=c.d.a.x*a.W[b].x+c.d.b.x*a.W[b].y,g=c.d.a.y*a.W[b].x+c.d.b.y*a.W[b].y,h=e.d.a.x*f+e.d.a.y*g,i=e.d.b.x*f+e.d.b.y*g,j=0,k=Number.MAX_VALUE,l=0;l<d.ba;l++){var r=d.n[l].x*h+d.n[l].y*i;r<k&&(k=r,j=l)}return(e.position.x+(e.d.a.x*d.n[j].x+e.d.b.x*d.n[j].y)-(c.position.x+(c.d.a.x*a.n[b].x+c.d.b.x*a.n[b].y)))*f+(e.position.y+(e.d.a.y*d.n[j].x+e.d.b.y*d.n[j].y)-(c.position.y+(c.d.a.y*a.n[b].x+c.d.b.y*a.n[b].y)))*g}
function sd(a,c,b,d){var e=d.position.x+(d.d.a.x*b.zb.x+d.d.b.x*b.zb.y),f=d.position.y+(d.d.a.y*b.zb.x+d.d.b.y*b.zb.y);e-=c.position.x+(c.d.a.x*a.zb.x+c.d.b.x*a.zb.y);f-=c.position.y+(c.d.a.y*a.zb.x+c.d.b.y*a.zb.y);for(var g=e*c.d.a.x+f*c.d.a.y,f=e*c.d.b.x+f*c.d.b.y,e=0,h=-Number.MAX_VALUE,i=0;i<a.ba;++i){var j=a.W[i].x*g+a.W[i].y*f;j>h&&(h=j,e=i)}g=rd(a,c,e,b,d);f=e-1;f<0&&(f=a.ba-1);h=rd(a,c,f,b,d);i=e+1;i>=a.ba&&(i=0);var j=rd(a,c,i,b,d),k=0,l=0;if(h>g&&h>j){k=f;for(l=h;;)if(e=k-1,e<0&&(e=a.ba-
1),g=rd(a,c,e,b,d),g>l)k=e,l=g;else break}else if(j>g){k=i;for(l=j;;)if(e=k+1,e>=a.ba&&(e=0),g=rd(a,c,e,b,d),g>l)k=e,l=g;else break}else k=e,l=g;return{vh:k,Uf:l}}var td=[new nd,new nd],ud=[new nd,new nd],vd=[new nd,new nd],wd=F(0,0),xd=F(0,0),yd=F(0,0),zd=F(0,0),Ad=F(0,0),Bd=F(0,0),Cd=F(0,0),Dd=F(0,0);function Ed(){C(B("Box2D.Collision.b2SeparationFunction"));this.M=F(0,0);this.B=F(0,0);this.Cc=this.Bc=p}
Ed.prototype.U=function(a,c,b,d,e){this.Bc=c;this.Cc=d;var f=a.Nd;L(0<f&&f<3);var g,h,i=h=g=0,j=0,d=c=0,k,l,i=0;f==1?(this.D=1,f=N(this.Bc,a.oa[0]),a=N(this.Cc,a.pa[0]),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),this.B.x=i-g,this.B.y=j-h,Tb(this.B)):a.pa[0]==a.pa[1]?(this.D=2,c=N(this.Bc,a.oa[0]),d=N(this.Bc,a.oa[1]),a=N(this.Cc,a.pa[0]),this.M.x=0.5*(c.x+d.x),this.M.y=0.5*
(c.y+d.y),j=J(d,c),G(this.B),this.B=Bc(j),G(j),Tb(this.B),l=this.B,k=b.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),(i-g)*c+(j-h)*d<0&&this.B.kf()):a.oa[0]==a.oa[0]?(this.D=4,g=N(this.Cc,a.pa[0]),h=N(this.Cc,a.pa[1]),f=N(this.Bc,a.oa[0]),this.M.x=0.5*(g.x+h.x),this.M.y=0.5*(g.y+h.y),j=J(h,g),G(this.B),this.B=Bc(j),G(j),Tb(this.B),
l=this.B,k=e.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),(g-i)*c+(h-j)*d<0&&this.B.kf()):(c=N(this.Bc,a.oa[0]),d=N(this.Bc,a.oa[1]),g=N(this.Cc,a.pa[0]),h=N(this.Cc,a.pa[1]),j=J(d,c),i=Cc(b.d,j),G(j),j=J(h,g),k=Cc(e.d,j),G(j),e=i.x*i.x+i.y*i.y,b=k.x*k.x+k.y*k.y,j=J(k,i),a=i.x*j.x+i.y*j.y,f=k.x*j.x+k.y*j.y,G(j),j=i.x*k.x+i.y*
k.y,k=e*b-j*j,i=0,k!=0&&(i=K((j*f-a*b)/k,0,1)),(j*i+f)/b<0&&(i=K((j-a)/e,0,1)),f=F(0,0),f.x=c.x+i*(d.x-c.x),f.y=c.y+i*(d.y-c.y),a=F(0,0),a.x=g.x+i*(h.x-g.x),a.y=g.y+i*(h.y-g.y),i==0||i==1?(this.D=4,j=J(h,g),G(this.B),this.B=Bc(j),G(j),Tb(this.B),this.M=a):(this.D=2,j=J(d,c),G(this.B),this.B=Bc(j),G(j),this.M=f),i<0&&this.B.kf(),G(f),G(a))};
Ed.prototype.Rb=function(a,c){var b=0;switch(this.D){case 1:var b=Dc(a.d,this.B),d=this.B.Db(),e=Dc(c.d,d);G(d);var f=this.Bc.le(b);G(b);b=this.Cc.le(e);G(e);e=I(a,f);f=I(c,b);b=(f.x-e.x)*this.B.x+(f.y-e.y)*this.B.y;G(e);G(f);break;case 2:d=Cc(a.d,this.B);f=d.Db();e=Dc(c.d,f);G(f);b=this.Cc.le(e);G(e);e=I(a,this.M);f=I(c,b);b=(f.x-e.x)*d.x+(f.y-e.y)*d.y;G(d);G(e);G(f);break;case 4:d=Cc(c.d,this.B);f=d.Db();b=Dc(a.d,f);G(f);f=this.Bc.le(b);G(b);e=I(a,f);f=I(c,this.M);b=(e.x-f.x)*d.x+(e.y-f.y)*d.y;
G(d);G(e);G(f);break;default:L(q)}return b};var Fd=0,Gd=0,Hd=0,Id=0,Jd=0,Kd=new Sc,Ld=new Tc,Md=new Yc,Nd=new Yc,Od=new Ed,Pd=new Mc;function Qd(){C(B("Box2D.Common.Math.b2Sweep"));this.r=F(0,0);this.Ga=F(0,0);this.h=F(0,0);this.Ba=this.o=this.lb=p}Qd.prototype.i=function(a){this.r.m(a.r);this.Ga.m(a.Ga);this.h.m(a.h);this.lb=a.lb;this.o=a.o;this.Ba=a.Ba};Qd.prototype.ca=function(){var a=new Qd;a.r.m(this.r);a.Ga.m(this.Ga);a.h.m(this.h);a.lb=this.lb;a.o=this.o;a.Ba=this.Ba;return a};
Qd.prototype.ub=function(a,c){c===m&&(c=0);a.position.x=(1-c)*this.Ga.x+c*this.h.x;a.position.y=(1-c)*this.Ga.y+c*this.h.y;a.d.i((1-c)*this.lb+c*this.o);var b=a.d;a.position.x-=b.a.x*this.r.x+b.b.x*this.r.y;a.position.y-=b.a.y*this.r.x+b.b.y*this.r.y};Qd.prototype.Ic=function(a){a===m&&(a=0);if(this.Ba<a&&1-this.Ba>Number.MIN_VALUE){var c=(a-this.Ba)/(1-this.Ba);this.Ga.x=(1-c)*this.Ga.x+c*this.h.x;this.Ga.y=(1-c)*this.Ga.y+c*this.h.y;this.lb=(1-c)*this.lb+c*this.o;this.Ba=a}};function Rd(){C(B("Box2D.Dynamics.b2BodyDef"));this.position=F(0,0);this.rj=F(0,0);this.Ki=this.qj=this.Li=this.Za=0;this.Mi=this.Ji=n;this.Qi=this.Rc=q;this.type=0;this.Ii=n;this.jj=1};function S(a,c){C(B("Box2D.Dynamics.Contacts.b2Contact"));this.kb="Contact"+Sd++;this.ib=new pd;this.Yd=new pd;this.Dd=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Ud||d.D!=2||d.Ud;this.Tf=a.pc()||c.pc();this.Be=q;this.Q=a;this.V=c;this.enabled=n;this.nf=b.xa;this.of=d.xa;this.Zf=d.bb.xa;Td(this)}
S.prototype.da=function(a,c){this.ib.da();this.Yd.da();this.Dd=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Ud||d.D!=2||d.Ud;this.Tf=a.pc()||c.pc();this.Be=q;this.Q=a;this.V=c;this.enabled=n;this.nf=b.xa;this.of=d.xa;this.Zf=d.bb.xa;Td(this)};function Td(a){a.nf.Fd(a);a.of.Fd(a);a.Zf.Fd(a);Ud(a)}function Ud(a){var c=q,b=q;!a.pc()&&a.enabled&&(a.Dd&&(c=n),a.pg&&(b=n));Vd(a.nf,a,c,b);Vd(a.of,a,c,b);Vd(a.Zf,a,c,b)}function Wd(a,c){var b=a.V.H(),d=a.Q.X,e=a.V.X;c.U(a.ib,a.Q.H().ub(),d.T,b.ub(),e.T)}
S.prototype.pc=t("Tf");function Xd(a,c){var b=a.Q.H();return b!=c?b:a.V.H()}
function Yd(a,c){var b=a.Yd;a.Yd=a.ib;a.ib=b;a.enabled=n;var d=q,b=a.Dd,e=a.Q.H(),f=a.V.H(),g=a.Q.Lb.Ld(a.V.Lb);if(a.Tf){if(g){var d=a.Q.X,e=e.ub(),g=a.V.X,h=f.ub(),f=new Tc;f.kc=new Lc;f.kc.i(d);f.lc=new Lc;f.lc.i(g);f.$e=e;f.af=h;f.bh=n;e=new Sc;e.Nd=0;d=new Mc;Rc(d,e,f);G(d.ic);G(d.jc);d=d.sd<10*Number.MIN_VALUE}a.ib.ra=0}else{a.pg=e.D!=2||e.Ud||f.D!=2||f.Ud?n:q;if(g){a.Rb();d=a.ib.ra>0;for(g=0;g<a.ib.ra;g++){h=a.ib.J[g];h.ad=0;for(var i=h.cd=0;i<a.Yd.ra;i++){var j=a.Yd.J[i];if(j.xc.Sa==h.xc.Sa){h.ad=
j.ad;h.cd=j.cd;break}}}}else a.ib.ra=0;d!=b&&(Zd(e,n),Zd(f,n))}a.Dd=d;d!=b&&Ud(a);!b&&d&&c.ie(a);b&&!d&&c.Gd(a);a.Tf||c.se(a,a.Yd)}S.prototype.Rb=aa();var $d=new function(){C(B("Box2D.Collision.b2TOIInput"));this.kc=new Lc;this.lc=new Lc;this.pi=new Qd;this.qi=new Qd},Sd=0;function ae(a,c){S.call(this,a,c)}y(ae,S);ae.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};ae.prototype.Rb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;var f=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-(b.position.x+(b.d.a.x*c.aa.x+b.d.b.x*c.aa.y)),b=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-(b.position.y+(b.d.a.y*c.aa.x+b.d.b.y*c.aa.y)),e=c.T+d.T;if(!(f*f+b*b>e*e))a.D=1,a.M.m(c.aa),a.Ia.I(),a.ra=1,a.J[0].M.m(d.aa),jd(a.J[0].xc,0)};function be(a,c){S.call(this,a,c)}y(be,S);be.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};be.prototype.Rb=aa();function ce(a){C(B("Box2D.Collision.Shapes.b2CircleShape"));Uc.call(this);this.T=a;this.ei=a*a;this.aa=F(0,0);this.n=[this.aa]}y(ce,Uc);u=ce.prototype;u.me=ca("b2CircleShape");u.ca=function(){var a=new ce(this.T);a.i(this);return a};u.i=function(a){Uc.prototype.i.call(this,a);a instanceof ce&&this.aa.m(a.aa)};u.gf=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.aa.x+b.b.x*this.aa.y),b=c.position.y+(b.a.y*this.aa.x+b.b.y*this.aa.y);a.lowerBound.i(d-this.T,b-this.T);a.upperBound.i(d+this.T,b+this.T)};
u.eh=function(a,c){var b=c*Math.PI*this.ei;a.m(b,this.aa,b*(0.5*this.ei+(this.aa.x*this.aa.x+this.aa.y*this.aa.y)))};u.kh=function(a){var c=this.T,b=this.n;a.C=1;a.T=c;a.n=b};function de(a,c){L(a.X instanceof O);L(c.X instanceof ce);S.call(this,a,c)}y(de,S);de.prototype.da=function(a,c){L(a.X instanceof O);L(c.X instanceof ce);S.prototype.da.call(this,a,c)};
de.prototype.Rb=function(){a:{var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;for(var f=e.position.x+(e.d.a.x*d.aa.x+e.d.b.x*d.aa.y)-b.position.x,g=e.position.y+(e.d.a.y*d.aa.x+e.d.b.y*d.aa.y)-b.position.y,e=f*b.d.a.x+g*b.d.a.y,b=f*b.d.b.x+g*b.d.b.y,f=0,g=-Number.MAX_VALUE,h=c.T+d.T,i=0;i<c.ba;++i){var j=c.W[i].x*(e-c.n[i].x)+c.W[i].y*(b-c.n[i].y);if(j>h)break a;j>g&&(g=j,f=i)}j=f+1;j>=c.ba&&(j=0);var i=c.n[f],k=c.n[j];if(g<Number.MIN_VALUE)a.ra=1,a.D=2,a.Ia.m(c.W[f]),a.M.x=
0.5*(i.x+k.x),a.M.y=0.5*(i.y+k.y);else if((e-i.x)*(k.x-i.x)+(b-i.y)*(k.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.ra=1;a.D=2;a.Ia.x=e-i.x;a.Ia.y=b-i.y;Tb(a.Ia);a.M.m(i)}else if((e-k.x)*(i.x-k.x)+(b-k.y)*(i.y-k.y)<=0){if((e-k.x)*(e-k.x)+(b-k.y)*(b-k.y)>h*h)break a;a.ra=1;a.D=2;a.Ia.x=e-k.x;a.Ia.y=b-k.y;Tb(a.Ia);a.M.m(k)}else{j=0.5*(i.x+k.x);i=0.5*(i.y+k.y);g=(e-j)*c.W[f].x+(b-i)*c.W[f].y;if(g>h)break a;a.ra=1;a.D=2;a.Ia.x=c.W[f].x;a.Ia.y=c.W[f].y;Tb(a.Ia);a.M.i(j,i)}a.J[0].M.m(d.aa);
jd(a.J[0].xc,0)}};function ee(a,c){L(a.X instanceof O);L(q);S.call(this,a,c)}y(ee,S);ee.prototype.da=function(a,c){L(a.X instanceof O);L(q);S.prototype.da.call(this,a,c)};ee.prototype.Rb=aa();function fe(a,c){S.call(this,a,c)}y(fe,S);fe.prototype.da=function(a,c){S.prototype.da.call(this,a,c)};
fe.prototype.Rb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.ra=0;var f=c.T+d.T,g=sd(c,b,d,e);if(!(g.Uf>f)){var h=sd(d,e,c,b);if(!(h.Uf>f)){var i=c,j=d,k=b,l=e,r=0,o=g.vh;a.D=2;if(h.Uf>0.98*g.Uf+0.001)i=d,j=c,k=e,l=b,o=h.vh,a.D=4,r=1;for(var c=o,b=l,d=k.d.a.x*i.W[c].x+k.d.b.x*i.W[c].y,e=k.d.a.y*i.W[c].x+k.d.b.y*i.W[c].y,g=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=g,g=0,h=Number.MAX_VALUE,v=0;v<j.ba;v++){var s=d*j.W[v].x+e*j.W[v].y;s<h&&(h=s,g=v)}d=g+1;d>=j.ba&&
(d=0);td[0].sb.x=b.position.x+(b.d.a.x*j.n[g].x+b.d.b.x*j.n[g].y);td[0].sb.y=b.position.y+(b.d.a.y*j.n[g].x+b.d.b.y*j.n[g].y);kd(td[0].id,c);ld(td[0].id,g);md(td[0].id,0);td[1].sb.x=b.position.x+(b.d.a.x*j.n[d].x+b.d.b.x*j.n[d].y);td[1].sb.y=b.position.y+(b.d.a.y*j.n[d].x+b.d.b.y*j.n[d].y);kd(td[1].id,c);ld(td[1].id,d);md(td[1].id,1);c=i.n[o];i=o+1<i.ba?i.n[o+1]:i.n[0];wd.i(i.x-c.x,i.y-c.y);Tb(wd);xd.x=wd.y;xd.y=-wd.x;yd.i(0.5*(c.x+i.x),0.5*(c.y+i.y));Ad.x=k.d.a.x*wd.x+k.d.b.x*wd.y;Ad.y=k.d.a.y*wd.x+
k.d.b.y*wd.y;Bd.x=-Ad.x;Bd.y=-Ad.y;zd.x=Ad.y;zd.y=-Ad.x;Cd.x=k.position.x+(k.d.a.x*c.x+k.d.b.x*c.y);Cd.y=k.position.y+(k.d.a.y*c.x+k.d.b.y*c.y);Dd.x=k.position.x+(k.d.a.x*i.x+k.d.b.x*i.y);Dd.y=k.position.y+(k.d.a.y*i.x+k.d.b.y*i.y);if(!(qd(ud,td,Bd,-Ad.x*Cd.x-Ad.y*Cd.y+f)<2)&&!(qd(vd,ud,Ad,Ad.x*Dd.x+Ad.y*Dd.y+f)<2)){a.Ia.m(xd);a.M.m(yd);k=zd.x*Cd.x+zd.y*Cd.y;for(o=i=0;o<2;++o)if(zd.x*vd[o].sb.x+zd.y*vd[o].sb.y-k<=f)c=vd[o].sb.x-l.position.x,j=vd[o].sb.y-l.position.y,a.J[i].M.x=c*l.d.a.x+j*l.d.a.y,
a.J[i].M.y=c*l.d.b.x+j*l.d.b.y,a.J[i].xc.i(vd[o].id),c=a.J[i].xc,c.qh=r,c.Sa=c.Sa&16777215|c.qh<<24&4278190080,i++;a.ra=i}}}};function ge(){this.Nb={};this.wc={};he(this,ae,"b2CircleShape","b2CircleShape");he(this,de,"b2PolygonShape","b2CircleShape");he(this,fe,"b2PolygonShape","b2PolygonShape");he(this,be,"b2EdgeShape","b2CircleShape");he(this,ee,"b2PolygonShape","b2EdgeShape")}function he(a,c,b,d){a.wc[b]=a.wc[b]||{};a.wc[b][d]=a.wc[b][d]||[];a.Nb[b]=a.Nb[b]||{};a.Nb[b][d]=new hd;a.Nb[b][d].Dh=c;a.Nb[b][d].mi=n;if(b!=d)a.Nb[d]=a.Nb[d]||{},a.Nb[d][b]=new hd,a.Nb[d][b].Dh=c,a.Nb[d][b].mi=q}
ge.prototype.Jc=function(a,c){Ob(B("Box2D.Dynamics.Contacts.b2Contact"));var b=a.X.me(),d=c.X.me(),e=this.Nb[b][d],f=e.Dh;return f!=p?e.mi?this.wc[b][d].length>0?(b=this.wc[b][d].pop(),b.da(a,c),b):new f(a,c):this.wc[d][b].length>0?(b=this.wc[d][b].pop(),b.da(c,a),b):new f(c,a):p};ge.prototype.eb=function(a){Pb(B("Box2D.Dynamics.Contacts.b2Contact"));this.wc[a.Q.X.me()][a.V.X.me()].push(a)};function ie(){C(B("Box2D.Dynamics.b2DebugDraw"))}ie.prototype.ie=aa();ie.prototype.Gd=aa();ie.prototype.se=aa();ie.prototype.qe=aa();var je=new ie;function ke(a){C(B("Box2D.Collision.b2DynamicTreeNode"));this.K=fc();this.parent=this.Yb=this.Ta=p;this.Ma=a}var le=[];function me(a){typeof a=="undefined"&&(a=p);if(le.length>0){var c=le.pop();c.Ma=a;c.K.I();return c}return new ke(a)}ke.prototype.eb=function(){this.Ma=this.parent=this.Yb=this.Ta=p;le.push(this)};function ne(){C(B("Box2D.Collision.b2DynamicTree"));this.hc=p;this.Dj=this.mk=0}u=ne.prototype;u.je=function(a,c){var b=me(c);b.K.lowerBound.x=a.lowerBound.x-0.1;b.K.lowerBound.y=a.lowerBound.y-0.1;b.K.upperBound.x=a.upperBound.x+0.1;b.K.upperBound.y=a.upperBound.y+0.1;oe(this,b);return b};u.ke=function(a){pe(this,a);a.eb()};
u.eg=function(a,c,b){L(a.Ta===p);if(hc(a.K,c))return q;pe(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.K.lowerBound.x=c.lowerBound.x-d;a.K.lowerBound.y=c.lowerBound.y-b;a.K.upperBound.x=c.upperBound.x+d;a.K.upperBound.y=c.upperBound.y+b;oe(this,a);return n};u.Hd=function(a){return a.K};u.fg=function(a,c,b){if(this.hc!==p){var d=[];for(d.push(this.hc);d.length>0;){var e=d.pop();if(e.K.Ld(c))if(e.Ta===p){if(!a.call(b,e.Ma))break}else d.push(e.Ta),d.push(e.Yb)}}};
function oe(a,c){a.Dj++;if(a.hc===p)a.hc=c,a.hc.parent=p;else{var b;b=gc(c.K);for(var d=a.hc;d.Ta!==p;)var e=d.Ta,d=d.Yb,d=Math.abs((e.K.lowerBound.x+e.K.upperBound.x)/2-b.x)+Math.abs((e.K.lowerBound.y+e.K.upperBound.y)/2-b.y)<Math.abs((d.K.lowerBound.x+d.K.upperBound.x)/2-b.x)+Math.abs((d.K.lowerBound.y+d.K.upperBound.y)/2-b.y)?e:d;G(b);b=d;e=b.parent;d=me();d.parent=e;ic(d.K,c.K,b.K);if(e){b.parent.Ta==b?e.Ta=d:e.Yb=d;d.Ta=b;d.Yb=c;b.parent=d;for(c.parent=d;e;){if(hc(e.K,d.K))break;ic(e.K,e.Ta.K,
e.Yb.K);d=e;e=e.parent}}else d.Ta=b,d.Yb=c,b.parent=d,c.parent=d,a.hc=d}}function pe(a,c){if(c==a.hc)a.hc=p;else{var b=c.parent,d=b.parent,e;e=b.Ta==c?b.Yb:b.Ta;if(d){d.Ta==b?d.Ta=e:d.Yb=e;for(e.parent=d;d;){e=d.K;ic(d.K,d.Ta.K,d.Yb.K);if(hc(e,d.K))break;d=d.parent}}else a.hc=e,e.parent=p;b.eb()}};function qe(){C(B("Box2D.Collision.b2DynamicTreeBroadPhase"));this.Dc=new ne;this.Pe=[];this.ed=this.ah=this.Ee=this.De=p}u=qe.prototype;u.je=function(a,c){var b=this.Dc.je(a,c);this.Pe.push(b);return b};u.ke=function(a){Oa(this.Pe,a);this.Dc.ke(a)};u.eg=function(a,c,b){this.Dc.eg(a,c,b)&&this.Pe.push(a)};u.Ld=function(a,c){return this.Dc.Hd(a).Ld(this.Dc.Hd(c))};u.Hd=function(a){return this.Dc.Hd(a)};
function re(a,c){a.De=p;a.Ee=p;for(a.ah=c;a.Pe.length>0;)a.ed=a.Pe.pop(),a.Dc.fg(a.Hi,a.Dc.Hd(a.ed),a);a.De=p;a.Ee=p;a.ah=p;a.ed=p}u.Hi=function(a){if(a!=this.ed.Ma&&!(this.ed.Ma==this.De&&a==this.Ee)&&!(this.ed.Ma==this.Ee&&a==this.De))this.ah(this.ed.Ma,a),this.De=this.ed.Ma,this.Ee=a;return n};u.fg=function(a,c){this.Dc.fg(a,c)};function se(a){C(B("Box2D.Dynamics.b2ContactManager"));this.bb=a;this.Dg=dd;this.xd=je;this.Xh=new ge;this.wd=new qe}function te(a){re(a.wd,function(c,b){a:{var d=c.H(),e=b.H();if(d!=e&&e.Wb(d)&&a.Dg.Wb(c,b)){for(d=e.xa.O(T);d;d=d.next)if(e=d.wa.Q,e==c){if(e=d.wa.V,e==b)break a}else if(e==b&&(e=d.wa.V,e==c))break a;a.Xh.Jc(c,b)}}})}se.prototype.eb=function(a){var c=a.Q.H(),b=a.V.H();a.Dd&&this.xd.Gd(a);a.ib.ra>0&&(Zd(c,n),Zd(b,n));ue(a.nf,a);ue(a.of,a);ue(a.Zf,a);this.Xh.eb(a)};
new function(){C(B("Box2D.Collision.b2ContactPoint"));this.position=F(0,0);this.tk=F(0,0);this.cb=F(0,0);this.id=new id};function ve(a){this.wa=a;this.Fc=this.next=p}var we=[];ve.prototype.Mc=ba("next");ve.prototype.Nc=ba("Fc");function xe(){this.rf=[];for(var a=0;a<=T;a++)this.rf[a]=p;this.sf=[];for(a=0;a<=T;a++)this.sf[a]=p;this.pd={};this.og=0}u=xe.prototype;u.O=function(a){return this.rf[a]};u.Fd=function(a){var c=a.kb;if(this.pd[c]==p){this.pd[c]=[];for(var b=0;b<=T;b++)this.pd[c][b]=p;this.Qb(a,c,T);this.og++}};function Vd(a,c,b,d){b?a.Qb(c,c.kb,ye):a.Vb(c.kb,ye);d?a.Qb(c,c.kb,ze):a.Vb(c.kb,ze)}function ue(a,c){var b=c.kb;if(a.pd[b]!=p){for(var d=0;d<=T;d++)a.Vb(b,d);delete a.pd[b];a.og--}}
u.Vb=function(a,c){var b=this.pd[a];if(b!=p){var d=b[c];if(d!=p){b[c]=p;var b=d.Fc,e=d.next;b==p?this.rf[c]=e:b.Mc(e);e==p?this.sf[c]=b:e.Nc(b);we.push(d)}}};u.Qb=function(a,c,b){c=this.pd[c];if(c[b]==p){if(we.length>0){var d=we.pop();d.next=p;d.Fc=p;d.wa=a;a=d}else a=new ve(a);c[b]=a;a=this.sf[b];a!=p?(a.Mc(c[b]),c[b].Nc(a)):this.rf[b]=c[b];this.sf[b]=c[b]}};u.dg=t("og");var ye=0,ze=1,T=2;function Ae(){this.Ae=[]}Ae.prototype.Ce=0;Ae.prototype.Xe=0;Ae.prototype.Lh=function(){return this.Xe-this.Ce};function Be(a){C(B("Box2D.Dynamics.b2BodyListNode"));this.body=a;this.Fc=this.next=p}Be.prototype.Mc=ba("next");Be.prototype.Nc=ba("Fc");Be.prototype.H=t("body");function Ce(){C(B("Box2D.Dynamics.b2BodyList"));this.pf=[];for(var a=0;a<=De;a++)this.pf[a]=p;this.qf=[];for(a=0;a<=De;a++)this.qf[a]=p;this.Md={};this.lg=0}u=Ce.prototype;u.O=function(a){return this.pf[a]};u.df=function(a){var c=a.kb;this.Md[c]==p&&(this.Qb(a,c,De),Ee(this,a),a.Hf.push(this),this.lg++)};
function Ee(a,c){var b=c.D,d=c.kb,e=c.Mb,f=c.kd();b==2?a.Qb(c,d,Fe):a.Vb(d,Fe);b!=0?a.Qb(c,d,Ge):a.Vb(d,Ge);b!=0&&f&&e?a.Qb(c,d,He):a.Vb(d,He);e?a.Qb(c,d,Ie):a.Vb(d,Ie);f?a.Qb(c,d,Je):a.Vb(d,Je)}function Ke(a,c){var b=c.kb;if(a.Md[b]!=p){Oa(c.Hf,a);for(var d=0;d<=De;d++)a.Vb(b,d);delete a.Md[b];a.lg--}}u.Vb=function(a,c){var b=this.Md[a];if(b!=p){var d=b[c];if(d!=p)b[c]=p,b=d.Fc,d=d.next,b==p?this.pf[c]=d:b.Mc(d),d==p?this.qf[c]=b:d.Nc(b)}};
u.Qb=function(a,c,b){var d=this.Md[c];if(d==p){for(var d=[],e=0;e<=De;e++)d[e]=p;this.Md[c]=d}d[b]==p&&(d[b]=new Be(a),a=this.qf[b],a!=p?a.Mc(d[b]):this.pf[b]=d[b],d[b].Nc(a),this.qf[b]=d[b])};u.cg=t("lg");var Fe=0,Ge=1,Je=2,He=3,Ie=4,De=5;function Le(a,c,b){C(B("Box2D.Common.b2Color"));this.sh=255*K(a,0,1);this.rh=255*K(c,0,1);this.ph=255*K(b,0,1)}Le.prototype.i=function(a,c,b){this.sh=255*K(a,0,1);this.rh=255*K(c,0,1);this.ph=255*K(b,0,1)};function ac(a){return a.sh<<16|a.rh<<8|a.ph};function Me(){C(B("Box2D.Collision.b2WorldManifold"));this.N=F(0,0);this.J=[];for(var a=this.ra=0;a<2;a++)this.J[a]=F(0,0)}
Me.prototype.U=function(a,c,b,d,e){if(a.ra!=0){var f=0,g,h,i=0,j=0,k=0,l=0,r=0;g=0;switch(a.D){case 1:h=c.d;g=a.M;f=c.position.x+h.a.x*g.x+h.b.x*g.y;c=c.position.y+h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.J[0].M;a=d.position.x+h.a.x*g.x+h.b.x*g.y;d=d.position.y+h.a.y*g.x+h.b.y*g.y;g=a-f;h=d-c;i=g*g+h*h;i>Kc?(i=Math.sqrt(i),this.N.x=g/i,this.N.y=h/i):(this.N.x=1,this.N.y=0);g=c+b*this.N.y;d-=e*this.N.y;this.J[0].x=0.5*(f+b*this.N.x+(a-e*this.N.x));this.J[0].y=0.5*(g+d);break;case 2:h=c.d;g=a.Ia;i=h.a.x*g.x+h.b.x*
g.y;j=h.a.y*g.x+h.b.y*g.y;h=c.d;g=a.M;k=c.position.x+h.a.x*g.x+h.b.x*g.y;l=c.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=i;this.N.y=j;for(f=0;f<a.ra;f++)h=d.d,g=a.J[f].M,r=d.position.x+h.a.x*g.x+h.b.x*g.y,g=d.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(b-(r-k)*i-(g-l)*j-e)*i,this.J[f].y=g+0.5*(b-(r-k)*i-(g-l)*j-e)*j;break;case 4:h=d.d;g=a.Ia;i=h.a.x*g.x+h.b.x*g.y;j=h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.M;k=d.position.x+h.a.x*g.x+h.b.x*g.y;l=d.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=-i;this.N.y=-j;for(f=
0;f<a.ra;f++)h=c.d,g=a.J[f].M,r=c.position.x+h.a.x*g.x+h.b.x*g.y,g=c.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(e-(r-k)*i-(g-l)*j-b)*i,this.J[f].y=g+0.5*(e-(r-k)*i-(g-l)*j-b)*j}}};function Ne(a,c,b,d,e){C(B("Box2D.Dynamics.b2TimeStep"));this.da(a,c,b,d,e)}Ne.prototype.da=function(a,c,b,d,e){this.ja=a;var f=0;a>0&&(f=1/a);this.tc=f;this.ab=c;this.Tg=b;this.dh=d;this.Ed=e};function Oe(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraintPoint"));this.ua=F(0,0);this.la=F(0,0);this.ma=F(0,0);this.Ob=this.sa=0}Oe.prototype.da=function(){this.ua.i(0,0);this.la.i(0,0);this.ma.i(0,0);this.Ob=this.sa=0};function Pe(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraint"));this.$b=F(0,0);this.ua=F(0,0);this.cb=F(0,0);this.Ec=new uc;this.fb=new uc;this.va=[];for(var a=0;a<2;a++)this.va[a]=new Oe};function Qe(){this.N=F(0,0);this.Mf=[];this.J=[];for(var a=0;a<2;a++)this.J[a]=F(0,0)}
Qe.prototype.U=function(a){L(a.pb>0);switch(a.type){case 1:var c=a.s.e.d,b=a.ua,d=a.s.e.position.x+(c.a.x*b.x+c.b.x*b.y),e=a.s.e.position.y+(c.a.y*b.x+c.b.y*b.y),c=a.u.e.d,b=a.va[0].ua,f=a.u.e.position.x+(c.a.x*b.x+c.b.x*b.y),c=a.u.e.position.y+(c.a.y*b.x+c.b.y*b.y),b=f-d,g=c-e,h=b*b+g*g;h>Kc?(h=Math.sqrt(h),this.N.x=b/h,this.N.y=g/h):(this.N.x=1,this.N.y=0);this.J[0].x=0.5*(d+f);this.J[0].y=0.5*(e+c);this.Mf[0]=b*this.N.x+g*this.N.y-a.Wg;break;case 2:this.N.x=a.s.e.d.a.x*a.$b.x+a.s.e.d.b.x*a.$b.y;
this.N.y=a.s.e.d.a.y*a.$b.x+a.s.e.d.b.y*a.$b.y;d=a.s.e.position.x+(a.s.e.d.a.x*a.ua.x+a.s.e.d.b.x*a.ua.y);e=a.s.e.position.y+(a.s.e.d.a.y*a.ua.x+a.s.e.d.b.y*a.ua.y);for(f=0;f<a.pb;f++)c=a.u.e.position.x+(a.u.e.d.a.x*a.va[f].ua.x+a.u.e.d.b.x*a.va[f].ua.y),b=a.u.e.position.y+(a.u.e.d.a.y*a.va[f].ua.x+a.u.e.d.b.y*a.va[f].ua.y),this.Mf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Wg,this.J[f].x=c,this.J[f].y=b;break;case 4:this.N.x=a.u.e.d.a.x*a.$b.x+a.u.e.d.b.x*a.$b.y;this.N.y=a.u.e.d.a.y*a.$b.x+a.u.e.d.b.y*a.$b.y;
d=a.u.e.position.x+(a.u.e.d.a.x*a.ua.x+a.u.e.d.b.x*a.ua.y);e=a.u.e.position.y+(a.u.e.d.a.y*a.ua.x+a.u.e.d.b.y*a.ua.y);for(f=0;f<a.pb;f++)c=a.s.e.position.x+(a.s.e.d.a.x*a.va[f].ua.x+a.s.e.d.b.x*a.va[f].ua.y),b=a.s.e.position.y+(a.s.e.d.a.y*a.va[f].ua.x+a.s.e.d.b.y*a.va[f].ua.y),this.Mf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Wg,this.J[f].i(c,b);this.N.x*=-1;this.N.y*=-1}};function Re(){this.bc=[]}u=Re.prototype;
u.U=function(a,c,b){for(this.Ie=b;this.bc.length<this.Ie;)this.bc[this.bc.length]=new Pe;for(a=0;a<b;a++){var d=c[a],e=d.Q,f=d.V,g=e.X.T,h=f.X.T,i=e.H(),j=f.H(),k=d.ib,l=Math.sqrt(e.$h*f.$h),r=e.Lf>f.Lf?e.Lf:f.Lf,o=i.f.x,v=i.f.y,s=j.f.x,x=j.f.y,A=i.p,wa=j.p;L(k.ra>0);Se.U(k,i.e,g,j.e,h);f=Se.N.x;d=Se.N.y;e=this.bc[a];e.s=i;e.u=j;e.Kj=k;e.cb.x=f;e.cb.y=d;e.pb=k.ra;e.xb=l;e.Gc=r;e.$b.x=k.Ia.x;e.$b.y=k.Ia.y;e.ua.x=k.M.x;e.ua.y=k.M.y;e.Wg=g+h;e.type=k.D;for(g=0;g<e.pb;++g){l=k.J[g];h=e.va[g];h.sa=l.ad;
h.Ob=l.cd;h.ua.m(l.M);var l=h.la.x=Se.J[g].x-i.c.h.x,r=h.la.y=Se.J[g].y-i.c.h.y,la=h.ma.x=Se.J[g].x-j.c.h.x,xa=h.ma.y=Se.J[g].y-j.c.h.y,U=l*d-r*f,M=la*d-xa*f;U*=U;M*=M;h.Ec=1/(i.k+j.k+i.v*U+j.v*M);var ea=i.t*i.k+j.t*j.k;ea+=i.t*i.v*U+j.t*j.v*M;h.dj=1/ea;M=d;ea=-f;U=l*ea-r*M;M=la*ea-xa*M;U*=U;M*=M;h.Wj=1/(i.k+j.k+i.v*U+j.v*M);h.Xf=0;l=e.cb.x*(s+-wa*xa-o- -A*r)+e.cb.y*(x+wa*la-v-A*l);l<-1&&(h.Xf+=-e.Gc*l)}if(e.pb==2)x=e.va[0],s=e.va[1],k=i.k,i=i.v,o=j.k,j=j.v,v=x.la.x*d-x.la.y*f,x=x.ma.x*d-x.ma.y*f,
A=s.la.x*d-s.la.y*f,s=s.ma.x*d-s.ma.y*f,f=k+o+i*v*v+j*x*x,d=k+o+i*A*A+j*s*s,j=k+o+i*v*A+j*x*s,f*f<100*(f*d-j*j)?(e.fb.a.i(f,j),e.fb.b.i(j,d),f=e.fb,e=e.Ec,d=f.a.x*f.b.y-f.b.x*f.a.y,d!==0&&(d=1/d),e.a.x=d*f.b.y,e.b.x=-d*f.b.x,e.a.y=-d*f.a.y,e.b.y=d*f.a.x):e.pb=1}};
u.Tb=function(a){for(var c=0;c<this.Ie;++c){var b=this.bc[c],d=b.s,e=b.u,f=d.k,g=d.v,h=e.k,i=e.v,j=b.cb.x,k=b.cb.y,l=k,r=-j,o=0,v=0;if(a.Ed){v=b.pb;for(o=0;o<v;++o){var s=b.va[o];s.sa*=a.ab;s.Ob*=a.ab;var x=s.sa*j+s.Ob*l,A=s.sa*k+s.Ob*r;d.p-=g*(s.la.x*A-s.la.y*x);d.f.x-=f*x;d.f.y-=f*A;e.p+=i*(s.ma.x*A-s.ma.y*x);e.f.x+=h*x;e.f.y+=h*A}}else{v=b.pb;for(o=0;o<v;++o)d=b.va[o],d.sa=0,d.Ob=0}}};
u.Fb=function(){for(var a=0;a<this.Ie;a++){for(var c=this.bc[a],b=c.cb.x,d=c.cb.y,e=0;e<c.pb;e++){var f=c,g=c.va[e],h=f.cb.y,i=-f.cb.x,j=f.xb*g.sa,j=K(g.Ob-g.Wj*((f.u.f.x-f.u.p*g.ma.y-f.s.f.x+f.s.p*g.la.y)*h+(f.u.f.y+f.u.p*g.ma.x-f.s.f.y-f.s.p*g.la.x)*i),-j,j),k=j-g.Ob;h*=k;i*=k;f.s.f.x-=f.s.k*h;f.s.f.y-=f.s.k*i;f.s.p-=f.s.v*(g.la.x*i-g.la.y*h);f.u.f.x+=f.u.k*h;f.u.f.y+=f.u.k*i;f.u.p+=f.u.v*(g.ma.x*i-g.ma.y*h);g.Ob=j}if(c.pb==1)e=c.va[0],f=e.sa-e.Ec*((c.u.f.x-c.u.p*e.ma.y-c.s.f.x+c.s.p*e.la.y)*b+
(c.u.f.y+c.u.p*e.ma.x-c.s.f.y-c.s.p*e.la.x)*d-e.Xf),f=f>0?f:0,g=f-e.sa,b*=g,d*=g,c.s.f.x-=c.s.k*b,c.s.f.y-=c.s.k*d,c.s.p-=c.s.v*(e.la.x*d-e.la.y*b),c.u.f.x+=c.u.k*b,c.u.f.y+=c.u.k*d,c.u.p+=c.u.v*(e.ma.x*d-e.ma.y*b),e.sa=f;else{e=c.va[0];f=c.va[1];g=e.sa;i=f.sa;j=(c.u.f.x-c.u.p*e.ma.y-c.s.f.x+c.s.p*e.la.y)*b+(c.u.f.y+c.u.p*e.ma.x-c.s.f.y-c.s.p*e.la.x)*d-e.Xf;d=(c.u.f.x-c.u.p*f.ma.y-c.s.f.x+c.s.p*f.la.y)*b+(c.u.f.y+c.u.p*f.ma.x-c.s.f.y-c.s.p*f.la.x)*d-f.Xf;j-=c.fb.a.x*g+c.fb.b.x*i;for(d-=c.fb.a.y*g+
c.fb.b.y*i;;){b=-(c.Ec.a.x*j+c.Ec.b.x*d);if(b>=0&&(h=-(c.Ec.a.y*j+c.Ec.b.y*d),h>=0)){Te(c,e,f,b-g,h-i);e.sa=b;f.sa=h;break}b=-e.Ec*j;if(b>=0&&c.fb.a.y*b+d>=0){Te(c,e,f,b-g,-i);e.sa=b;f.sa=0;break}b=-f.Ec*d;if(b>=0&&c.fb.b.x*b+j>=0){Te(c,e,f,-g,b-i);e.sa=0;f.sa=b;break}if(j>=0&&d>=0){Te(c,e,f,-g,-i);e.sa=0;f.sa=0;break}break}}}};
function Te(a,c,b,d,e){var f=d*a.cb.x;d*=a.cb.y;var g=e*a.cb.x;e*=a.cb.y;a.s.f.x-=a.s.k*(f+g);a.s.f.y-=a.s.k*(d+e);a.s.p-=a.s.v*(c.la.x*d-c.la.y*f+b.la.x*e-b.la.y*g);a.u.f.x+=a.u.k*(f+g);a.u.f.y+=a.u.k*(d+e);a.u.p+=a.u.v*(c.ma.x*d-c.ma.y*f+b.ma.x*e-b.ma.y*g);c.sa=0;b.sa=0}u.bg=function(){for(var a=0;a<this.Ie;++a)for(var c=this.bc[a],b=c.Kj,d=0;d<c.pb;++d){var e=b.J[d],f=c.va[d];e.ad=f.sa;e.cd=f.Ob}};
u.Eb=function(a){a===m&&(a=0);for(var c=0,b=0;b<this.Ie;b++){var d=this.bc[b],e=d.s,f=d.u,g=e.t*e.k,h=e.t*e.v,i=f.t*f.k,j=f.t*f.v;Ue.U(d);for(var k=Ue.N,l=0;l<d.pb;l++){var r=d.va[l],o=Ue.J[l],v=Ue.Mf[l],s=o.x-e.c.h.x,x=o.y-e.c.h.y,A=o.x-f.c.h.x,o=o.y-f.c.h.y,c=c<v?c:v,v=-r.dj*K(a*(v+0.005),-0.2,0),r=v*k.x;v*=k.y;e.c.h.x-=g*r;e.c.h.y-=g*v;e.c.o-=h*(s*v-x*r);R(e);f.c.h.x+=i*r;f.c.h.y+=i*v;f.c.o+=j*(A*v-o*r);R(f)}}return c>-0.0075};var Se=new Me,Ue=new Qe;function Ve(){C(B("Box2D.Dynamics.b2ContactImpulse"));this.ji=[];this.ri=[]}Ve.prototype.da=function(){this.ji=[];this.ri=[]};function We(a,c){C(B("Box2D.Dynamics.b2Island"));this.Kg=a;this.nb=c;this.ac=[];this.Ff=[];this.$c=[];this.cc=[];this.Ka=[];this.Af=new Ve}u=We.prototype;u.da=function(a,c){this.Kg=a;this.nb=c};u.ff=function(){this.ac=[];this.Ff=[];this.$c=[];this.cc=[];this.Ka=[]};
u.te=function(a,c,b){for(var d=0;d<this.Ff.length;d++){var e=this.Ff[d];e.f.x+=a.ja*(c.x+e.k*e.Ke.x);e.f.y+=a.ja*(c.y+e.k*e.Ke.y);e.p+=a.ja*e.v*e.Og;e.f.qc(K(1-a.ja*e.Gj,0,1));e.p*=K(1-a.ja*e.uj,0,1)}this.nb.U(a,this.cc,this.cc.length);this.nb.Tb(a);for(c=0;c<this.Ka.length;c++)this.Ka[c].Tb(a);for(c=0;c<a.dh;c++){for(d=0;d<this.Ka.length;d++)this.Ka[d].Fb(a);this.nb.Fb()}for(c=0;c<this.Ka.length;c++)this.Ka[c].bg();this.nb.bg();for(c=0;c<this.$c.length;++c){var d=this.$c[c],e=a.ja*d.f.x,f=a.ja*d.f.y;
e*e+f*f>4&&(Tb(d.f),d.f.x*=2*a.tc,d.f.y*=2*a.tc);e=a.ja*d.p;if(e*e>Ic)d.p=d.p<0?-Hc*a.tc:Hc*a.tc;d.c.Ga.m(d.c.h);d.c.lb=d.c.o;d.c.h.x+=a.ja*d.f.x;d.c.h.y+=a.ja*d.f.y;d.c.o+=a.ja*d.p;R(d)}for(c=0;c<a.Tg;c++){d=this.nb.Eb(0.2);e=n;for(f=0;f<this.Ka.length;f++)var g=this.Ka[f].Eb(0.2),e=e&&g;if(d&&e)break}Xe(this,this.nb.bc);if(b){b=Number.MAX_VALUE;for(c=0;c<this.$c.length;c++)d=this.$c[c],!d.Cg||Math.abs(d.p)>Jc||zc(d.f,d.f)>1.0E-4?b=d.Nf=0:(d.Nf+=a.ja,b=Math.min(b,d.Nf));if(b>=0.5)for(a=0;a<this.ac.length;a++)Zd(this.ac[a],
q)}};
u.gg=function(a){var c=0,b=0;this.nb.U(a,this.cc,this.cc.length);for(var d=this.nb,c=0;c<this.Ka.length;++c)this.Ka[c].Tb(a);for(c=0;c<a.dh;++c){d.Fb();for(b=0;b<this.Ka.length;++b)this.Ka[b].Fb(a)}for(c=0;c<this.$c.length;++c){var b=this.$c[c],e=a.ja*b.f.x,f=a.ja*b.f.y;e*e+f*f>4&&(Tb(b.f),b.f.x*=2*a.tc,b.f.y*=2*a.tc);e=a.ja*b.p;if(e*e>Ic)b.p=b.p<0?-Hc*a.tc:Hc*a.tc;b.c.Ga.m(b.c.h);b.c.lb=b.c.o;b.c.h.x+=a.ja*b.f.x;b.c.h.y+=a.ja*b.f.y;b.c.o+=a.ja*b.p;R(b)}for(c=0;c<a.Tg;++c){e=d.Eb(0.75);f=n;for(b=0;b<
this.Ka.length;++b)var g=this.Ka[b].Eb(0.2),f=f&&g;if(e&&f)break}Xe(this,d.bc)};function Xe(a,c){if(a.Kg!=p)for(var b=0;b<a.cc.length;++b){var d=a.cc[b],e=c[b];a.Af.da();for(var f=0;f<e.pb;++f)a.Af.ji[f]=e.va[f].sa,a.Af.ri[f]=e.va[f].Ob;a.Kg.qe(d,a.Af)}}u.df=function(a){this.ac.push(a);a.D!=0&&(this.$c.push(a),a.D==2&&this.Ff.push(a))};u.Fd=function(a){this.cc.push(a)};function Ye(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.Aa=F(0,0);this.F.m(a.Ua);this.G.m(a.Va);this.bi=a.length;this.Gg=a.Kh;this.xj=a.Eh;this.Uh=this.zd=this.j=0}y(Ye,P);u=Ye.prototype;u.nc=function(){return Q(this.w,this.F)};u.oc=function(){return Q(this.z,this.G)};
u.Tb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.F.x-d.c.r.x,g=this.F.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.Aa.x=e.c.h.x+h-d.c.h.x-f;this.Aa.y=e.c.h.y+i-d.c.h.y-g;b=Math.sqrt(this.Aa.x*this.Aa.x+this.Aa.y*this.Aa.y);b>0.005?this.Aa.qc(1/b):this.Aa.I();c=f*this.Aa.y-g*this.Aa.x;var j=h*this.Aa.y-i*this.Aa.x;c=d.k+d.v*c*c+e.k+e.v*j*j;this.t=c!=0?1/c:0;if(this.Gg>0){b-=this.bi;var j=
2*Math.PI*this.Gg,k=this.t*j*j;this.zd=a.ja*(2*this.t*this.xj*j+a.ja*k);this.zd=this.zd!=0?1/this.zd:0;this.Uh=b*a.ja*k*this.zd;this.t=c+this.zd;this.t=this.t!=0?1/this.t:0}a.Ed?(this.j*=a.ab,a=this.j*this.Aa.x,c=this.j*this.Aa.y,d.f.x-=d.k*a,d.f.y-=d.k*c,d.p-=d.v*(f*c-g*a),e.f.x+=e.k*a,e.f.y+=e.k*c,e.p+=e.v*(h*c-i*a)):this.j=0};
u.Fb=function(){var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=-this.t*(this.Aa.x*(this.z.f.x-this.z.p*e-(this.w.f.x-this.w.p*c))+this.Aa.y*(this.z.f.y+this.z.p*d-(this.w.f.y+this.w.p*a))+this.Uh+this.zd*this.j);this.j+=f;b=f*this.Aa.x;f*=this.Aa.y;this.w.f.x-=this.w.k*b;this.w.f.y-=this.w.k*f;
this.w.p-=this.w.v*(a*f-c*b);this.z.f.x+=this.z.k*b;this.z.f.y+=this.z.k*f;this.z.p+=this.z.v*(d*f-e*b)};
u.Eb=function(){if(this.Gg>0)return n;var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=this.z.c.h.x+d-this.w.c.h.x-a,g=this.z.c.h.y+e-this.w.c.h.y-c,b=Math.sqrt(f*f+g*g);f/=b;g/=b;var b=K(b-this.bi,-0.2,0.2),h=-this.t*b;this.Aa.i(f,g);f=h*this.Aa.x;g=h*this.Aa.y;this.w.c.h.x-=this.w.k*f;this.w.c.h.y-=
this.w.k*g;this.w.c.o-=this.w.v*(a*g-c*f);this.z.c.h.x+=this.z.k*f;this.z.c.h.y+=this.z.k*g;this.z.c.o+=this.z.v*(d*g-e*f);R(this.w);R(this.z);return Math.abs(b)<0.005};function Ze(){this.gk=this.Si=p;this.hk={};this.fk=0}Ze.prototype.O=t("Si");function $e(a,c,b){C(B("Box2D.Dynamics.b2Fixture"));this.kb="Fixture"+af++;this.Zh=b.filter.ca();this.Lb=fc();this.Th=fc();this.Vh=a;this.X=b.shape.ca();this.Eg=b.ze;this.$h=b.xb;this.Lf=b.Gc;this.Ej=b.Bf}u=$e.prototype;u.pc=t("Ej");u.H=t("Vh");u.gh=function(a){a||(a=Xc());this.X.eh(a,this.Eg);return a};u.eb=function(){var a=this.Lb;a!=p&&(Pb(B("Box2D.Collision.b2AABB")),ec.push(a))};u.je=function(a,c){this.X.gf(this.Lb,c);this.bd=a.je(this.Lb,this)};
u.ke=function(a){if(this.bd!=p)a.ke(this.bd),this.bd=p};function bf(a,c,b,d){a.bd&&(a.X.gf(a.Lb,b),a.X.gf(a.Th,d),ic(a.Lb,a.Lb,a.Th),b=J(d.position,b.position),c.eg(a.bd,a.Lb,b),G(b))}var af=0;function cf(a){C(B("Box2D.Dynamics.b2FixtureListNode"));this.Ma=a;this.Fc=this.next=p}cf.prototype.Mc=ba("next");cf.prototype.Nc=ba("Fc");function df(){C(B("Box2D.Dynamics.b2FixtureList"));this.ug=this.tg=p;this.wf={};this.Ih=0}df.prototype.O=t("tg");function ef(a,c){C(B("Box2D.Dynamics.b2Body"));this.kb="Body"+ff++;this.e=new Yc;this.e.position.m(a.position);this.e.d.i(a.Za);this.c=new Qd;this.c.r.I();this.c.Ba=1;this.c.lb=this.c.o=a.Za;this.c.h.x=this.e.d.a.x*this.c.r.x+this.e.d.b.x*this.c.r.y;this.c.h.y=this.e.d.a.y*this.c.r.x+this.e.d.b.y*this.c.r.y;this.c.h.x+=this.e.position.x;this.c.h.y+=this.e.position.y;this.c.Ga.m(this.c.h);this.f=a.rj.ca();this.Ke=F(0,0);this.Ud=a.Qi;this.yj=a.Rc;this.Cg=a.Ji;this.Mb=a.Mi;this.Bg=a.Ii;this.bb=c;this.ia=
p;this.xa=new xe;this.tf=new Ze;this.lk=0;this.p=a.Li;this.Gj=a.qj;this.uj=a.Ki;this.Nf=this.Og=0;this.D=a.type;this.t=this.D==2?1:0;this.k=this.D==2?1:0;this.v=this.vc=0;this.Cj=a.jj;this.Sc=new df;this.Hf=[]}u=ef.prototype;u.eb=function(){G(this.f);G(this.Ke)};
function gf(a,c,b){L(!a.bb.Wc);a.e.d.i(b);a.e.position.m(c);var c=a.e.d,d=a.c.r;a.c.h.x=c.a.x*d.x+c.b.x*d.y;a.c.h.y=c.a.y*d.x+c.b.y*d.y;a.c.h.x+=a.e.position.x;a.c.h.y+=a.e.position.y;a.c.Ga.m(a.c.h);a.c.lb=a.c.o=b;b=a.bb.Ja.wd;for(c=a.Sc.O();c;c=c.next)bf(c.Ma,b,a.e,a.e);te(a.bb.Ja)}u.ub=t("e");u.Sb=function(){return this.c.o};function V(a){return a.c.h}function hf(a,c,b){a.D==2&&(Zd(a,n),a.f.x+=a.k*c.x,a.f.y+=a.k*c.y,a.p+=a.v*((b.x-a.c.h.x)*c.y-(b.y-a.c.h.y)*c.x))}
u.gh=function(a){a||(a=Xc());a.dd=this.t;a.Id=this.vc;a.Oc.m(this.c.r);return a};
function jf(a){a.t=0;a.k=0;a.vc=0;a.v=0;a.c.r.I();if(!(a.D==0||a.D==1)){for(var c=F(0,0),b=a.Sc.O();b;b=b.next){var d=b.Ma;d.Eg!=0&&(d=d.gh(),a.t+=d.dd,c.x+=d.Oc.x*d.dd,c.y+=d.Oc.y*d.dd,a.vc+=d.Id)}a.t>0?(a.k=1/a.t,c.x*=a.k,c.y*=a.k):(a.t=1,a.k=1);a.vc>0&&!a.yj?(a.vc-=a.t*(c.x*c.x+c.y*c.y),a.vc*=a.Cj,L(a.vc>0),a.v=1/a.vc):(a.vc=0,a.v=0);b=a.c.h.ca();a.c.r.m(c);a.c.Ga.m(I(a.e,a.c.r));a.c.h.m(a.c.Ga);a.f.x+=a.p*-(a.c.h.y-b.y);a.f.y+=a.p*+(a.c.h.x-b.x);G(c);G(b)}}
function Q(a,c){var b=a.e.d,b=F(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.e.position.x;b.y+=a.e.position.y;return b}function Zd(a,c){if(a.Mb!=c){a.Mb=c;a.Nf=0;if(!c)a.f.I(),a.p=0,a.Ke.I(),a.Og=0;for(var b=0;b<a.Hf.length;b++)Ee(a.Hf[b],a)}}u.kd=t("Bg");function kf(a){lf.d.i(a.c.lb);var c=lf.d,b=a.c.r;lf.position.x=a.c.Ga.x-(c.a.x*b.x+c.b.x*b.y);lf.position.y=a.c.Ga.y-(c.a.y*b.x+c.b.y*b.y);c=a.bb.Ja.wd;for(b=a.Sc.O();b;b=b.next)bf(b.Ma,c,lf,a.e)}
function R(a){a.e.d.i(a.c.o);var c=a.e.d,b=a.c.r;a.e.position.x=a.c.h.x-(c.a.x*b.x+c.b.x*b.y);a.e.position.y=a.c.h.y-(c.a.y*b.x+c.b.y*b.y)}u.Wb=function(a){if(this.D!=2&&a.D!=2)return q;for(var c=this.ia;c;c=c.next)if(c.ob==a&&c.Zb.Wh==q)return q;return n};u.Ic=function(a){this.c.Ic(a);this.c.h.m(this.c.Ga);this.c.o=this.c.lb;R(this)};var ff=0,lf=new Yc;function mf(a,c){this.Ja=new se(this);this.nb=new Re;this.Mg=this.Wc=q;this.Pa=this.Ef=p;this.Gb=new Ce;this.xa=new xe;this.ia=p;this.tf=new Ze;this.Gf=0;this.wj=this.Qg=n;this.Cg=c;this.zj=a;this.ai=0;this.Hg=nf(this,new Rd);this.Re=new Ne(0,0,0,0,this.Qg);this.Rh=new Ne(0,0,0,0,this.Qg);this.Qh=new We(this.Ja.xd,this.nb)}var of=1-100*Number.MIN_VALUE;function nf(a,c){L(!a.Wc);var b=new ef(c,a);a.Gb.df(b);return b}
function W(a,c){var b=c.Jc();b.Zd=p;if(b.Ac=a.ia)a.ia.Zd=b;a.ia=b;a.Gf++;b.Wa.Zb=b;b.Wa.ob=b.z;b.Wa.qb=p;if(b.Wa.next=b.w.ia)b.w.ia.qb=b.Wa;b.w.ia=b.Wa;b.Xa.Zb=b;b.Xa.ob=b.w;b.Xa.qb=p;if(b.Xa.next=b.z.ia)b.z.ia.qb=b.Xa;b.z.ia=b.Xa;var d=c.s,e=c.u;if(!c.ng)for(var f=e.xa.O(T);f;f=f.next)if(Xd(f.wa,e)==d)f.wa.Be=n;return b}mf.prototype.cg=function(){return this.Gb.cg()};mf.prototype.dg=function(){return this.xa.dg()};
function pf(a,c,b,d){if(a.Mg)te(a.Ja),a.Mg=q;a.Wc=n;a.Re.da(c,a.ai*c,b,d,a.Qg);c=a.Ja;for(b=c.bb.xa.O(T);b;b=b.next){var d=b.wa,e=d.Q,f=d.V,g=e.H(),h=f.H();if(g.Mb||h.Mb){if(d.Be){if(!h.Wb(g)){c.eb(d);continue}if(!c.Dg.Wb(e,f)){c.eb(d);continue}d.Be=q}c.wd.Ld(e.bd,f.bd)?Yd(d,c.xd):c.eb(d)}}if(a.Re.ja>0)a.te(a.Re),a.wj&&a.gg(a.Re),a.ai=a.Re.tc;a.Wc=q}
mf.prototype.te=function(a){for(var c=this.tf.O();c;c=c.next)pf(c.zh,a);c=this.Qh;c.da(this.Ja.xd,this.nb);for(var b=this.Gb.O(De);b;b=b.next)b.body.ea=q;for(var d=this.xa.O(T);d;d=d.next)d.wa.ea=q;for(b=this.ia;b;b=b.Ac)b.ea=q;for(b=this.Gb.O(He);b;b=b.next)if(d=b.body,!d.ea){c.ff();var e=[];e.push(d);for(d.ea=n;e.length>0;){var f=e.pop();c.df(f);f.Mb||Zd(f,n);if(f.D!=0){for(d=f.xa.O(ye);d;d=d.next){var g=d.wa;if(!g.ea&&(c.Fd(g),g.ea=n,g=Xd(g,f),!g.ea))e.push(g),g.ea=n}for(d=f.ia;d;d=d.next)if(!d.Zb.ea&&
d.ob.kd()&&(c.Ka.push(d.Zb),d.Zb.ea=n,!d.ob.ea))e.push(d.ob),d.ob.ea=n}}c.te(a,this.zj,this.Cg)}for(b=this.Gb.O(He);b;b=b.next)kf(b.body);te(this.Ja)};
mf.prototype.gg=function(a){var c,b,d=this.Qh;d.da(this.Ja.xd,this.nb);for(b=this.Gb.O(De);b;b=b.next){var e=b.body;e.ea=q;e.c.Ba=0}for(var f=this.xa.O(T);f;f=f.next)f.wa.ea=q,f.wa.be=p;for(b=this.ia;b;b=b.Ac)b.ea=q;for(;;){c=p;b=1;for(e=this.xa.O(ze);e;e=e.next){var f=e.wa,g=f.Q.H(),h=f.V.H();if(g.D==2&&g.Mb||h.D==2&&h.Mb){h=1;if(f.be!=p)h=f.be;else{if(f.Dd)h=1;else{var i=f.Q.H(),j=f.V.H(),g=i.c.Ba;if(i.c.Ba<j.c.Ba)g=j.c.Ba,i.c.Ic(g);else if(j.c.Ba<i.c.Ba)g=i.c.Ba,j.c.Ic(g);h=f;i=i.c;j=j.c;$d.kc.i(h.Q.X);
$d.lc.i(h.V.X);$d.pi=i;$d.qi=j;$d.Xj=0.005;var k=$d;Fd++;var h=k.kc,j=k.lc,i=k.pi,l=k.qi;L(i.Ba==l.Ba);L(1-i.Ba>Number.MIN_VALUE);var r=h.T+j.T,k=k.Xj,o=0,v=0,s=0;Kd.Nd=0;for(Ld.bh=q;;){i.ub(Md,o);l.ub(Nd,o);Ld.kc=h;Ld.lc=j;Ld.$e=Md;Ld.af=Nd;Rc(Pd,Kd,Ld);if(Pd.sd<=0){o=1;break}Od.U(Kd,h,Md,j,Nd);var x=Od.Rb(Md,Nd);if(x<=0){o=1;break}v==0&&(s=x>r?Math.max(r-k,0.75*r):Math.max(x-k,0.02*r));if(x-s<0.5*k){if(v==0){o=1;break}break}var A=o,wa=o,la=1;i.ub(Md,la);l.ub(Nd,la);var xa=Od.Rb(Md,Nd);if(xa>=s){o=
1;break}for(var U=0;;){var M=0,M=U&1?wa+(s-x)*(la-wa)/(xa-x):0.5*(wa+la);i.ub(Md,M);l.ub(Nd,M);var ea=Od.Rb(Md,Nd);if(Math.abs(ea-s)<0.025*k){A=M;break}ea>s?(wa=M,x=ea):(la=M,xa=ea);U++;Id++;if(U==50)break}Jd=Math.max(Jd,U);if(A<(1+100*Number.MIN_VALUE)*o)break;o=A;v++;Gd++;if(v==1E3)break}Hd=Math.max(Hd,v);h=o;L(0<=h&&h<=1);h>0&&h<1&&(h=(1-h)*g+h)}f.be=h}Number.MIN_VALUE<h&&h<b&&(c=f,b=h)}}if(c===p||of<b)break;f=c.Q.H();e=c.V.H();qf.i(f.c);rf.i(e.c);f.Ic(b);e.Ic(b);Yd(c,this.Ja.xd);c.be=p;if(c.pc()||
!c.enabled)f.c.i(qf),e.c.i(rf),R(f),R(e);else if(c.Dd){f.D!=2&&(f=e);d.ff();c=new Ae;e=f;c.Ae[c.Xe++]=e;for(f.ea=n;c.size>0;)if(e=c,e.Ce!=e.Xe?(f=e.Ae[e.Ce],delete e.Ae[e.Ce],e.Ce++,e=f):e=m,d.df(e),e.Mb||Zd(e,n),e.D==2){for(f=e.xa.O(ye);f;f=f.next){if(d.vj==32)break;g=f.wa;if(!g.ea&&(d.Fd(g),g.ea=n,g=Xd(g,e),!g.ea))g.D!=0&&(g.Ic(b),Zd(g,n),h=g,c.Ae[c.Xe++]=h),g.ea=n}for(e=e.ia;e;e=e.next)if(d.Gf!=32&&!e.Zb.ea&&e.ob.kd()&&(d.Ka.push(e.Zb),e.Zb.ea=n,!e.ob.ea)){if(e.ob.D!=0)e.ob.Ic(b),Zd(e.ob,n),f=
e.ob,c.Ae[c.Xe++]=f;e.ob.ea=n}}this.Rh.da((1-b)*a.ja,0,a.dh,a.Tg,q);d.gg(this.Rh);for(b=0;b<d.ac.length;b++)if(d.ac[b].ea=q,d.ac[b].Mb&&d.ac[b].D==2){kf(d.ac[b]);for(f=d.ac[b].xa.O(T);f;f=f.next)f.wa.be=p}for(b=0;b<d.vj;b++)d.cc[b].ea=q,d.cc[b].be=p;for(b=0;b<d.Gf;b++)d.Ka[b].ea=q;te(this.Ja)}}};
function sf(a,c,b,d){if(c instanceof ce){var e=I(b,c.aa);a.Pa.yi(e,c.T,b.d.a,d);G(e)}else if(c instanceof O){for(var e=0,f=c.hh(),c=c.n,g=[],e=0;e<f;e++)g[e]=I(b,c[e]);a.Pa.zi(g,f,d);for(e=0;e<f;e++)G(g[e])}}var bc=new Yc,qf=new Qd,rf=new Qd,tf=new Le(0.5,0.8,0.8),uf=new Le(0.5,0.5,0.3),vf=new Le(0.5,0.9,0.5),wf=new Le(0.5,0.5,0.9),xf=new Le(0.6,0.6,0.6),yf=new Le(0.9,0.7,0.7),zf=new Le(0.3,0.9,0.9),$b=new Le(0,0,0.8);function Af(a){this.lh=Bf++;this.position=a.ca();this.Za=0;this.$g=[];this.ue=[];this.ef=[];this.re=[];this.body=p}var Bf=0;function Cf(a,c,b){this.Vg=[];this.Ha=[];this.nk=0;this.Sg={};this.ya=a;this.Ya=new E(c.x,c.y);this.ga=new mf(b,n);this.ga.Ja.Dg=this;this.ga.Ja.xd=this;this.top=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,-2.5),q,p,{xb:0});this.bottom=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,this.Ya.y+2.5),q,p,{xb:0});this.left=X(this,new E(5,this.Ya.y+5),new E(-2.5,this.Ya.y/2),q,p,{xb:0});this.right=X(this,new E(5,this.Ya.y+5),new E(this.Ya.x+2.5,this.Ya.y/2),q,p,{xb:0})}u=Cf.prototype;
u.update=function(a,c){pf(this.ga,c,Df,Df);for(var b=this.ga.Gb.O(Fe);b;b=b.next)b.body.Ke.I(),b.body.Og=0;b=this.Vg;this.Vg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};u.Wb=function(a,c){if(!a.pc()&&!c.pc())for(var b=0;b<this.Ha.length;b++)if(this.Ha[b].Wb&&!this.Ha[b].Wb(a,c))return q;return cd.prototype.Wb(a,c)};
u.ie=function(a){for(var c=a.Q,b=c.H(),d=b.object,e=a.V,f=e.H(),g=f.object,h=0;h<d.ue.length;h++)d.ue[h](a,d,b,c,g,f,e);for(h=0;h<g.ue.length;h++)g.ue[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)if(this.Ha[h].mh&&this.Ha[h].mh(a),a.disabled){var i=a;i.enabled=q;Ud(i)}for(h=0;h<d.ef.length;h++)d.ef[h](a,d,b,c,g,f,e);for(h=0;h<g.ef.length;h++)g.ef[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)this.Ha[h].ie&&this.Ha[h].ie(a)};
u.Gd=function(a){for(var c=0;c<this.Ha.length;c++)this.Ha[c].Gd&&this.Ha[c].Gd(a);a.disabled=q;a.enabled=n;Ud(a)};u.se=function(a,c){if(a.disabled)a.enabled=q,Ud(a);for(var b=0;b<this.Ha.length;b++)this.Ha[b].se&&this.Ha[b].se(a,c)};u.qe=function(a,c){for(var b=a.Q,d=b.H(),e=d.object,f=a.V,g=f.H(),h=g.object,i=0;i<e.re.length;i++)e.re[i](a,c,e,d,b,h,g,f);for(i=0;i<h.re.length;i++)h.re[i](a,c,h,g,f,e,d,b);for(i=0;i<this.Ha.length;i++)this.Ha[i].qe&&this.Ha[i].qe(a,c)};
function Y(a,c,b,d){d=d||0;a=Ef(a,c,b,n);a.display.vi=-10+d;return a}function X(a,c,b,d,e,f){e=e||{};e.type=0;return Ff(a,c,b,d,{Da:e,sc:f})}function Ff(a,c,b,d,e){var f=new O;bd(f,c.x/2,c.y/2);return a.Hb(c,b,d,f,e)}function Gf(a,c,b){var d=new O,e=new E(c.x/2,c.y/2),e=[new E(0,e.y),new E(-e.x+0.01,e.y-0.01),new E(-e.x,0),new E(-e.x+0.01,-e.y+0.01),new E(0,-e.y),new E(e.x-0.01,-e.y+0.01),new E(e.x,0),new E(e.x-0.01,e.y-0.01)];ad(d,e);return a.Hb(c,b,n,d,{Da:{Rc:n},sc:{Gc:0}})}
function Hf(a,c){a.ga.Wc?a.Vg.push(c):c.apply(a)}u.Hb=function(a,c,b,d,e){var f=Ef(this,a,c,b);Hf(this,function(){var a=e,a=a||{},b=If(a.Da,Jf),i=new Rd;i.type=b.type;i.Za=b.Za;i.Rc=b.Rc;i.position=c;b=nf(this.ga,i);a=Kf(b,d,a);f.body=b;f.Ma=a;b.object=f});return f};function Ef(a,c,b,d){b=new Af(b);a.Sg[b.lh]=b;d!==q&&pc(b,c);return b}
function Kf(a,c,b){var b=b||{},b=If(b.sc,Lf),d=new tc;d.ze=b.ze;d.xb=b.xb;d.Gc=b.Gc;d.Bf=b.Bf;d.shape=c;L(!a.bb.Wc);c=new $e(a,0,d);a.Bg&&c.je(a.bb.Ja.wd,a.e);b=a.Sc;d=c.kb;if(b.wf[d]==p){var e=new cf(c),f=b.ug;f!=p?f.Mc(e):b.tg=e;e.Nc(f);b.ug=e;b.wf[d]=e;b.Ih++}c.Vh=a;c.Eg>0&&jf(a);a.bb.Mg=n;return c}
function Mf(a,c){Hf(a,function(){if(c.body){var a=this.ga,d=c.body;L(!a.Wc);for(var e=d.ia;e;){var f=e,e=e.next;a.Ef&&a.Ef.ek(f.Zb);var g=a,h=f.Zb,i=h.Wh;if(h.Zd)h.Zd.Ac=h.Ac;if(h.Ac)h.Ac.Zd=h.Zd;if(h==g.ia)g.ia=h.Ac;var f=h.w,j=h.z;Zd(f,n);Zd(j,n);if(h.Wa.qb)h.Wa.qb.next=h.Wa.next;if(h.Wa.next)h.Wa.next.qb=h.Wa.qb;if(h.Wa==f.ia)f.ia=h.Wa.next;h.Wa.qb=p;h.Wa.next=p;if(h.Xa.qb)h.Xa.qb.next=h.Xa.next;if(h.Xa.next)h.Xa.next.qb=h.Xa.qb;if(h.Xa==j.ia)j.ia=h.Xa.next;h.Xa.qb=p;h.Xa.next=p;g.Gf--;if(!i)for(g=
j.xa.O(T);g;g=g.next)if(Xd(g.wa,j)==f)g.wa.Be=n}for(e=d.tf.O();e;e=e.next)Ke(e.zh,d);for(e=d.xa.O(T);e;e=e.next)a.Ja.eb(e.wa);for(e=d.Sc.O();e;e=e.next){a.Ef&&a.Ef.dk(e.Ma);g=d;f=e.Ma;L(!g.bb.Wc);var j=g.Sc,h=f.kb,k=j.wf[h];if(k!=p)i=k.Fc,k=k.next,i==p?j.tg=k:i.Mc(k),k==p?j.ug=i:k.Nc(i),delete j.wf[h],j.Ih--;for(j=g.xa.O(T);j;j=j.next)(f==j.wa.Q||f==j.wa.V)&&g.bb.Ja.eb(j.wa);g.Bg&&f.ke(g.bb.Ja.wd);f.eb();jf(g)}d.eb();Ke(a.Gb,d)}delete this.Sg[c.lh]})}
function Nf(a,c,b){Hf(a,function(){if(c.body){var a=c.body;gf(a,b,a.Sb())}else c.position=b.ca()})}var Df=10,Lf={ze:0.1,xb:0.6,Gc:0.01,Bf:q},Jf={Rc:q,Za:0,type:2};function If(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===m||a[d]===p?c[d]:a[d];return b};function Of(a){this.ya=a}function Pf(a,c,b,d,e){var f=new E(4,4);pc(c.body,b);H(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.Wf=new cc("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,f,e);c.display.Xb={};c.display.Xb.kk=e;c.display.Xb.fj=4;c.display.Xb.Tc=0;c.display.Xb.mb={o:Qf,x:Qf,y:Rf};a=a.ya.uh;c.$g.push(Sf);Na(a.Zg,c)}var Qf=0,Rf=2;
function Sf(a,c){var b=this.display.Xb;b.Tc+=c;var d=new E(1,1),e=this.body.f,f=Math.abs(e.x),g=Math.abs(e.y);if(g<0.01||f>=g){if(e.x>0.01){if(b.mb.x=Qf,b.mb.o!=Qf)b.mb.o=Qf,b.Tc=0}else if(e.x<-0.01){if(b.mb.x=1,b.mb.o!=1)b.mb.o=1,b.Tc=0}else b.Tc=0;d.y=b.mb.x==1?4:2}else if(e.y>0.01){b.mb.y=3;if(b.mb.o!=3)b.mb.o=3,b.Tc=0;d.y=3}else{b.mb.y=Rf;if(b.mb.o!=Rf)b.mb.o=Rf,b.Tc=0;d.y=1}d.x=b.Tc==0?1:Math.floor(b.Tc*b.fj);b=this.display.Wf;b.rb=d.ca();b.rb.x%=b.Vf.x;b.rb.y%=b.Vf.y;if(b.rb.x===0)b.rb.x=b.Vf.x;
if(b.rb.y===0)b.rb.y=b.Vf.y};function Tf(){this.Zg=[]};function Uf(a,c,b,d,e,f,g){this.hd=a;this.paused=q;this.bf=0;this.uh=new Tf;this.Xb=new Of(this);this.q=new Cf(this,b,d);this.viewport=new jc(this,c,f,e,g)}function Vf(a){if(a.Oh===p)a.Oh=new Date;var c=new Date-a.Oh>=5E3;Vb>0&&!c?setTimeout(function(){Vf(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
Uf.prototype.update=function(a,c){if(this.paused)this.bf=0,mc(this.viewport.li),this.hd.cf&&this.hd.cf(a,c);else{this.hd.Ue&&this.hd.Ue(a,c);for(var b=this.uh,d=0;d<b.Zg.length;d++)for(var e=b.Zg[d],f=0;f<e.$g.length;f++)e.$g[f].apply(e,[a,c]);this.bf+=c;for(b=a-this.bf;this.bf>=0.015;)this.bf-=0.015,b+=0.015,this.hd.Tj&&this.hd.Tj(b,0.015),this.q.update(b,0.015);this.hd.Te&&this.hd.Te(a,c);oc(this.viewport.li);b=this.viewport;b.display.style.visibility="hidden";if(b.Cf.x!=b.Ea.x||b.Cf.y!=b.Ea.y){b.Cf.x=
b.Ea.x;b.Cf.y=b.Ea.y;if(b.gb!==p)b.gb.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px",b.gb.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";b.display.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px";b.display.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";d=b.Yf;e=b.Ea;f=gc(d);d.lowerBound.hg(f);d.upperBound.hg(f);d.lowerBound.Pb(e);d.upperBound.Pb(e);G(f)}var d=[],g;for(g in b.rc)d[g]=b.rc[g];g=b.Yf;var e=b.ya.q.Sg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,k=i.ij(b.Ea),l=j.size;j.K.lowerBound.i(k.x-
l.x,k.y-l.y);j.K.upperBound.i(k.x+l.x,k.y+l.y);if(g.Ld(j.K)){if(j.jd==p)j.jd=qc++;delete d[j.jd];if(b.rc[j.jd]==p)b.rc[j.jd]=document.createElement("span"),b.rc[j.jd].className="gameObject",b.rc[j.jd].style.zIndex=100+(j.vi||0),b.display.appendChild(b.rc[j.jd]);var f=b.rc[j.jd],r=Xb(f),o=b.scale!=r.scale;r.scale=b.scale;var v=k.x-l.x/2;if(o||r.left!=v)r.left=v,f.style.left=v*b.scale+"px";k=k.y-l.y/2;if(o||r.top!=k)r.top=k,f.style.top=k*b.scale+"px";k=l.x;if(o||r.width!=k)r.width=k,f.style.width=k*
b.scale+"px";l=l.y;if(o||r.height!=l)r.height=l,f.style.height=l*b.scale+"px";i=i.hj();if(r.rotation!=i)r.rotation=i,f.style.webkitTransform="rotate("+i+"rad)";if(j.Wf!=p){j=j.Wf;r=q;i=Xb(f);if(i.Ni!=j.url)i.Ni=j.url,f.style.backgroundImage="url("+j.url+")",f.style.backgroundColor="transparent",r=n;else if(i.Oi!=j.rb.x||i.Pi!=j.rb.y)r=n;if(r)i.Oi=j.rb.x,i.Pi=j.rb.y,f.style.backgroundPosition=(j.ki.x+(j.rb.x-1)*j.si.x)*-1+"px "+(j.ki.y+(j.rb.y-1)*j.si.y)*-1+"px"}}}}for(var s in d)b.display.removeChild(d[s]),
delete b.rc[s];if(b.gb!==p){b.gb.style.visibility="hidden";h=b.ya.q.ga;if(h.Pa!==p){h.Pa.ff();s=h.Pa.Yh;if(s&1)for(d=h.Gb.O(De);d;d=d.next){e=d.body;for(g=e.Sc.O();g;g=g.next)f=g.Ma,f=f.X,e.kd()?e.D==0?sf(h,f,e.e,vf):e.D==1?sf(h,f,e.e,wf):e.Mb?sf(h,f,e.e,yf):sf(h,f,e.e,xf):sf(h,f,e.e,uf)}if(s&2)for(d=h.ia;d;d=d.Ac)g=h,e=d,e instanceof Ye?(f=e.nc(),j=e.oc(),g.Pa.Lc(f,j,tf),G(f),G(j)):e instanceof fd?(f=e.nc(),j=e.oc(),r=e.hb.e.position.ca(),r.Pb(e.ec),i=e.hb.e.position.ca(),i.Pb(e.fc),g.Pa.Lc(r,f,
tf),g.Pa.Lc(i,j,tf),g.Pa.Lc(r,i,tf),G(f),G(j),G(r),G(i)):(f=e.nc(),j=e.oc(),e.w!=g.Hg&&g.Pa.Lc(e.w.e.position,f,tf),g.Pa.Lc(f,j,tf),e.z!=g.Hg&&g.Pa.Lc(e.z.e.position,j,tf),G(f),G(j));if(s&32)for(d=h.tf.O();d;d=d.next)d.zh.bk(h.Pa);if(s&8)for(d=h.xa.O(T);d;d=d.next)e=d.wa.V,g=gc(d.wa.Q.Lb),e=gc(e.Lb),h.Pa.Lc(g,e,zf),G(g),G(e);if(s&4)for(d=h.Gb.O(Je);d;d=d.next){e=d.body;for(g=e.Sc.O();g;g=g.next)f=g.Ma,e=h.Ja.wd.Hd(f.bd),e=[F(e.lowerBound.x,e.lowerBound.y),F(e.upperBound.x,e.lowerBound.y),F(e.upperBound.x,
e.upperBound.y),F(e.lowerBound.x,e.upperBound.y)],h.Pa.xi(e),G(e[0]),G(e[1]),G(e[2]),G(e[3])}if(s&16)for(d=h.Gb.O(De);d;d=d.next)e=d.body,bc.d=e.e.d,bc.position=V(e),h.Pa.Ai()}b.gb.style.visibility=""}b.display.style.visibility=""}};Uf.prototype.start=function(){oc(this.viewport.zg);Na(Wf,this);Xf||(Yf=document.getElementById("fps"),Xf=n,Zf())};var Xf=q,Wf=[],$f=60,ag=p,Yf=p;
function Zf(a){a==p&&(a=(new Date).getTime());var c=0;ag!==p?c=(a-ag)/1E3:ag=a;if(c>0){c>0.2&&(c=0.2);if(Yf){for(var b=0,d=0,e=0;e<Wf.length;e++)b+=Wf[e].q.ga.cg(),d+=Wf[e].q.ga.dg();e=1/c;$f=$f*0.99+e*0.01;Yf.innerHTML=Math.round(e)+" FPS<br>"+Math.round($f)+" Rolling FPS<br>"+b+" World Objects<br>"+d+" Active Contacts"}ag=a;for(e=0;e<Wf.length;e++)Wf[e].update(a,c);for(var f in Eb)Eb[f].ui=n;zb=yb;Bb=Ab;Db=Cb}rc(Zf,document.body)};function bg(){this.type=0;this.u=this.s=p;this.ng=q};function cg(){bg.call(this);this.xf=F(0,0);this.yf=F(0,0);this.Ua=F(0,0);this.Va=F(0,0);this.type=4;this.xf.i(-1,1);this.yf.i(1,1);this.Ua.i(-1,0);this.Va.i(1,0);this.hi=this.yg=this.gi=this.xg=0;this.fd=1;this.ng=n}y(cg,bg);
cg.prototype.U=function(a,c,b,d,e,f,g){g===m&&(g=0);this.s=a;this.u=c;this.xf.m(b);this.yf.m(d);this.Ua=Ec(this.s.e,e);this.Va=Ec(this.u.e,f);a=e.x-b.x;b=e.y-b.y;this.xg=Math.sqrt(a*a+b*b);b=f.x-d.x;d=f.y-d.y;this.yg=Math.sqrt(b*b+d*d);this.fd=g;g=this.xg+this.fd*this.yg;this.gi=g-this.fd*gd;this.hi=(g-gd)/this.fd};cg.prototype.Jc=function(){return new fd(this)};function dg(a,c,b){C(B("Box2D.Common.Math.b2Vec3"));this.x=a;this.y=c;this.l=b}var eg=[];function Z(a,c,b){Ob(B("Box2D.Common.Math.b2Vec3"));if(eg.length>0){var d=eg.pop();d.i(a,c,b);return d}return new dg(a,c,b)}function fg(a){a!=p&&(Pb(B("Box2D.Common.Math.b2Vec3")),eg.push(a))}u=dg.prototype;u.I=function(){this.l=this.y=this.x=0};u.i=function(a,c,b){this.x=a;this.y=c;this.l=b};u.m=function(a){this.x=a.x;this.y=a.y;this.l=a.l};u.Db=function(){return Z(-this.x,-this.y,-this.l)};
u.kf=function(){this.x=-this.x;this.y=-this.y;this.l=-this.l};u.ca=function(){return Z(this.x,this.y,this.l)};u.Pb=function(a){this.x+=a.x;this.y+=a.y;this.l+=a.l};u.hg=function(a){this.x-=a.x;this.y-=a.y;this.l-=a.l};u.qc=function(a){this.x*=a;this.y*=a;this.l*=a};function gg(a,c,b){C(B("Box2D.Common.Math.b2Mat33"));this.a=Z(0,0,0);this.b=Z(0,0,0);this.L=Z(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.L.m(b)}u=gg.prototype;u.ca=function(){return new gg(this.a,this.b,this.L)};u.Jd=function(a){this.a.m(a.a);this.b.m(a.b);this.L.m(a.L)};u.$f=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.l+=a.a.l;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.l+=a.b.l;this.L.x+=a.L.x;this.L.y+=a.L.y;this.L.l+=a.L.l};u.lf=function(){this.a.i(1,0,0);this.b.i(0,1,0);this.L.i(0,0,1)};
u.I=function(){this.a.i(0,0,0);this.b.i(0,0,0);this.L.i(0,0,0)};function hg(a,c,b,d){var e=a.a.x,f=a.b.x,g=a.a.y,a=a.b.y,h=e*a-f*g;h!=0&&(h=1/h);c.x=h*(a*b-f*d);c.y=h*(e*d-g*b)}function ig(a,c,b,d,e){var f=a.a.x,g=a.a.y,h=a.a.l,i=a.b.x,j=a.b.y,k=a.b.l,l=a.L.x,r=a.L.y,a=a.L.l,o=f*(j*a-k*r)+g*(k*l-i*a)+h*(i*r-j*l);o!=0&&(o=1/o);c.x=o*(b*(j*a-k*r)+d*(k*l-i*a)+e*(i*r-j*l));c.y=o*(f*(d*a-e*r)+g*(e*l-b*a)+h*(b*r-d*l));c.l=o*(f*(j*e-k*d)+g*(k*b-i*e)+h*(i*d-j*b))};function jg(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.Zc=F(0,0);this.If=F(0,0);this.B=F(0,0);this.qa=F(0,0);this.P=new gg;this.j=Z(0,0,0);this.F.m(a.Ua);this.G.m(a.Va);this.Zc.m(a.Ag);this.If.x=-this.Zc.y;this.If.y=this.Zc.x;this.Jj=a.gd;this.j.I();this.za=this.gc=0;this.Xd=a.Sh;this.ce=a.ti;this.Hj=a.Lj;this.Lg=a.Rg;this.yd=a.vf;this.Je=a.sg;this.$=0;this.B.I();this.qa.I()}y(jg,P);u=jg.prototype;u.nc=function(){return Q(this.w,this.F)};u.oc=function(){return Q(this.z,this.G)};
function kg(a){var c=a.w,b=a.z,d=Q(c,a.F),e=Q(b,a.G),b=e.x-d.x,f=e.y-d.y;G(d);G(e);a=Cc(c.e.d,a.Zc);c=a.x*b+a.y*f;G(a);return c}
u.Tb=function(a){var c=this.w,b=this.z,d,e=0;this.Ne.m(c.c.r);this.Oe.m(b.c.r);var f=c.ub();d=c.e.d;var g=this.F.x-this.Ne.x,h=this.F.y-this.Ne.y,e=d.a.x*g+d.b.x*h,h=d.a.y*g+d.b.y*h,g=e;d=b.e.d;var i=this.G.x-this.Oe.x,j=this.G.y-this.Oe.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.h.x+i-c.c.h.x-g;e=b.c.h.y+j-c.c.h.y-h;this.Ab=c.k;this.Bb=b.k;this.Uc=c.v;this.Vc=b.v;var k=Cc(f.d,this.Zc);this.B.m(k);G(k);this.Na=(d+g)*this.B.y-(e+h)*this.B.x;this.Oa=i*this.B.y-j*this.B.x;this.gc=this.Ab+this.Bb+
this.Uc*this.Na*this.Na+this.Vc*this.Oa*this.Oa;if(this.gc>Number.MIN_VALUE)this.gc=1/this.gc;f=Cc(f.d,this.If);this.qa.m(f);G(f);this.Qa=(d+g)*this.qa.y-(e+h)*this.qa.x;this.Ra=i*this.qa.y-j*this.qa.x;g=this.Ab;h=this.Bb;i=this.Uc;j=this.Vc;this.P.a.x=g+h+i*this.Qa*this.Qa+j*this.Ra*this.Ra;this.P.a.y=i*this.Qa+j*this.Ra;this.P.a.l=i*this.Qa*this.Na+j*this.Ra*this.Oa;this.P.b.x=this.P.a.y;this.P.b.y=i+j;this.P.b.l=i*this.Na+j*this.Oa;this.P.L.x=this.P.a.l;this.P.L.y=this.P.b.l;this.P.L.l=g+h+i*this.Na*
this.Na+j*this.Oa*this.Oa;if(this.yd)if(d=this.B.x*d+this.B.y*e,Math.abs(this.ce-this.Xd)<0.01)this.$=3;else if(d<=this.Xd){if(this.$!=1)this.$=1,this.j.l=0}else if(d>=this.ce){if(this.$!=2)this.$=2,this.j.l=0}else this.$=0,this.j.l=0;else this.$=0;if(this.Je==q)this.za=0;a.Ed?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x*this.qa.x+(this.za+this.j.l)*this.B.x,d=this.j.x*this.qa.y+(this.za+this.j.l)*this.B.y,e=this.j.x*this.Qa+this.j.y+(this.za+this.j.l)*this.Na,g=this.j.x*this.Ra+this.j.y+
(this.za+this.j.l)*this.Oa,c.f.x-=this.Ab*a,c.f.y-=this.Ab*d,c.p-=this.Uc*e,b.f.x+=this.Bb*a,b.f.y+=this.Bb*d,b.p+=this.Vc*g):(this.j.I(),this.za=0)};
u.Fb=function(a){var c=this.w,b=this.z,d=c.f,e=c.p,f=b.f,g=b.p,h=0,i=0,j=0,k=0;if(this.Je&&this.$!=3)k=this.gc*(this.Lg-(this.B.x*(f.x-d.x)+this.B.y*(f.y-d.y)+this.Oa*g-this.Na*e)),h=this.za,a=a.ja*this.Hj,this.za=K(this.za+k,-a,a),k=this.za-h,h=k*this.B.x,i=k*this.B.y,j=k*this.Na,k*=this.Oa,d.x-=this.Ab*h,d.y-=this.Ab*i,e-=this.Uc*j,f.x+=this.Bb*h,f.y+=this.Bb*i,g+=this.Vc*k;j=this.qa.x*(f.x-d.x)+this.qa.y*(f.y-d.y)+this.Ra*g-this.Qa*e;i=g-e;if(this.yd&&this.$!=0){k=this.B.x*(f.x-d.x)+this.B.y*(f.y-
d.y)+this.Oa*g-this.Na*e;h=this.j.ca();a=Z(0,0,0);ig(this.P,a,-j,-i,-k);this.j.Pb(a);if(this.$==1)this.j.l=Math.max(this.j.l,0);else if(this.$==2)this.j.l=Math.min(this.j.l,0);j=-j-(this.j.l-h.l)*this.P.L.x;i=-i-(this.j.l-h.l)*this.P.L.y;k=F(0,0);hg(this.P,k,j,i);k.x+=h.x;k.y+=h.y;this.j.x=k.x;this.j.y=k.y;G(k);a.x=this.j.x-h.x;a.y=this.j.y-h.y;a.l=this.j.l-h.l;h=a.x*this.qa.x+a.l*this.B.x;i=a.x*this.qa.y+a.l*this.B.y;j=a.x*this.Qa+a.y+a.l*this.Na;k=a.x*this.Ra+a.y+a.l*this.Oa;fg(a)}else a=F(0,0),
hg(this.P,a,-j,-i),this.j.x+=a.x,this.j.y+=a.y,h=a.x*this.qa.x,i=a.x*this.qa.y,j=a.x*this.Qa+a.y,k=a.x*this.Ra+a.y,G(a);d.x-=this.Ab*h;d.y-=this.Ab*i;e-=this.Uc*j;f.x+=this.Bb*h;f.y+=this.Bb*i;g+=this.Vc*k;c.f.m(d);c.p=e;b.f.m(f);b.p=g};
u.Eb=function(){var a=this.w,c=this.z,b=a.c.h,d=a.c.o,e=c.c.h,f=c.c.o,g=0,h=0,i=0,j=g=0,k=0,l=0,h=q,r=0,o=yc(d),l=this.F.x-this.Ne.x,v=this.F.y-this.Ne.y,g=o.a.x*l+o.b.x*v,v=o.a.y*l+o.b.y*v;xc(o);var l=g,j=yc(f),s=this.G.x-this.Oe.x,i=this.G.y-this.Oe.y,g=j.a.x*s+j.b.x*i,i=j.a.y*s+j.b.y*i;xc(j);s=g;g=e.x+s-b.x-l;j=e.y+i-b.y-v;if(this.yd){G(this.B);this.B=Cc(o,this.Zc);this.Na=(g+l)*this.B.y-(j+v)*this.B.x;this.Oa=s*this.B.y-i*this.B.x;var x=this.B.x*g+this.B.y*j;Math.abs(this.ce-this.Xd)<0.01?(r=
K(x,-0.2,0.2),k=Math.abs(x),h=n):x<=this.Xd?(r=K(x-this.Xd+0.005,-0.2,0),k=this.Xd-x,h=n):x>=this.ce&&(r=K(x-this.ce+0.005,0,0.2),k=x-this.ce,h=n)}G(this.qa);this.qa=Cc(o,this.If);this.Qa=(g+l)*this.qa.y-(j+v)*this.qa.x;this.Ra=s*this.qa.y-i*this.qa.x;o=Z(0,0,0);v=this.qa.x*g+this.qa.y*j;s=f-d-this.Jj;k=Math.max(k,Math.abs(v));l=Math.abs(s);h?(h=this.Ab,i=this.Bb,g=this.Uc,j=this.Vc,this.P.a.x=h+i+g*this.Qa*this.Qa+j*this.Ra*this.Ra,this.P.a.y=g*this.Qa+j*this.Ra,this.P.a.l=g*this.Qa*this.Na+j*this.Ra*
this.Oa,this.P.b.x=this.P.a.y,this.P.b.y=g+j,this.P.b.l=g*this.Na+j*this.Oa,this.P.L.x=this.P.a.l,this.P.L.y=this.P.b.l,this.P.L.l=h+i+g*this.Na*this.Na+j*this.Oa*this.Oa,ig(this.P,o,-v,-s,-r)):(h=this.Ab,i=this.Bb,g=this.Uc,j=this.Vc,r=g*this.Qa+j*this.Ra,x=g+j,this.P.a.i(h+i+g*this.Qa*this.Qa+j*this.Ra*this.Ra,r,0),this.P.b.i(r,x,0),r=F(0,0),hg(this.P,r,-v,-s),o.x=r.x,o.y=r.y,G(r),o.l=0);r=o.x*this.qa.x+o.l*this.B.x;h=o.x*this.qa.y+o.l*this.B.y;v=o.x*this.Qa+o.y+o.l*this.Na;s=o.x*this.Ra+o.y+o.l*
this.Oa;fg(o);b.x-=this.Ab*r;b.y-=this.Ab*h;d-=this.Uc*v;e.x+=this.Bb*r;e.y+=this.Bb*h;f+=this.Vc*s;a.c.o=d;c.c.o=f;R(a);R(c);return k<=0.005&&l<=Fc};function lg(){bg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.Ag=F(0,0);this.type=2;this.Ag.i(1,0);this.gd=0;this.vf=q;this.ti=this.Sh=0;this.sg=q;this.Rg=this.Lj=0}y(lg,bg);lg.prototype.U=function(a,c,b,d){this.s=a;this.u=c;this.Ua=Ec(this.s.e,b);this.Va=Ec(this.u.e,b);this.Ag=Dc(this.s.e.d,d);this.gd=this.u.Sb()-this.s.Sb()};lg.prototype.Jc=function(){return new jg(this)};function mg(a,c,b){this.execute=a;this.name=c;this.ej=b};function $(a){this.ya=a;this.ya.q.Ha.push(this)}
$.prototype.wb=function(a,c){var b=Gf(this.ya.q,a,c);$.mj(b);$.oj(b);$.nj(b);var d=new O,e=new E(a.x/2,a.y/2);$c(d,[new E(-e.x+0.01,e.y-0.01),new E(-e.x-0.01,0),new E(-e.x+0.01,-e.y+0.01),new E(e.x-0.01,-e.y+0.01),new E(e.x+0.01,0),new E(e.x-0.01,e.y-0.01)]);b.ik=Kf(b.body,d,{sc:{xb:0}});b.Ca={};b.Ca.Qf=new mg(function(){b.g.uc.pj()},"Move Up",n);b.Ca.Pf=new mg(aa(),"Move Down",n);b.Ca.de=new mg(function(){b.g.fe.de()},"Move Left",n);b.Ca.ee=new mg(function(){b.g.fe.ee()},"Move Right",n);return b};
(function(a){a.vb=0.1;a.ak=new E(0,9.8);a.Kc={hf:new E(0,9.8),Ci:1.5,jh:8,Gi:1};a.Ub={wi:1,Bi:2,Ei:4,$j:8,fh:16,ih:32,ag:64};a.Di={Fi:1,Zj:2,ck:4};a.S={Kd:1,ld:2,tb:4,md:8};a.wg=function(c,b){c.g=c.g||{};c.g.type|=a.Ub.wi;c.g.uf={Rj:b&a.S.Kd,Oj:b&a.S.tb,Pj:b&a.S.ld,Qj:b&a.S.md};c.ue.push(function(b,c,f,g,h,i,j){if(!b.disabled)if(b.disabled=n,f=new Me,Wd(b,f),f=f.N,b.Q==j&&(f=f.Db()),!c.g.uf.Rj&&f.y<-a.vb)b.disabled=q;else if(!c.g.uf.Oj&&f.y>a.vb)b.disabled=q;else if(!c.g.uf.Qj&&f.x>a.vb)b.disabled=
q;else if(!c.g.uf.Pj&&f.x<-a.vb)b.disabled=q})};a.mj=function(c){var b=$.Kc.jh;c.g=c.g||{};c.g.type|=a.Ub.Bi;c.g.uc={ud:[],speed:b,pj:function(){var b=c.g.uc.ud;if(b.length>0){var e=c.body.t*c.g.uc.speed*a.Kc.Ci,f=V(c.body),g=c.body.f;g.y=0;var h=c.body;h.D!=0&&h.f.m(g);hf(c.body,new E(0,-e),f);for(g=0;g<b.length;g++)hf(b[g].H(),new E(0,e/b.length),f)}}};c.re.push(function(a,b,c,g,h,i,j,k){if(!a.disabled)if(b=new Me,Wd(a,b),b=b.N,a.Q==k&&(b=b.Db()),b.y>0.5){if(!(Ma(c.g.uc.ud,k)>=0))Na(c.g.uc.ud,k),
a.Cd=a.Cd||[],Na(a.Cd,c)}else Ma(c.g.uc.ud,k)>=0&&(Oa(c.g.uc.ud,k),Oa(a.Cd,c))})};a.oj=function(c){var b=$.Kc.jh,d=$.Kc.Gi;c.g=c.g||{};c.g.type|=a.Ub.Ei;c.g.fe={th:d,speed:b,ee:function(){var a=c.body.f,a=Math.min(a.x+c.g.fe.th,c.g.fe.speed)-a.x;a>0&&hf(c.body,new E(c.body.t*a,0),V(c.body))},de:function(){var a=c.body.f,a=Math.max(a.x-c.g.fe.th,-c.g.fe.speed)-a.x;a<0&&hf(c.body,new E(c.body.t*a,0),V(c.body))}}};a.Qd=function(c,b,d,e){c.g=c.g||{};c.g.type|=a.Ub.ag;c.g.A=c.g.A||{};if(d&a.S.Kd)c.g.A.vg=
n,c.g.A.Ye=c.g.A.Ye||[],c.g.A.Ye.push(b);if(d&a.S.tb)c.g.A.vg=n,c.g.A.ve=c.g.A.ve||[],c.g.A.ve.push(b);if(d&a.S.ld)c.g.A.vg=n,c.g.A.Fe=c.g.A.Fe||[],c.g.A.Fe.push(b);if(d&a.S.md)c.g.A.vg=n,c.g.A.Ve=c.g.A.Ve||[],c.g.A.Ve.push(b);if(e&a.S.Kd)c.g.A.zf=n,c.g.A.Ze=c.g.A.Ze||[],c.g.A.Ze.push(b);if(e&a.S.tb)c.g.A.zf=n,c.g.A.we=c.g.A.we||[],c.g.A.we.push(b);if(e&a.S.ld)c.g.A.zf=n,c.g.A.Ge=c.g.A.Ge||[],c.g.A.Ge.push(b);if(e&a.S.md)c.g.A.zf=n,c.g.A.We=c.g.A.We||[],c.g.A.We.push(b)};a.lj=function(c,b){c.g=c.g||
{};c.g.type|=a.Ub.fh;c.g.qg={Uj:b,filter:0}};a.nj=function(c){var b=$.Di.Fi;c.g=c.g||{};c.g.type|=a.Ub.ih;c.g.sj={filter:b}};a.prototype.Wb=p;a.prototype.mh=p;a.prototype.ie=function(a){if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.nh(a,d,f,e),f.g&&this.nh(a,f,d,b))}};a.prototype.nh=function(c,b,d,e){if(b.g.type&a.Ub.ag){var f=new Me;Wd(c,f);f=f.N;c.Q==e&&(f=f.Db());if(f.y<-a.vb&&b.g.A.Ye)for(e=0;e<b.g.A.Ye.length;e++)b.g.A.Ye[e](c);else if(f.y>a.vb&&b.g.A.ve)for(e=
0;e<b.g.A.ve.length;e++)b.g.A.ve[e](c);if(f.x>a.vb&&b.g.A.Fe)for(e=0;e<b.g.A.Fe.length;e++)b.g.A.Fe[e](c);else if(f.x<-a.vb&&b.g.A.Ve)for(e=0;e<b.g.A.Ve.length;e++)b.g.A.Ve[e](c)}b.g.type&a.Ub.fh&&d.g&&d.g.type&a.Ub.ih&&(b.g.qg.filter==0||b.g.qg.filter&d.g.sj.filter)&&Nf(this.ya.q,d,b.g.qg.Uj)};a.prototype.Gd=function(a){if(a.Cd){for(var b=0;b<a.Cd.length;b++){var d=a.Cd[b];Oa(d.g.uc.ud,a.Q);Oa(d.g.uc.ud,a.V)}a.Cd=p}if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.oh(a,
d,e),f.g&&this.oh(a,f,b))}};a.prototype.oh=function(c,b,d){if(b.g.type&a.Ub.ag&&b.g.A.zf){var e=new Me;Wd(c,e);e=e.N;c.Q==d&&(e=e.Db());if(e.y<-a.vb&&b.g.A.Ze)for(d=0;d<b.g.A.Ze.length;d++)b.g.A.Ze[d](c);else if(e.y>a.vb&&b.g.A.we)for(d=0;d<b.g.A.we.length;d++)b.g.A.we[d](c);if(e.x>a.vb&&b.g.A.Ge)for(d=0;d<b.g.A.Ge.length;d++)b.g.A.Ge[d](c);else if(e.x<-a.vb&&b.g.A.We)for(d=0;d<b.g.A.We.length;d++)b.g.A.We[d](c)}};a.prototype.se=p;a.prototype.qe=p;a.prototype.$a=function(a,b){return X(this.ya.q,a,
b,n)};a.prototype.Qc=function(c,b,d){c=X(this.ya.q,c,b,n,p,p);if(d===m||d===p)d=a.S.tb|a.S.ld|a.S.md;a.wg(c,d);return c};a.prototype.kj=function(c,b){var d=this;a.Qd(c,function(){Mf(d.ya.q,c)},b,p)};a.prototype.ye=function(c,b){var d,e=X(this.ya.q,c,b,n,p,p);if(d===m||d===p)d=a.S.tb;this.kj(e,d);return e};a.prototype.Vi=function(c,b,d){c=X(this.ya.q,c,b,n,p,p);a.lj(c,d);return c}})($);function ng(){bg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=3;this.length=1;this.Eh=this.Kh=0}y(ng,bg);ng.prototype.U=function(a,c,b,d){this.s=a;this.u=c;this.Ua.m(Ec(this.s.e,b));this.Va.m(Ec(this.u.e,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.Eh=this.Kh=0};ng.prototype.Jc=function(){return new Ye(this)};function og(a){P.call(this,a);this.Xc=F(0,0);this.Yc=F(0,0);this.j=Z(0,0,0);this.t=new gg;this.Xc.m(a.Ua);this.Yc.m(a.Va);this.Qe=a.gd}y(og,P);u=og.prototype;u.nc=function(){return Q(this.w,this.Xc)};u.oc=function(){return Q(this.z,this.Yc)};
u.Tb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.Xc.x-d.c.r.x,g=this.Xc.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.Yc.x-e.c.r.x,i=this.Yc.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.k;var b=e.k,j=d.v,k=e.v;this.t.a.x=c+b+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=c+b+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;a.Ed?(this.j.x*=a.ab,this.j.y*=a.ab,this.j.l*=
a.ab,d.f.x-=c*this.j.x,d.f.y-=c*this.j.y,d.p-=j*(f*this.j.y-g*this.j.x+this.j.l),e.f.x+=b*this.j.x,e.f.y+=b*this.j.y,e.p+=k*(h*this.j.y-i*this.j.x+this.j.l)):this.j.I()};
u.Fb=function(){var a,c=0,b=this.w,d=this.z,e=b.f,f=b.p,g=d.f,h=d.p,i=b.k,j=d.k,k=b.v,l=d.v;a=b.e.d;var r=this.Xc.x-b.c.r.x,o=this.Xc.y-b.c.r.y,c=a.a.x*r+a.b.x*o,o=a.a.y*r+a.b.y*o,r=c;a=d.e.d;var v=this.Yc.x-d.c.r.x,s=this.Yc.y-d.c.r.y,c=a.a.x*v+a.b.x*s,s=a.a.y*v+a.b.y*s,v=c;a=g.x-h*s-e.x+f*o;var c=g.y+h*v-e.y-f*r,x=h-f,A=Z(0,0,0);ig(this.t,A,-a,-c,-x);this.j.Pb(A);e.x-=i*A.x;e.y-=i*A.y;f-=k*(r*A.y-o*A.x+A.l);g.x+=j*A.x;g.y+=j*A.y;h+=l*(v*A.y-s*A.x+A.l);fg(A);b.p=f;d.p=h};
u.Eb=function(){var a,c=0,b=this.w,d=this.z;a=b.e.d;var e=this.Xc.x-b.c.r.x,f=this.Xc.y-b.c.r.y,c=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=c;a=d.e.d;var g=this.Yc.x-d.c.r.x,h=this.Yc.y-d.c.r.y,c=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=c;a=b.k;var c=d.k,i=b.v,j=d.v,k=d.c.h.x+g-b.c.h.x-e,l=d.c.h.y+h-b.c.h.y-f,r=d.c.o-b.c.o-this.Qe,o=Math.sqrt(k*k+l*l),v=Math.abs(r);o>0.05&&(i*=1,j*=1);this.t.a.x=a+c+f*f*i+h*h*j;this.t.b.x=-f*e*i-h*g*j;this.t.L.x=-f*i-h*j;this.t.a.y=this.t.b.x;this.t.b.y=a+c+e*e*i+g*g*j;this.t.L.y=
e*i+g*j;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=i+j;var s=Z(0,0,0);ig(this.t,s,-k,-l,-r);b.c.h.x-=a*s.x;b.c.h.y-=a*s.y;b.c.o-=i*(e*s.y-f*s.x+s.l);d.c.h.x+=c*s.x;d.c.h.y+=c*s.y;d.c.o+=j*(g*s.y-h*s.x+s.l);fg(s);R(b);R(d);return o<=0.005&&v<=Fc};function pg(){bg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=8;this.gd=0}y(pg,bg);pg.prototype.U=function(a,c,b){this.s=a;this.u=c;this.Ua.m(Ec(this.s.e,b));this.Va.m(Ec(this.u.e,b));this.gd=this.u.Sb()-this.s.Sb()};pg.prototype.Jc=function(){return new og(this)};function qg(a){P.call(this,a);this.fb=new uc;this.ne=new uc;this.oe=new uc;this.pe=new uc;this.Fa=Z(0,0,0);this.Ib=F(0,0);this.mc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.j=Z(0,0,0);this.t=new gg;this.F.m(a.Ua);this.G.m(a.Va);this.Qe=a.gd;this.j.I();this.za=0;this.Jf=a.tj;this.Pg=a.Yj;this.Ij=a.Mj;this.Lg=a.Rg;this.yd=a.vf;this.Je=a.sg;this.$=0}y(qg,P);u=qg.prototype;u.nc=function(){return Q(this.w,this.F)};u.oc=function(){return Q(this.z,this.G)};function rg(a){return a.z.c.o-a.w.c.o-a.Qe}
u.Tb=function(a){var c=this.w,b=this.z,d,e=0;d=c.e.d;var f=this.F.x-c.c.r.x,g=this.F.y-c.c.r.y,e=d.a.x*f+d.b.x*g,g=d.a.y*f+d.b.y*g,f=e;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.k;var e=b.k,j=c.v,k=b.v;this.t.a.x=d+e+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=d+e+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;this.gc=1/(j+k);if(!this.Je)this.za=0;if(this.yd){var l=
b.c.o-c.c.o-this.Qe;if(Math.abs(this.Pg-this.Jf)<2*Fc)this.$=3;else if(l<=this.Jf){if(this.$!=1)this.j.l=0;this.$=1}else if(l>=this.Pg){if(this.$!=2)this.j.l=0;this.$=2}else this.$=0,this.j.l=0}else this.$=0;a.Ed?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x,l=this.j.y,c.f.x-=d*a,c.f.y-=d*l,c.p-=j*(f*l-g*a+this.za+this.j.l),b.f.x+=e*a,b.f.y+=e*l,b.p+=k*(h*l-i*a+this.za+this.j.l)):(this.j.I(),this.za=0)};
u.Fb=function(a){var c=this.w,b=this.z,d=0,e=d=0,f=0,g=0,h=0,i=c.f,j=c.p,k=b.f,l=b.p,r=c.k,o=b.k,v=c.v,s=b.v;if(this.Je&&this.$!=3)e=this.gc*-(l-j-this.Lg),f=this.za,g=a.ja*this.Ij,this.za=K(this.za+e,-g,g),e=this.za-f,j-=v*e,l+=s*e;if(this.yd&&this.$!=0){var a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,a=k.x+-l*h-i.x- -j*f,x=k.y+l*g-i.y-j*e;ig(this.t,this.Fa,-a,-x,-(l-j));
if(this.$==3)this.j.Pb(this.Fa);else if(this.$==1){if(d=this.j.l+this.Fa.l,d<0)hg(this.t,this.mc,-a,-x),this.Fa.x=this.mc.x,this.Fa.y=this.mc.y,this.Fa.l=-this.j.l,this.j.x+=this.mc.x,this.j.y+=this.mc.y,this.j.l=0}else if(this.$==2&&(d=this.j.l+this.Fa.l,d>0))hg(this.t,this.mc,-a,-x),this.Fa.x=this.mc.x,this.Fa.y=this.mc.y,this.Fa.l=-this.j.l,this.j.x+=this.mc.x,this.j.y+=this.mc.y,this.j.l=0;i.x-=r*this.Fa.x;i.y-=r*this.Fa.y;j-=v*(e*this.Fa.y-f*this.Fa.x+this.Fa.l);k.x+=o*this.Fa.x;k.y+=o*this.Fa.y;
l+=s*(g*this.Fa.y-h*this.Fa.x+this.Fa.l)}else a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,hg(this.t,this.Ib,-(k.x+-l*h-i.x- -j*f),-(k.y+l*g-i.y-j*e)),this.j.x+=this.Ib.x,this.j.y+=this.Ib.y,i.x-=r*this.Ib.x,i.y-=r*this.Ib.y,j-=v*(e*this.Ib.y-f*this.Ib.x),k.x+=o*this.Ib.x,k.y+=o*this.Ib.y,l+=s*(g*this.Ib.y-h*this.Ib.x);c.f.m(i);c.p=j;b.f.m(k);b.p=l};
u.Eb=function(){var a=0,c,b=this.w,d=this.z,e=0,f=c=0,g=0,h=0;if(this.yd&&this.$!=0){var a=d.c.o-b.c.o-this.Qe,i=0;this.$==3?(a=K(a-this.Jf,-Gc,Gc),i=-this.gc*a,e=Math.abs(a)):this.$==1?(a-=this.Jf,e=-a,a=K(a+Fc,-Gc,0),i=-this.gc*a):this.$==2&&(a-=this.Pg,e=a,a=K(a-Fc,0,Gc),i=-this.gc*a);b.c.o-=b.v*i;d.c.o+=d.v*i;R(b);R(d)}c=b.e.d;i=this.F.x-b.c.r.x;a=this.F.y-b.c.r.y;f=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=f;c=d.e.d;var j=this.G.x-d.c.r.x,k=this.G.y-d.c.r.y,f=c.a.x*j+c.b.x*k,k=c.a.y*j+c.b.y*k,j=f,
g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a,l=g*g+h*h;c=Math.sqrt(l);var f=b.k,r=d.k,o=b.v,v=d.v;l>0.05*0.05&&(l=1/(f+r),g=l*-g,h=l*-h,b.c.h.x-=0.5*f*g,b.c.h.y-=0.5*f*h,d.c.h.x+=0.5*r*g,d.c.h.y+=0.5*r*h,g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a);this.ne.a.x=f+r;this.ne.b.x=0;this.ne.a.y=0;this.ne.b.y=f+r;this.oe.a.x=o*a*a;this.oe.b.x=-o*i*a;this.oe.a.y=-o*i*a;this.oe.b.y=o*i*i;this.pe.a.x=v*k*k;this.pe.b.x=-v*j*k;this.pe.a.y=-v*j*k;this.pe.b.y=v*j*j;this.fb.Jd(this.ne);this.fb.$f(this.oe);this.fb.$f(this.pe);
this.fb.te(sg,-g,-h);g=sg.x;h=sg.y;b.c.h.x-=b.k*g;b.c.h.y-=b.k*h;b.c.o-=b.v*(i*h-a*g);d.c.h.x+=d.k*g;d.c.h.y+=d.k*h;d.c.o+=d.v*(j*h-k*g);R(b);R(d);return c<=0.005&&e<=Fc};var sg=F(0,0);function tg(){bg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=1;this.Ua.I();this.Va.I();this.Rg=this.Mj=this.Yj=this.tj=this.gd=0;this.sg=this.vf=q}y(tg,bg);tg.prototype.U=function(a,c,b){this.s=a;this.u=c;this.Ua=Ec(this.s.e,b);this.Va=Ec(this.u.e,b);this.gd=this.u.Sb()-this.s.Sb()};tg.prototype.Jc=function(){return new qg(this)};function ug(){this.Jb=F(0,0);this.Kb=F(0,0)}ug.prototype.I=function(){this.Jb.I();this.nd=0;this.Kb.I();this.od=0};ug.prototype.i=function(a,c,b,d){c===m&&(c=0);d===m&&(d=0);this.Jb.m(a);this.nd=c;this.Kb.m(b);this.od=d};function vg(a){P.call(this,a);this.ec=F(0,0);this.fc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.ha=new ug;var c=a.Rd.D,b=a.Sd.D;this.ae=this.Bd=this.$d=this.Ad=p;var d=0,e=0;this.Aj=a.Rd.w;this.w=a.Rd.z;c==1?(this.Ad=a.Rd,this.ec.m(this.Ad.F),this.F.m(this.Ad.G),d=rg(this.Ad)):(this.$d=a.Rd,this.ec.m(this.$d.F),this.F.m(this.$d.G),d=kg(this.$d));this.Bj=a.Sd.w;this.z=a.Sd.z;b==1?(this.Bd=a.Sd,this.fc.m(this.Bd.F),this.G.m(this.Bd.G),e=rg(this.Bd)):(this.ae=a.Sd,this.fc.m(this.ae.F),this.G.m(this.ae.G),
e=kg(this.ae));this.ka=a.fd;this.Vd=d+this.ka*e;this.j=0}y(vg,P);u=vg.prototype;u.nc=function(){return Q(this.w,this.F)};u.oc=function(){return Q(this.z,this.G)};
u.Tb=function(a){var c=this.Aj,b=this.Bj,d=this.w,e=this.z,f=0,g=0,h=0,i=0,j=h=0,k=0;this.ha.I();this.Ad?(this.ha.nd=-1,k+=d.v):(c=c.e.d,g=this.$d.Zc,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=d.e.d,h=this.F.x-d.c.r.x,i=this.F.y-d.c.r.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Jb.i(-f,-g),this.ha.nd=-h,k+=d.k+d.v*h*h);this.Bd?(this.ha.od=-this.ka,k+=this.ka*this.ka*e.v):(c=b.e.d,g=this.ae.Zc,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=e.e.d,h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Kb.i(-this.ka*f,-this.ka*g),this.ha.od=-this.ka*h,k+=this.ka*this.ka*(e.k+e.v*h*h));this.t=k>0?1/k:0;a.Ed?(d.f.x+=d.k*this.j*this.ha.Jb.x,d.f.y+=d.k*this.j*this.ha.Jb.y,d.p+=d.v*this.j*this.ha.nd,e.f.x+=e.k*this.j*this.ha.Kb.x,e.f.y+=e.k*this.j*this.ha.Kb.y,e.p+=e.v*this.j*this.ha.od):this.j=0};
u.Fb=function(){var a=this.w,c=this.z,b=this.ha,d=a.f,e=a.p,f=c.f,g=c.p;e===m&&(e=0);g===m&&(g=0);b=-this.t*(b.Jb.x*d.x+b.Jb.y*d.y+b.nd*e+(b.Kb.x*f.x+b.Kb.y*f.y)+b.od*g);this.j+=b;a.f.x+=a.k*b*this.ha.Jb.x;a.f.y+=a.k*b*this.ha.Jb.y;a.p+=a.v*b*this.ha.nd;c.f.x+=c.k*b*this.ha.Kb.x;c.f.y+=c.k*b*this.ha.Kb.y;c.p+=c.v*b*this.ha.od};
u.Eb=function(){var a=this.w,c=this.z,b=0,d=0,b=this.Ad?rg(this.Ad):kg(this.$d),d=this.Bd?rg(this.Bd):kg(this.ae),b=-this.t*(this.Vd-(b+this.ka*d));a.c.h.x+=a.k*b*this.ha.Jb.x;a.c.h.y+=a.k*b*this.ha.Jb.y;a.c.o+=a.v*b*this.ha.nd;c.c.h.x+=c.k*b*this.ha.Kb.x;c.c.h.y+=c.k*b*this.ha.Kb.y;c.c.o+=c.v*b*this.ha.od;R(a);R(c);return n};function wg(){bg.call(this);this.type=6;this.Sd=this.Rd=p;this.fd=1}y(wg,bg);wg.prototype.U=function(a,c,b){this.Rd=a;this.s=a.w;this.Sd=c;this.u=c.w;this.fd=b};wg.prototype.Jc=function(){return new vg(this)};var xg={};
(function(a){var c,b=new E(350,30),d=new E(1E3,300),e,f,g,h;a.yb=function(c,e,f){g=new Uf(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-15);a.wb(c,f);a.Ah(g,new E(5,b.y));Vf(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Pf(g.Xb,c,r,d,l);f=new vb("game");z(f,new mg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");z(e,c.Ca.Qf,b?87:38,q,q,q);z(e,c.Ca.de,b?65:37,q,q,q);z(e,c.Ca.Pf,b?83:40,q,q,q);z(e,c.Ca.ee,b?68:39,q,q,q)};a.Ah=function(a,
b){var c=b.ca();c.y-=10;for(var d=new E(2.5,0.1),e=p,f=0;f<30;f++){c.x+=d.x/2;var g;g=f!=0&&f!=29?Ff(a.q,d,c,n):X(a.q,d,c,n);if(e!=p){var h=new tg,x=F(V(e.body).x+V(g.body).x,V(e.body).y+V(g.body).y);x.qc(0.5);h.U(e.body,g.body,x);W(a.q.ga,h)}e=g;c.x+=d.x/2;c.x+=0.5}};a.cf=function(a,b){xb(f,b)};a.Ue=function(a,b){xb(f,b);xb(e,b)};a.Te=function(){kc(g.viewport,V(c.body))}})(xg);da("bridge.init",xg.yb);var yg={};
(function(a){var c,b=new E(350,30),d=new E(600,300),e,f,g,h,i=new E(0,454),j=new E(178,326),k=new E(2,124),l=new E(354,54),r=new E(0,58),o=new E(290,54),v=new E(178,326),s=new E(0,0),x=new E(32,84),A=new E(354,54),wa=new E(0,90),la=new E(0,0),xa=new E(2,158),U=new E(158,388),M=new E(190,388),ea=new E(158,356),Bg=new E(190,356),Cg=new E(158,356),Dg=new E(190,356),Eg=new E(55,380),Fg=new E(10,396),Gg=new E(466,168),Hg=new E(452,136),Ig=new E(466,104),Jg=new E(300,424),Kg=new E(300,352),Lg=new E(364,
424),Mg=new E(364,384),Ng=new E(332,352),Og=new E(332,320),Pg=new E(396,352),Qg=new E(396,320),Rg=new E(364,352),Sg=new E(362,264),Tg=new E(160,64);a.yb=function(c,e,f){g=new Uf(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-7);a.wb(c,f);a.Bh(g,h,new E(0,b.y),c);f=new E(d.x/20,d.y/20);f=Y(g.q,f,new E(0,0),-1);H(f,"graphics/sky.png");f.display.Rf=1;Vf(g)};a.wb=function(a,b){var d=new E(0,0),i=new E(21,47),j=new E(i.x/20,i.y/20);c=h.wb(j,a);Pf(g.Xb,c,j,d,i);f=new vb("game");z(f,new mg(function(){g.paused=
!g.paused},"Pause",q),80,q,q,q);e=new vb("player");z(e,c.Ca.Qf,b?87:38,q,q,q);z(e,c.Ca.de,b?65:37,q,q,q);z(e,c.Ca.Pf,b?83:40,q,q,q);z(e,c.Ca.ee,b?68:39,q,q,q)};a.Bh=function(b,c,d,e){for(var f=new E(1.6,1.6),g=new E(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new E(g.x,g.y-f.y*(d.length-1)),h=0;h<d.length;h++)for(var i=0;i<d[h].length;i++)a.Xi(b,c,d[h][i],new E(i,h),g,f,e)};a.Xi=function(a,b,c,d,e,f,g){var h=p,D=p;switch(c){case " ":break;case "-":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=i;break;case "=":h=b.$a(f,new E(e.x+d.x*
f.x,e.y+d.y*f.y));D=k;break;case "O":h=b.ye(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Qd(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",r)},$.S.tb);D=l;break;case "@":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));h.xh=8;h.mg=0;$.Qd(h,function(){h.mg++;var c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-h.mg/h.xh)*f.y));H(c,"graphics/smbsheet.gif",r);h.mg==h.xh&&(Mf(a.q,h),c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*
f.y)),H(c,"graphics/smbsheet.gif",o))},$.S.tb);D=v;break;case "#":h=b.ye(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=j;break;case "1":h=b.ye(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Kd|$.S.ld|$.S.md);$.Qd(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",xa)},$.S.tb);D=la;break;case "*":h=b.ye(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Kd|$.S.ld|$.S.md);$.Qd(h,function(){var c=b.$a(f,new E(e.x+
d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",x)},$.S.tb);D=s;break;case "M":h=b.ye(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Qd(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",o);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",wa)},$.S.tb);D=A;break;case "[":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=U;break;case "]":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=
M;break;case "<":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=ea;break;case ">":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Bg;break;case "{":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Cg;break;case "}":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Dg;break;case "T":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Eg;break;case "G":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Fg;break;case "|":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Gg;break;case "F":h=Y(a.q,f,new E(e.x+d.x*f.x+f.x/2,e.y+d.y*f.y),1);D=Hg;
break;case "o":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ig;break;case "+":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Jg;break;case "^":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Kg;break;case "8":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Lg;break;case "u":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Mg;break;case "R":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Og;break;case "r":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ng;break;case "L":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Qg;break;
case "l":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Pg;break;case "&":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Rg;break;case "$":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));D=Sg;break;case "x":h=b.Vi(f,new E(e.x+d.x*f.x,e.y+d.y*f.y),g);D=Tg;break;default:throw"Invalid type: "+c;}h!==p&&"graphics/smbsheet.gif"!==p&&D!==p&&H(h,"graphics/smbsheet.gif",D)};a.cf=function(a,b){xb(f,b)};a.Ue=function(a,b){xb(f,b);xb(e,b)};a.Te=function(){kc(g.viewport,V(c.body))}})(yg);da("mario.init",yg.yb);var zg={};
(function(a){var c,b=new E(3500,100),d=new E(1024,600),e,f,g,h;a.yb=function(c,e,f){g=new Uf(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(5,b.y-7-24);a.wb(c,f);yg.Bh(g,h,new E(0,b.y),c);f=0;f++;xg.Ah(g,new E(15,b.y-(3.2+f*24)));a.Yi(++f);a.$i(++f);a.Zi(f);a.Wi();Vf(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Pf(g.Xb,c,r,d,l);f=new vb("game");z(f,new mg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");z(e,c.Ca.Qf,b?87:38,q,q,q);z(e,c.Ca.de,
b?65:37,q,q,q);z(e,c.Ca.Pf,b?83:40,q,q,q);z(e,c.Ca.ee,b?68:39,q,q,q)};a.Zi=function(a){for(var c=new E(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Qc(c,new E(4,b.y-f-e)),h.Qc(c,new E(10,b.y-f-e));h.Qc(new E(b.x-15,0.25),new E((b.x-15)/2+15,b.y-e-24))}h.Qc(new E(1,1),new E(12,b.y-3.2-3.5),$.S.ld);h.Qc(new E(1,1),new E(15,b.y-3.2-3.5),$.S.md);h.Qc(new E(1,1),new E(18,b.y-3.2-3.5),$.S.Kd);h.Qc(new E(1,1),new E(21,b.y-3.2-3.5),$.S.tb);a=h.Qc(new E(1,1),new E(24,b.y-3.2-3.5),$.S.tb).body;
gf(a,a.e.position,Math.PI/2)};a.$i=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,X(g.q,new E(3,0.3),new E(a.x,a.y-1.5),n,{Za:c},p),a.x+=3.5};a.Yi=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new tg,e=new pg;a.x+=5;var f={Za:Math.random()*Math.PI},h=a.y-7.5,v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Ff(g.q,new E(10,1),new E(a.x,h),n,{Da:f});H(s,"graphics/spinner.png");f.Za+=Math.PI/2;f=Ff(g.q,new E(10,1),new E(a.x,h),n,{Da:f});
H(f,"graphics/spinner.png");d.U(v.body,s.body,V(v.body));W(g.q.ga,d);d.U(v.body,f.body,V(v.body));W(g.q.ga,d);e.U(s.body,f.body,V(s.body));W(g.q.ga,e);a.x+=7}for(c=0;c<1;c++)f={Rc:n},d=new ng,a.x+=2,h=a.y-6,s=Ff(g.q,new E(3,0.2),new E(a.x+0.1,h+2),n,{Da:f}),e=Ff(g.q,new E(3,0.2),new E(a.x+0.1,h-2),n,{Da:f}),v=Ff(g.q,new E(0.2,3),new E(a.x-2,h+0.1),n,{Da:f}),f=Ff(g.q,new E(0.2,3),new E(a.x+2,h+0.1),n,{Da:f}),d.U(s.body,e.body,V(s.body),V(e.body)),W(g.q.ga,d),d.U(s.body,v.body,V(s.body),V(v.body)),
W(g.q.ga,d),d.U(s.body,f.body,V(s.body),V(f.body)),W(g.q.ga,d),d.U(e.body,v.body,V(e.body),V(v.body)),W(g.q.ga,d),d.U(e.body,f.body,V(e.body),V(f.body)),W(g.q.ga,d),d.U(v.body,f.body,V(v.body),V(f.body)),W(g.q.ga,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,f={Rc:n},d=new cg,a.x+=1.5,v=Ff(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),a.x+=6,f=Ff(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),h=V(v.body).ca(),h.y-=3,Y(g.q,new E(0.3,0.3),h),s=V(f.body).ca(),s.y-=3,Y(g.q,new E(0.3,0.3),s),d.U(v.body,f.body,h,s,V(v.body),
V(f.body),(c+1)/2),W(g.q.ga,d),a.x+=3.5;for(c=0;c<2;c++){var d=new wg,x=new tg;new lg;f={Za:0};a.x+=2;for(var e=p,A=0;A<2;A++)h=a.y-(A+1)*4,v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Ff(g.q,new E(4,0.2),new E(a.x,h),n,{Da:f}),x.U(v.body,s.body,V(v.body)),h=W(g.q.ga,x),e!==p&&(d.U(h,e,A),W(g.q.ga,d)),e=h;h=a.y-12;v=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f});s=Ff(g.q,new E(0.4,0.2),new E(a.x,h),n,{Da:f});f=new lg;f.U(v.body,s.body,V(v.body),new E(Math.random(),Math.random()));f.vf=n;f.Sh=
-1;f.ti=1;h=W(g.q.ga,f);d.U(h,e,0.5);W(g.q.ga,d);a.x+=4}};a.Wi=function(){for(var a={type:2,Rc:q},c={Gc:1.25},d=new ce(0.25),e=new E(0.5,0.5),f=0;f<5;f++){var h=f*5%(b.x-10),h=new E(h+f%20/20+4.5,15+f%20);g.q.Hb(e,h,n,d,{Da:a,sc:c})}d=new O;bd(d,0.25,0.25);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+5)%20/20+4.5,15+(f+5)%20),a.Za=f%17/17,g.q.Hb(e,h,n,d,{Da:a,sc:c});d=new O;f=[new E(-0.5,-0.5),new E(0.5,-0.5),new E(-0.5,0.5)];ad(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+10)%20/20+4.5,15+(f+
10)%20),a.Za=f%22/22,g.q.Hb(e,h,n,d,{Da:a,sc:c});d=new O;f=[new E(-Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,Math.random()*0.5),new E(-Math.random()*0.5,Math.random()*0.5)];ad(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,sc:c});d=new O;f=[new E(-0.5,-0.5),new E(0,-0.5),new E(0.5,0),new E(0.5,0.5),new E(0,0.3)];ad(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/
20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,sc:c})};a.cf=function(a,b){xb(f,b)};a.Ue=function(a,b){xb(f,b);xb(e,b)};a.Te=function(){kc(g.viewport,V(c.body))}})(zg);da("test.init",zg.yb);var Ag={};
(function(a){var c,b=new E(5,10),d=new E(100,200),e,f,g,h;a.yb=function(c,e,f){g=new Uf(a,c,b,$.Kc.hf,d,20,e);h=new $(g);c=new E(2,2);a.aj();a.wb(c,f);Vf(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Pf(g.Xb,c,r,d,l);f=new vb("game");z(f,new mg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");z(e,c.Ca.Qf,b?87:38,q,q,q);z(e,c.Ca.de,b?65:37,q,q,q);z(e,c.Ca.Pf,b?83:40,q,q,q);z(e,c.Ca.ee,b?68:39,q,q,q)};a.aj=function(){new E(3,0.25);h.$a(new E(b.x,
0.5),new E(b.x/2,b.y-0.25));a.Ti(new E(b.x,6),new E(0,b.y-0.25))};a.Ti=function(a,b){X(g.q,new E(0.25,a.y),new E(b.x+0,b.y-a.y/2),n,p,p);X(g.q,new E(0.25,a.y),new E(b.x+a.x-0.125,b.y-a.y/2),n,p,p);for(var c=new ce(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var f=0;f<a.y/2;f+=0.3){var h=g.q.Hb(new E(0.3,0.3),new E(b.x+e-d++%2*0.15,b.y-f),n,c,{sc:{ze:0.1,Gc:0.1,xb:0.1}}),s=Math.random();s<=0.25?H(h,"graphics/ball-red.png"):s<=0.5?H(h,"graphics/ball-green.png"):s<=0.75?H(h,"graphics/ball-yellow.png"):H(h,
"graphics/ball-blue.png")}};a.cf=function(a,b){xb(f,b)};a.Ue=function(a,b){xb(f,b);xb(e,b)};a.Te=function(){kc(g.viewport,V(c.body))}})(Ag);da("pit.init",Ag.yb);})();
