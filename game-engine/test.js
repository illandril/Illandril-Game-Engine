(function(){var m=void 0,n=true,o=null,q=false;function aa(){return function(){}}function ba(a){return function(c){this[a]=c}}function t(a){return function(){return this[a]}}function ca(a){return function(){return a}}var v,w=this;function da(a,c){var b=a.split("."),d=w;!(b[0]in d)&&d.execScript&&d.execScript("var "+b[0]);for(var e;b.length&&(e=b.shift());)!b.length&&c!==m?d[e]=c:d=d[e]?d[e]:d[e]={}}function fa(){}
function ga(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ia=0;function y(a,c){function b(){}b.prototype=c.prototype;a.ni=c.prototype;a.prototype=new b};function ja(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",i=e[g]||"",j=RegExp("(\\d*)(\\D*)","g"),k=RegExp("(\\d*)(\\D*)","g");do{var l=j.exec(h)||["","",""],r=k.exec(i)||["","",""];if(l[0].length==0&&r[0].length==0)break;b=ka(l[1].length==0?0:parseInt(l[1],10),r[1].length==0?0:parseInt(r[1],10))||ka(l[2].length==0,r[2].length==0)||ka(l[2],r[2])}while(b==
0)}return b}function ka(a,c){if(a<c)return-1;else if(a>c)return 1;return 0};var ma,na,oa,pa;function qa(){return w.navigator?w.navigator.userAgent:o}pa=oa=na=ma=q;var ra;if(ra=qa()){var sa=w.navigator;ma=ra.indexOf("Opera")==0;na=!ma&&ra.indexOf("MSIE")!=-1;oa=!ma&&ra.indexOf("WebKit")!=-1;pa=!ma&&!oa&&sa.product=="Gecko"}var ta=na,ua=pa,va=oa,ya=w.navigator,za=(ya&&ya.platform||"").indexOf("Mac")!=-1,Aa;
a:{var Ba="",Ca;if(ma&&w.opera)var Da=w.opera.version,Ba=typeof Da=="function"?Da():Da;else if(ua?Ca=/rv\:([^\);]+)(\)|;)/:ta?Ca=/MSIE\s+([^\);]+)(\)|;)/:va&&(Ca=/WebKit\/(\S+)/),Ca)var Ea=Ca.exec(qa()),Ba=Ea?Ea[1]:"";if(ta){var Fa,Ga=w.document;Fa=Ga?Ga.documentMode:m;if(Fa>parseFloat(Ba)){Aa=String(Fa);break a}}Aa=Ba}var Ha={},Ia={};var Ja,Ka={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",93:"context",
96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",187:"equals",188:",",190:".",191:"/",220:"\\",224:"win"};var La=Array.prototype,Ma=La.indexOf?function(a,c,b){return La.indexOf.call(a,c,b)}:function(a,c,b){b=b==o?0:b<0?Math.max(0,a.length+b):b;if(typeof a=="string")return typeof c!="string"||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1};function Na(a,c){Ma(a,c)>=0||a.push(c)}function Oa(a,c){var b=Ma(a,c);b>=0&&La.splice.call(a,b,1)};ta&&(Ia[9]||(Ia[9]=ta&&document.documentMode&&document.documentMode>=9));ta&&(Ha["8"]||(Ha["8"]=ja(Aa,"8")>=0));function Pa(){}Pa.prototype.Gh=q;Pa.prototype.Pd=function(){if(!this.Gh)this.Gh=n,this.Qd()};Pa.prototype.Qd=function(){this.hj&&Qa.apply(o,this.hj)};function Qa(a){for(var c=0,b=arguments.length;c<b;++c){var d=arguments[c],e=ga(d);e=="array"||e=="object"&&typeof d.length=="number"?Qa.apply(o,d):d&&typeof d.Pd=="function"&&d.Pd()}};function Ra(a,c){this.type=a;this.currentTarget=this.target=c}y(Ra,Pa);Ra.prototype.Qd=function(){delete this.type;delete this.target;delete this.currentTarget};Ra.prototype.Vg=q;Ra.prototype.bk=n;function Sa(a){Sa[" "](a);return a}Sa[" "]=fa;function Ta(a,c){a&&this.yb(a,c)}y(Ta,Ra);v=Ta.prototype;v.target=o;v.relatedTarget=o;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=q;v.altKey=q;v.shiftKey=q;v.metaKey=q;v.Zj=q;v.Hh=o;
v.yb=function(a,c){var b=this.type=a.type;Ra.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(ua){var e;a:{try{Sa(d.nodeName);e=n;break a}catch(f){}e=q}e||(d=o)}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==m?a.offsetX:a.layerX;this.offsetY=a.offsetY!==m?a.offsetY:a.layerY;this.clientX=a.clientX!==m?a.clientX:a.pageX;this.clientY=a.clientY!==m?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Zj=za?a.metaKey:a.ctrlKey;this.state=a.state;this.Hh=a;delete this.bk;delete this.Vg};v.Qd=function(){Ta.ni.Qd.call(this);this.relatedTarget=this.currentTarget=this.target=this.Hh=o};function Ua(){}var Va=0;v=Ua.prototype;v.key=0;v.ke=q;v.wh=q;v.yb=function(a,c,b,d,e,f){if(ga(a)=="function")this.Ph=n;else if(a&&a.handleEvent&&ga(a.handleEvent)=="function")this.Ph=q;else throw Error("Invalid listener argument");this.Je=a;this.mi=c;this.src=b;this.type=d;this.capture=!!e;this.Nh=f;this.wh=q;this.key=++Va;this.ke=q};v.handleEvent=function(a){return this.Ph?this.Je.call(this.Nh||this.src,a):this.Je.handleEvent.call(this.Je,a)};var Wa,Xa=(Wa="ScriptEngine"in w&&w.ScriptEngine()=="JScript")?w.ScriptEngineMajorVersion()+"."+w.ScriptEngineMinorVersion()+"."+w.ScriptEngineBuildVersion():"0";function Ya(a,c){this.ei=c;this.sd=[];if(a>this.ei)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var b=0;b<a;b++)this.sd.push(this.Hb())}y(Ya,Pa);Ya.prototype.pd=o;Ya.prototype.Fh=o;function Za(a){return a.sd.length?a.sd.pop():a.Hb()}function $a(a,c){a.sd.length<a.ei?a.sd.push(c):ab(a,c)}Ya.prototype.Hb=function(){return this.pd?this.pd():{}};
function ab(a,c){if(a.Fh)a.Fh(c);else{var b=ga(c);if(b=="object"||b=="array"||b=="function")if(ga(c.Pd)=="function")c.Pd();else for(var d in c)delete c[d]}}Ya.prototype.Qd=function(){Ya.ni.Qd.call(this);for(var a=this.sd;a.length;)ab(this,a.pop());delete this.sd};var bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb;
(function(){function a(){return{Pc:0,je:0}}function c(){return[]}function b(){function a(b){b=g.call(a.src,a.key,b);if(!b)return b}return a}function d(){return new Ua}function e(){return new Ta}var f=Wa&&!(ja(Xa,"5.7")>=0),g;gb=function(a){g=a};if(f){bb=function(){return Za(h)};cb=function(a){$a(h,a)};db=function(){return Za(i)};eb=function(a){$a(i,a)};fb=function(){return Za(j)};hb=function(){$a(j,b())};ib=function(){return Za(k)};jb=function(a){$a(k,a)};kb=function(){return Za(l)};lb=function(a){$a(l,
a)};var h=new Ya(0,600);h.pd=a;var i=new Ya(0,600);i.pd=c;var j=new Ya(0,600);j.pd=b;var k=new Ya(0,600);k.pd=d;var l=new Ya(0,600);l.pd=e}else bb=a,cb=fa,db=c,eb=fa,fb=b,hb=fa,ib=d,jb=fa,kb=e,lb=fa})();var mb={},nb={},ob={},pb={};
function qb(a,c,b,d,e){if(c)if(ga(c)=="array")for(var f=0;f<c.length;f++)qb(a,c[f],b,d,e);else{var d=!!d,g=nb;c in g||(g[c]=bb());g=g[c];d in g||(g[d]=bb(),g.Pc++);var g=g[d],h=a[ha]||(a[ha]=++ia),i;g.je++;if(g[h]){i=g[h];for(f=0;f<i.length;f++)if(g=i[f],g.Je==b&&g.Nh==e){if(g.ke)break;return}}else i=g[h]=db(),g.Pc++;f=fb();f.src=a;g=ib();g.yb(b,f,a,c,d,e);b=g.key;f.key=b;i.push(g);mb[b]=g;ob[h]||(ob[h]=db());ob[h].push(g);a.addEventListener?(a==w||!a.gj)&&a.addEventListener(c,f,d):a.attachEvent(c in
pb?pb[c]:pb[c]="on"+c,f)}else throw Error("Invalid event type");}function rb(a,c,b,d){if(!d.Bf&&d.hi){for(var e=0,f=0;e<d.length;e++)if(d[e].ke){var g=d[e].mi;g.src=o;hb(g);jb(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.hi=q;f==0&&(eb(d),delete nb[a][c][b],nb[a][c].Pc--,nb[a][c].Pc==0&&(cb(nb[a][c]),delete nb[a][c],nb[a].Pc--),nb[a].Pc==0&&(cb(nb[a]),delete nb[a]))}}
function sb(a,c,b,d,e){var f=1,c=c[ha]||(c[ha]=++ia);if(a[c]){a.je--;a=a[c];a.Bf?a.Bf++:a.Bf=1;try{for(var g=a.length,h=0;h<g;h++){var i=a[h];i&&!i.ke&&(f&=tb(i,e)!==q)}}finally{a.Bf--,rb(b,d,c,a)}}return Boolean(f)}
function tb(a,c){var b=a.handleEvent(c);if(a.wh){var d=a.key;if(mb[d]){var e=mb[d];if(!e.ke){var f=e.src,g=e.type,h=e.mi,i=e.capture;f.removeEventListener?(f==w||!f.gj)&&f.removeEventListener(g,h,i):f.detachEvent&&f.detachEvent(g in pb?pb[g]:pb[g]="on"+g,h);f=f[ha]||(f[ha]=++ia);h=nb[g][i][f];if(ob[f]){var j=ob[f];Oa(j,e);j.length==0&&delete ob[f]}e.ke=n;h.hi=n;rb(g,i,f,h);delete mb[d]}}}return b}
gb(function(a,c){if(!mb[a])return n;var b=mb[a],d=b.type,e=nb;if(!(d in e))return n;var e=e[d],f,g;Ja===m&&(Ja=ta&&!w.addEventListener);if(Ja){var h;if(!(h=c))a:{h="window.event".split(".");for(var i=w;f=h.shift();)if(i[f]!=o)i=i[f];else{h=o;break a}h=i}f=h;h=n in e;i=q in e;if(h){if(f.keyCode<0||f.returnValue!=m)return n;a:{var j=q;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(k){j=n}if(j||f.returnValue==m)f.returnValue=n}}j=kb();j.yb(f,this);f=n;try{if(h){for(var l=db(),r=j.currentTarget;r;r=r.parentNode)l.push(r);
g=e[n];g.je=g.Pc;for(var p=l.length-1;!j.Vg&&p>=0&&g.je;p--)j.currentTarget=l[p],f&=sb(g,l[p],d,n,j);if(i){g=e[q];g.je=g.Pc;for(p=0;!j.Vg&&p<l.length&&g.je;p++)j.currentTarget=l[p],f&=sb(g,l[p],d,q,j)}}else f=tb(b,j)}finally{if(l)l.length=0,eb(l);j.Pd();lb(j)}return f}d=new Ta(c,this);try{f=tb(b,d)}finally{d.Pd()}return f});var ub={61:187,59:186};ta||va&&(Ha["525"]||(Ha["525"]=ja(Aa,"525")>=0));function vb(a){this.id=wb++;this.name=a;this.controls={};this.Yg={};this.yh=[];this.Qf=this.kf=o}function xb(a,c){var b=0,d=yb==zb&&Ab==Bb&&Cb==Db,e;for(e in Eb){var f=d&&Eb[e].ui;b++;var g=Fb(e,yb,Ab,Cb);a.kf==o&&a.controls[g]!=o&&(!f||a.controls[g].jj)&&a.controls[g].execute(c)}if(b==1&&a.kf!=o)a.Qf!=o&&clearTimeout(a.Qf),a.Qf=setTimeout(function(){A(a,a.kf,g);a.kf=o;a.Qf=o},100)}
function A(a,c,b,d,e,f){var g=b;typeof b=="number"&&(g=Fb(b,d,e,f));b=[];d=a.controls[g];e=a.Yg[c.name];if(d!=o)if(e!=o)a.controls[e]=d,a.Yg[d.name]=e,b.push(new Gb(e,d));else throw"The specified key is already in use for a different function.";else e!=o&&delete a.controls[e];a.controls[g]=c;a.Yg[c.name]=g;b.push(new Gb(g,c));for(c=0;c<a.yh.length;c++)g=a.yh[c],g.rk.apply(g.Je,b||[],Hb(a))}function Hb(a){var c=[],b;for(b in a.controls)c.push(new Gb(b,a.controls[b]));return c}
var wb=0,Eb={},yb=q,zb={},Ab=q,Bb={},Cb=q,Db={};function Ib(a){var c=a.kk,c=ua&&a.keyCode in ub?ub[a.keyCode]:a.keyCode;return{keyCode:c,ctrlKey:a.ctrlKey,altKey:a.altKey,shiftKey:a.shiftKey}}function Fb(a,c,b,d){var e=Ka[a];e==o&&(e="KEY["+a+"]");return(c?"Ctrl + ":"")+(b?"Alt + ":"")+(d?"Shift + ":"")+e.toUpperCase()}qb(document,"keydown",function(a){a=Ib(a);a.keyCode!=16&&a.keyCode!=17&&a.keyCode!=18&&Eb[a.keyCode]==o&&(Eb[a.keyCode]={ui:q});yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});
qb(document,"keyup",function(a){a=Ib(a);delete Eb[a.keyCode];yb=a.ctrlKey;Ab=a.altKey;Cb=a.shiftKey});qb(document,"blur",function(){Eb={};Db=Cb=Bb=Ab=zb=yb=q});function Gb(a,c){this.key=this.key=a;this.action=this.action=c};function Jb(a){this.rg=q;this.id=a;this.lj=this.Lh=this.Zi=0;this.Ch={};this.Mh={};this.Jh={};this.Wi=[];Kb.push(this);Lb[a]=this}var Kb=[],Lb={};function B(a){var c=Lb[a];c==o&&(c=new Jb(a));return c}function C(a){a.Zi++;a.rg&&Mb(a,a.Ch,Nb(a))}function Ob(a){a.Lh++;a.rg&&Mb(a,a.Mh,Nb(a))}function Pb(a){a.lj++;a.rg&&Mb(a,a.Jh,Nb(a))}function Mb(a,c,b){for(var d=0;d<b.length;d++){var e=b[d];c[e]==o&&(a.Mh[e]=0,a.Jh[e]=0,a.Ch[e]=0,a.Wi.push(e));c[e]++}}
function Nb(a){var c=["unknown"];try{a.yk()}catch(b){a=b.stack.match(/[A-Za-z0-9]+\.js:\d+:\d+/g).splice(3),a.length!=0&&(c=a)}return c};function E(a,c){C(B("Box2D.Common.Math.b2Vec2"));this.x=a;this.y=c}var Qb=[];function F(a,c){Ob(B("Box2D.Common.Math.b2Vec2"));if(Qb.length>0){var b=Qb.pop();b.i(a,c);return b}return new E(a,c)}function G(a){a!=o&&(Pb(B("Box2D.Common.Math.b2Vec2")),Qb.push(a))}v=E.prototype;v.I=function(){this.y=this.x=0};v.i=function(a,c){this.x=a;this.y=c};v.m=function(a){this.x=a.x;this.y=a.y};v.Db=function(){return F(-this.x,-this.y)};v.hf=function(){this.x=-this.x;this.y=-this.y};
v.da=function(){return F(this.x,this.y)};v.Ob=function(a){this.x+=a.x;this.y+=a.y};v.hg=function(a){this.x-=a.x;this.y-=a.y};v.mc=function(a){this.x*=a;this.y*=a};function Rb(a){return Math.sqrt(Sb(a))}function Sb(a){return a.x*a.x+a.y*a.y}function Tb(a){var c=Rb(a);c<Number.MIN_VALUE||(c=1/c,a.x*=c,a.y*=c)};var Ub={},Vb=0;function Wb(){Vb--}function Xb(a){if(a.Zg===m||a.Zg===o)a.Zg={};return a.Zg};function Yb(){this.Mf=this.Gg=this.Wd=this.Lj=this.Zd=1;var a=this;this.Qj={oj:{clear:function(){a.sc.clearRect(0,0,a.sc.canvas.width,a.sc.canvas.height)}}};this.Xh=0}var Zb,$b,ac,bc,cc,dc;
(function(a){a.prototype.Nc=function(a,b){return"rgba("+((a&16711680)>>16)+","+((a&65280)>>8)+","+(a&255)+","+b+")"};a.prototype.Ki=function(){var a=ec;a===m&&(a=0);this.Xh=a};a.prototype.Mi=ba("sc");a.prototype.Ii=function(a){a===m&&(a=0);this.Zd=a};a.prototype.Li=function(){var a=1;a===m&&(a=0);this.Lj=a;this.sc.Dk=a};a.prototype.Ji=function(){var a=0.3;a===m&&(a=0);this.Gg=a};a.prototype.xi=function(a){var b=fc,d=this.sc,e=this.Zd;d.beginPath();d.strokeStyle=this.Nc(gc(b),this.Wd);d.moveTo(a[0].x*
e,a[0].y*e);for(b=1;b<4;b++)d.lineTo(a[b].x*e,a[b].y*e);d.lineTo(a[0].x*e,a[0].y*e);d.closePath();d.stroke()};a.prototype.zi=function(a,b,d){if(b){var e=this.sc,f=this.Zd;e.beginPath();e.strokeStyle=this.Nc(gc(d),this.Wd);e.fillStyle=this.Nc(gc(d),this.Gg);e.moveTo(a[0].x*f,a[0].y*f);for(d=1;d<b;d++)e.lineTo(a[d].x*f,a[d].y*f);e.lineTo(a[0].x*f,a[0].y*f);e.closePath();e.fill();e.stroke()}};a.prototype.yi=function(a,b,d,e){if(b){var f=this.sc,g=this.Zd,h=a.x*g,i=a.y*g;f.moveTo(0,0);f.beginPath();f.strokeStyle=
this.Nc(gc(e),this.Wd);f.fillStyle=this.Nc(gc(e),this.Gg);f.arc(h,i,b*g,0,Math.PI*2,n);f.moveTo(h,i);f.lineTo((a.x+d.x*b)*g,(a.y+d.y*b)*g);f.closePath();f.fill();f.stroke()}};a.prototype.Kc=function(a,b,d){var e=this.sc,f=this.Zd;e.strokeStyle=this.Nc(gc(d),this.Wd);e.beginPath();e.moveTo(a.x*f,a.y*f);e.lineTo(b.x*f,b.y*f);e.closePath();e.stroke()};a.prototype.Ai=function(){var a=hc,b=this.sc,d=this.Zd;b.beginPath();b.strokeStyle=this.Nc(16711680,this.Wd);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+
this.Mf*a.d.a.x)*d,(a.position.y+this.Mf*a.d.a.y)*d);b.strokeStyle=this.Nc(65280,this.Wd);b.moveTo(a.position.x*d,a.position.y*d);b.lineTo((a.position.x+this.Mf*a.d.b.x)*d,(a.position.y+this.Mf*a.d.b.y)*d);b.closePath();b.stroke()};Zb=1;$b=2;ac=4;bc=8;cc=16;dc=32})(Yb);function ic(a,c,b,d){if(Ub[a]==o)Vb++,Ub[a]=new Image,Ub[a].onload=Wb,Ub[a].src=a;this.url=a;this.ji=c||new E(0,0);this.Tf=b||new E(1,1);this.ri=d||new E(1,1);this.rb=new E(1,1)};function jc(){C(B("Box2D.Collision.b2AABB"));this.lowerBound=F(0,0);this.upperBound=F(0,0)}var kc=[];function lc(){Ob(B("Box2D.Collision.b2AABB"));if(kc.length>0){var a=kc.pop();a.I();return a}return new jc}jc.prototype.I=function(){this.lowerBound.i(0,0);this.upperBound.i(0,0)};function mc(a){return F((a.lowerBound.x+a.upperBound.x)/2,(a.lowerBound.y+a.upperBound.y)/2)}
function nc(a,c){var b;return b=(b=(b=(b=n&&a.lowerBound.x<=c.lowerBound.x)&&a.lowerBound.y<=c.lowerBound.y)&&c.upperBound.x<=a.upperBound.x)&&c.upperBound.y<=a.upperBound.y}jc.prototype.Md=function(a){return a.lowerBound.x-this.upperBound.x>0?q:a.lowerBound.y-this.upperBound.y>0?q:this.lowerBound.x-a.upperBound.x>0?q:this.lowerBound.y-a.upperBound.y>0?q:n};
function oc(a,c,b){a.lowerBound.x=Math.min(c.lowerBound.x,b.lowerBound.x);a.lowerBound.y=Math.min(c.lowerBound.y,b.lowerBound.y);a.upperBound.x=Math.max(c.upperBound.x,b.upperBound.x);a.upperBound.y=Math.max(c.upperBound.y,b.upperBound.y)};function pc(a,c,b,d,e){this.nc={};this.ya=a;this.Cb=d;this.Fc=new E(d.x/b,d.y/b);this.scale=b;this.Ea=new E(0,0);this.Af=new E(-1,-1);this.Yf=new jc;this.Yf.upperBound=this.Fc.da();this.Yf.upperBound.mc(1.25);qc(this,new E(0,0));a=document.getElementById(c);this.qd=document.createElement("span");if(e)a.innerHTML='<div style="width: '+this.Cb.x+"px; height: "+this.Cb.y/2+'px; background-color: #000; opacity: 0.15; position: absolute;"></div><div style="width: '+this.Cb.x/2+"px; height: "+this.Cb.y+
'px; background-color: #FFF; opacity: 0.15; position: absolute;"></div>',this.qd.innerHTML='<canvas id="'+c+'__DEBUG" class="debugViewport"></canvas>';this.qd.className="viewportContainer";this.qd.style.width=this.Cb.x+"px";this.qd.style.height=this.Cb.y+"px";this.display=document.createElement("span");this.display.className="viewport";this.qd.appendChild(this.display);a.appendChild(this.qd);this.zg=document.createElement("div");this.zg=rc(this,"Loading, please wait.");sc(this.zg);this.ki=rc(this,
"Paused");e?(this.gb=document.getElementById(c+"__DEBUG"),this.gb.width=this.ya.q.Ya.x*b,this.gb.height=this.ya.q.Ya.y*b,this.gb.style.marginRight="-"+this.gb.width+"px",this.gb.style.marginBottom="-"+this.gb.height+"px",c=new Yb,c.Mi(this.gb.getContext("2d")),c.Ii(b),c.Ji(),c.Li(),c.Ki(),this.ya.q.ga.Oa=c):this.gb=o}
function rc(a,c){var b=document.createElement("div");b.style.fontSize="40px";b.style.textAlign="center";b.style.verticalAlign="middle";b.style.backgroundColor="rgba(255,255,255,0.5)";b.style.color="black";b.style.position="relative";b.style.display="none";b.style.zIndex=100+tc;b.innerHTML=c;b.style.width=a.Cb.x+"px";b.style.height=a.Cb.y+"px";a.qd.appendChild(b);return b}function sc(a){if(a.style.display=="none")a.style.display="table-cell"}
function uc(a){if(a.style.display!="none")a.style.display="none"}function qc(a,c){a.Ea.x=c.x;a.Ea.y=c.y;if(a.Ea.x<a.Fc.x/2)a.Ea.x=a.Fc.x/2;else if(a.Ea.x>a.ya.q.Ya.x-a.Fc.x/2)a.Ea.x=a.ya.q.Ya.x-a.Fc.x/2;if(a.Ea.y<a.Fc.y/2)a.Ea.y=a.Fc.y/2;else if(a.Ea.y>a.ya.q.Ya.y-a.Fc.y/2)a.Ea.y=a.ya.q.Ya.y-a.Fc.y/2}
function vc(a,c){if(a.display==o)a.display={},a.display.K=new jc,a.nj=function(a){var c=this.body?this.body.e.position:this.position.da();return this.display.Pf==0?c:new E(c.x+(a.x-c.x)*this.display.Pf,c.y+(a.y-c.y)*this.display.Pf)},a.mj=function(){return this.body?this.body.Rb():this.Za},a.display.Pf=0,a.display.vi=0;a.display.size=c.da()}function H(a,c,b){a.display.Uf=new ic(c,b)}var tc=100,ec=0|ac|$b|Zb,wc=0;var xc=function(){var a=window.Ck||window.Fk||window.vk||window.zk||window.wk||function(a){window.setTimeout(a,1E3/60)};return function(){a.apply(window,arguments)}}();function yc(){this.Be=1;this.Ue=65535;this.ud=0}yc.prototype.da=function(){var a=new yc;a.Be=this.Be;a.Ue=this.Ue;a.ud=this.ud;return a};function zc(){this.filter=new yc;this.filter.Be=1;this.filter.Ue=65535;this.filter.ud=0;this.shape=o;this.xb=0.2;this.De=this.Ec=0;this.zf=q};function Ac(){C(B("Box2D.Common.Math.b2Mat22"));this.a=F(0,0);this.b=F(0,0);this.jf()}var Bc=[];function Cc(){Ob(B("Box2D.Common.Math.b2Mat22"));if(Bc.length>0){var a=Bc.pop();a.I();return a}return new Ac}function Dc(a){a!=o&&(Pb(B("Box2D.Common.Math.b2Mat22")),Bc.push(a))}function Ec(a){var c=Cc();c.i(a);return c}v=Ac.prototype;v.i=function(a){var c=Math.cos(a),a=Math.sin(a);this.a.i(c,a);this.b.i(-a,c)};v.da=function(){var a=Cc();a.Kd(this);return a};v.Kd=function(a){this.a.m(a.a);this.b.m(a.b)};
v.$f=function(a){this.a.Ob(a.a);this.b.Ob(a.b)};v.jf=function(){this.a.i(1,0);this.b.i(0,1)};v.I=function(){this.a.i(0,0);this.b.i(0,0)};v.Rb=function(){return Math.atan2(this.a.y,this.a.x)};v.xe=function(a,c,b){var d=this.a.x*this.b.y-this.b.x*this.a.y;d!==0&&(d=1/d);a.x=d*(this.b.y*c-this.b.x*b);a.y=d*(this.a.x*b-this.a.y*c);return a};function Fc(a,c){return a.x*c.x+a.y*c.y}function Gc(a,c){return a.x*c.y-a.y*c.x}function Hc(a){return F(1*a.y,-1*a.x)}function Ic(a,c){return F(a.a.x*c.x+a.b.x*c.y,a.a.y*c.x+a.b.y*c.y)}function Jc(a,c){return F(Fc(c,a.a),Fc(c,a.b))}function I(a,c){var b=Ic(a.d,c);b.x+=a.position.x;b.y+=a.position.y;return b}function Kc(a,c){var b=J(c,a.position),d=b.x*a.d.a.x+b.y*a.d.a.y;b.y=b.x*a.d.b.x+b.y*a.d.b.y;b.x=d;return b}function J(a,c){return F(a.x-c.x,a.y-c.y)}function K(a,c,b){return a<c?c:a>b?b:a};function L(a){if(!a)throw"Assertion Failed";}var Lc=2/180*Math.PI,Mc=8/180*Math.PI,Nc=0.5*Math.PI,Oc=Nc*Nc,Pc=2/180*Math.PI,Qc=Number.MIN_VALUE*Number.MIN_VALUE;function Rc(){C(B("Box2D.Collision.b2DistanceProxy"))}Rc.prototype.i=function(a){a.kh(this)};Rc.prototype.gf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.C;d++){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};Rc.prototype.pe=function(a){return this.n[this.gf(a)]};Rc.prototype.hh=t("C");function N(a,c){c===m&&(c=0);L(0<=c&&c<a.C);return a.n[c]};function Sc(){C(B("Box2D.Collision.b2DistanceOutput"));this.gc=F(0,0);this.hc=F(0,0);this.rd=0};function Tc(){C(B("Box2D.Collision.b2SimplexVertex"))}Tc.prototype.i=function(a){this.ua.m(a.ua);this.Ra.m(a.Ra);this.pa.m(a.pa);this.p=a.p;this.qa=a.qa;this.ra=a.ra};function Uc(){C(B("Box2D.Collision.b2Simplex"));this.R=new Tc;this.fa=new Tc;this.jb=new Tc;this.n=[this.R,this.fa,this.jb]}var Vc=[];function Wc(a){if(a.C==1)return 0;else if(a.C==2){var c=J(a.R.pa,a.fa.pa),a=Rb(c);G(c);return a}else if(a.C==3){var c=J(a.fa.pa,a.R.pa),b=J(a.jb.pa,a.R.pa),a=Gc(c,b);G(c);G(b);return a}else return L(q),0};function Xc(a,c,b){var d;if(Vc.length>0){d=Vc.pop();for(var e=0;e<d.n.length;e++){var f=d.n[e];f.ua!=o&&f.ua.i(0,0);f.Ra!=o&&f.Ra.i(0,0);f.pa!=o&&f.pa.i(0,0);f.qa=0;f.ra=0;f.p=0}}else d=new Uc;var e=d,f=b.Cc,g=b.Vf,h=b.Dc,i=b.Wf;L(0<=c.Od&&c.Od<=3);var j,k;e.C=c.Od;for(var l=e.n,r=0;r<e.C;r++){var p=l[r];p.qa=c.qa[r];p.ra=c.ra[r];j=N(f,p.qa);k=N(h,p.ra);G(p.ua);G(p.Ra);G(p.pa);p.ua=I(g,j);p.Ra=I(i,k);p.pa=J(p.Ra,p.ua);p.p=0}if(e.C>1&&(j=c.Uj,k=Wc(e),k<0.5*j||2*j<k||k<Number.MIN_VALUE))e.C=0;if(e.C==
0)p=l[0],p.qa=0,p.ra=0,j=N(f,0),k=N(h,0),G(p.ua),G(p.Ra),G(p.pa),p.ua=I(g,j),p.Ra=I(i,k),p.pa=J(p.Ra,p.ua),e.C=1;(d.C<1||d.C>3)&&L(q);for(e=0;e<20;){f=[];for(g=0;g<d.C;g++)f[g]={},f[g].qa=d.n[g].qa,f[g].ra=d.n[g].ra;if(d.C==2)g=d,i=g.R.pa,l=g.fa.pa,h=J(l,i),i=-(i.x*h.x+i.y*h.y),i<=0?(G(h),g.R.p=1,g.C=1):(l=l.x*h.x+l.y*h.y,G(h),l<=0?(g.fa.p=1,g.C=1,g.R.i(g.fa)):(h=1/(l+i),g.R.p=l*h,g.fa.p=i*h,g.C=2));else if(d.C==3){g=d;j=g.R.pa;k=g.fa.pa;var p=g.jb.pa,u=J(k,j),h=Fc(k,u),i=-Fc(j,u),s=J(p,j),x=Fc(j,
s),l=Fc(p,s),r=Gc(u,s);G(u);G(s);var u=-x,x=J(p,k),z=Fc(k,x),s=Fc(p,x);G(x);x=-z;z=r*Gc(k,p);p=r*Gc(p,j);j=r*Gc(j,k);i<=0&&u<=0?(g.R.p=1,g.C=1):h>0&&i>0&&j<=0?(l=1/(h+i),g.R.p=h*l,g.fa.p=i*l,g.C=2):l>0&&u>0&&p<=0?(h=1/(l+u),g.R.p=l*h,g.jb.p=u*h,g.C=2,g.fa.i(g.jb)):h<=0&&x<=0?(g.fa.p=1,g.C=1,g.R.i(g.fa)):l<=0&&s<=0?(g.jb.p=1,g.C=1,g.R.i(g.jb)):s>0&&x>0&&z<=0?(h=1/(s+x),g.fa.p=s*h,g.jb.p=x*h,g.C=2,g.R.i(g.jb)):(h=1/(z+p+j),g.R.p=z*h,g.fa.p=p*h,g.jb.p=j*h,g.C=3)}if(d.C==3)break;h=d;h.C==1?g=h.R.pa.Db():
h.C==2?(g=J(h.fa.pa,h.R.pa),i=h.R.pa.Db(),h=Gc(g,i),G(i),i=o,i=h>0?F(-1*g.y,1*g.x):Hc(g),G(g),g=i):(L(q),g=F(0,0));if(Sb(g)<Qc){G(g);break}G(d.n[d.C].ua);G(d.n[d.C].Ra);G(d.n[d.C].pa);h=g.Db();i=Jc(b.Vf.d,h);G(h);d.n[d.C].qa=b.Cc.gf(i);G(i);d.n[d.C].ua=I(b.Vf,N(b.Cc,d.n[d.C].qa));h=Jc(b.Wf.d,g);G(g);d.n[d.C].ra=b.Dc.gf(h);G(h);d.n[d.C].Ra=I(b.Wf,N(b.Dc,d.n[d.C].ra));d.n[d.C].pa=J(d.n[d.C].Ra,d.n[d.C].ua);e++;h=q;for(g=0;g<f.length;g++)if(d.n[d.C].qa==f[g].qa&&d.n[d.C].ra==f[g].ra){h=n;break}if(h)break;
d.C++}e=d;f=a.gc;g=a.hc;e.C==1?(f.m(e.R.ua),g.m(e.R.Ra)):e.C==2?(f.x=e.R.p*e.R.ua.x+e.fa.p*e.fa.ua.x,f.y=e.R.p*e.R.ua.y+e.fa.p*e.fa.ua.y,g.x=e.R.p*e.R.Ra.x+e.fa.p*e.fa.Ra.x,g.y=e.R.p*e.R.Ra.y+e.fa.p*e.fa.Ra.y):e.C==3?(g.x=f.x=e.R.p*e.R.ua.x+e.fa.p*e.fa.ua.x+e.jb.p*e.jb.ua.x,g.y=f.y=e.R.p*e.R.ua.y+e.fa.p*e.fa.ua.y+e.jb.p*e.jb.ua.y):L(q);e=J(a.gc,a.hc);a.rd=Rb(e);G(e);e=d;c.Uj=Wc(e);c.Od=e.C;f=e.n;for(g=0;g<e.C;g++)c.qa[g]=f[g].qa,c.ra[g]=f[g].ra;d!=o&&Vc.push(d);if(b.ti)c=b.Cc.U,b=b.Dc.U,a.rd>c+b&&
a.rd>Number.MIN_VALUE?(a.rd-=c+b,d=J(a.hc,a.gc),Tb(d),a.gc.x+=c*d.x,a.gc.y+=c*d.y,a.hc.x-=b*d.x,a.hc.y-=b*d.y,G(d)):(b=F(0,0),b.x=0.5*(a.gc.x+a.hc.x),b.y=0.5*(a.gc.y+a.hc.y),a.gc.x=a.hc.x=b.x,a.gc.y=a.hc.y=b.y,a.rd=0,G(b))};function Yc(){C(B("Box2D.Collision.b2SimplexCache"));this.qa=[0,0,0];this.ra=[0,0,0]};function Zc(){C(B("Box2D.Collision.b2DistanceInput"))};function $c(){C(B("Box2D.Collision.Shapes.b2Shape"));this.U=0.005}$c.prototype.i=function(a){this.U=a.U};function ad(){C(B("Box2D.Collision.Shapes.b2MassData"));this.zc=0;this.Oc=F(0,0);this.Jd=0}var bd=[];function cd(){Ob(B("Box2D.Collision.Shapes.b2MassData"));if(bd.length>0){var a=bd.pop();a.zc=0;a.Oc.I();a.Jd=0;return a}return new ad};function dd(a,c){C(B("Box2D.Common.Math.b2Transform"));this.position=F(0,0);this.d=new Ac;a&&this.position.m(a);c&&this.d.Kd(c)}dd.prototype.T=function(a,c){this.position.m(a);this.d.Kd(c)};dd.prototype.jf=function(){this.position.I();this.d.jf()};dd.prototype.i=function(a){this.position.m(a.position);this.d.Kd(a.d)};dd.prototype.Rb=function(){return Math.atan2(this.d.a.y,this.d.a.x)};function O(){C(B("Box2D.Collision.Shapes.b2PolygonShape"));$c.call(this);this.zb=F(0,0);this.n=[];this.W=[]}y(O,$c);v=O.prototype;v.qe=ca("b2PolygonShape");v.da=function(){var a=new O;a.i(this);return a};v.i=function(a){$c.prototype.i.call(this,a);if(a instanceof O){this.zb.m(a.zb);this.ca=a.ca;ed(this,this.ca);for(var c=0;c<this.ca;c++)this.n[c].m(a.n[c]),this.W[c].m(a.W[c])}};function fd(a,c){gd(a,c)}
function gd(a,c){var b=c.length;L(2<=b);a.ca=b;ed(a,b);for(b=b=0;b<a.ca;b++)a.n[b].m(c[b]);for(b=0;b<a.ca;++b){var d=J(a.n[b+1<a.ca?b+1:0],a.n[b]);L(Sb(d)>Number.MIN_VALUE);var e=Hc(d);G(d);a.W[b].m(e);G(e);Tb(a.W[b])}for(var b=a.n,d=a.ca,e=F(0,0),f=0,g=1/3,h=0;h<d;++h){var i=b[h],j=h+1<d?b[h+1]:b[0],k=0.5*((i.x-0)*(j.y-0)-(i.y-0)*(j.x-0));f+=k;e.x+=k*g*(0+i.x+j.x);e.y+=k*g*(0+i.y+j.y)}e.x*=1/f;e.y*=1/f;a.zb=e}
function hd(a,c,b){a.ca=4;ed(a,4);a.n[0].i(-c,-b);a.n[1].i(c,-b);a.n[2].i(c,b);a.n[3].i(-c,b);a.W[0].i(0,-1);a.W[1].i(1,0);a.W[2].i(0,1);a.W[3].i(-1,0);a.zb.I()}
v.ef=function(a,c){for(var b=c.d,d=this.n[0],e=c.position.x+(b.a.x*d.x+b.b.x*d.y),f=c.position.y+(b.a.y*d.x+b.b.y*d.y),g=e,h=f,i=1;i<this.ca;++i)var d=this.n[i],j=c.position.x+(b.a.x*d.x+b.b.x*d.y),d=c.position.y+(b.a.y*d.x+b.b.y*d.y),e=e<j?e:j,f=f<d?f:d,g=g>j?g:j,h=h>d?h:d;a.lowerBound.x=e-this.U;a.lowerBound.y=f-this.U;a.upperBound.x=g+this.U;a.upperBound.y=h+this.U};
v.eh=function(a,c){if(this.ca==2)a.Oc.x=0.5*(this.n[0].x+this.n[1].x),a.Oc.y=0.5*(this.n[0].y+this.n[1].y),a.zc=0,a.Jd=0;else{for(var b=0,d=0,e=0,f=0,g=1/3,h=0;h<this.ca;++h){var i=this.n[h],j=h+1<this.ca?this.n[h+1]:this.n[0],k=i.x-0,l=i.y-0,r=j.x-0,p=j.y-0,u=k*p-l*r,s=0.5*u;e+=s;b+=s*g*(0+i.x+j.x);d+=s*g*(0+i.y+j.y);i=k;f+=u*(g*(0.25*(i*i+r*i+r*r)+(0*i+0*r))+0+(g*(0.25*(l*l+p*l+p*p)+(0*l+0*p))+0))}a.zc=c*e;b*=1/e;d*=1/e;a.Oc.i(b,d);a.Jd=c*f}};v.kh=function(a){a.n=this.n;a.C=this.ca;a.U=this.U};
v.hh=t("ca");v.gf=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ca;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return c};v.pe=function(a){for(var c=0,b=this.n[0].x*a.x+this.n[0].y*a.y,d=1;d<this.ca;++d){var e=this.n[d].x*a.x+this.n[d].y*a.y;e>b&&(c=d,b=e)}return this.n[c]};function ed(a,c){for(var b=0;b<a.n.length;b++)G(a.n[b]),G(a.W[b]);a.n=[];a.W=[];for(b=0;b<c;b++)a.n[b]=F(0,0),a.W[b]=F(0,0)}new Ac;function id(){}id.prototype.Vb=function(a,c){var b=a.Yh.da(),d=c.Yh.da();return b.ud==d.ud&&b.ud!=0?b.ud>0:(b.Ue&d.Be)!=0&&(b.Be&d.Ue)!=0};var jd=new id;function kd(){};function P(a){this.Wa=new kd;this.Xa=new kd;this.Pe=F(0,0);this.Qe=F(0,0);L(a.s!=a.u);this.D=a.type;this.xc=this.be=o;this.w=a.s;this.z=a.u;this.Vh=a.ng}v=P.prototype;v.jc=ca(o);v.kc=ca(o);v.jd=function(){return this.w.jd()&&this.z.jd()};v.Sb=aa();v.Fb=aa();v.bg=aa();v.Eb=ca(q);function ld(a){P.call(this,a);this.cc=F(0,0);this.dc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.Y=F(0,0);this.Z=F(0,0);this.hb=this.w.bb.Ig;this.cc.x=a.vf.x-this.hb.e.position.x;this.cc.y=a.vf.y-this.hb.e.position.y;this.dc.x=a.wf.x-this.hb.e.position.x;this.dc.y=a.wf.y-this.hb.e.position.y;this.F.m(a.Ua);this.G.m(a.Va);this.ka=a.ed;this.Yd=a.xg+this.ka*a.yg;this.bi=Math.min(a.fi,this.Yd-this.ka*md);this.ci=Math.min(a.gi,(this.Yd-md)/this.ka);this.wc=this.vc=this.j=0}y(ld,P);v=ld.prototype;
v.jc=function(){return Q(this.w,this.F)};v.kc=function(){return Q(this.z,this.G)};
v.Sb=function(a){var c=this.w,b=this.z,d;d=c.e.d;var e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,g=d.a.x*e+d.b.x*f,f=d.a.y*e+d.b.y*f,e=g;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,g=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=g;d=b.c.h.x+h;var g=b.c.h.y+i,j=this.hb.e.position.x+this.dc.x,k=this.hb.e.position.y+this.dc.y;this.Y.i(c.c.h.x+e-(this.hb.e.position.x+this.cc.x),c.c.h.y+f-(this.hb.e.position.y+this.cc.y));this.Z.i(d-j,g-k);d=Rb(this.Y);g=Rb(this.Z);d>0.005?this.Y.mc(1/d):this.Y.I();g>0.005?this.Z.mc(1/
g):this.Z.I();this.Yd-d-this.ka*g>0?this.j=this.Og=0:this.Og=2;d<this.bi?this.vc=this.Jg=0:this.Jg=2;g<this.ci?this.wc=this.Kg=0:this.Kg=2;d=e*this.Y.y-f*this.Y.x;g=h*this.Z.y-i*this.Z.x;this.Ne=c.k+c.v*d*d;this.Oe=b.k+b.v*g*g;this.If=this.Ne+this.ka*this.ka*this.Oe;this.Ne=1/this.Ne;this.Oe=1/this.Oe;this.If=1/this.If;a.Fd?(this.j*=a.ab,this.vc*=a.ab,this.wc*=a.ab,a=(-this.j-this.vc)*this.Y.x,d=(-this.j-this.vc)*this.Y.y,g=(-this.ka*this.j-this.wc)*this.Z.x,j=(-this.ka*this.j-this.wc)*this.Z.y,c.f.x+=
c.k*a,c.f.y+=c.k*d,c.o+=c.v*(e*d-f*a),b.f.x+=b.k*g,b.f.y+=b.k*j,b.o+=b.v*(h*j-i*g)):this.wc=this.vc=this.j=0};
v.Fb=function(){var a=this.w,c=this.z,b;b=a.e.d;var d=this.F.x-a.c.r.x,e=this.F.y-a.c.r.y,f=b.a.x*d+b.b.x*e,e=b.a.y*d+b.b.y*e,d=f;b=c.e.d;var g=this.G.x-c.c.r.x,h=this.G.y-c.c.r.y,f=b.a.x*g+b.b.x*h,h=b.a.y*g+b.b.y*h,g=f,i=f=b=0,j=0;b=j=b=j=i=f=b=0;if(this.Og==2)b=a.f.x+-a.o*e,f=a.f.y+a.o*d,i=c.f.x+-c.o*h,j=c.f.y+c.o*g,b=-(this.Y.x*b+this.Y.y*f)-this.ka*(this.Z.x*i+this.Z.y*j),j=this.If*-b,b=this.j,this.j=Math.max(0,this.j+j),j=this.j-b,b=-j*this.Y.x,f=-j*this.Y.y,i=-this.ka*j*this.Z.x,j=-this.ka*
j*this.Z.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.o+=a.v*(d*f-e*b),c.f.x+=c.k*i,c.f.y+=c.k*j,c.o+=c.v*(g*j-h*i);if(this.Jg==2)b=a.f.x+-a.o*e,f=a.f.y+a.o*d,b=-(this.Y.x*b+this.Y.y*f),j=-this.Ne*b,b=this.vc,this.vc=Math.max(0,this.vc+j),j=this.vc-b,b=-j*this.Y.x,f=-j*this.Y.y,a.f.x+=a.k*b,a.f.y+=a.k*f,a.o+=a.v*(d*f-e*b);if(this.Kg==2)i=c.f.x+-c.o*h,j=c.f.y+c.o*g,b=-(this.Z.x*i+this.Z.y*j),j=-this.Oe*b,b=this.wc,this.wc=Math.max(0,this.wc+j),j=this.wc-b,i=-j*this.Z.x,j=-j*this.Z.y,c.f.x+=c.k*i,c.f.y+=c.k*j,c.o+=
c.v*(g*j-h*i)};
v.Eb=function(){var a=this.w,c=this.z,b,d=this.hb.e.position.x+this.cc.x,e=this.hb.e.position.y+this.cc.y,f=this.hb.e.position.x+this.dc.x,g=this.hb.e.position.y+this.dc.y,h=0,i=0,j=0,k=0,l=b=0,r=0,p=0,u=l=p=b=l=b=0;if(this.Og==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,b=a.c.h.x+h,l=a.c.h.y+i,r=c.c.h.x+j,p=c.c.h.y+k,this.Y.i(b-d,l-e),this.Z.i(r-f,p-g),b=Rb(this.Y),l=
Rb(this.Z),b>0.005?this.Y.mc(1/b):this.Y.I(),l>0.005?this.Z.mc(1/l):this.Z.I(),b=this.Yd-b-this.ka*l,u=Math.max(u,-b),b=K(b+0.005,-0.2,0),p=-this.If*b,b=-p*this.Y.x,l=-p*this.Y.y,r=-this.ka*p*this.Z.x,p=-this.ka*p*this.Z.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.p+=a.v*(h*l-i*b),c.c.h.x+=c.k*r,c.c.h.y+=c.k*p,c.c.p+=c.v*(j*p-k*r),R(a),R(c);if(this.Jg==2)b=a.e.d,h=this.F.x-a.c.r.x,i=this.F.y-a.c.r.y,l=b.a.x*h+b.b.x*i,i=b.a.y*h+b.b.y*i,h=l,b=a.c.h.x+h,l=a.c.h.y+i,this.Y.i(b-d,l-e),b=Rb(this.Y),b>0.005?(this.Y.x*=
1/b,this.Y.y*=1/b):this.Y.I(),b=this.bi-b,u=Math.max(u,-b),b=K(b+0.005,-0.2,0),p=-this.Ne*b,b=-p*this.Y.x,l=-p*this.Y.y,a.c.h.x+=a.k*b,a.c.h.y+=a.k*l,a.c.p+=a.v*(h*l-i*b),R(a);if(this.Kg==2)b=c.e.d,j=this.G.x-c.c.r.x,k=this.G.y-c.c.r.y,l=b.a.x*j+b.b.x*k,k=b.a.y*j+b.b.y*k,j=l,r=c.c.h.x+j,p=c.c.h.y+k,this.Z.i(r-f,p-g),l=Rb(this.Z),l>0.005?(this.Z.x*=1/l,this.Z.y*=1/l):this.Z.I(),b=this.ci-l,u=Math.max(u,-b),b=K(b+0.005,-0.2,0),p=-this.Oe*b,r=-p*this.Z.x,p=-p*this.Z.y,c.c.h.x+=c.k*r,c.c.h.y+=c.k*p,c.c.p+=
c.v*(j*p-k*r),R(c);return u<0.005};var md=1;function nd(){this.Ak=o;this.Bk=0};function od(){C(B("Box2D.Collision.b2ContactID"));this.jg=this.ig=this.kg=this.Sa=0}function pd(a,c){a.Sa=c;a.kg=a.Sa&255;a.ig=(a.Sa&65280)>>8&255;a.jg=(a.Sa&16711680)>>16&255;a.qh=(a.Sa&4278190080)>>24&255}od.prototype.i=function(a){pd(this,a.Sa)};function qd(a,c){a.kg=c;a.Sa=a.Sa&4294967040|a.kg&255}function rd(a,c){a.ig=c;a.Sa=a.Sa&4294902015|a.ig<<8&65280}function sd(a,c){a.jg=c;a.Sa=a.Sa&4278255615|a.jg<<16&16711680}od.prototype.da=function(){var a=new od;a.i(this);return a};function td(){C(B("Box2D.Collision.ClipVertex"));this.sb=F(0,0);this.id=new od}td.prototype.i=function(a){this.sb.m(a.sb);this.id.i(a.id)};function ud(){C(B("Box2D.Collision.b2ManifoldPoint"));this.M=F(0,0);this.uc=new od;this.$()}ud.prototype.$=function(){this.M.I();this.Cd=this.zd=0;pd(this.uc,0)};ud.prototype.i=function(a){this.M.m(a.M);this.zd=a.zd;this.Cd=a.Cd;this.uc.i(a.uc)};function vd(){C(B("Box2D.Collision.b2Manifold"));this.D=this.oa=0;this.J=[];for(var a=0;a<2;a++)this.J[a]=new ud;this.Ia=F(0,0);this.M=F(0,0)}vd.prototype.$=function(){for(var a=0;a<2;a++)this.J[a].$();this.Ia.I();this.M.I();this.oa=this.D=0};vd.prototype.i=function(a){this.oa=a.oa;for(var c=0;c<2;c++)this.J[c].i(a.J[c]);this.Ia.m(a.Ia);this.M.m(a.M);this.D=a.D};vd.prototype.da=function(){var a=new vd;a.i(this);return a};function wd(a,c,b,d){var e=0,f=c[0].sb,g=c[1].sb,h=b.x*f.x+b.y*f.y-d,b=b.x*g.x+b.y*g.y-d;h<=0&&a[e++].i(c[0]);b<=0&&a[e++].i(c[1]);if(h*b<0)b=h/(h-b),d=a[e].sb,d.x=f.x+b*(g.x-f.x),d.y=f.y+b*(g.y-f.y),a[e].id=h>0?c[0].id:c[1].id,e++;return e}
function xd(a,c,b,d,e){for(var f=c.d.a.x*a.W[b].x+c.d.b.x*a.W[b].y,g=c.d.a.y*a.W[b].x+c.d.b.y*a.W[b].y,h=e.d.a.x*f+e.d.a.y*g,i=e.d.b.x*f+e.d.b.y*g,j=0,k=Number.MAX_VALUE,l=0;l<d.ca;l++){var r=d.n[l].x*h+d.n[l].y*i;r<k&&(k=r,j=l)}return(e.position.x+(e.d.a.x*d.n[j].x+e.d.b.x*d.n[j].y)-(c.position.x+(c.d.a.x*a.n[b].x+c.d.b.x*a.n[b].y)))*f+(e.position.y+(e.d.a.y*d.n[j].x+e.d.b.y*d.n[j].y)-(c.position.y+(c.d.a.y*a.n[b].x+c.d.b.y*a.n[b].y)))*g}
function yd(a,c,b,d){var e=d.position.x+(d.d.a.x*b.zb.x+d.d.b.x*b.zb.y),f=d.position.y+(d.d.a.y*b.zb.x+d.d.b.y*b.zb.y);e-=c.position.x+(c.d.a.x*a.zb.x+c.d.b.x*a.zb.y);f-=c.position.y+(c.d.a.y*a.zb.x+c.d.b.y*a.zb.y);for(var g=e*c.d.a.x+f*c.d.a.y,f=e*c.d.b.x+f*c.d.b.y,e=0,h=-Number.MAX_VALUE,i=0;i<a.ca;++i){var j=a.W[i].x*g+a.W[i].y*f;j>h&&(h=j,e=i)}g=xd(a,c,e,b,d);f=e-1;f<0&&(f=a.ca-1);h=xd(a,c,f,b,d);i=e+1;i>=a.ca&&(i=0);var j=xd(a,c,i,b,d),k=0,l=0;if(h>g&&h>j){k=f;for(l=h;;)if(e=k-1,e<0&&(e=a.ca-
1),g=xd(a,c,e,b,d),g>l)k=e,l=g;else break}else if(j>g){k=i;for(l=j;;)if(e=k+1,e>=a.ca&&(e=0),g=xd(a,c,e,b,d),g>l)k=e,l=g;else break}else k=e,l=g;return{vh:k,Sf:l}}var zd=[new td,new td],Ad=[new td,new td],Bd=[new td,new td],Cd=F(0,0),Dd=F(0,0),Ed=F(0,0),Fd=F(0,0),Gd=F(0,0),Hd=F(0,0),Id=F(0,0),Jd=F(0,0);function Kd(){C(B("Box2D.Collision.b2SeparationFunction"));this.M=F(0,0);this.B=F(0,0)}
Kd.prototype.T=function(a,c,b,d,e){this.bd=c;this.cd=d;var f=a.Od;L(0<f&&f<3);var g,h,i=h=g=0,j=0,d=c=0,k,l,i=0;f==1?(this.D=Ld,f=N(this.bd,a.qa[0]),a=N(this.cd,a.ra[0]),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),this.B.x=i-g,this.B.y=j-h,Tb(this.B)):a.ra[0]==a.ra[1]?(this.D=Md,c=N(this.bd,a.qa[0]),d=N(this.bd,a.qa[1]),a=N(this.cd,a.ra[0]),this.M.x=0.5*(c.x+d.x),this.M.y=0.5*
(c.y+d.y),j=J(d,c),G(this.B),this.B=Hc(j),G(j),Tb(this.B),l=this.B,k=b.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),l=a,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),(i-g)*c+(j-h)*d<0&&this.B.hf()):a.qa[0]==a.qa[0]?(this.D=Nd,g=N(this.cd,a.ra[0]),h=N(this.cd,a.ra[1]),f=N(this.bd,a.qa[0]),this.M.x=0.5*(g.x+h.x),this.M.y=0.5*(g.y+h.y),j=J(h,g),G(this.B),this.B=Hc(j),G(j),Tb(this.B),
l=this.B,k=e.d,c=k.a.x*l.x+k.b.x*l.y,d=k.a.y*l.x+k.b.y*l.y,l=this.M,k=e.d,i=e.position.x+(k.a.x*l.x+k.b.x*l.y),j=e.position.y+(k.a.y*l.x+k.b.y*l.y),l=f,k=b.d,g=b.position.x+(k.a.x*l.x+k.b.x*l.y),h=b.position.y+(k.a.y*l.x+k.b.y*l.y),(g-i)*c+(h-j)*d<0&&this.B.hf()):(c=N(this.bd,a.qa[0]),d=N(this.bd,a.qa[1]),g=N(this.cd,a.ra[0]),h=N(this.cd,a.ra[1]),j=J(d,c),i=Ic(b.d,j),G(j),j=J(h,g),k=Ic(e.d,j),G(j),e=i.x*i.x+i.y*i.y,b=k.x*k.x+k.y*k.y,j=J(k,i),a=i.x*j.x+i.y*j.y,f=k.x*j.x+k.y*j.y,G(j),j=i.x*k.x+i.y*
k.y,k=e*b-j*j,i=0,k!=0&&(i=K((j*f-a*b)/k,0,1)),(j*i+f)/b<0&&(i=K((j-a)/e,0,1)),f=F(0,0),f.x=c.x+i*(d.x-c.x),f.y=c.y+i*(d.y-c.y),a=F(0,0),a.x=g.x+i*(h.x-g.x),a.y=g.y+i*(h.y-g.y),i==0||i==1?(this.D=Nd,j=J(h,g),G(this.B),this.B=Hc(j),G(j),Tb(this.B),this.M=a):(this.D=Md,j=J(d,c),G(this.B),this.B=Hc(j),G(j),this.M=f),i<0&&this.B.hf(),G(f),G(a))};
Kd.prototype.Qb=function(a,c){var b=0;switch(this.D){case Ld:var b=Jc(a.d,this.B),d=this.B.Db(),e=Jc(c.d,d);G(d);var f=this.bd.pe(b);G(b);b=this.cd.pe(e);G(e);e=I(a,f);f=I(c,b);b=(f.x-e.x)*this.B.x+(f.y-e.y)*this.B.y;G(e);G(f);break;case Md:d=Ic(a.d,this.B);f=d.Db();e=Jc(c.d,f);G(f);b=this.cd.pe(e);G(e);e=I(a,this.M);f=I(c,b);b=(f.x-e.x)*d.x+(f.y-e.y)*d.y;G(d);G(e);G(f);break;case Nd:d=Ic(c.d,this.B);f=d.Db();b=Jc(a.d,f);G(f);f=this.bd.pe(b);G(b);e=I(a,f);f=I(c,this.M);b=(e.x-f.x)*d.x+(e.y-f.y)*d.y;
G(d);G(e);G(f);break;default:L(q)}return b};var Ld=1,Md=2,Nd=4;var Od=0,Pd=0,Qd=0,Rd=0,Sd=0,Td=new Yc,Ud=new Zc,Vd=new dd,Wd=new dd,Xd=new Kd,Yd=new Sc;function Zd(){C(B("Box2D.Common.Math.b2Sweep"));this.r=F(0,0);this.Ga=F(0,0);this.h=F(0,0);this.Ba=this.p=this.lb=o}Zd.prototype.i=function(a){this.r.m(a.r);this.Ga.m(a.Ga);this.h.m(a.h);this.lb=a.lb;this.p=a.p;this.Ba=a.Ba};Zd.prototype.da=function(){var a=new Zd;a.r.m(this.r);a.Ga.m(this.Ga);a.h.m(this.h);a.lb=this.lb;a.p=this.p;a.Ba=this.Ba;return a};
Zd.prototype.ub=function(a,c){c===m&&(c=0);a.position.x=(1-c)*this.Ga.x+c*this.h.x;a.position.y=(1-c)*this.Ga.y+c*this.h.y;a.d.i((1-c)*this.lb+c*this.p);var b=a.d;a.position.x-=b.a.x*this.r.x+b.b.x*this.r.y;a.position.y-=b.a.y*this.r.x+b.b.y*this.r.y};Zd.prototype.Hc=function(a){a===m&&(a=0);if(this.Ba<a&&1-this.Ba>Number.MIN_VALUE){var c=(a-this.Ba)/(1-this.Ba);this.Ga.x=(1-c)*this.Ga.x+c*this.h.x;this.Ga.y=(1-c)*this.Ga.y+c*this.h.y;this.lb=(1-c)*this.lb+c*this.p;this.Ba=a}};function $d(){this.position=F(0,0);this.xj=F(0,0);this.Pi=this.wj=this.Qi=this.Za=0;this.Ri=this.Oi=n;this.Vi=this.Rc=q;this.type=0;this.Ni=n;this.pj=1};function S(a,c){C(B("Box2D.Dynamics.Contacts.b2Contact"));this.kb="Contact"+ae++;this.ib=new vd;this.ae=new vd;this.Ed=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Xd||d.D!=2||d.Xd;this.Rf=a.lc()||c.lc();this.Ee=q;this.Q=a;this.V=c;this.enabled=n;this.lf=b.xa;this.mf=d.xa;this.Zf=d.bb.xa;be(this)}
S.prototype.$=function(a,c){this.ib.$();this.ae.$();this.Ed=q;var b=a.H(),d=c.H();this.pg=b.D!=2||b.Xd||d.D!=2||d.Xd;this.Rf=a.lc()||c.lc();this.Ee=q;this.Q=a;this.V=c;this.enabled=n;this.lf=b.xa;this.mf=d.xa;this.Zf=d.bb.xa;be(this)};function be(a){a.lf.Gd(a);a.mf.Gd(a);a.Zf.Gd(a);ce(a)}function ce(a){var c=q,b=q;!a.lc()&&a.enabled&&(a.Ed&&(c=n),a.pg&&(b=n));de(a.lf,a,c,b);de(a.mf,a,c,b);de(a.Zf,a,c,b)}function ee(a,c){var b=a.V.H(),d=a.Q.X,e=a.V.X;c.T(a.ib,a.Q.H().ub(),d.U,b.ub(),e.U)}
S.prototype.lc=t("Rf");function fe(a,c){var b=a.Q.H();return b!=c?b:a.V.H()}
function ge(a,c){var b=a.ae;a.ae=a.ib;a.ib=b;a.enabled=n;var d=q,b=a.Ed,e=a.Q.H(),f=a.V.H(),g=a.Q.Lb.Md(a.V.Lb);if(a.Rf){if(g){var d=a.Q.X,e=e.ub(),g=a.V.X,h=f.ub(),f=new Zc;f.Cc=new Rc;f.Cc.i(d);f.Dc=new Rc;f.Dc.i(g);f.Vf=e;f.Wf=h;f.ti=n;e=new Yc;e.Od=0;d=new Sc;Xc(d,e,f);G(d.gc);G(d.hc);d=d.rd<10*Number.MIN_VALUE}a.ib.oa=0}else{a.pg=e.D!=2||e.Xd||f.D!=2||f.Xd?n:q;if(g){a.Qb();d=a.ib.oa>0;for(g=0;g<a.ib.oa;g++){h=a.ib.J[g];h.zd=0;for(var i=h.Cd=0;i<a.ae.oa;i++){var j=a.ae.J[i];if(j.uc.Sa==h.uc.Sa){h.zd=
j.zd;h.Cd=j.Cd;break}}}}else a.ib.oa=0;d!=b&&(he(e,n),he(f,n))}a.Ed=d;d!=b&&ce(a);!b&&d&&c.me(a);b&&!d&&c.Hd(a);a.Rf||c.we(a,a.ae)}S.prototype.Qb=aa();var ie=new function(){C(B("Box2D.Collision.b2TOIInput"));this.Cc=new Rc;this.Dc=new Rc;this.oi=new Zd;this.pi=new Zd},ae=0;function je(a,c){S.call(this,a,c)}y(je,S);je.prototype.$=function(a,c){S.prototype.$.call(this,a,c)};je.prototype.Qb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.oa=0;var f=e.position.x+(e.d.a.x*d.ba.x+e.d.b.x*d.ba.y)-(b.position.x+(b.d.a.x*c.ba.x+b.d.b.x*c.ba.y)),b=e.position.y+(e.d.a.y*d.ba.x+e.d.b.y*d.ba.y)-(b.position.y+(b.d.a.y*c.ba.x+b.d.b.y*c.ba.y)),e=c.U+d.U;if(!(f*f+b*b>e*e))a.D=1,a.M.m(c.ba),a.Ia.I(),a.oa=1,a.J[0].M.m(d.ba),pd(a.J[0].uc,0)};function ke(a,c){S.call(this,a,c)}y(ke,S);ke.prototype.$=function(a,c){S.prototype.$.call(this,a,c)};ke.prototype.Qb=aa();function le(a){C(B("Box2D.Collision.Shapes.b2CircleShape"));$c.call(this);this.U=a;this.di=a*a;this.ba=F(0,0)}y(le,$c);v=le.prototype;v.qe=ca("b2CircleShape");v.da=function(){var a=new le(this.U);a.i(this);return a};v.i=function(a){$c.prototype.i.call(this,a);a instanceof le&&this.ba.m(a.ba)};v.ef=function(a,c){var b=c.d,d=c.position.x+(b.a.x*this.ba.x+b.b.x*this.ba.y),b=c.position.y+(b.a.y*this.ba.x+b.b.y*this.ba.y);a.lowerBound.i(d-this.U,b-this.U);a.upperBound.i(d+this.U,b+this.U)};
v.eh=function(a,c){a.zc=c*Math.PI*this.di;a.Oc.m(this.ba);a.Jd=a.zc*(0.5*this.di+(this.ba.x*this.ba.x+this.ba.y*this.ba.y))};v.kh=function(a){a.n=[this.ba];a.C=1;a.U=this.U};function me(a,c){L(a.X instanceof O);L(c.X instanceof le);S.call(this,a,c)}y(me,S);me.prototype.$=function(a,c){L(a.X instanceof O);L(c.X instanceof le);S.prototype.$.call(this,a,c)};
me.prototype.Qb=function(){a:{var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.oa=0;for(var f=e.position.x+(e.d.a.x*d.ba.x+e.d.b.x*d.ba.y)-b.position.x,g=e.position.y+(e.d.a.y*d.ba.x+e.d.b.y*d.ba.y)-b.position.y,e=f*b.d.a.x+g*b.d.a.y,b=f*b.d.b.x+g*b.d.b.y,f=0,g=-Number.MAX_VALUE,h=c.U+d.U,i=0;i<c.ca;++i){var j=c.W[i].x*(e-c.n[i].x)+c.W[i].y*(b-c.n[i].y);if(j>h)break a;j>g&&(g=j,f=i)}j=f+1;j>=c.ca&&(j=0);var i=c.n[f],k=c.n[j];if(g<Number.MIN_VALUE)a.oa=1,a.D=2,a.Ia.m(c.W[f]),a.M.x=
0.5*(i.x+k.x),a.M.y=0.5*(i.y+k.y);else if((e-i.x)*(k.x-i.x)+(b-i.y)*(k.y-i.y)<=0){if((e-i.x)*(e-i.x)+(b-i.y)*(b-i.y)>h*h)break a;a.oa=1;a.D=2;a.Ia.x=e-i.x;a.Ia.y=b-i.y;Tb(a.Ia);a.M.m(i)}else if((e-k.x)*(i.x-k.x)+(b-k.y)*(i.y-k.y)<=0){if((e-k.x)*(e-k.x)+(b-k.y)*(b-k.y)>h*h)break a;a.oa=1;a.D=2;a.Ia.x=e-k.x;a.Ia.y=b-k.y;Tb(a.Ia);a.M.m(k)}else{j=0.5*(i.x+k.x);i=0.5*(i.y+k.y);g=(e-j)*c.W[f].x+(b-i)*c.W[f].y;if(g>h)break a;a.oa=1;a.D=2;a.Ia.x=c.W[f].x;a.Ia.y=c.W[f].y;Tb(a.Ia);a.M.i(j,i)}a.J[0].M.m(d.ba);
pd(a.J[0].uc,0)}};function ne(a,c){L(a.X instanceof O);L(q);S.call(this,a,c)}y(ne,S);ne.prototype.$=function(a,c){L(a.X instanceof O);L(q);S.prototype.$.call(this,a,c)};ne.prototype.Qb=aa();function oe(a,c){S.call(this,a,c)}y(oe,S);oe.prototype.$=function(a,c){S.prototype.$.call(this,a,c)};
oe.prototype.Qb=function(){var a=this.ib,c=this.Q.X,b=this.Q.H().e,d=this.V.X,e=this.V.H().e;a.oa=0;var f=c.U+d.U,g=yd(c,b,d,e),h=g.vh;if(!(g.Sf>f)){var i=yd(d,e,c,b);if(!(i.Sf>f)){var j=c,k=d,l=b,r=e,p=0;a.D=2;if(i.Sf>0.98*g.Sf+0.001)j=d,k=c,l=e,r=b,h=i.vh,a.D=4,p=1;c=h;b=r;c===m&&(c=0);for(var d=l.d.a.x*j.W[c].x+l.d.b.x*j.W[c].y,e=l.d.a.y*j.W[c].x+l.d.b.y*j.W[c].y,g=b.d.a.x*d+b.d.a.y*e,e=b.d.b.x*d+b.d.b.y*e,d=g,g=0,i=Number.MAX_VALUE,u=0;u<k.ca;u++){var s=d*k.W[u].x+e*k.W[u].y;s<i&&(i=s,g=u)}d=
g+1;d>=k.ca&&(d=0);zd[0].sb.x=b.position.x+(b.d.a.x*k.n[g].x+b.d.b.x*k.n[g].y);zd[0].sb.y=b.position.y+(b.d.a.y*k.n[g].x+b.d.b.y*k.n[g].y);qd(zd[0].id,c);rd(zd[0].id,g);sd(zd[0].id,0);zd[1].sb.x=b.position.x+(b.d.a.x*k.n[d].x+b.d.b.x*k.n[d].y);zd[1].sb.y=b.position.y+(b.d.a.y*k.n[d].x+b.d.b.y*k.n[d].y);qd(zd[1].id,c);rd(zd[1].id,d);sd(zd[1].id,1);c=j.n[h];h=h+1<j.ca?j.n[h+1]:j.n[0];Cd.i(h.x-c.x,h.y-c.y);Tb(Cd);Dd.x=Cd.y;Dd.y=-Cd.x;Ed.i(0.5*(c.x+h.x),0.5*(c.y+h.y));Gd.x=l.d.a.x*Cd.x+l.d.b.x*Cd.y;Gd.y=
l.d.a.y*Cd.x+l.d.b.y*Cd.y;Hd.x=-Gd.x;Hd.y=-Gd.y;Fd.x=Gd.y;Fd.y=-Gd.x;Id.x=l.position.x+(l.d.a.x*c.x+l.d.b.x*c.y);Id.y=l.position.y+(l.d.a.y*c.x+l.d.b.y*c.y);Jd.x=l.position.x+(l.d.a.x*h.x+l.d.b.x*h.y);Jd.y=l.position.y+(l.d.a.y*h.x+l.d.b.y*h.y);if(!(wd(Ad,zd,Hd,-Gd.x*Id.x-Gd.y*Id.y+f)<2)&&!(wd(Bd,Ad,Gd,Gd.x*Jd.x+Gd.y*Jd.y+f)<2)){a.Ia.m(Dd);a.M.m(Ed);l=Fd.x*Id.x+Fd.y*Id.y;for(j=h=0;j<2;++j)if(Fd.x*Bd[j].sb.x+Fd.y*Bd[j].sb.y-l<=f)c=Bd[j].sb.x-r.position.x,k=Bd[j].sb.y-r.position.y,a.J[h].M.x=c*r.d.a.x+
k*r.d.a.y,a.J[h].M.y=c*r.d.b.x+k*r.d.b.y,a.J[h].uc.i(Bd[j].id),c=a.J[h].uc,c.qh=p,c.Sa=c.Sa&16777215|c.qh<<24&4278190080,h++;a.oa=h}}}};function pe(){this.Nb={};this.tc={};qe(this,je,"b2CircleShape","b2CircleShape");qe(this,me,"b2PolygonShape","b2CircleShape");qe(this,oe,"b2PolygonShape","b2PolygonShape");qe(this,ke,"b2EdgeShape","b2CircleShape");qe(this,ne,"b2PolygonShape","b2EdgeShape")}function qe(a,c,b,d){a.tc[b]=a.tc[b]||{};a.tc[b][d]=a.tc[b][d]||[];a.Nb[b]=a.Nb[b]||{};a.Nb[b][d]=new nd;a.Nb[b][d].Dh=c;a.Nb[b][d].li=n;if(b!=d)a.Nb[d]=a.Nb[d]||{},a.Nb[d][b]=new nd,a.Nb[d][b].Dh=c,a.Nb[d][b].li=q}
pe.prototype.Ic=function(a,c){Ob(B("Box2D.Dynamics.Contacts.b2Contact"));var b=a.X.qe(),d=c.X.qe(),e=this.Nb[b][d],f=e.Dh;return f!=o?e.li?this.tc[b][d].length>0?(b=this.tc[b][d].pop(),b.$(a,c),b):new f(a,c):this.tc[d][b].length>0?(b=this.tc[d][b].pop(),b.$(c,a),b):new f(c,a):o};pe.prototype.eb=function(a){Pb(B("Box2D.Dynamics.Contacts.b2Contact"));this.tc[a.Q.X.qe()][a.V.X.qe()].push(a)};function re(a){C(B("Box2D.Collision.b2DynamicTreeNode"));this.K=lc();this.Ja=this.parent=this.Xb=this.Ta=o;if(typeof a!="undefined")this.Ja=a}var se=[];function te(a){if(se.length>0){var c=se.pop();if(typeof a!="undefined")c.Ja=a;c.K.I();return c}return new re(a)}re.prototype.eb=function(){this.Ja=this.parent=this.Xb=this.Ta=o;se.push(this)};function ue(){C(B("Box2D.Collision.b2DynamicTree"));this.fc=o;this.Jj=this.uk=0}v=ue.prototype;v.ne=function(a,c){var b=te(c);b.K.lowerBound.x=a.lowerBound.x-0.1;b.K.lowerBound.y=a.lowerBound.y-0.1;b.K.upperBound.x=a.upperBound.x+0.1;b.K.upperBound.y=a.upperBound.y+0.1;ve(this,b);return b};v.oe=function(a){we(this,a);a.eb()};
v.eg=function(a,c,b){L(a.Ta===o);if(nc(a.K,c))return q;we(this,a);var d=0.1+2*Math.abs(b.x),b=0.1+2*Math.abs(b.y);a.K.lowerBound.x=c.lowerBound.x-d;a.K.lowerBound.y=c.lowerBound.y-b;a.K.upperBound.x=c.upperBound.x+d;a.K.upperBound.y=c.upperBound.y+b;ve(this,a);return n};v.Id=function(a){return a.K};v.fg=function(a,c,b){if(this.fc!==o){var d=[];for(d.push(this.fc);d.length>0;){var e=d.pop();if(e.K.Md(c))if(e.Ta===o){if(!a.call(b,e.Ja))break}else d.push(e.Ta),d.push(e.Xb)}}};
function ve(a,c){a.Jj++;if(a.fc===o)a.fc=c,a.fc.parent=o;else{var b;b=mc(c.K);for(var d=a.fc;d.Ta!==o;)var e=d.Ta,d=d.Xb,d=Math.abs((e.K.lowerBound.x+e.K.upperBound.x)/2-b.x)+Math.abs((e.K.lowerBound.y+e.K.upperBound.y)/2-b.y)<Math.abs((d.K.lowerBound.x+d.K.upperBound.x)/2-b.x)+Math.abs((d.K.lowerBound.y+d.K.upperBound.y)/2-b.y)?e:d;G(b);b=d;e=b.parent;d=te();d.parent=e;oc(d.K,c.K,b.K);if(e){b.parent.Ta==b?e.Ta=d:e.Xb=d;d.Ta=b;d.Xb=c;b.parent=d;for(c.parent=d;e;){if(nc(e.K,d.K))break;oc(e.K,e.Ta.K,
e.Xb.K);d=e;e=e.parent}}else d.Ta=b,d.Xb=c,b.parent=d,c.parent=d,a.fc=d}}function we(a,c){if(c==a.fc)a.fc=o;else{var b=c.parent,d=b.parent,e;e=b.Ta==c?b.Xb:b.Ta;if(d){d.Ta==b?d.Ta=e:d.Xb=e;for(e.parent=d;d;){e=d.K;oc(d.K,d.Ta.K,d.Xb.K);if(nc(e,d.K))break;d=d.parent}}else a.fc=e,e.parent=o;b.eb()}};function xe(){C(B("Box2D.Collision.b2DynamicTreeBroadPhase"));this.yc=new ue;this.Re=[];this.dd=this.bh=this.Ge=this.Fe=o}v=xe.prototype;v.ne=function(a,c){var b=this.yc.ne(a,c);this.Re.push(b);return b};v.oe=function(a){Oa(this.Re,a);this.yc.oe(a)};v.eg=function(a,c,b){this.yc.eg(a,c,b)&&this.Re.push(a)};v.Md=function(a,c){return this.yc.Id(a).Md(this.yc.Id(c))};v.Id=function(a){return this.yc.Id(a)};
function ye(a,c){a.Fe=o;a.Ge=o;for(a.bh=c;a.Re.length>0;)a.dd=a.Re.pop(),a.yc.fg(a.Hi,a.yc.Id(a.dd),a);a.Fe=o;a.Ge=o;a.bh=o;a.dd=o}v.Hi=function(a){if(a!=this.dd.Ja&&!(this.dd.Ja==this.Fe&&a==this.Ge)&&!(this.dd.Ja==this.Ge&&a==this.Fe))this.bh(this.dd.Ja,a),this.Fe=this.dd.Ja,this.Ge=a;return n};v.fg=function(a,c){this.yc.fg(a,c)};function ze(){}ze.prototype.me=aa();ze.prototype.Hd=aa();ze.prototype.we=aa();ze.prototype.ue=aa();var Ae=new ze;function Be(a){this.bb=a;this.Eg=jd;this.wd=Ae;this.Wh=new pe;this.vd=new xe}function Ce(a){ye(a.vd,function(c,b){a:{var d=c.H(),e=b.H();if(d!=e&&e.Vb(d)&&a.Eg.Vb(c,b)){for(d=e.xa.O(T);d;d=d.next)if(e=d.va.Q,e==c){if(e=d.va.V,e==b)break a}else if(e==b&&(e=d.va.V,e==c))break a;a.Wh.Ic(c,b)}}})}Be.prototype.eb=function(a){var c=a.Q.H(),b=a.V.H();a.Ed&&this.wd.Hd(a);a.ib.oa>0&&(he(c,n),he(b,n));De(a.lf,a);De(a.mf,a);De(a.Zf,a);this.Wh.eb(a)};
new function(){C(B("Box2D.Collision.b2ContactPoint"));this.position=F(0,0);this.Ek=F(0,0);this.cb=F(0,0);this.id=new od};function Ee(a){this.va=a;this.Bc=this.next=o}var Fe=[];Ee.prototype.Lc=ba("next");Ee.prototype.Mc=ba("Bc");function Ge(){this.pf=[];for(var a=0;a<=T;a++)this.pf[a]=o;this.qf=[];for(a=0;a<=T;a++)this.qf[a]=o;this.od={};this.og=0}v=Ge.prototype;v.O=function(a){return this.pf[a]};v.Gd=function(a){var c=a.kb;if(this.od[c]==o){this.od[c]=[];for(var b=0;b<=T;b++)this.od[c][b]=o;this.Pb(a,c,T);this.og++}};function de(a,c,b,d){b?a.Pb(c,c.kb,He):a.Ub(c.kb,He);d?a.Pb(c,c.kb,Ie):a.Ub(c.kb,Ie)}function De(a,c){var b=c.kb;if(a.od[b]!=o){for(var d=0;d<=T;d++)a.Ub(b,d);delete a.od[b];a.og--}}
v.Ub=function(a,c){var b=this.od[a];if(b!=o){var d=b[c];if(d!=o){b[c]=o;var b=d.Bc,e=d.next;b==o?this.pf[c]=e:b.Lc(e);e==o?this.qf[c]=b:e.Mc(b);Fe.push(d)}}};v.Pb=function(a,c,b){c=this.od[c];if(c[b]==o){if(Fe.length>0){var d=Fe.pop();d.next=o;d.Bc=o;d.va=a;a=d}else a=new Ee(a);c[b]=a;a=this.qf[b];a!=o?(a.Lc(c[b]),c[b].Mc(a)):this.pf[b]=c[b];this.qf[b]=c[b]}};v.dg=t("og");var He=0,Ie=1,T=2;function Je(){this.Rd=[]}Je.prototype.Sd=0;Je.prototype.le=0;Je.prototype.Lh=function(){return this.le-this.Sd};Je.prototype.clear=function(){this.le=this.Sd=this.Rd.length=0};function Ke(a){this.body=a;this.Bc=this.next=o}Ke.prototype.Lc=ba("next");Ke.prototype.Mc=ba("Bc");Ke.prototype.H=t("body");function Le(){this.nf=[];for(var a=0;a<=Me;a++)this.nf[a]=o;this.of=[];for(a=0;a<=Me;a++)this.of[a]=o;this.Nd={};this.lg=0}v=Le.prototype;v.O=function(a){return this.nf[a]};v.cf=function(a){var c=a.kb;this.Nd[c]==o&&(this.Pb(a,c,Me),Ne(this,a),a.Ff.push(this),this.lg++)};function Ne(a,c){var b=c.D,d=c.kb,e=c.Mb,f=c.jd();b==2?a.Pb(c,d,Oe):a.Ub(d,Oe);b!=0?a.Pb(c,d,Pe):a.Ub(d,Pe);b!=0&&f&&e?a.Pb(c,d,Qe):a.Ub(d,Qe);e?a.Pb(c,d,Re):a.Ub(d,Re);f?a.Pb(c,d,Se):a.Ub(d,Se)}
function Te(a,c){var b=c.kb;if(a.Nd[b]!=o){Oa(c.Ff,a);for(var d=0;d<=Me;d++)a.Ub(b,d);delete a.Nd[b];a.lg--}}v.Ub=function(a,c){var b=this.Nd[a];if(b!=o){var d=b[c];if(d!=o)b[c]=o,b=d.Bc,d=d.next,b==o?this.nf[c]=d:b.Lc(d),d==o?this.of[c]=b:d.Mc(b)}};v.Pb=function(a,c,b){var d=this.Nd[c];if(d==o){for(var d=[],e=0;e<=Me;e++)d[e]=o;this.Nd[c]=d}d[b]==o&&(d[b]=new Ke(a),a=this.of[b],a!=o?a.Lc(d[b]):this.nf[b]=d[b],d[b].Mc(a),this.of[b]=d[b])};v.cg=t("lg");var Oe=0,Pe=1,Se=2,Qe=3,Re=4,Me=5;function Ue(a,c,b){C(B("Box2D.Common.b2Color"));this.sh=255*K(a,0,1);this.rh=255*K(c,0,1);this.ph=255*K(b,0,1)}Ue.prototype.i=function(a,c,b){this.sh=255*K(a,0,1);this.rh=255*K(c,0,1);this.ph=255*K(b,0,1)};function gc(a){return a.sh<<16|a.rh<<8|a.ph};function Ve(){C(B("Box2D.Collision.b2WorldManifold"));this.N=F(0,0);this.J=[];for(var a=this.oa=0;a<2;a++)this.J[a]=F(0,0)}
Ve.prototype.T=function(a,c,b,d,e){if(a.oa!=0){var f=0,g,h,i=0,j=0,k=0,l=0,r=0;g=0;switch(a.D){case 1:h=c.d;g=a.M;f=c.position.x+h.a.x*g.x+h.b.x*g.y;c=c.position.y+h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.J[0].M;a=d.position.x+h.a.x*g.x+h.b.x*g.y;d=d.position.y+h.a.y*g.x+h.b.y*g.y;g=a-f;h=d-c;i=g*g+h*h;i>Qc?(i=Math.sqrt(i),this.N.x=g/i,this.N.y=h/i):(this.N.x=1,this.N.y=0);g=c+b*this.N.y;d-=e*this.N.y;this.J[0].x=0.5*(f+b*this.N.x+(a-e*this.N.x));this.J[0].y=0.5*(g+d);break;case 2:h=c.d;g=a.Ia;i=h.a.x*g.x+h.b.x*
g.y;j=h.a.y*g.x+h.b.y*g.y;h=c.d;g=a.M;k=c.position.x+h.a.x*g.x+h.b.x*g.y;l=c.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=i;this.N.y=j;for(f=0;f<a.oa;f++)h=d.d,g=a.J[f].M,r=d.position.x+h.a.x*g.x+h.b.x*g.y,g=d.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(b-(r-k)*i-(g-l)*j-e)*i,this.J[f].y=g+0.5*(b-(r-k)*i-(g-l)*j-e)*j;break;case 4:h=d.d;g=a.Ia;i=h.a.x*g.x+h.b.x*g.y;j=h.a.y*g.x+h.b.y*g.y;h=d.d;g=a.M;k=d.position.x+h.a.x*g.x+h.b.x*g.y;l=d.position.y+h.a.y*g.x+h.b.y*g.y;this.N.x=-i;this.N.y=-j;for(f=
0;f<a.oa;f++)h=c.d,g=a.J[f].M,r=c.position.x+h.a.x*g.x+h.b.x*g.y,g=c.position.y+h.a.y*g.x+h.b.y*g.y,this.J[f].x=r+0.5*(e-(r-k)*i-(g-l)*j-b)*i,this.J[f].y=g+0.5*(e-(r-k)*i-(g-l)*j-b)*j}}};function We(a,c,b,d,e){C(B("Box2D.Dynamics.b2TimeStep"));this.$(a,c,b,d,e)}We.prototype.$=function(a,c,b,d,e){this.ja=a;var f=0;a>0&&(f=1/a);this.pc=f;this.ab=c;this.Ug=b;this.dh=d;this.Fd=e};function Xe(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraintPoint"));this.sa=F(0,0);this.la=F(0,0);this.ma=F(0,0)}Xe.prototype.$=function(){this.sa.i(0,0);this.la.i(0,0);this.ma.i(0,0)};function Ye(){C(B("Box2D.Dynamics.Contacts.b2ContactConstraint"));this.Zb=F(0,0);this.sa=F(0,0);this.cb=F(0,0);this.Ac=new Ac;this.fb=new Ac;this.ta=[];for(var a=0;a<2;a++)this.ta[a]=new Xe};function Ze(){this.N=F(0,0);this.Kf=[];this.J=[];for(var a=0;a<2;a++)this.J[a]=F(0,0)}
Ze.prototype.T=function(a){L(a.pb>0);switch(a.type){case 1:var c=a.s.e.d,b=a.sa,d=a.s.e.position.x+(c.a.x*b.x+c.b.x*b.y),e=a.s.e.position.y+(c.a.y*b.x+c.b.y*b.y),c=a.u.e.d,b=a.ta[0].sa,f=a.u.e.position.x+(c.a.x*b.x+c.b.x*b.y),c=a.u.e.position.y+(c.a.y*b.x+c.b.y*b.y),b=f-d,g=c-e,h=b*b+g*g;h>Qc?(h=Math.sqrt(h),this.N.x=b/h,this.N.y=g/h):(this.N.x=1,this.N.y=0);this.J[0].x=0.5*(d+f);this.J[0].y=0.5*(e+c);this.Kf[0]=b*this.N.x+g*this.N.y-a.Xg;break;case 2:this.N.x=a.s.e.d.a.x*a.Zb.x+a.s.e.d.b.x*a.Zb.y;
this.N.y=a.s.e.d.a.y*a.Zb.x+a.s.e.d.b.y*a.Zb.y;d=a.s.e.position.x+(a.s.e.d.a.x*a.sa.x+a.s.e.d.b.x*a.sa.y);e=a.s.e.position.y+(a.s.e.d.a.y*a.sa.x+a.s.e.d.b.y*a.sa.y);for(f=0;f<a.pb;f++)c=a.u.e.position.x+(a.u.e.d.a.x*a.ta[f].sa.x+a.u.e.d.b.x*a.ta[f].sa.y),b=a.u.e.position.y+(a.u.e.d.a.y*a.ta[f].sa.x+a.u.e.d.b.y*a.ta[f].sa.y),this.Kf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Xg,this.J[f].x=c,this.J[f].y=b;break;case 4:this.N.x=a.u.e.d.a.x*a.Zb.x+a.u.e.d.b.x*a.Zb.y;this.N.y=a.u.e.d.a.y*a.Zb.x+a.u.e.d.b.y*a.Zb.y;
d=a.u.e.position.x+(a.u.e.d.a.x*a.sa.x+a.u.e.d.b.x*a.sa.y);e=a.u.e.position.y+(a.u.e.d.a.y*a.sa.x+a.u.e.d.b.y*a.sa.y);for(f=0;f<a.pb;f++)c=a.s.e.position.x+(a.s.e.d.a.x*a.ta[f].sa.x+a.s.e.d.b.x*a.ta[f].sa.y),b=a.s.e.position.y+(a.s.e.d.a.y*a.ta[f].sa.x+a.s.e.d.b.y*a.ta[f].sa.y),this.Kf[f]=(c-d)*this.N.x+(b-e)*this.N.y-a.Xg,this.J[f].i(c,b);this.N.x*=-1;this.N.y*=-1}};function $e(){this.ac=[]}v=$e.prototype;
v.T=function(a,c,b){for(this.Ke=b;this.ac.length<this.Ke;)this.ac[this.ac.length]=new Ye;for(a=0;a<b;a++){var d=c[a],e=d.Q,f=d.V,g=e.X.U,h=f.X.U,i=e.H(),j=f.H(),k=d.ib,l=Math.sqrt(e.Zh*f.Zh),r=e.Jf>f.Jf?e.Jf:f.Jf,p=i.f.x,u=i.f.y,s=j.f.x,x=j.f.y,z=i.o,wa=j.o;L(k.oa>0);af.T(k,i.e,g,j.e,h);f=af.N.x;d=af.N.y;e=this.ac[a];e.s=i;e.u=j;e.Rj=k;e.cb.x=f;e.cb.y=d;e.pb=k.oa;e.xb=l;e.Ec=r;e.Zb.x=k.Ia.x;e.Zb.y=k.Ia.y;e.sa.x=k.M.x;e.sa.y=k.M.y;e.Xg=g+h;e.type=k.D;for(g=0;g<e.pb;++g){l=k.J[g];h=e.ta[g];h.wa=l.zd;
h.Gc=l.Cd;h.sa.m(l.M);var l=h.la.x=af.J[g].x-i.c.h.x,r=h.la.y=af.J[g].y-i.c.h.y,la=h.ma.x=af.J[g].x-j.c.h.x,xa=h.ma.y=af.J[g].y-j.c.h.y,U=l*d-r*f,M=la*d-xa*f;U*=U;M*=M;h.Ac=1/(i.k+j.k+i.v*U+j.v*M);var ea=i.t*i.k+j.t*j.k;ea+=i.t*i.v*U+j.t*j.v*M;h.ij=1/ea;M=d;ea=-f;U=l*ea-r*M;M=la*ea-xa*M;U*=U;M*=M;h.ck=1/(i.k+j.k+i.v*U+j.v*M);h.Xf=0;l=e.cb.x*(s+-wa*xa-p- -z*r)+e.cb.y*(x+wa*la-u-z*l);l<-1&&(h.Xf+=-e.Ec*l)}if(e.pb==2)x=e.ta[0],s=e.ta[1],k=i.k,i=i.v,p=j.k,j=j.v,u=x.la.x*d-x.la.y*f,x=x.ma.x*d-x.ma.y*f,
z=s.la.x*d-s.la.y*f,s=s.ma.x*d-s.ma.y*f,f=k+p+i*u*u+j*x*x,d=k+p+i*z*z+j*s*s,j=k+p+i*u*z+j*x*s,f*f<100*(f*d-j*j)?(e.fb.a.i(f,j),e.fb.b.i(j,d),f=e.fb,e=e.Ac,d=f.a.x*f.b.y-f.b.x*f.a.y,d!==0&&(d=1/d),e.a.x=d*f.b.y,e.b.x=-d*f.b.x,e.a.y=-d*f.a.y,e.b.y=d*f.a.x):e.pb=1}};
v.Sb=function(a){for(var c=0;c<this.Ke;++c){var b=this.ac[c],d=b.s,e=b.u,f=d.k,g=d.v,h=e.k,i=e.v,j=b.cb.x,k=b.cb.y,l=k,r=-j,p=0,u=0;if(a.Fd){u=b.pb;for(p=0;p<u;++p){var s=b.ta[p];s.wa*=a.ab;s.Gc*=a.ab;var x=s.wa*j+s.Gc*l,z=s.wa*k+s.Gc*r;d.o-=g*(s.la.x*z-s.la.y*x);d.f.x-=f*x;d.f.y-=f*z;e.o+=i*(s.ma.x*z-s.ma.y*x);e.f.x+=h*x;e.f.y+=h*z}}else{u=b.pb;for(p=0;p<u;++p)d=b.ta[p],d.wa=0,d.Gc=0}}};
v.Fb=function(){for(var a=0;a<this.Ke;a++){for(var c=this.ac[a],b=c.cb.x,d=c.cb.y,e=0;e<c.pb;e++){var f=c,g=c.ta[e],h=f.cb.y,i=-f.cb.x,j=f.xb*g.wa,j=K(g.Gc-g.ck*((f.u.f.x-f.u.o*g.ma.y-f.s.f.x+f.s.o*g.la.y)*h+(f.u.f.y+f.u.o*g.ma.x-f.s.f.y-f.s.o*g.la.x)*i),-j,j),k=j-g.Gc;h*=k;i*=k;f.s.f.x-=f.s.k*h;f.s.f.y-=f.s.k*i;f.s.o-=f.s.v*(g.la.x*i-g.la.y*h);f.u.f.x+=f.u.k*h;f.u.f.y+=f.u.k*i;f.u.o+=f.u.v*(g.ma.x*i-g.ma.y*h);g.Gc=j}if(c.pb==1)e=c.ta[0],f=e.wa-e.Ac*((c.u.f.x-c.u.o*e.ma.y-c.s.f.x+c.s.o*e.la.y)*b+
(c.u.f.y+c.u.o*e.ma.x-c.s.f.y-c.s.o*e.la.x)*d-e.Xf),f=f>0?f:0,g=f-e.wa,b*=g,d*=g,c.s.f.x-=c.s.k*b,c.s.f.y-=c.s.k*d,c.s.o-=c.s.v*(e.la.x*d-e.la.y*b),c.u.f.x+=c.u.k*b,c.u.f.y+=c.u.k*d,c.u.o+=c.u.v*(e.ma.x*d-e.ma.y*b),e.wa=f;else{e=c.ta[0];f=c.ta[1];g=e.wa;i=f.wa;j=(c.u.f.x-c.u.o*e.ma.y-c.s.f.x+c.s.o*e.la.y)*b+(c.u.f.y+c.u.o*e.ma.x-c.s.f.y-c.s.o*e.la.x)*d-e.Xf;d=(c.u.f.x-c.u.o*f.ma.y-c.s.f.x+c.s.o*f.la.y)*b+(c.u.f.y+c.u.o*f.ma.x-c.s.f.y-c.s.o*f.la.x)*d-f.Xf;j-=c.fb.a.x*g+c.fb.b.x*i;for(d-=c.fb.a.y*g+
c.fb.b.y*i;;){b=-(c.Ac.a.x*j+c.Ac.b.x*d);if(b>=0&&(h=-(c.Ac.a.y*j+c.Ac.b.y*d),h>=0)){bf(c,e,f,b-g,h-i);e.wa=b;f.wa=h;break}b=-e.Ac*j;if(b>=0&&c.fb.a.y*b+d>=0){bf(c,e,f,b-g,-i);e.wa=b;f.wa=0;break}b=-f.Ac*d;if(b>=0&&c.fb.b.x*b+j>=0){bf(c,e,f,-g,b-i);e.wa=0;f.wa=b;break}if(j>=0&&d>=0){bf(c,e,f,-g,-i);e.wa=0;f.wa=0;break}break}}}};
function bf(a,c,b,d,e){var f=d*a.cb.x;d*=a.cb.y;var g=e*a.cb.x;e*=a.cb.y;a.s.f.x-=a.s.k*(f+g);a.s.f.y-=a.s.k*(d+e);a.s.o-=a.s.v*(c.la.x*d-c.la.y*f+b.la.x*e-b.la.y*g);a.u.f.x+=a.u.k*(f+g);a.u.f.y+=a.u.k*(d+e);a.u.o+=a.u.v*(c.ma.x*d-c.ma.y*f+b.ma.x*e-b.ma.y*g);c.wa=0;b.wa=0}v.bg=function(){for(var a=0;a<this.Ke;++a)for(var c=this.ac[a],b=c.Rj,d=0;d<c.pb;++d){var e=b.J[d],f=c.ta[d];e.zd=f.wa;e.Cd=f.Gc}};
v.Eb=function(a){a===m&&(a=0);for(var c=0,b=0;b<this.Ke;b++){var d=this.ac[b],e=d.s,f=d.u,g=e.t*e.k,h=e.t*e.v,i=f.t*f.k,j=f.t*f.v;cf.T(d);for(var k=cf.N,l=0;l<d.pb;l++){var r=d.ta[l],p=cf.J[l],u=cf.Kf[l],s=p.x-e.c.h.x,x=p.y-e.c.h.y,z=p.x-f.c.h.x,p=p.y-f.c.h.y,c=c<u?c:u,u=-r.ij*K(a*(u+0.005),-0.2,0),r=u*k.x;u*=k.y;e.c.h.x-=g*r;e.c.h.y-=g*u;e.c.p-=h*(s*u-x*r);R(e);f.c.h.x+=i*r;f.c.h.y+=i*u;f.c.p+=j*(z*u-p*r);R(f)}}return c>-0.0075};var af=new Ve,cf=new Ze;function df(){C(B("Box2D.Dynamics.b2ContactImpulse"));this.ii=[];this.qi=[]}df.prototype.$=function(){this.ii=[];this.qi=[]};function ef(a,c){C(B("Box2D.Dynamics.b2Island"));this.Lg=a;this.nb=c;this.$b=[];this.Df=[];this.$c=[];this.bc=[];this.La=[];this.yf=new df}v=ef.prototype;v.$=function(a,c){this.Lg=a;this.nb=c};function ff(a){a.$b=[];a.Df=[];a.$c=[];a.bc=[];a.La=[]}
v.xe=function(a,c,b){for(var d=0;d<this.Df.length;d++){var e=this.Df[d];e.f.x+=a.ja*(c.x+e.k*e.Me.x);e.f.y+=a.ja*(c.y+e.k*e.Me.y);e.o+=a.ja*e.v*e.Pg;e.f.mc(K(1-a.ja*e.Mj,0,1));e.o*=K(1-a.ja*e.Aj,0,1)}this.nb.T(a,this.bc,this.bc.length);this.nb.Sb(a);for(c=0;c<this.La.length;c++)this.La[c].Sb(a);for(c=0;c<a.dh;c++){for(d=0;d<this.La.length;d++)this.La[d].Fb(a);this.nb.Fb()}for(c=0;c<this.La.length;c++)this.La[c].bg();this.nb.bg();for(c=0;c<this.$c.length;++c){var d=this.$c[c],e=a.ja*d.f.x,f=a.ja*d.f.y;
e*e+f*f>4&&(Tb(d.f),d.f.x*=2*a.pc,d.f.y*=2*a.pc);e=a.ja*d.o;if(e*e>Oc)d.o=d.o<0?-Nc*a.pc:Nc*a.pc;d.c.Ga.m(d.c.h);d.c.lb=d.c.p;d.c.h.x+=a.ja*d.f.x;d.c.h.y+=a.ja*d.f.y;d.c.p+=a.ja*d.o;R(d)}for(c=0;c<a.Ug;c++){d=this.nb.Eb(0.2);e=n;for(f=0;f<this.La.length;f++)var g=this.La[f].Eb(0.2),e=e&&g;if(d&&e)break}gf(this,this.nb.ac);if(b){b=Number.MAX_VALUE;for(c=0;c<this.$c.length;c++)d=this.$c[c],!d.Cg||Math.abs(d.o)>Pc||Fc(d.f,d.f)>1.0E-4?b=d.Lf=0:(d.Lf+=a.ja,b=Math.min(b,d.Lf));if(b>=0.5)for(a=0;a<this.$b.length;a++)he(this.$b[a],
q)}};
v.gg=function(a){var c=0,b=0;this.nb.T(a,this.bc,this.bc.length);for(var d=this.nb,c=0;c<this.La.length;++c)this.La[c].Sb(a);for(c=0;c<a.dh;++c){d.Fb();for(b=0;b<this.La.length;++b)this.La[b].Fb(a)}for(c=0;c<this.$c.length;++c){var b=this.$c[c],e=a.ja*b.f.x,f=a.ja*b.f.y;e*e+f*f>4&&(Tb(b.f),b.f.x*=2*a.pc,b.f.y*=2*a.pc);e=a.ja*b.o;if(e*e>Oc)b.o=b.o<0?-Nc*a.pc:Nc*a.pc;b.c.Ga.m(b.c.h);b.c.lb=b.c.p;b.c.h.x+=a.ja*b.f.x;b.c.h.y+=a.ja*b.f.y;b.c.p+=a.ja*b.o;R(b)}for(c=0;c<a.Ug;++c){e=d.Eb(0.75);f=n;for(b=0;b<
this.La.length;++b)var g=this.La[b].Eb(0.2),f=f&&g;if(e&&f)break}gf(this,d.ac)};function gf(a,c){if(a.Lg!=o)for(var b=0;b<a.bc.length;++b){var d=a.bc[b],e=c[b];a.yf.$();for(var f=0;f<e.pb;++f)a.yf.ii[f]=e.ta[f].wa,a.yf.qi[f]=e.ta[f].Gc;a.Lg.ue(d,a.yf)}}v.cf=function(a){this.$b.push(a);a.D!=0&&(this.$c.push(a),a.D==2&&this.Df.push(a))};v.Gd=function(a){this.bc.push(a)};function hf(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.Aa=F(0,0);this.F.m(a.Ua);this.G.m(a.Va);this.ai=a.length;this.Hg=a.Kh;this.Dj=a.Eh;this.Uh=this.yd=this.j=0}y(hf,P);v=hf.prototype;v.jc=function(){return Q(this.w,this.F)};v.kc=function(){return Q(this.z,this.G)};
v.Sb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.F.x-d.c.r.x,g=this.F.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;this.Aa.x=e.c.h.x+h-d.c.h.x-f;this.Aa.y=e.c.h.y+i-d.c.h.y-g;b=Math.sqrt(this.Aa.x*this.Aa.x+this.Aa.y*this.Aa.y);b>0.005?this.Aa.mc(1/b):this.Aa.I();c=f*this.Aa.y-g*this.Aa.x;var j=h*this.Aa.y-i*this.Aa.x;c=d.k+d.v*c*c+e.k+e.v*j*j;this.t=c!=0?1/c:0;if(this.Hg>0){b-=this.ai;var j=
2*Math.PI*this.Hg,k=this.t*j*j;this.yd=a.ja*(2*this.t*this.Dj*j+a.ja*k);this.yd=this.yd!=0?1/this.yd:0;this.Uh=b*a.ja*k*this.yd;this.t=c+this.yd;this.t=this.t!=0?1/this.t:0}a.Fd?(this.j*=a.ab,a=this.j*this.Aa.x,c=this.j*this.Aa.y,d.f.x-=d.k*a,d.f.y-=d.k*c,d.o-=d.v*(f*c-g*a),e.f.x+=e.k*a,e.f.y+=e.k*c,e.o+=e.v*(h*c-i*a)):this.j=0};
v.Fb=function(){var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=-this.t*(this.Aa.x*(this.z.f.x-this.z.o*e-(this.w.f.x-this.w.o*c))+this.Aa.y*(this.z.f.y+this.z.o*d-(this.w.f.y+this.w.o*a))+this.Uh+this.yd*this.j);this.j+=f;b=f*this.Aa.x;f*=this.Aa.y;this.w.f.x-=this.w.k*b;this.w.f.y-=this.w.k*f;
this.w.o-=this.w.v*(a*f-c*b);this.z.f.x+=this.z.k*b;this.z.f.y+=this.z.k*f;this.z.o+=this.z.v*(d*f-e*b)};
v.Eb=function(){if(this.Hg>0)return n;var a=this.F.x-this.w.c.r.x,c=this.F.y-this.w.c.r.y,b=this.w.e.d.a.x*a+this.w.e.d.b.x*c,c=this.w.e.d.a.y*a+this.w.e.d.b.y*c,a=b,d=this.G.x-this.z.c.r.x,e=this.G.y-this.z.c.r.y,b=this.z.e.d.a.x*d+this.z.e.d.b.x*e,e=this.z.e.d.a.y*d+this.z.e.d.b.y*e,d=b,f=this.z.c.h.x+d-this.w.c.h.x-a,g=this.z.c.h.y+e-this.w.c.h.y-c,b=Math.sqrt(f*f+g*g);f/=b;g/=b;var b=K(b-this.ai,-0.2,0.2),h=-this.t*b;this.Aa.i(f,g);f=h*this.Aa.x;g=h*this.Aa.y;this.w.c.h.x-=this.w.k*f;this.w.c.h.y-=
this.w.k*g;this.w.c.p-=this.w.v*(a*g-c*f);this.z.c.h.x+=this.z.k*f;this.z.c.h.y+=this.z.k*g;this.z.c.p+=this.z.v*(d*g-e*f);R(this.w);R(this.z);return Math.abs(b)<0.005};function jf(){this.ok=this.Xi=o;this.pk={};this.nk=0}jf.prototype.O=t("Xi");function kf(a,c,b){this.kb="Fixture"+lf++;this.Yh=b.filter.da();this.Lb=lc();this.Th=lc();this.Dg=a;this.X=b.shape.da();this.Fg=b.De;this.Zh=b.xb;this.Jf=b.Ec;this.Kj=b.zf}v=kf.prototype;v.lc=t("Kj");v.H=t("Dg");v.gh=function(a){a||(a=cd());this.X.eh(a,this.Fg);return a};v.eb=function(){var a=this.Lb;a!=o&&(Pb(B("Box2D.Collision.b2AABB")),kc.push(a))};v.ne=function(a,c){this.X.ef(this.Lb,c);this.ad=a.ne(this.Lb,this)};v.oe=function(a){if(this.ad!=o)a.oe(this.ad),this.ad=o};
function mf(a,c,b,d){a.ad&&(a.X.ef(a.Lb,b),a.X.ef(a.Th,d),oc(a.Lb,a.Lb,a.Th),b=J(d.position,b.position),c.eg(a.ad,a.Lb,b),G(b))}var lf=0;function nf(a){this.Ja=a;this.Bc=this.next=o}nf.prototype.Lc=ba("next");nf.prototype.Mc=ba("Bc");function of(){this.ug=this.tg=o;this.uf={};this.Ih=0}of.prototype.O=t("tg");function pf(a,c){this.kb="Body"+qf++;this.e=new dd;this.e.position.m(a.position);this.e.d.i(a.Za);this.c=new Zd;this.c.r.I();this.c.Ba=1;this.c.lb=this.c.p=a.Za;this.c.h.x=this.e.d.a.x*this.c.r.x+this.e.d.b.x*this.c.r.y;this.c.h.y=this.e.d.a.y*this.c.r.x+this.e.d.b.y*this.c.r.y;this.c.h.x+=this.e.position.x;this.c.h.y+=this.e.position.y;this.c.Ga.m(this.c.h);this.f=a.xj.da();this.Me=F(0,0);this.Xd=a.Vi;this.Ej=a.Rc;this.Cg=a.Oi;this.Mb=a.Ri;this.Bg=a.Ni;this.bb=c;this.ia=o;this.xa=new Ge;this.rf=
new jf;this.tk=0;this.o=a.Qi;this.Mj=a.wj;this.Aj=a.Pi;this.Lf=this.Pg=0;this.D=a.type;this.t=this.D==2?1:0;this.k=this.D==2?1:0;this.v=this.rc=0;this.Ij=a.pj;this.Sc=new of;this.Ff=[]}v=pf.prototype;v.eb=function(){G(this.f);G(this.Me)};
function rf(a,c,b){L(!a.bb.Wc);a.e.d.i(b);a.e.position.m(c);var c=a.e.d,d=a.c.r;a.c.h.x=c.a.x*d.x+c.b.x*d.y;a.c.h.y=c.a.y*d.x+c.b.y*d.y;a.c.h.x+=a.e.position.x;a.c.h.y+=a.e.position.y;a.c.Ga.m(a.c.h);a.c.lb=a.c.p=b;b=a.bb.Ka.vd;for(c=a.Sc.O();c;c=c.next)mf(c.Ja,b,a.e,a.e);Ce(a.bb.Ka)}v.ub=t("e");v.Rb=function(){return this.c.p};function V(a){return a.c.h}function sf(a,c,b){a.D==2&&(he(a,n),a.f.x+=a.k*c.x,a.f.y+=a.k*c.y,a.o+=a.v*((b.x-a.c.h.x)*c.y-(b.y-a.c.h.y)*c.x))}
v.gh=function(a){a||(a=cd());a.zc=this.t;a.Jd=this.rc;a.Oc.m(this.c.r);return a};
function tf(a){a.t=0;a.k=0;a.rc=0;a.v=0;a.c.r.I();if(!(a.D==0||a.D==1)){for(var c=F(0,0),b=a.Sc.O();b;b=b.next){var d=b.Ja;d.Fg!=0&&(d=d.gh(),a.t+=d.zc,c.x+=d.Oc.x*d.zc,c.y+=d.Oc.y*d.zc,a.rc+=d.Jd)}a.t>0?(a.k=1/a.t,c.x*=a.k,c.y*=a.k):(a.t=1,a.k=1);a.rc>0&&!a.Ej?(a.rc-=a.t*(c.x*c.x+c.y*c.y),a.rc*=a.Ij,L(a.rc>0),a.v=1/a.rc):(a.rc=0,a.v=0);b=a.c.h.da();a.c.r.m(c);a.c.Ga.m(I(a.e,a.c.r));a.c.h.m(a.c.Ga);a.f.x+=a.o*-(a.c.h.y-b.y);a.f.y+=a.o*+(a.c.h.x-b.x);G(c);G(b)}}
function Q(a,c){var b=a.e.d,b=F(b.a.x*c.x+b.b.x*c.y,b.a.y*c.x+b.b.y*c.y);b.x+=a.e.position.x;b.y+=a.e.position.y;return b}function he(a,c){if(a.Mb!=c){a.Mb=c;a.Lf=0;if(!c)a.f.I(),a.o=0,a.Me.I(),a.Pg=0;for(var b=0;b<a.Ff.length;b++)Ne(a.Ff[b],a)}}v.jd=t("Bg");function uf(a){vf.d.i(a.c.lb);var c=vf.d,b=a.c.r;vf.position.x=a.c.Ga.x-(c.a.x*b.x+c.b.x*b.y);vf.position.y=a.c.Ga.y-(c.a.y*b.x+c.b.y*b.y);c=a.bb.Ka.vd;for(b=a.Sc.O();b;b=b.next)mf(b.Ja,c,vf,a.e)}
function R(a){a.e.d.i(a.c.p);var c=a.e.d,b=a.c.r;a.e.position.x=a.c.h.x-(c.a.x*b.x+c.b.x*b.y);a.e.position.y=a.c.h.y-(c.a.y*b.x+c.b.y*b.y)}v.Vb=function(a){if(this.D!=2&&a.D!=2)return q;for(var c=this.ia;c;c=c.next)if(c.ob==a&&c.Yb.Vh==q)return q;return n};v.Hc=function(a){this.c.Hc(a);this.c.h.m(this.c.Ga);this.c.p=this.c.lb;R(this)};var qf=0,vf=new dd;function wf(a,c){this.Ka=new Be(this);this.nb=new $e;this.Ng=this.Wc=q;this.Oa=this.Cf=o;this.Gb=new Le;this.xa=new Ge;this.ia=o;this.rf=new jf;this.Ef=0;this.Cj=this.Rg=n;this.Cg=c;this.Fj=a;this.$h=0;this.Ig=xf(this,new $d);this.Te=new We(0,0,0,0,this.Rg);this.Rh=new We(0,0,0,0,this.Rg);this.Qh=new ef(this.Ka.wd,this.nb)}var yf=1-100*Number.MIN_VALUE;function xf(a,c){L(!a.Wc);var b=new pf(c,a);a.Gb.cf(b);return b}
function W(a,c){var b=c.Ic();b.be=o;if(b.xc=a.ia)a.ia.be=b;a.ia=b;a.Ef++;b.Wa.Yb=b;b.Wa.ob=b.z;b.Wa.qb=o;if(b.Wa.next=b.w.ia)b.w.ia.qb=b.Wa;b.w.ia=b.Wa;b.Xa.Yb=b;b.Xa.ob=b.w;b.Xa.qb=o;if(b.Xa.next=b.z.ia)b.z.ia.qb=b.Xa;b.z.ia=b.Xa;var d=c.s,e=c.u;if(!c.ng)for(var f=e.xa.O(T);f;f=f.next)if(fe(f.va,e)==d)f.va.Ee=n;return b}wf.prototype.cg=function(){return this.Gb.cg()};wf.prototype.dg=function(){return this.xa.dg()};
function zf(a,c,b,d){if(a.Ng)Ce(a.Ka),a.Ng=q;a.Wc=n;a.Te.$(c,a.$h*c,b,d,a.Rg);c=a.Ka;for(b=c.bb.xa.O(T);b;b=b.next){var d=b.va,e=d.Q,f=d.V,g=e.H(),h=f.H();if(!(g.Mb==q&&h.Mb==q)){if(d.Ee){if(h.Vb(g)==q){c.eb(d);continue}if(c.Eg.Vb(e,f)==q){c.eb(d);continue}d.Ee=q}c.vd.Md(e.ad,f.ad)==q?c.eb(d):ge(d,c.wd)}}if(a.Te.ja>0)a.xe(a.Te),a.Cj&&a.gg(a.Te),a.$h=a.Te.pc;a.Wc=q}
wf.prototype.xe=function(a){for(var c=this.rf.O();c;c=c.next)zf(c.zh,a);c=this.Qh;c.$(this.Ka.wd,this.nb);for(var b=this.Gb.O(Me);b;b=b.next)b.body.ea=q;for(var d=this.xa.O(T);d;d=d.next)d.va.ea=q;for(b=this.ia;b;b=b.xc)b.ea=q;for(b=this.Gb.O(Qe);b;b=b.next)if(d=b.body,!d.ea){ff(c);var e=[];e.push(d);for(d.ea=n;e.length>0;){var f=e.pop();c.cf(f);f.Mb||he(f,n);if(f.D!=0){for(d=f.xa.O(He);d;d=d.next){var g=d.va;if(!g.ea&&(c.Gd(g),g.ea=n,g=fe(g,f),!g.ea))e.push(g),g.ea=n}for(d=f.ia;d;d=d.next)if(!d.Yb.ea&&
d.ob.jd()&&(c.La.push(d.Yb),d.Yb.ea=n,!d.ob.ea))e.push(d.ob),d.ob.ea=n}}c.xe(a,this.Fj,this.Cg)}for(b=this.Gb.O(Qe);b;b=b.next)uf(b.body);Ce(this.Ka)};
wf.prototype.gg=function(a){var c,b,d=this.Qh;d.$(this.Ka.wd,this.nb);for(b=this.Gb.O(Me);b;b=b.next){var e=b.body;e.ea=q;e.c.Ba=0}for(var f=this.xa.O(T);f;f=f.next)f.va.ea=q,f.va.ee=o;for(b=this.ia;b;b=b.xc)b.ea=q;for(;;){c=o;b=1;for(e=this.xa.O(Ie);e;e=e.next){var f=e.va,g=f.Q.H(),h=f.V.H();if(g.D==2&&g.Mb||h.D==2&&h.Mb){h=1;if(f.ee!=o)h=f.ee;else{if(f.Ed)h=1;else{var i=f.Q.H(),j=f.V.H(),g=i.c.Ba;if(i.c.Ba<j.c.Ba)g=j.c.Ba,i.c.Hc(g);else if(j.c.Ba<i.c.Ba)g=i.c.Ba,j.c.Hc(g);h=f;i=i.c;j=j.c;ie.Cc.i(h.Q.X);
ie.Dc.i(h.V.X);ie.oi=i;ie.pi=j;ie.dk=0.005;var k=ie;Od++;var h=k.Cc,j=k.Dc,i=k.oi,l=k.pi;L(i.Ba==l.Ba);L(1-i.Ba>Number.MIN_VALUE);var r=h.U+j.U,k=k.dk,p=0,u=0,s=0;Td.Od=0;for(Ud.ti=q;;){i.ub(Vd,p);l.ub(Wd,p);Ud.Cc=h;Ud.Dc=j;Ud.Vf=Vd;Ud.Wf=Wd;Xc(Yd,Td,Ud);if(Yd.rd<=0){p=1;break}Xd.T(Td,h,Vd,j,Wd);var x=Xd.Qb(Vd,Wd);if(x<=0){p=1;break}u==0&&(s=x>r?Math.max(r-k,0.75*r):Math.max(x-k,0.02*r));if(x-s<0.5*k){if(u==0){p=1;break}break}var z=p,wa=p,la=1;i.ub(Vd,la);l.ub(Wd,la);var xa=Xd.Qb(Vd,Wd);if(xa>=s){p=
1;break}for(var U=0;;){var M=0,M=U&1?wa+(s-x)*(la-wa)/(xa-x):0.5*(wa+la);i.ub(Vd,M);l.ub(Wd,M);var ea=Xd.Qb(Vd,Wd);if(Math.abs(ea-s)<0.025*k){z=M;break}ea>s?(wa=M,x=ea):(la=M,xa=ea);U++;Rd++;if(U==50)break}Sd=Math.max(Sd,U);if(z<(1+100*Number.MIN_VALUE)*p)break;p=z;u++;Pd++;if(u==1E3)break}Qd=Math.max(Qd,u);h=p;L(0<=h&&h<=1);h>0&&h<1&&(h=(1-h)*g+h)}f.ee=h}Number.MIN_VALUE<h&&h<b&&(c=f,b=h)}}if(c===o||yf<b)break;f=c.Q.H();e=c.V.H();Af.i(f.c);Bf.i(e.c);f.Hc(b);e.Hc(b);ge(c,this.Ka.wd);c.ee=o;if(c.lc()||
!c.enabled)f.c.i(Af),e.c.i(Bf),R(f),R(e);else if(c.Ed){f.D!=2&&(f=e);ff(d);c=new Je;e=f;c.Rd[c.le++]=e;for(f.ea=n;c.size>0;)if(e=c,e.Sd!=e.le?(f=e.Rd[e.Sd],delete e.Rd[e.Sd],e.Sd++,e=f):e=m,d.cf(e),e.Mb||he(e,n),e.D==2){for(f=e.xa.O(He);f;f=f.next){if(d.Bj==32)break;g=f.va;if(!g.ea&&(d.Gd(g),g.ea=n,g=fe(g,e),!g.ea))g.D!=0&&(g.Hc(b),he(g,n),h=g,c.Rd[c.le++]=h),g.ea=n}for(e=e.ia;e;e=e.next)if(d.Ef!=32&&!e.Yb.ea&&e.ob.jd()&&(d.La.push(e.Yb),e.Yb.ea=n,!e.ob.ea)){if(e.ob.D!=0)e.ob.Hc(b),he(e.ob,n),f=e.ob,
c.Rd[c.le++]=f;e.ob.ea=n}}this.Rh.$((1-b)*a.ja,0,a.dh,a.Ug,q);d.gg(this.Rh);for(b=0;b<d.$b.length;b++)if(d.$b[b].ea=q,d.$b[b].Mb&&d.$b[b].D==2){uf(d.$b[b]);for(f=d.$b[b].xa.O(T);f;f=f.next)f.va.ee=o}for(b=0;b<d.Bj;b++)d.bc[b].ea=q,d.bc[b].ee=o;for(b=0;b<d.Ef;b++)d.La[b].ea=q;Ce(this.Ka)}}};function Cf(a,c,b,d){if(c instanceof le){var e=I(b,c.ba);a.Oa.yi(e,c.U,b.d.a,d);G(e)}else if(c instanceof O){for(var e=0,f=c.hh(),c=c.n,g=[],e=0;e<f;e++)g[e]=I(b,c[e]);a.Oa.zi(g,f,d);for(e=0;e<f;e++)G(g[e])}}
var hc=new dd,Af=new Zd,Bf=new Zd,Df=new Ue(0.5,0.8,0.8),Ef=new Ue(0.5,0.5,0.3),Ff=new Ue(0.5,0.9,0.5),Gf=new Ue(0.5,0.5,0.9),Hf=new Ue(0.6,0.6,0.6),If=new Ue(0.9,0.7,0.7),Jf=new Ue(0.3,0.9,0.9),fc=new Ue(0,0,0.8);function Kf(a){this.lh=Lf++;this.position=a.da();this.Za=0;this.ah=[];this.ye=[];this.df=[];this.ve=[];this.body=o}var Lf=0;function Mf(a,c,b){this.Wg=[];this.Ha=[];this.xk=0;this.Tg={};this.ya=a;this.Ya=new E(c.x,c.y);this.ga=new wf(b,n);this.ga.Ka.Eg=this;this.ga.Ka.wd=this;this.top=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,-2.5),q,o,{xb:0});this.bottom=X(this,new E(this.Ya.x+5,5),new E(this.Ya.x/2,this.Ya.y+2.5),q,o,{xb:0});this.left=X(this,new E(5,this.Ya.y+5),new E(-2.5,this.Ya.y/2),q,o,{xb:0});this.right=X(this,new E(5,this.Ya.y+5),new E(this.Ya.x+2.5,this.Ya.y/2),q,o,{xb:0})}v=Mf.prototype;
v.update=function(a,c){zf(this.ga,c,Nf,Nf);for(var b=this.ga.Gb.O(Oe);b;b=b.next)b.body.Me.I(),b.body.Pg=0;b=this.Wg;this.Wg=[];if(b.length>0)for(var d=0;d<b.length;d++)b[d].call(this)};v.Vb=function(a,c){if(!a.lc()&&!c.lc())for(var b=0;b<this.Ha.length;b++)if(this.Ha[b].Vb&&!this.Ha[b].Vb(a,c))return q;return id.prototype.Vb(a,c)};
v.me=function(a){for(var c=a.Q,b=c.H(),d=b.object,e=a.V,f=e.H(),g=f.object,h=0;h<d.ye.length;h++)d.ye[h](a,d,b,c,g,f,e);for(h=0;h<g.ye.length;h++)g.ye[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)if(this.Ha[h].mh&&this.Ha[h].mh(a),a.disabled){var i=a;i.enabled=q;ce(i)}for(h=0;h<d.df.length;h++)d.df[h](a,d,b,c,g,f,e);for(h=0;h<g.df.length;h++)g.df[h](a,g,f,e,d,b,c);for(h=0;h<this.Ha.length;h++)this.Ha[h].me&&this.Ha[h].me(a)};
v.Hd=function(a){for(var c=0;c<this.Ha.length;c++)this.Ha[c].Hd&&this.Ha[c].Hd(a);a.disabled=q;a.enabled=n;ce(a)};v.we=function(a,c){if(a.disabled)a.enabled=q,ce(a);for(var b=0;b<this.Ha.length;b++)this.Ha[b].we&&this.Ha[b].we(a,c)};v.ue=function(a,c){for(var b=a.Q,d=b.H(),e=d.object,f=a.V,g=f.H(),h=g.object,i=0;i<e.ve.length;i++)e.ve[i](a,c,e,d,b,h,g,f);for(i=0;i<h.ve.length;i++)h.ve[i](a,c,h,g,f,e,d,b);for(i=0;i<this.Ha.length;i++)this.Ha[i].ue&&this.Ha[i].ue(a,c)};
function Y(a,c,b,d){d=d||0;a=Of(a,c,b,n);a.display.vi=-10+d;return a}function X(a,c,b,d,e,f){e=e||{};e.type=0;return Pf(a,c,b,d,{Da:e,oc:f})}function Pf(a,c,b,d,e){var f=new O;hd(f,c.x/2,c.y/2);return a.Hb(c,b,d,f,e)}function Qf(a,c,b){var d=new O,e=new E(c.x/2,c.y/2),e=[new E(0,e.y),new E(-e.x+0.01,e.y-0.01),new E(-e.x,0),new E(-e.x+0.01,-e.y+0.01),new E(0,-e.y),new E(e.x-0.01,-e.y+0.01),new E(e.x,0),new E(e.x-0.01,e.y-0.01)];gd(d,e);return a.Hb(c,b,n,d,{Da:{Rc:n},oc:{Ec:0}})}
function Rf(a,c){a.ga.Wc?a.Wg.push(c):c.apply(a)}v.Hb=function(a,c,b,d,e){var f=Of(this,a,c,b);Rf(this,function(){var a=e,a=a||{},b=Sf(a.Da,Tf),i=new $d;i.type=b.type;i.Za=b.Za;i.Rc=b.Rc;i.position=c;b=xf(this.ga,i);a=Uf(b,d,a);f.body=b;f.Ja=a;b.object=f});return f};function Of(a,c,b,d){b=new Kf(b);a.Tg[b.lh]=b;d!==q&&vc(b,c);return b}
function Uf(a,c,b){var b=b||{},b=Sf(b.oc,Vf),d=new zc;d.De=b.De;d.xb=b.xb;d.Ec=b.Ec;d.zf=b.zf;d.shape=c;L(!a.bb.Wc);c=new kf(a,0,d);a.Bg&&c.ne(a.bb.Ka.vd,a.e);b=a.Sc;d=c.kb;if(b.uf[d]==o){var e=new nf(c),f=b.ug;f!=o?f.Lc(e):b.tg=e;e.Mc(f);b.ug=e;b.uf[d]=e;b.Ih++}c.Dg=a;c.Fg>0&&tf(a);a.bb.Ng=n;return c}
function Wf(a,c){Rf(a,function(){if(c.body){var a=this.ga,d=c.body;L(!a.Wc);for(var e=d.ia;e;){var f=e,e=e.next;a.Cf&&a.Cf.mk(f.Yb);var g=a,h=f.Yb,i=h.Vh;if(h.be)h.be.xc=h.xc;if(h.xc)h.xc.be=h.be;if(h==g.ia)g.ia=h.xc;var f=h.w,j=h.z;he(f,n);he(j,n);if(h.Wa.qb)h.Wa.qb.next=h.Wa.next;if(h.Wa.next)h.Wa.next.qb=h.Wa.qb;if(h.Wa==f.ia)f.ia=h.Wa.next;h.Wa.qb=o;h.Wa.next=o;if(h.Xa.qb)h.Xa.qb.next=h.Xa.next;if(h.Xa.next)h.Xa.next.qb=h.Xa.qb;if(h.Xa==j.ia)j.ia=h.Xa.next;h.Xa.qb=o;h.Xa.next=o;g.Ef--;if(!i)for(g=
j.xa.O(T);g;g=g.next)if(fe(g.va,j)==f)g.va.Ee=n}for(e=d.rf.O();e;e=e.next)Te(e.zh,d);for(e=d.xa.O(T);e;e=e.next)a.Ka.eb(e.va);for(e=d.Sc.O();e;e=e.next){a.Cf&&a.Cf.lk(e.Ja);g=d;f=e.Ja;L(!g.bb.Wc);var j=g.Sc,h=f.kb,k=j.uf[h];if(k!=o)i=k.Bc,k=k.next,i==o?j.tg=k:i.Lc(k),k==o?j.ug=i:k.Mc(i),delete j.uf[h],j.Ih--;for(j=g.xa.O(T);j;j=j.next)(f==j.va.Q||f==j.va.V)&&g.bb.Ka.eb(j.va);g.Bg&&f.oe(g.bb.Ka.vd);f.eb();f.Dg=o;tf(g)}d.eb();Te(a.Gb,d)}delete this.Tg[c.lh]})}
function Xf(a,c,b){Rf(a,function(){if(c.body){var a=c.body;rf(a,b,a.Rb())}else c.position=b.da()})}var Nf=10,Vf={De:0.1,xb:0.6,Ec:0.01,zf:q},Tf={Rc:q,Za:0,type:2};function Sf(a,c){var a=a||{},b={},d;for(d in c)b[d]=a[d]===m||a[d]===o?c[d]:a[d];return b};function Yf(a){this.ya=a}function Zf(a,c,b,d,e){var f=new E(4,4);vc(c.body,b);H(c,"../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d);c.display.Uf=new ic("../external-resources/graphics/urbansquall_tileset/characters/princess_AP.png",d,f,e);c.display.Wb={};c.display.Wb.sk=e;c.display.Wb.kj=4;c.display.Wb.Tc=0;c.display.Wb.mb={p:$f,x:$f,y:ag};a=a.ya.uh;c.ah.push(bg);Na(a.$g,c)}var $f=0,ag=2;
function bg(a,c){var b=this.display.Wb;b.Tc+=c;var d=new E(1,1),e=this.body.f,f=Math.abs(e.x),g=Math.abs(e.y);if(g<0.01||f>=g){if(e.x>0.01){if(b.mb.x=$f,b.mb.p!=$f)b.mb.p=$f,b.Tc=0}else if(e.x<-0.01){if(b.mb.x=1,b.mb.p!=1)b.mb.p=1,b.Tc=0}else b.Tc=0;d.y=b.mb.x==1?4:2}else if(e.y>0.01){b.mb.y=3;if(b.mb.p!=3)b.mb.p=3,b.Tc=0;d.y=3}else{b.mb.y=ag;if(b.mb.p!=ag)b.mb.p=ag,b.Tc=0;d.y=1}d.x=b.Tc==0?1:Math.floor(b.Tc*b.kj);b=this.display.Uf;b.rb=d.da();b.rb.x%=b.Tf.x;b.rb.y%=b.Tf.y;if(b.rb.x===0)b.rb.x=b.Tf.x;
if(b.rb.y===0)b.rb.y=b.Tf.y};function cg(){this.$g=[]};function dg(a,c,b,d,e,f,g){this.gd=a;this.paused=q;this.af=0;this.uh=new cg;this.Wb=new Yf(this);this.q=new Mf(this,b,d);this.viewport=new pc(this,c,f,e,g)}function eg(a){if(a.Oh===o)a.Oh=new Date;var c=new Date-a.Oh>=5E3;Vb>0&&!c?setTimeout(function(){eg(a)},50):(c&&alert("It appears to be taking a long time to load the game's images. You may experience some invisible objects until they finish loading, but the game will now start."),a.start())}
dg.prototype.update=function(a,c){if(this.paused)this.af=0,sc(this.viewport.ki),this.gd.bf&&this.gd.bf(a,c);else{this.gd.We&&this.gd.We(a,c);for(var b=this.uh,d=0;d<b.$g.length;d++)for(var e=b.$g[d],f=0;f<e.ah.length;f++)e.ah[f].apply(e,[a,c]);this.af+=c;for(b=a-this.af;this.af>=0.015;)this.af-=0.015,b+=0.015,this.gd.$j&&this.gd.$j(b,0.015),this.q.update(b,0.015);this.gd.Ve&&this.gd.Ve(a,c);uc(this.viewport.ki);b=this.viewport;b.display.style.visibility="hidden";if(b.Af.x!=b.Ea.x||b.Af.y!=b.Ea.y){b.Af.x=
b.Ea.x;b.Af.y=b.Ea.y;if(b.gb!==o)b.gb.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px",b.gb.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";b.display.style.left="-"+(b.Ea.x*b.scale-b.Cb.x/2)+"px";b.display.style.top="-"+(b.Ea.y*b.scale-b.Cb.y/2)+"px";d=b.Yf;e=b.Ea;f=mc(d);d.lowerBound.hg(f);d.upperBound.hg(f);d.lowerBound.Ob(e);d.upperBound.Ob(e);G(f)}var d=[],g;for(g in b.nc)d[g]=b.nc[g];g=b.Yf;var e=b.ya.q.Tg,h;for(h in e){var i=e[h];if(i.display){var j=i.display,k=i.nj(b.Ea),l=j.size;j.K.lowerBound.i(k.x-
l.x,k.y-l.y);j.K.upperBound.i(k.x+l.x,k.y+l.y);if(g.Md(j.K)){if(j.hd==o)j.hd=wc++;delete d[j.hd];if(b.nc[j.hd]==o)b.nc[j.hd]=document.createElement("span"),b.nc[j.hd].className="gameObject",b.nc[j.hd].style.zIndex=100+(j.vi||0),b.display.appendChild(b.nc[j.hd]);var f=b.nc[j.hd],r=Xb(f),p=b.scale!=r.scale;r.scale=b.scale;var u=k.x-l.x/2;if(p||r.left!=u)r.left=u,f.style.left=u*b.scale+"px";k=k.y-l.y/2;if(p||r.top!=k)r.top=k,f.style.top=k*b.scale+"px";k=l.x;if(p||r.width!=k)r.width=k,f.style.width=k*
b.scale+"px";l=l.y;if(p||r.height!=l)r.height=l,f.style.height=l*b.scale+"px";i=i.mj();if(r.rotation!=i)r.rotation=i,f.style.webkitTransform="rotate("+i+"rad)";if(j.Uf!=o){j=j.Uf;r=q;i=Xb(f);if(i.Si!=j.url)i.Si=j.url,f.style.backgroundImage="url("+j.url+")",f.style.backgroundColor="transparent",r=n;else if(i.Ti!=j.rb.x||i.Ui!=j.rb.y)r=n;if(r)i.Ti=j.rb.x,i.Ui=j.rb.y,f.style.backgroundPosition=(j.ji.x+(j.rb.x-1)*j.ri.x)*-1+"px "+(j.ji.y+(j.rb.y-1)*j.ri.y)*-1+"px"}}}}for(var s in d)b.display.removeChild(d[s]),
delete b.nc[s];if(b.gb!==o){b.gb.style.visibility="hidden";h=b.ya.q.ga;if(h.Oa!==o){h.Oa.Qj.oj.clear();s=h.Oa.Xh;if(s&Zb)for(d=h.Gb.O(Me);d;d=d.next){e=d.body;for(g=e.Sc.O();g;g=g.next)f=g.Ja,f=f.X,e.jd()?e.D==0?Cf(h,f,e.e,Ff):e.D==1?Cf(h,f,e.e,Gf):e.Mb?Cf(h,f,e.e,If):Cf(h,f,e.e,Hf):Cf(h,f,e.e,Ef)}if(s&$b)for(d=h.ia;d;d=d.xc)g=h,e=d,e instanceof hf?(f=e.jc(),j=e.kc(),g.Oa.Kc(f,j,Df),G(f),G(j)):e instanceof ld?(f=e.jc(),j=e.kc(),r=e.hb.e.position.da(),r.Ob(e.cc),i=e.hb.e.position.da(),i.Ob(e.dc),g.Oa.Kc(r,
f,Df),g.Oa.Kc(i,j,Df),g.Oa.Kc(r,i,Df),G(f),G(j),G(r),G(i)):(f=e.jc(),j=e.kc(),e.w!=g.Ig&&g.Oa.Kc(e.w.e.position,f,Df),g.Oa.Kc(f,j,Df),e.z!=g.Ig&&g.Oa.Kc(e.z.e.position,j,Df),G(f),G(j));if(s&dc)for(d=h.rf.O();d;d=d.next)d.zh.ik(h.Oa);if(s&bc)for(d=h.xa.O(T);d;d=d.next)e=d.va.V,g=mc(d.va.Q.Lb),e=mc(e.Lb),h.Oa.Kc(g,e,Jf),G(g),G(e);if(s&ac)for(d=h.Gb.O(Se);d;d=d.next){e=d.body;for(g=e.Sc.O();g;g=g.next)f=g.Ja,e=h.Ka.vd.Id(f.ad),e=[F(e.lowerBound.x,e.lowerBound.y),F(e.upperBound.x,e.lowerBound.y),F(e.upperBound.x,
e.upperBound.y),F(e.lowerBound.x,e.upperBound.y)],h.Oa.xi(e),G(e[0]),G(e[1]),G(e[2]),G(e[3])}if(s&cc)for(d=h.Gb.O(Me);d;d=d.next)e=d.body,hc.d=e.e.d,hc.position=V(e),h.Oa.Ai()}b.gb.style.visibility=""}b.display.style.visibility=""}};dg.prototype.start=function(){uc(this.viewport.zg);Na(fg,this);gg||(hg=document.getElementById("fps"),gg=n,ig())};var gg=q,fg=[],jg=60,kg=o,hg=o;
function ig(a){a==o&&(a=(new Date).getTime());var c=0;kg!==o?c=(a-kg)/1E3:kg=a;if(c>0){c>0.2&&(c=0.2);if(hg){for(var b=0,d=0,e=0;e<fg.length;e++)b+=fg[e].q.ga.cg(),d+=fg[e].q.ga.dg();e=1/c;jg=jg*0.99+e*0.01;hg.innerHTML=Math.round(e)+" FPS<br>"+Math.round(jg)+" Rolling FPS<br>"+b+" World Objects<br>"+d+" Active Contacts"}kg=a;for(e=0;e<fg.length;e++)fg[e].update(a,c);for(var f in Eb)Eb[f].ui=n;zb=yb;Bb=Ab;Db=Cb}xc(ig,document.body)};function lg(){this.type=0;this.u=this.s=o;this.ng=q};function mg(){lg.call(this);this.vf=F(0,0);this.wf=F(0,0);this.Ua=F(0,0);this.Va=F(0,0);this.type=4;this.vf.i(-1,1);this.wf.i(1,1);this.Ua.i(-1,0);this.Va.i(1,0);this.gi=this.yg=this.fi=this.xg=0;this.ed=1;this.ng=n}y(mg,lg);
mg.prototype.T=function(a,c,b,d,e,f,g){g===m&&(g=0);this.s=a;this.u=c;this.vf.m(b);this.wf.m(d);this.Ua=Kc(this.s.e,e);this.Va=Kc(this.u.e,f);a=e.x-b.x;b=e.y-b.y;this.xg=Math.sqrt(a*a+b*b);b=f.x-d.x;d=f.y-d.y;this.yg=Math.sqrt(b*b+d*d);this.ed=g;g=this.xg+this.ed*this.yg;this.fi=g-this.ed*md;this.gi=(g-md)/this.ed};mg.prototype.Ic=function(){return new ld(this)};function ng(a,c,b){C(B("Box2D.Common.Math.b2Vec3"));this.x=a;this.y=c;this.l=b}var og=[];function Z(a,c,b){Ob(B("Box2D.Common.Math.b2Vec3"));if(og.length>0){var d=og.pop();d.i(a,c,b);return d}return new ng(a,c,b)}function pg(a){a!=o&&(Pb(B("Box2D.Common.Math.b2Vec3")),og.push(a))}v=ng.prototype;v.I=function(){this.l=this.y=this.x=0};v.i=function(a,c,b){this.x=a;this.y=c;this.l=b};v.m=function(a){this.x=a.x;this.y=a.y;this.l=a.l};v.Db=function(){return Z(-this.x,-this.y,-this.l)};
v.hf=function(){this.x=-this.x;this.y=-this.y;this.l=-this.l};v.da=function(){return Z(this.x,this.y,this.l)};v.Ob=function(a){this.x+=a.x;this.y+=a.y;this.l+=a.l};v.hg=function(a){this.x-=a.x;this.y-=a.y;this.l-=a.l};v.mc=function(a){this.x*=a;this.y*=a;this.l*=a};function qg(a,c,b){C(B("Box2D.Common.Math.b2Mat33"));this.a=Z(0,0,0);this.b=Z(0,0,0);this.L=Z(0,0,0);a&&this.a.m(a);c&&this.b.m(c);b&&this.L.m(b)}v=qg.prototype;v.da=function(){return new qg(this.a,this.b,this.L)};v.Kd=function(a){this.a.m(a.a);this.b.m(a.b);this.L.m(a.L)};v.$f=function(a){this.a.x+=a.a.x;this.a.y+=a.a.y;this.a.l+=a.a.l;this.b.x+=a.b.x;this.b.y+=a.b.y;this.b.l+=a.b.l;this.L.x+=a.L.x;this.L.y+=a.L.y;this.L.l+=a.L.l};v.jf=function(){this.a.i(1,0,0);this.b.i(0,1,0);this.L.i(0,0,1)};
v.I=function(){this.a.i(0,0,0);this.b.i(0,0,0);this.L.i(0,0,0)};function rg(a,c,b,d){var e=a.a.x,f=a.b.x,g=a.a.y,a=a.b.y,h=e*a-f*g;h!=0&&(h=1/h);c.x=h*(a*b-f*d);c.y=h*(e*d-g*b)}function sg(a,c,b,d,e){var f=a.a.x,g=a.a.y,h=a.a.l,i=a.b.x,j=a.b.y,k=a.b.l,l=a.L.x,r=a.L.y,a=a.L.l,p=f*(j*a-k*r)+g*(k*l-i*a)+h*(i*r-j*l);p!=0&&(p=1/p);c.x=p*(b*(j*a-k*r)+d*(k*l-i*a)+e*(i*r-j*l));c.y=p*(f*(d*a-e*r)+g*(e*l-b*a)+h*(b*r-d*l));c.l=p*(f*(j*e-k*d)+g*(k*b-i*e)+h*(i*d-j*b))};function tg(a){P.call(this,a);this.F=F(0,0);this.G=F(0,0);this.Zc=F(0,0);this.Gf=F(0,0);this.B=F(0,0);this.na=F(0,0);this.P=new qg;this.j=Z(0,0,0);this.F.m(a.Ua);this.G.m(a.Va);this.Zc.m(a.Ag);this.Gf.x=-this.Zc.y;this.Gf.y=this.Zc.x;this.Pj=a.fd;this.j.I();this.za=this.ec=0;this.$d=a.Sh;this.fe=a.si;this.Nj=a.Sj;this.Mg=a.Sg;this.xd=a.tf;this.Le=a.sg;this.aa=0;this.B.I();this.na.I()}y(tg,P);v=tg.prototype;v.jc=function(){return Q(this.w,this.F)};v.kc=function(){return Q(this.z,this.G)};
function ug(a){var c=a.w,b=a.z,d=Q(c,a.F),e=Q(b,a.G),b=e.x-d.x,f=e.y-d.y;G(d);G(e);a=Ic(c.e.d,a.Zc);c=a.x*b+a.y*f;G(a);return c}
v.Sb=function(a){var c=this.w,b=this.z,d,e=0;this.Pe.m(c.c.r);this.Qe.m(b.c.r);var f=c.ub();d=c.e.d;var g=this.F.x-this.Pe.x,h=this.F.y-this.Pe.y,e=d.a.x*g+d.b.x*h,h=d.a.y*g+d.b.y*h,g=e;d=b.e.d;var i=this.G.x-this.Qe.x,j=this.G.y-this.Qe.y,e=d.a.x*i+d.b.x*j,j=d.a.y*i+d.b.y*j,i=e;d=b.c.h.x+i-c.c.h.x-g;e=b.c.h.y+j-c.c.h.y-h;this.Ab=c.k;this.Bb=b.k;this.Uc=c.v;this.Vc=b.v;var k=Ic(f.d,this.Zc);this.B.m(k);G(k);this.Ma=(d+g)*this.B.y-(e+h)*this.B.x;this.Na=i*this.B.y-j*this.B.x;this.ec=this.Ab+this.Bb+
this.Uc*this.Ma*this.Ma+this.Vc*this.Na*this.Na;if(this.ec>Number.MIN_VALUE)this.ec=1/this.ec;f=Ic(f.d,this.Gf);this.na.m(f);G(f);this.Pa=(d+g)*this.na.y-(e+h)*this.na.x;this.Qa=i*this.na.y-j*this.na.x;g=this.Ab;h=this.Bb;i=this.Uc;j=this.Vc;this.P.a.x=g+h+i*this.Pa*this.Pa+j*this.Qa*this.Qa;this.P.a.y=i*this.Pa+j*this.Qa;this.P.a.l=i*this.Pa*this.Ma+j*this.Qa*this.Na;this.P.b.x=this.P.a.y;this.P.b.y=i+j;this.P.b.l=i*this.Ma+j*this.Na;this.P.L.x=this.P.a.l;this.P.L.y=this.P.b.l;this.P.L.l=g+h+i*this.Ma*
this.Ma+j*this.Na*this.Na;if(this.xd)if(d=this.B.x*d+this.B.y*e,Math.abs(this.fe-this.$d)<0.01)this.aa=3;else if(d<=this.$d){if(this.aa!=1)this.aa=1,this.j.l=0}else if(d>=this.fe){if(this.aa!=2)this.aa=2,this.j.l=0}else this.aa=0,this.j.l=0;else this.aa=0;if(this.Le==q)this.za=0;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x*this.na.x+(this.za+this.j.l)*this.B.x,d=this.j.x*this.na.y+(this.za+this.j.l)*this.B.y,e=this.j.x*this.Pa+this.j.y+(this.za+this.j.l)*this.Ma,g=this.j.x*this.Qa+
this.j.y+(this.za+this.j.l)*this.Na,c.f.x-=this.Ab*a,c.f.y-=this.Ab*d,c.o-=this.Uc*e,b.f.x+=this.Bb*a,b.f.y+=this.Bb*d,b.o+=this.Vc*g):(this.j.I(),this.za=0)};
v.Fb=function(a){var c=this.w,b=this.z,d=c.f,e=c.o,f=b.f,g=b.o,h=0,i=0,j=0,k=0;if(this.Le&&this.aa!=3)k=this.ec*(this.Mg-(this.B.x*(f.x-d.x)+this.B.y*(f.y-d.y)+this.Na*g-this.Ma*e)),h=this.za,a=a.ja*this.Nj,this.za=K(this.za+k,-a,a),k=this.za-h,h=k*this.B.x,i=k*this.B.y,j=k*this.Ma,k*=this.Na,d.x-=this.Ab*h,d.y-=this.Ab*i,e-=this.Uc*j,f.x+=this.Bb*h,f.y+=this.Bb*i,g+=this.Vc*k;j=this.na.x*(f.x-d.x)+this.na.y*(f.y-d.y)+this.Qa*g-this.Pa*e;i=g-e;if(this.xd&&this.aa!=0){k=this.B.x*(f.x-d.x)+this.B.y*
(f.y-d.y)+this.Na*g-this.Ma*e;h=this.j.da();a=Z(0,0,0);sg(this.P,a,-j,-i,-k);this.j.Ob(a);if(this.aa==1)this.j.l=Math.max(this.j.l,0);else if(this.aa==2)this.j.l=Math.min(this.j.l,0);j=-j-(this.j.l-h.l)*this.P.L.x;i=-i-(this.j.l-h.l)*this.P.L.y;k=F(0,0);rg(this.P,k,j,i);k.x+=h.x;k.y+=h.y;this.j.x=k.x;this.j.y=k.y;G(k);a.x=this.j.x-h.x;a.y=this.j.y-h.y;a.l=this.j.l-h.l;h=a.x*this.na.x+a.l*this.B.x;i=a.x*this.na.y+a.l*this.B.y;j=a.x*this.Pa+a.y+a.l*this.Ma;k=a.x*this.Qa+a.y+a.l*this.Na;pg(a)}else a=
F(0,0),rg(this.P,a,-j,-i),this.j.x+=a.x,this.j.y+=a.y,h=a.x*this.na.x,i=a.x*this.na.y,j=a.x*this.Pa+a.y,k=a.x*this.Qa+a.y,G(a);d.x-=this.Ab*h;d.y-=this.Ab*i;e-=this.Uc*j;f.x+=this.Bb*h;f.y+=this.Bb*i;g+=this.Vc*k;c.f.m(d);c.o=e;b.f.m(f);b.o=g};
v.Eb=function(){var a=this.w,c=this.z,b=a.c.h,d=a.c.p,e=c.c.h,f=c.c.p,g=0,h=0,i=0,j=g=0,k=0,l=0,h=q,r=0,p=Ec(d),l=this.F.x-this.Pe.x,u=this.F.y-this.Pe.y,g=p.a.x*l+p.b.x*u,u=p.a.y*l+p.b.y*u;Dc(p);var l=g,j=Ec(f),s=this.G.x-this.Qe.x,i=this.G.y-this.Qe.y,g=j.a.x*s+j.b.x*i,i=j.a.y*s+j.b.y*i;Dc(j);s=g;g=e.x+s-b.x-l;j=e.y+i-b.y-u;if(this.xd){G(this.B);this.B=Ic(p,this.Zc);this.Ma=(g+l)*this.B.y-(j+u)*this.B.x;this.Na=s*this.B.y-i*this.B.x;var x=this.B.x*g+this.B.y*j;Math.abs(this.fe-this.$d)<0.01?(r=
K(x,-0.2,0.2),k=Math.abs(x),h=n):x<=this.$d?(r=K(x-this.$d+0.005,-0.2,0),k=this.$d-x,h=n):x>=this.fe&&(r=K(x-this.fe+0.005,0,0.2),k=x-this.fe,h=n)}G(this.na);this.na=Ic(p,this.Gf);this.Pa=(g+l)*this.na.y-(j+u)*this.na.x;this.Qa=s*this.na.y-i*this.na.x;p=Z(0,0,0);u=this.na.x*g+this.na.y*j;s=f-d-this.Pj;k=Math.max(k,Math.abs(u));l=Math.abs(s);h?(h=this.Ab,i=this.Bb,g=this.Uc,j=this.Vc,this.P.a.x=h+i+g*this.Pa*this.Pa+j*this.Qa*this.Qa,this.P.a.y=g*this.Pa+j*this.Qa,this.P.a.l=g*this.Pa*this.Ma+j*this.Qa*
this.Na,this.P.b.x=this.P.a.y,this.P.b.y=g+j,this.P.b.l=g*this.Ma+j*this.Na,this.P.L.x=this.P.a.l,this.P.L.y=this.P.b.l,this.P.L.l=h+i+g*this.Ma*this.Ma+j*this.Na*this.Na,sg(this.P,p,-u,-s,-r)):(h=this.Ab,i=this.Bb,g=this.Uc,j=this.Vc,r=g*this.Pa+j*this.Qa,x=g+j,this.P.a.i(h+i+g*this.Pa*this.Pa+j*this.Qa*this.Qa,r,0),this.P.b.i(r,x,0),r=F(0,0),rg(this.P,r,-u,-s),p.x=r.x,p.y=r.y,G(r),p.l=0);r=p.x*this.na.x+p.l*this.B.x;h=p.x*this.na.y+p.l*this.B.y;u=p.x*this.Pa+p.y+p.l*this.Ma;s=p.x*this.Qa+p.y+p.l*
this.Na;pg(p);b.x-=this.Ab*r;b.y-=this.Ab*h;d-=this.Uc*u;e.x+=this.Bb*r;e.y+=this.Bb*h;f+=this.Vc*s;a.c.p=d;c.c.p=f;R(a);R(c);return k<=0.005&&l<=Lc};function vg(){lg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.Ag=F(0,0);this.type=2;this.Ag.i(1,0);this.fd=0;this.tf=q;this.si=this.Sh=0;this.sg=q;this.Sg=this.Sj=0}y(vg,lg);vg.prototype.T=function(a,c,b,d){this.s=a;this.u=c;this.Ua=Kc(this.s.e,b);this.Va=Kc(this.u.e,b);this.Ag=Jc(this.s.e.d,d);this.fd=this.u.Rb()-this.s.Rb()};vg.prototype.Ic=function(){return new tg(this)};function wg(a,c,b){this.execute=a;this.name=c;this.jj=b};function $(a){this.ya=a;this.ya.q.Ha.push(this)}
$.prototype.wb=function(a,c){var b=Qf(this.ya.q,a,c);$.sj(b);$.uj(b);$.tj(b);var d=new O,e=new E(a.x/2,a.y/2);fd(d,[new E(-e.x+0.01,e.y-0.01),new E(-e.x-0.01,0),new E(-e.x+0.01,-e.y+0.01),new E(e.x-0.01,-e.y+0.01),new E(e.x+0.01,0),new E(e.x-0.01,e.y-0.01)]);b.qk=Uf(b.body,d,{oc:{xb:0}});b.Ca={};b.Ca.Of=new wg(function(){b.g.qc.vj()},"Move Up",n);b.Ca.Nf=new wg(aa(),"Move Down",n);b.Ca.ge=new wg(function(){b.g.ie.ge()},"Move Left",n);b.Ca.he=new wg(function(){b.g.ie.he()},"Move Right",n);return b};
(function(a){a.vb=0.1;a.hk=new E(0,9.8);a.Jc={ff:new E(0,9.8),Ci:1.5,jh:8,Gi:1};a.Tb={wi:1,Bi:2,Ei:4,gk:8,fh:16,ih:32,ag:64};a.Di={Fi:1,fk:2,jk:4};a.S={Ld:1,kd:2,tb:4,ld:8};a.wg=function(c,b){c.g=c.g||{};c.g.type|=a.Tb.wi;c.g.sf={Yj:b&a.S.Ld,Vj:b&a.S.tb,Wj:b&a.S.kd,Xj:b&a.S.ld};c.ye.push(function(b,c,f,g,h,i,j){if(!b.disabled)if(b.disabled=n,f=new Ve,ee(b,f),f=f.N,b.Q==j&&(f=f.Db()),!c.g.sf.Yj&&f.y<-a.vb)b.disabled=q;else if(!c.g.sf.Vj&&f.y>a.vb)b.disabled=q;else if(!c.g.sf.Xj&&f.x>a.vb)b.disabled=
q;else if(!c.g.sf.Wj&&f.x<-a.vb)b.disabled=q})};a.sj=function(c){var b=$.Jc.jh;c.g=c.g||{};c.g.type|=a.Tb.Bi;c.g.qc={td:[],speed:b,vj:function(){var b=c.g.qc.td;if(b.length>0){var e=c.body.t*c.g.qc.speed*a.Jc.Ci,f=V(c.body),g=c.body.f;g.y=0;var h=c.body;h.D!=0&&h.f.m(g);sf(c.body,new E(0,-e),f);for(g=0;g<b.length;g++)sf(b[g].H(),new E(0,e/b.length),f)}}};c.ve.push(function(a,b,c,g,h,i,j,k){if(!a.disabled)if(b=new Ve,ee(a,b),b=b.N,a.Q==k&&(b=b.Db()),b.y>0.5){if(!(Ma(c.g.qc.td,k)>=0))Na(c.g.qc.td,k),
a.Dd=a.Dd||[],Na(a.Dd,c)}else Ma(c.g.qc.td,k)>=0&&(Oa(c.g.qc.td,k),Oa(a.Dd,c))})};a.uj=function(c){var b=$.Jc.jh,d=$.Jc.Gi;c.g=c.g||{};c.g.type|=a.Tb.Ei;c.g.ie={th:d,speed:b,he:function(){var a=c.body.f,a=Math.min(a.x+c.g.ie.th,c.g.ie.speed)-a.x;a>0&&sf(c.body,new E(c.body.t*a,0),V(c.body))},ge:function(){var a=c.body.f,a=Math.max(a.x-c.g.ie.th,-c.g.ie.speed)-a.x;a<0&&sf(c.body,new E(c.body.t*a,0),V(c.body))}}};a.Td=function(c,b,d,e){c.g=c.g||{};c.g.type|=a.Tb.ag;c.g.A=c.g.A||{};if(d&a.S.Ld)c.g.A.vg=
n,c.g.A.Ze=c.g.A.Ze||[],c.g.A.Ze.push(b);if(d&a.S.tb)c.g.A.vg=n,c.g.A.ze=c.g.A.ze||[],c.g.A.ze.push(b);if(d&a.S.kd)c.g.A.vg=n,c.g.A.He=c.g.A.He||[],c.g.A.He.push(b);if(d&a.S.ld)c.g.A.vg=n,c.g.A.Xe=c.g.A.Xe||[],c.g.A.Xe.push(b);if(e&a.S.Ld)c.g.A.xf=n,c.g.A.$e=c.g.A.$e||[],c.g.A.$e.push(b);if(e&a.S.tb)c.g.A.xf=n,c.g.A.Ae=c.g.A.Ae||[],c.g.A.Ae.push(b);if(e&a.S.kd)c.g.A.xf=n,c.g.A.Ie=c.g.A.Ie||[],c.g.A.Ie.push(b);if(e&a.S.ld)c.g.A.xf=n,c.g.A.Ye=c.g.A.Ye||[],c.g.A.Ye.push(b)};a.rj=function(c,b){c.g=c.g||
{};c.g.type|=a.Tb.fh;c.g.qg={ak:b,filter:0}};a.tj=function(c){var b=$.Di.Fi;c.g=c.g||{};c.g.type|=a.Tb.ih;c.g.yj={filter:b}};a.prototype.Vb=o;a.prototype.mh=o;a.prototype.me=function(a){if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.nh(a,d,f,e),f.g&&this.nh(a,f,d,b))}};a.prototype.nh=function(c,b,d,e){if(b.g.type&a.Tb.ag){var f=new Ve;ee(c,f);f=f.N;c.Q==e&&(f=f.Db());if(f.y<-a.vb&&b.g.A.Ze)for(e=0;e<b.g.A.Ze.length;e++)b.g.A.Ze[e](c);else if(f.y>a.vb&&b.g.A.ze)for(e=
0;e<b.g.A.ze.length;e++)b.g.A.ze[e](c);if(f.x>a.vb&&b.g.A.He)for(e=0;e<b.g.A.He.length;e++)b.g.A.He[e](c);else if(f.x<-a.vb&&b.g.A.Xe)for(e=0;e<b.g.A.Xe.length;e++)b.g.A.Xe[e](c)}b.g.type&a.Tb.fh&&d.g&&d.g.type&a.Tb.ih&&(b.g.qg.filter==0||b.g.qg.filter&d.g.yj.filter)&&Xf(this.ya.q,d,b.g.qg.ak)};a.prototype.Hd=function(a){if(a.Dd){for(var b=0;b<a.Dd.length;b++){var d=a.Dd[b];Oa(d.g.qc.td,a.Q);Oa(d.g.qc.td,a.V)}a.Dd=o}if(!a.disabled){var b=a.Q,d=b.H().object,e=a.V,f=e.H().object;d&&f&&(d.g&&this.oh(a,
d,e),f.g&&this.oh(a,f,b))}};a.prototype.oh=function(c,b,d){if(b.g.type&a.Tb.ag&&b.g.A.xf){var e=new Ve;ee(c,e);e=e.N;c.Q==d&&(e=e.Db());if(e.y<-a.vb&&b.g.A.$e)for(d=0;d<b.g.A.$e.length;d++)b.g.A.$e[d](c);else if(e.y>a.vb&&b.g.A.Ae)for(d=0;d<b.g.A.Ae.length;d++)b.g.A.Ae[d](c);if(e.x>a.vb&&b.g.A.Ie)for(d=0;d<b.g.A.Ie.length;d++)b.g.A.Ie[d](c);else if(e.x<-a.vb&&b.g.A.Ye)for(d=0;d<b.g.A.Ye.length;d++)b.g.A.Ye[d](c)}};a.prototype.we=o;a.prototype.ue=o;a.prototype.$a=function(a,b){return X(this.ya.q,a,
b,n)};a.prototype.Qc=function(c,b,d){c=X(this.ya.q,c,b,n,o,o);if(d===m||d===o)d=a.S.tb|a.S.kd|a.S.ld;a.wg(c,d);return c};a.prototype.qj=function(c,b){var d=this;a.Td(c,function(){Wf(d.ya.q,c)},b,o)};a.prototype.Ce=function(c,b){var d,e=X(this.ya.q,c,b,n,o,o);if(d===m||d===o)d=a.S.tb;this.qj(e,d);return e};a.prototype.$i=function(c,b,d){c=X(this.ya.q,c,b,n,o,o);a.rj(c,d);return c}})($);function xg(){lg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=3;this.length=1;this.Eh=this.Kh=0}y(xg,lg);xg.prototype.T=function(a,c,b,d){this.s=a;this.u=c;this.Ua.m(Kc(this.s.e,b));this.Va.m(Kc(this.u.e,d));a=d.x-b.x;b=d.y-b.y;this.length=Math.sqrt(a*a+b*b);this.Eh=this.Kh=0};xg.prototype.Ic=function(){return new hf(this)};function yg(a){P.call(this,a);this.Xc=F(0,0);this.Yc=F(0,0);this.j=Z(0,0,0);this.t=new qg;this.Xc.m(a.Ua);this.Yc.m(a.Va);this.Se=a.fd}y(yg,P);v=yg.prototype;v.jc=function(){return Q(this.w,this.Xc)};v.kc=function(){return Q(this.z,this.Yc)};
v.Sb=function(a){var c,b=0,d=this.w,e=this.z;c=d.e.d;var f=this.Xc.x-d.c.r.x,g=this.Xc.y-d.c.r.y,b=c.a.x*f+c.b.x*g,g=c.a.y*f+c.b.y*g,f=b;c=e.e.d;var h=this.Yc.x-e.c.r.x,i=this.Yc.y-e.c.r.y,b=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=b;c=d.k;var b=e.k,j=d.v,k=e.v;this.t.a.x=c+b+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=c+b+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.j.l*=
a.ab,d.f.x-=c*this.j.x,d.f.y-=c*this.j.y,d.o-=j*(f*this.j.y-g*this.j.x+this.j.l),e.f.x+=b*this.j.x,e.f.y+=b*this.j.y,e.o+=k*(h*this.j.y-i*this.j.x+this.j.l)):this.j.I()};
v.Fb=function(){var a,c=0,b=this.w,d=this.z,e=b.f,f=b.o,g=d.f,h=d.o,i=b.k,j=d.k,k=b.v,l=d.v;a=b.e.d;var r=this.Xc.x-b.c.r.x,p=this.Xc.y-b.c.r.y,c=a.a.x*r+a.b.x*p,p=a.a.y*r+a.b.y*p,r=c;a=d.e.d;var u=this.Yc.x-d.c.r.x,s=this.Yc.y-d.c.r.y,c=a.a.x*u+a.b.x*s,s=a.a.y*u+a.b.y*s,u=c;a=g.x-h*s-e.x+f*p;var c=g.y+h*u-e.y-f*r,x=h-f,z=Z(0,0,0);sg(this.t,z,-a,-c,-x);this.j.Ob(z);e.x-=i*z.x;e.y-=i*z.y;f-=k*(r*z.y-p*z.x+z.l);g.x+=j*z.x;g.y+=j*z.y;h+=l*(u*z.y-s*z.x+z.l);pg(z);b.o=f;d.o=h};
v.Eb=function(){var a,c=0,b=this.w,d=this.z;a=b.e.d;var e=this.Xc.x-b.c.r.x,f=this.Xc.y-b.c.r.y,c=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=c;a=d.e.d;var g=this.Yc.x-d.c.r.x,h=this.Yc.y-d.c.r.y,c=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=c;a=b.k;var c=d.k,i=b.v,j=d.v,k=d.c.h.x+g-b.c.h.x-e,l=d.c.h.y+h-b.c.h.y-f,r=d.c.p-b.c.p-this.Se,p=Math.sqrt(k*k+l*l),u=Math.abs(r);p>0.05&&(i*=1,j*=1);this.t.a.x=a+c+f*f*i+h*h*j;this.t.b.x=-f*e*i-h*g*j;this.t.L.x=-f*i-h*j;this.t.a.y=this.t.b.x;this.t.b.y=a+c+e*e*i+g*g*j;this.t.L.y=
e*i+g*j;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=i+j;var s=Z(0,0,0);sg(this.t,s,-k,-l,-r);b.c.h.x-=a*s.x;b.c.h.y-=a*s.y;b.c.p-=i*(e*s.y-f*s.x+s.l);d.c.h.x+=c*s.x;d.c.h.y+=c*s.y;d.c.p+=j*(g*s.y-h*s.x+s.l);pg(s);R(b);R(d);return p<=0.005&&u<=Lc};function zg(){lg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=8;this.fd=0}y(zg,lg);zg.prototype.T=function(a,c,b){this.s=a;this.u=c;this.Ua.m(Kc(this.s.e,b));this.Va.m(Kc(this.u.e,b));this.fd=this.u.Rb()-this.s.Rb()};zg.prototype.Ic=function(){return new yg(this)};function Ag(a){P.call(this,a);this.fb=new Ac;this.re=new Ac;this.se=new Ac;this.te=new Ac;this.Fa=Z(0,0,0);this.Ib=F(0,0);this.ic=F(0,0);this.F=F(0,0);this.G=F(0,0);this.j=Z(0,0,0);this.t=new qg;this.F.m(a.Ua);this.G.m(a.Va);this.Se=a.fd;this.j.I();this.za=0;this.Hf=a.zj;this.Qg=a.ek;this.Oj=a.Tj;this.Mg=a.Sg;this.xd=a.tf;this.Le=a.sg;this.aa=0}y(Ag,P);v=Ag.prototype;v.jc=function(){return Q(this.w,this.F)};v.kc=function(){return Q(this.z,this.G)};function Bg(a){return a.z.c.p-a.w.c.p-a.Se}
v.Sb=function(a){var c=this.w,b=this.z,d,e=0;d=c.e.d;var f=this.F.x-c.c.r.x,g=this.F.y-c.c.r.y,e=d.a.x*f+d.b.x*g,g=d.a.y*f+d.b.y*g,f=e;d=b.e.d;var h=this.G.x-b.c.r.x,i=this.G.y-b.c.r.y,e=d.a.x*h+d.b.x*i,i=d.a.y*h+d.b.y*i,h=e;d=c.k;var e=b.k,j=c.v,k=b.v;this.t.a.x=d+e+g*g*j+i*i*k;this.t.b.x=-g*f*j-i*h*k;this.t.L.x=-g*j-i*k;this.t.a.y=this.t.b.x;this.t.b.y=d+e+f*f*j+h*h*k;this.t.L.y=f*j+h*k;this.t.a.l=this.t.L.x;this.t.b.l=this.t.L.y;this.t.L.l=j+k;this.ec=1/(j+k);if(!this.Le)this.za=0;if(this.xd){var l=
b.c.p-c.c.p-this.Se;if(Math.abs(this.Qg-this.Hf)<2*Lc)this.aa=3;else if(l<=this.Hf){if(this.aa!=1)this.j.l=0;this.aa=1}else if(l>=this.Qg){if(this.aa!=2)this.j.l=0;this.aa=2}else this.aa=0,this.j.l=0}else this.aa=0;a.Fd?(this.j.x*=a.ab,this.j.y*=a.ab,this.za*=a.ab,a=this.j.x,l=this.j.y,c.f.x-=d*a,c.f.y-=d*l,c.o-=j*(f*l-g*a+this.za+this.j.l),b.f.x+=e*a,b.f.y+=e*l,b.o+=k*(h*l-i*a+this.za+this.j.l)):(this.j.I(),this.za=0)};
v.Fb=function(a){var c=this.w,b=this.z,d=0,e=d=0,f=0,g=0,h=0,i=c.f,j=c.o,k=b.f,l=b.o,r=c.k,p=b.k,u=c.v,s=b.v;if(this.Le&&this.aa!=3)e=this.ec*-(l-j-this.Mg),f=this.za,g=a.ja*this.Oj,this.za=K(this.za+e,-g,g),e=this.za-f,j-=u*e,l+=s*e;if(this.xd&&this.aa!=0){var a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,a=k.x+-l*h-i.x- -j*f,x=k.y+l*g-i.y-j*e;sg(this.t,this.Fa,-a,-x,-(l-
j));if(this.aa==3)this.j.Ob(this.Fa);else if(this.aa==1){if(d=this.j.l+this.Fa.l,d<0)rg(this.t,this.ic,-a,-x),this.Fa.x=this.ic.x,this.Fa.y=this.ic.y,this.Fa.l=-this.j.l,this.j.x+=this.ic.x,this.j.y+=this.ic.y,this.j.l=0}else if(this.aa==2&&(d=this.j.l+this.Fa.l,d>0))rg(this.t,this.ic,-a,-x),this.Fa.x=this.ic.x,this.Fa.y=this.ic.y,this.Fa.l=-this.j.l,this.j.x+=this.ic.x,this.j.y+=this.ic.y,this.j.l=0;i.x-=r*this.Fa.x;i.y-=r*this.Fa.y;j-=u*(e*this.Fa.y-f*this.Fa.x+this.Fa.l);k.x+=p*this.Fa.x;k.y+=
p*this.Fa.y;l+=s*(g*this.Fa.y-h*this.Fa.x+this.Fa.l)}else a=c.e.d,e=this.F.x-c.c.r.x,f=this.F.y-c.c.r.y,d=a.a.x*e+a.b.x*f,f=a.a.y*e+a.b.y*f,e=d,a=b.e.d,g=this.G.x-b.c.r.x,h=this.G.y-b.c.r.y,d=a.a.x*g+a.b.x*h,h=a.a.y*g+a.b.y*h,g=d,rg(this.t,this.Ib,-(k.x+-l*h-i.x- -j*f),-(k.y+l*g-i.y-j*e)),this.j.x+=this.Ib.x,this.j.y+=this.Ib.y,i.x-=r*this.Ib.x,i.y-=r*this.Ib.y,j-=u*(e*this.Ib.y-f*this.Ib.x),k.x+=p*this.Ib.x,k.y+=p*this.Ib.y,l+=s*(g*this.Ib.y-h*this.Ib.x);c.f.m(i);c.o=j;b.f.m(k);b.o=l};
v.Eb=function(){var a=0,c,b=this.w,d=this.z,e=0,f=c=0,g=0,h=0;if(this.xd&&this.aa!=0){var a=d.c.p-b.c.p-this.Se,i=0;this.aa==3?(a=K(a-this.Hf,-Mc,Mc),i=-this.ec*a,e=Math.abs(a)):this.aa==1?(a-=this.Hf,e=-a,a=K(a+Lc,-Mc,0),i=-this.ec*a):this.aa==2&&(a-=this.Qg,e=a,a=K(a-Lc,0,Mc),i=-this.ec*a);b.c.p-=b.v*i;d.c.p+=d.v*i;R(b);R(d)}c=b.e.d;i=this.F.x-b.c.r.x;a=this.F.y-b.c.r.y;f=c.a.x*i+c.b.x*a;a=c.a.y*i+c.b.y*a;i=f;c=d.e.d;var j=this.G.x-d.c.r.x,k=this.G.y-d.c.r.y,f=c.a.x*j+c.b.x*k,k=c.a.y*j+c.b.y*k,
j=f,g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a,l=g*g+h*h;c=Math.sqrt(l);var f=b.k,r=d.k,p=b.v,u=d.v;l>0.05*0.05&&(l=1/(f+r),g=l*-g,h=l*-h,b.c.h.x-=0.5*f*g,b.c.h.y-=0.5*f*h,d.c.h.x+=0.5*r*g,d.c.h.y+=0.5*r*h,g=d.c.h.x+j-b.c.h.x-i,h=d.c.h.y+k-b.c.h.y-a);this.re.a.x=f+r;this.re.b.x=0;this.re.a.y=0;this.re.b.y=f+r;this.se.a.x=p*a*a;this.se.b.x=-p*i*a;this.se.a.y=-p*i*a;this.se.b.y=p*i*i;this.te.a.x=u*k*k;this.te.b.x=-u*j*k;this.te.a.y=-u*j*k;this.te.b.y=u*j*j;this.fb.Kd(this.re);this.fb.$f(this.se);this.fb.$f(this.te);
this.fb.xe(Cg,-g,-h);g=Cg.x;h=Cg.y;b.c.h.x-=b.k*g;b.c.h.y-=b.k*h;b.c.p-=b.v*(i*h-a*g);d.c.h.x+=d.k*g;d.c.h.y+=d.k*h;d.c.p+=d.v*(j*h-k*g);R(b);R(d);return c<=0.005&&e<=Lc};var Cg=F(0,0);function Dg(){lg.call(this);this.Ua=F(0,0);this.Va=F(0,0);this.type=1;this.Ua.I();this.Va.I();this.Sg=this.Tj=this.ek=this.zj=this.fd=0;this.sg=this.tf=q}y(Dg,lg);Dg.prototype.T=function(a,c,b){this.s=a;this.u=c;this.Ua=Kc(this.s.e,b);this.Va=Kc(this.u.e,b);this.fd=this.u.Rb()-this.s.Rb()};Dg.prototype.Ic=function(){return new Ag(this)};function Eg(){this.Jb=F(0,0);this.Kb=F(0,0)}Eg.prototype.I=function(){this.Jb.I();this.md=0;this.Kb.I();this.nd=0};Eg.prototype.i=function(a,c,b,d){c===m&&(c=0);d===m&&(d=0);this.Jb.m(a);this.md=c;this.Kb.m(b);this.nd=d};function Fg(a){P.call(this,a);this.cc=F(0,0);this.dc=F(0,0);this.F=F(0,0);this.G=F(0,0);this.ha=new Eg;var c=a.Ud.D,b=a.Vd.D;this.de=this.Bd=this.ce=this.Ad=o;var d=0,e=0;this.Gj=a.Ud.w;this.w=a.Ud.z;c==1?(this.Ad=a.Ud,this.cc.m(this.Ad.F),this.F.m(this.Ad.G),d=Bg(this.Ad)):(this.ce=a.Ud,this.cc.m(this.ce.F),this.F.m(this.ce.G),d=ug(this.ce));this.Hj=a.Vd.w;this.z=a.Vd.z;b==1?(this.Bd=a.Vd,this.dc.m(this.Bd.F),this.G.m(this.Bd.G),e=Bg(this.Bd)):(this.de=a.Vd,this.dc.m(this.de.F),this.G.m(this.de.G),
e=ug(this.de));this.ka=a.ed;this.Yd=d+this.ka*e;this.j=0}y(Fg,P);v=Fg.prototype;v.jc=function(){return Q(this.w,this.F)};v.kc=function(){return Q(this.z,this.G)};
v.Sb=function(a){var c=this.Gj,b=this.Hj,d=this.w,e=this.z,f=0,g=0,h=0,i=0,j=h=0,k=0;this.ha.I();this.Ad?(this.ha.md=-1,k+=d.v):(c=c.e.d,g=this.ce.Zc,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=d.e.d,h=this.F.x-d.c.r.x,i=this.F.y-d.c.r.y,j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Jb.i(-f,-g),this.ha.md=-h,k+=d.k+d.v*h*h);this.Bd?(this.ha.nd=-this.ka,k+=this.ka*this.ka*e.v):(c=b.e.d,g=this.de.Zc,f=c.a.x*g.x+c.b.x*g.y,g=c.a.y*g.x+c.b.y*g.y,c=e.e.d,h=this.G.x-e.c.r.x,i=this.G.y-e.c.r.y,
j=c.a.x*h+c.b.x*i,i=c.a.y*h+c.b.y*i,h=j*g-i*f,this.ha.Kb.i(-this.ka*f,-this.ka*g),this.ha.nd=-this.ka*h,k+=this.ka*this.ka*(e.k+e.v*h*h));this.t=k>0?1/k:0;a.Fd?(d.f.x+=d.k*this.j*this.ha.Jb.x,d.f.y+=d.k*this.j*this.ha.Jb.y,d.o+=d.v*this.j*this.ha.md,e.f.x+=e.k*this.j*this.ha.Kb.x,e.f.y+=e.k*this.j*this.ha.Kb.y,e.o+=e.v*this.j*this.ha.nd):this.j=0};
v.Fb=function(){var a=this.w,c=this.z,b=this.ha,d=a.f,e=a.o,f=c.f,g=c.o;e===m&&(e=0);g===m&&(g=0);b=-this.t*(b.Jb.x*d.x+b.Jb.y*d.y+b.md*e+(b.Kb.x*f.x+b.Kb.y*f.y)+b.nd*g);this.j+=b;a.f.x+=a.k*b*this.ha.Jb.x;a.f.y+=a.k*b*this.ha.Jb.y;a.o+=a.v*b*this.ha.md;c.f.x+=c.k*b*this.ha.Kb.x;c.f.y+=c.k*b*this.ha.Kb.y;c.o+=c.v*b*this.ha.nd};
v.Eb=function(){var a=this.w,c=this.z,b=0,d=0,b=this.Ad?Bg(this.Ad):ug(this.ce),d=this.Bd?Bg(this.Bd):ug(this.de),b=-this.t*(this.Yd-(b+this.ka*d));a.c.h.x+=a.k*b*this.ha.Jb.x;a.c.h.y+=a.k*b*this.ha.Jb.y;a.c.p+=a.v*b*this.ha.md;c.c.h.x+=c.k*b*this.ha.Kb.x;c.c.h.y+=c.k*b*this.ha.Kb.y;c.c.p+=c.v*b*this.ha.nd;R(a);R(c);return n};function Gg(){lg.call(this);this.type=6;this.Vd=this.Ud=o;this.ed=1}y(Gg,lg);Gg.prototype.T=function(a,c,b){this.Ud=a;this.s=a.w;this.Vd=c;this.u=c.w;this.ed=b};Gg.prototype.Ic=function(){return new Fg(this)};var Hg={};
(function(a){var c,b=new E(350,30),d=new E(1E3,300),e,f,g,h;a.yb=function(c,e,f){g=new dg(a,c,b,$.Jc.ff,d,20,e);h=new $(g);c=new E(5,b.y-15);a.wb(c,f);a.Ah(g,new E(5,b.y));eg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Zf(g.Wb,c,r,d,l);f=new vb("game");A(f,new wg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Of,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Nf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.Ah=function(a,
b){var c=b.da();c.y-=10;for(var d=new E(2.5,0.1),e=o,f=0;f<30;f++){c.x+=d.x/2;var g;g=f!=0&&f!=29?Pf(a.q,d,c,n):X(a.q,d,c,n);if(e!=o){var h=new Dg,x=F(V(e.body).x+V(g.body).x,V(e.body).y+V(g.body).y);x.mc(0.5);h.T(e.body,g.body,x);W(a.q.ga,h)}e=g;c.x+=d.x/2;c.x+=0.5}};a.bf=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Hg);da("bridge.init",Hg.yb);var Ig={};
(function(a){var c,b=new E(350,30),d=new E(600,300),e,f,g,h,i=new E(0,454),j=new E(178,326),k=new E(2,124),l=new E(354,54),r=new E(0,58),p=new E(290,54),u=new E(178,326),s=new E(0,0),x=new E(32,84),z=new E(354,54),wa=new E(0,90),la=new E(0,0),xa=new E(2,158),U=new E(158,388),M=new E(190,388),ea=new E(158,356),Lg=new E(190,356),Mg=new E(158,356),Ng=new E(190,356),Og=new E(55,380),Pg=new E(10,396),Qg=new E(466,168),Rg=new E(452,136),Sg=new E(466,104),Tg=new E(300,424),Ug=new E(300,352),Vg=new E(364,
424),Wg=new E(364,384),Xg=new E(332,352),Yg=new E(332,320),Zg=new E(396,352),$g=new E(396,320),ah=new E(364,352),bh=new E(362,264),ch=new E(160,64);a.yb=function(c,e,f){g=new dg(a,c,b,$.Jc.ff,d,20,e);h=new $(g);c=new E(5,b.y-7);a.wb(c,f);a.Bh(g,h,new E(0,b.y),c);f=new E(d.x/20,d.y/20);f=Y(g.q,f,new E(0,0),-1);H(f,"graphics/sky.png");f.display.Pf=1;eg(g)};a.wb=function(a,b){var d=new E(0,0),i=new E(21,47),j=new E(i.x/20,i.y/20);c=h.wb(j,a);Zf(g.Wb,c,j,d,i);f=new vb("game");A(f,new wg(function(){g.paused=
!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Of,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Nf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.Bh=function(b,c,d,e){for(var f=new E(1.6,1.6),g=new E(d.x-f.x/2,d.y-f.y/2),d=["                                                                                                                                                                                                                    ".split(""),"                                                                                                                                                                                                                    ".split(""),
"                                                                                                                                                                                                      o             ".split(""),"                                                                                                                                                                                                     F|             ".split(""),"                                                                                   G                                                                                                                  |             ".split(""),
"                      O                                                         ########   ###O              M           ###    #OO#                                                        ==        |             ".split(""),"                                                                                                                                                                                           ===        |             ".split(""),"                                                                               G                                                                                                          ====        |     $       ".split(""),
"                                                                1                                                                                                                        =====        |    ^^^      ".split(""),"                O   #M#O#                     <>         {}                  #M#              @     #*    O  O  O     #          ##      =  =          ==  =            ###O#           ======        |    R+L      ".split(""),"                                      <>      []         []                                                                             ==  ==        ===  ==                          =======        |   ^r&l^     ".split(""),
"                            <>        []      []         []                                                                            ===  ===      ====  ===     {}              <> ========        |   ++u++     ".split(""),"                     G      []        [] G    []     G G []                                    G G        T                G G G G    ====  ====    =====  ====    []        G G   []=========        =   ++8++     ".split(""),"---------------------------------------------------------------------  ---------------   ----------------------------------------------------------------  ---------------------------------------------------------".split(""),
"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".split("")],g=new E(g.x,g.y-f.y*(d.length-1)),h=0;h<d.length;h++)for(var i=0;i<d[h].length;i++)a.bj(b,c,d[h][i],new E(i,h),g,f,e)};a.bj=function(a,b,c,d,e,f,g){var h=o,D=o;switch(c){case " ":break;case "-":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=i;break;case "=":h=b.$a(f,new E(e.x+d.x*
f.x,e.y+d.y*f.y));D=k;break;case "O":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",r)},$.S.tb);D=l;break;case "@":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));h.xh=8;h.mg=0;$.Td(h,function(){h.mg++;var c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-h.mg/h.xh)*f.y));H(c,"graphics/smbsheet.gif",r);h.mg==h.xh&&(Wf(a.q,h),c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*
f.y)),H(c,"graphics/smbsheet.gif",p))},$.S.tb);D=u;break;case "#":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=j;break;case "1":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Ld|$.S.kd|$.S.ld);$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",xa)},$.S.tb);D=la;break;case "*":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.wg(h,$.S.Ld|$.S.kd|$.S.ld);$.Td(h,function(){var c=b.$a(f,new E(e.x+
d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",x)},$.S.tb);D=s;break;case "M":h=b.Ce(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));$.Td(h,function(){var c=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));H(c,"graphics/smbsheet.gif",p);c=Y(a.q,f,new E(e.x+d.x*f.x,e.y+(d.y-1)*f.y));H(c,"graphics/smbsheet.gif",wa)},$.S.tb);D=z;break;case "[":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=U;break;case "]":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=
M;break;case "<":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=ea;break;case ">":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Lg;break;case "{":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Mg;break;case "}":h=b.$a(f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ng;break;case "T":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Og;break;case "G":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Pg;break;case "|":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Qg;break;case "F":h=Y(a.q,f,new E(e.x+d.x*f.x+f.x/2,e.y+d.y*f.y),1);D=Rg;
break;case "o":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Sg;break;case "+":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Tg;break;case "^":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Ug;break;case "8":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Vg;break;case "u":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Wg;break;case "R":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Yg;break;case "r":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Xg;break;case "L":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=$g;break;
case "l":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=Zg;break;case "&":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y));D=ah;break;case "$":h=Y(a.q,f,new E(e.x+d.x*f.x,e.y+d.y*f.y+f.y/4));D=bh;break;case "x":h=b.$i(f,new E(e.x+d.x*f.x,e.y+d.y*f.y),g);D=ch;break;default:throw"Invalid type: "+c;}h!==o&&"graphics/smbsheet.gif"!==o&&D!==o&&H(h,"graphics/smbsheet.gif",D)};a.bf=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Ig);da("mario.init",Ig.yb);var Jg={};
(function(a){var c,b=new E(3500,100),d=new E(1024,600),e,f,g,h;a.yb=function(c,e,f){g=new dg(a,c,b,$.Jc.ff,d,20,e);h=new $(g);c=new E(5,b.y-7-24);a.wb(c,f);Ig.Bh(g,h,new E(0,b.y),c);f=0;f++;Hg.Ah(g,new E(15,b.y-(3.2+f*24)));a.cj(++f);a.ej(++f);a.dj(f);a.aj();eg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Zf(g.Wb,c,r,d,l);f=new vb("game");A(f,new wg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Of,b?87:38,q,q,q);A(e,c.Ca.ge,
b?65:37,q,q,q);A(e,c.Ca.Nf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.dj=function(a){for(var c=new E(3,0.25),d=0;d<a;d++){for(var e=3.2+d*24,f=6;f<=24;f+=6)h.Qc(c,new E(4,b.y-f-e)),h.Qc(c,new E(10,b.y-f-e));h.Qc(new E(b.x-15,0.25),new E((b.x-15)/2+15,b.y-e-24))}h.Qc(new E(1,1),new E(12,b.y-3.2-3.5),$.S.kd);h.Qc(new E(1,1),new E(15,b.y-3.2-3.5),$.S.ld);h.Qc(new E(1,1),new E(18,b.y-3.2-3.5),$.S.Ld);h.Qc(new E(1,1),new E(21,b.y-3.2-3.5),$.S.tb);a=h.Qc(new E(1,1),new E(24,b.y-3.2-3.5),$.S.tb).body;
rf(a,a.e.position,Math.PI/2)};a.ej=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=-Math.PI/4,d=(0-c)/20;c<=0;c+=d)a.x+=1.5,X(g.q,new E(3,0.3),new E(a.x,a.y-1.5),n,{Za:c},o),a.x+=3.5};a.cj=function(a){for(var a=new E(17,b.y-(3.2+a*24)),c=0;c<1;c++){var d=new Dg,e=new zg;a.x+=5;var f={Za:Math.random()*Math.PI},h=a.y-7.5,u=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Pf(g.q,new E(10,1),new E(a.x,h),n,{Da:f});H(s,"graphics/spinner.png");f.Za+=Math.PI/2;f=Pf(g.q,new E(10,1),new E(a.x,h),n,{Da:f});
H(f,"graphics/spinner.png");d.T(u.body,s.body,V(u.body));W(g.q.ga,d);d.T(u.body,f.body,V(u.body));W(g.q.ga,d);e.T(s.body,f.body,V(s.body));W(g.q.ga,e);a.x+=7}for(c=0;c<1;c++)f={Rc:n},d=new xg,a.x+=2,h=a.y-6,s=Pf(g.q,new E(3,0.2),new E(a.x+0.1,h+2),n,{Da:f}),e=Pf(g.q,new E(3,0.2),new E(a.x+0.1,h-2),n,{Da:f}),u=Pf(g.q,new E(0.2,3),new E(a.x-2,h+0.1),n,{Da:f}),f=Pf(g.q,new E(0.2,3),new E(a.x+2,h+0.1),n,{Da:f}),d.T(s.body,e.body,V(s.body),V(e.body)),W(g.q.ga,d),d.T(s.body,u.body,V(s.body),V(u.body)),
W(g.q.ga,d),d.T(s.body,f.body,V(s.body),V(f.body)),W(g.q.ga,d),d.T(e.body,u.body,V(e.body),V(u.body)),W(g.q.ga,d),d.T(e.body,f.body,V(e.body),V(f.body)),W(g.q.ga,d),d.T(u.body,f.body,V(u.body),V(f.body)),W(g.q.ga,d),a.x+=4;for(c=0;c<3;c++)h=a.y-9,f={Rc:n},d=new mg,a.x+=1.5,u=Pf(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),a.x+=6,f=Pf(g.q,new E(3,0.3),new E(a.x+1.5,h),n,{Da:f}),h=V(u.body).da(),h.y-=3,Y(g.q,new E(0.3,0.3),h),s=V(f.body).da(),s.y-=3,Y(g.q,new E(0.3,0.3),s),d.T(u.body,f.body,h,s,V(u.body),
V(f.body),(c+1)/2),W(g.q.ga,d),a.x+=3.5;for(c=0;c<2;c++){var d=new Gg,x=new Dg;new vg;f={Za:0};a.x+=2;for(var e=o,z=0;z<2;z++)h=a.y-(z+1)*4,u=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f}),s=Pf(g.q,new E(4,0.2),new E(a.x,h),n,{Da:f}),x.T(u.body,s.body,V(u.body)),h=W(g.q.ga,x),e!==o&&(d.T(h,e,z),W(g.q.ga,d)),e=h;h=a.y-12;u=X(g.q,new E(0.01,0.01),new E(a.x,h),q,{Da:f});s=Pf(g.q,new E(0.4,0.2),new E(a.x,h),n,{Da:f});f=new vg;f.T(u.body,s.body,V(u.body),new E(Math.random(),Math.random()));f.tf=n;f.Sh=
-1;f.si=1;h=W(g.q.ga,f);d.T(h,e,0.5);W(g.q.ga,d);a.x+=4}};a.aj=function(){for(var a={type:2,Rc:q},c={Ec:1.25},d=new le(0.25),e=new E(0.5,0.5),f=0;f<5;f++){var h=f*5%(b.x-10),h=new E(h+f%20/20+4.5,15+f%20);g.q.Hb(e,h,n,d,{Da:a,oc:c})}d=new O;hd(d,0.25,0.25);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+5)%20/20+4.5,15+(f+5)%20),a.Za=f%17/17,g.q.Hb(e,h,n,d,{Da:a,oc:c});d=new O;f=[new E(-0.5,-0.5),new E(0.5,-0.5),new E(-0.5,0.5)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+10)%20/20+4.5,15+(f+
10)%20),a.Za=f%22/22,g.q.Hb(e,h,n,d,{Da:a,oc:c});d=new O;f=[new E(-Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,-Math.random()*0.5),new E(Math.random()*0.5,Math.random()*0.5),new E(-Math.random()*0.5,Math.random()*0.5)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,oc:c});d=new O;f=[new E(-0.5,-0.5),new E(0,-0.5),new E(0.5,0),new E(0.5,0.5),new E(0,0.3)];gd(d,f);for(f=0;f<5;f++)h=f*5%(b.x-10),h=new E(h+(f+15)%20/
20+4.5,15+(f+15)%20),a.Za=f%35/35,g.q.Hb(e,h,n,d,{Da:a,oc:c})};a.bf=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Jg);da("test.init",Jg.yb);var Kg={};
(function(a){var c,b=new E(5,10),d=new E(100,200),e,f,g,h;a.yb=function(c,e,f){g=new dg(a,c,b,$.Jc.ff,d,20,e);h=new $(g);c=new E(2,2);a.fj();a.wb(c,f);eg(g)};a.wb=function(a,b){var d=new E(0,0),l=new E(21,47),r=new E(l.x/20,l.y/20);c=h.wb(r,a);Zf(g.Wb,c,r,d,l);f=new vb("game");A(f,new wg(function(){g.paused=!g.paused},"Pause",q),80,q,q,q);e=new vb("player");A(e,c.Ca.Of,b?87:38,q,q,q);A(e,c.Ca.ge,b?65:37,q,q,q);A(e,c.Ca.Nf,b?83:40,q,q,q);A(e,c.Ca.he,b?68:39,q,q,q)};a.fj=function(){new E(3,0.25);h.$a(new E(b.x,
0.5),new E(b.x/2,b.y-0.25));a.Yi(new E(b.x,6),new E(0,b.y-0.25))};a.Yi=function(a,b){X(g.q,new E(0.25,a.y),new E(b.x+0,b.y-a.y/2),n,o,o);X(g.q,new E(0.25,a.y),new E(b.x+a.x-0.125,b.y-a.y/2),n,o,o);for(var c=new le(0.15),d=0,e=0.15;e<a.x-0.15;e+=0.3)for(var f=0;f<a.y/2;f+=0.3){var h=g.q.Hb(new E(0.3,0.3),new E(b.x+e-d++%2*0.15,b.y-f),n,c,{oc:{De:0.1,Ec:0.1,xb:0.1}}),s=Math.random();s<=0.25?H(h,"graphics/ball-red.png"):s<=0.5?H(h,"graphics/ball-green.png"):s<=0.75?H(h,"graphics/ball-yellow.png"):H(h,
"graphics/ball-blue.png")}};a.bf=function(a,b){xb(f,b)};a.We=function(a,b){xb(f,b);xb(e,b)};a.Ve=function(){qc(g.viewport,V(c.body))}})(Kg);da("pit.init",Kg.yb);})();
